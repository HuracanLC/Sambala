!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t,t.document,void 0)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(t,t.document,void 0):e(t,t.document,void 0)}("undefined"!=typeof window?window:this,function(fi,hi,di){"use strict";var o,f,c,a,pi={o:"object",f:"function",a:"array",s:"string",b:"boolean",n:"number",u:"undefined",z:"null"},vi={c:"class",s:"style",i:"id",l:"length",p:"prototype",ti:"tabindex",oH:"offsetHeight",cH:"clientHeight",sH:"scrollHeight",oW:"offsetWidth",cW:"clientWidth",sW:"scrollWidth",hOP:"hasOwnProperty",bCR:"getBoundingClientRect"},mi=(o={},f={},{_cssPrefixes:c=["-webkit-","-moz-","-o-","-ms-"],_jsPrefixes:a=["WebKit","Moz","O","MS"],_cssProperty:function(t){var e=f[t];if(f[vi.hOP](t))return e;for(var n,r,i,o=u(t),a=hi.createElement("div")[vi.s],s=0;s<c.length;s++)for(i=c[s].replace(/-/g,""),n=[t,c[s]+t,i+o,u(i)+o],r=0;r<n[vi.l];r++)if(a[n[r]]!==di){e=n[r];break}return f[t]=e},_cssPropertyValue:function(t,e,n){var r=t+" "+e,i=f[r];if(f[vi.hOP](r))return i;for(var o,a=hi.createElement("div")[vi.s],s=e.split(" "),c=n||"",u=0,l=-1;u<s[vi.l];u++)for(;l<mi._cssPrefixes[vi.l];l++)if(o=l<0?s[u]:mi._cssPrefixes[l]+s[u],a.cssText=t+":"+o+c,a[vi.l]){i=o;break}return f[r]=i},_jsAPI:function(t,e,n){var r=0,i=o[t];if(!o[vi.hOP](t)){for(i=fi[t];r<a[vi.l];r++)i=i||fi[(e?a[r]:a[r].toLowerCase())+u(t)];o[t]=i}return i||n}});function u(t){return t.charAt(0).toUpperCase()+t.slice(1)}var _i={wW:e(t,0,!0),wH:e(t,0),mO:e(mi._jsAPI,0,"MutationObserver",!0),rO:e(mi._jsAPI,0,"ResizeObserver",!0),rAF:e(mi._jsAPI,0,"requestAnimationFrame",!1,function(t){return fi.setTimeout(t,1e3/60)}),cAF:e(mi._jsAPI,0,"cancelAnimationFrame",!1,function(t){return fi.clearTimeout(t)}),now:function(){return Date.now&&Date.now()||(new Date).getTime()},stpP:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},prvD:function(t){t.preventDefault&&t.cancelable?t.preventDefault():t.returnValue=!1},page:function(t){var e=((t=t.originalEvent||t).target||t.srcElement||hi).ownerDocument||hi,n=e.documentElement,e=e.body;if(t.touches===di)return!t.pageX&&t.clientX&&null!=t.clientX?{x:t.clientX+(n&&n.scrollLeft||e&&e.scrollLeft||0)-(n&&n.clientLeft||e&&e.clientLeft||0),y:t.clientY+(n&&n.scrollTop||e&&e.scrollTop||0)-(n&&n.clientTop||e&&e.clientTop||0)}:{x:t.pageX,y:t.pageY};t=t.touches[0];return{x:t.pageX,y:t.pageY}},mBtn:function(t){var e=t.button;return t.which||e===di?t.which:1&e?1:2&e?3:4&e?2:0},inA:function(t,e){for(var n=0;n<e[vi.l];n++)try{if(e[n]===t)return n}catch(t){}return-1},isA:function(t){var e=Array.isArray;return e?e(t):this.type(t)==pi.a},type:function(t){return t===di||null===t?t+"":Object[vi.p].toString.call(t).replace(/^\[object (.+)\]$/,"$1").toLowerCase()},bind:e};function t(t){return t?fi.innerWidth||hi.documentElement[vi.cW]||hi.body[vi.cW]:fi.innerHeight||hi.documentElement[vi.cH]||hi.body[vi.cH]}function e(t,e){if(typeof t!=pi.f)throw"Can't bind function!";function n(){}function r(){return t.apply(this instanceof n?this:e,o.concat(Array[i].slice.call(arguments)))}var i=vi.p,o=Array[i].slice.call(arguments,2);return t[i]&&(n[i]=t[i]),r[i]=new n,r}var l,h,d,p,A,z,E,v,r,yi=Math,bi=fi.jQuery,H=(l={p:yi.PI,c:yi.cos,s:yi.sin,w:yi.pow,t:yi.sqrt,n:yi.asin,a:yi.abs,o:1.70158},{swing:function(t,e,n,r,i){return.5-l.c(t*l.p)/2},linear:function(t,e,n,r,i){return t},easeInQuad:function(t,e,n,r,i){return r*(e/=i)*e+n},easeOutQuad:function(t,e,n,r,i){return-r*(e/=i)*(e-2)+n},easeInOutQuad:function(t,e,n,r,i){return(e/=i/2)<1?r/2*e*e+n:-r/2*(--e*(e-2)-1)+n},easeInCubic:function(t,e,n,r,i){return r*(e/=i)*e*e+n},easeOutCubic:function(t,e,n,r,i){return r*((e=e/i-1)*e*e+1)+n},easeInOutCubic:function(t,e,n,r,i){return(e/=i/2)<1?r/2*e*e*e+n:r/2*((e-=2)*e*e+2)+n},easeInQuart:function(t,e,n,r,i){return r*(e/=i)*e*e*e+n},easeOutQuart:function(t,e,n,r,i){return-r*((e=e/i-1)*e*e*e-1)+n},easeInOutQuart:function(t,e,n,r,i){return(e/=i/2)<1?r/2*e*e*e*e+n:-r/2*((e-=2)*e*e*e-2)+n},easeInQuint:function(t,e,n,r,i){return r*(e/=i)*e*e*e*e+n},easeOutQuint:function(t,e,n,r,i){return r*((e=e/i-1)*e*e*e*e+1)+n},easeInOutQuint:function(t,e,n,r,i){return(e/=i/2)<1?r/2*e*e*e*e*e+n:r/2*((e-=2)*e*e*e*e+2)+n},easeInSine:function(t,e,n,r,i){return-r*l.c(e/i*(l.p/2))+r+n},easeOutSine:function(t,e,n,r,i){return r*l.s(e/i*(l.p/2))+n},easeInOutSine:function(t,e,n,r,i){return-r/2*(l.c(l.p*e/i)-1)+n},easeInExpo:function(t,e,n,r,i){return 0==e?n:r*l.w(2,10*(e/i-1))+n},easeOutExpo:function(t,e,n,r,i){return e==i?n+r:r*(1-l.w(2,-10*e/i))+n},easeInOutExpo:function(t,e,n,r,i){return 0==e?n:e==i?n+r:(e/=i/2)<1?r/2*l.w(2,10*(e-1))+n:r/2*(2-l.w(2,-10*--e))+n},easeInCirc:function(t,e,n,r,i){return-r*(l.t(1-(e/=i)*e)-1)+n},easeOutCirc:function(t,e,n,r,i){return r*l.t(1-(e=e/i-1)*e)+n},easeInOutCirc:function(t,e,n,r,i){return(e/=i/2)<1?-r/2*(l.t(1-e*e)-1)+n:r/2*(l.t(1-(e-=2)*e)+1)+n},easeInElastic:function(t,e,n,r,i){var o=l.o,a=0,s=r;return 0==e?n:1==(e/=i)?n+r:(a=a||.3*i,o=s<l.a(r)?(s=r,a/4):a/(2*l.p)*l.n(r/s),-(s*l.w(2,10*--e)*l.s((e*i-o)*(2*l.p)/a))+n)},easeOutElastic:function(t,e,n,r,i){var o=l.o,a=0,s=r;return 0==e?n:1==(e/=i)?n+r:(a=a||.3*i,o=s<l.a(r)?(s=r,a/4):a/(2*l.p)*l.n(r/s),s*l.w(2,-10*e)*l.s((e*i-o)*(2*l.p)/a)+r+n)},easeInOutElastic:function(t,e,n,r,i){var o=l.o,a=0,s=r;return 0==e?n:2==(e/=i/2)?n+r:(a=a||i*(.3*1.5),o=s<l.a(r)?(s=r,a/4):a/(2*l.p)*l.n(r/s),e<1?s*l.w(2,10*--e)*l.s((e*i-o)*(2*l.p)/a)*-.5+n:s*l.w(2,-10*--e)*l.s((e*i-o)*(2*l.p)/a)*.5+r+n)},easeInBack:function(t,e,n,r,i,o){return r*(e/=i)*e*(((o=o||l.o)+1)*e-o)+n},easeOutBack:function(t,e,n,r,i,o){return r*((e=e/i-1)*e*(((o=o||l.o)+1)*e+o)+1)+n},easeInOutBack:function(t,e,n,r,i,o){return o=o||l.o,(e/=i/2)<1?r/2*(e*e*((1+(o*=1.525))*e-o))+n:r/2*((e-=2)*e*((1+(o*=1.525))*e+o)+2)+n},easeInBounce:function(t,e,n,r,i){return r-this.easeOutBounce(t,i-e,0,r,i)+n},easeOutBounce:function(t,e,n,r,i){var o=7.5625;return(e/=i)<1/2.75?r*(o*e*e)+n:e<2/2.75?r*(o*(e-=1.5/2.75)*e+.75)+n:e<2.5/2.75?r*(o*(e-=2.25/2.75)*e+.9375)+n:r*(o*(e-=2.625/2.75)*e+.984375)+n},easeInOutBounce:function(t,e,n,r,i){return e<i/2?.5*this.easeInBounce(t,2*e,0,r,i)+n:.5*this.easeOutBounce(t,2*e-i,0,r,i)+.5*r+n}}),xi=(h=/[^\x20\t\r\n\f]+/g,d=" ",p="",A="scrollLeft",z="scrollTop",E=[],v=_i.type,r={animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},N[vi.p]={on:function(t,e){var n,r=(t=(t||p).match(h)||[p])[vi.l],i=0;return this.each(function(){n=this;try{if(n.addEventListener)for(;i<r;i++)n.addEventListener(t[i],e);else if(n.detachEvent)for(;i<r;i++)n.attachEvent("on"+t[i],e)}catch(t){}})},off:function(t,e){var n,r=(t=(t||p).match(h)||[p])[vi.l],i=0;return this.each(function(){n=this;try{if(n.removeEventListener)for(;i<r;i++)n.removeEventListener(t[i],e);else if(n.detachEvent)for(;i<r;i++)n.detachEvent("on"+t[i],e)}catch(t){}})},one:function(t,i){return t=(t||p).match(h)||[p],this.each(function(){var r=N(this);N.each(t,function(t,e){var n=function(t){i.call(this,t),r.off(e,n)};r.on(e,n)})})},trigger:function(t){var e,n;return this.each(function(){e=this,hi.createEvent?((n=hi.createEvent("HTMLEvents")).initEvent(t,!0,!1),e.dispatchEvent(n)):e.fireEvent("on"+t)})},append:function(t){return this.each(function(){i(this,"beforeend",t)})},prepend:function(t){return this.each(function(){i(this,"afterbegin",t)})},before:function(t){return this.each(function(){i(this,"beforebegin",t)})},after:function(t){return this.each(function(){i(this,"afterend",t)})},remove:function(){return this.each(function(){var t=this.parentNode;null!=t&&t.removeChild(this)})},unwrap:function(){var t,e,n,r=[];for(this.each(function(){-1===P(n=this.parentNode,r)&&r.push(n)}),t=0;t<r[vi.l];t++){for(e=r[t],n=e.parentNode;e.firstChild;)n.insertBefore(e.firstChild,e);n.removeChild(e)}return this},wrapAll:function(t){for(var e,n=this,r=N(t)[0],i=r,o=n[0].parentNode,t=n[0].previousSibling;0<i.childNodes[vi.l];)i=i.childNodes[0];for(e=0;n[vi.l]-e;i.firstChild===n[0]&&e++)i.appendChild(n[e]);t=t?t.nextSibling:o.firstChild;return o.insertBefore(r,t),this},wrapInner:function(n){return this.each(function(){var t=N(this),e=t.contents();e[vi.l]?e.wrapAll(n):t.append(n)})},wrap:function(t){return this.each(function(){N(this).wrapAll(t)})},css:function(t,e){var n,r,i,o=fi.getComputedStyle;return v(t)==pi.s?e===di?(n=this[0],i=o?o(n,null):n.currentStyle[t],o?null!=i?i.getPropertyValue(t):n[vi.s][t]:i):this.each(function(){b(this,t,e)}):this.each(function(){for(r in t)b(this,r,t[r])})},hasClass:function(t){for(var e,n,r=0,i=d+t+d;e=this[r++];){if((n=e.classList)&&n.contains(t))return!0;if(1===e.nodeType&&-1<(d+_(e.className+p)+d).indexOf(i))return!0}return!1},addClass:function(t){var e,n,r,i,o,a,s,c=0,u=0;if(t)for(e=t.match(h)||[];n=this[c++];)if(s=n.classList,a=a===di?s!==di:a)for(;i=e[u++];)s.add(i);else if(o=n.className+p,r=1===n.nodeType&&d+_(o)+d){for(;i=e[u++];)r.indexOf(d+i+d)<0&&(r+=i+d);o!==(o=_(r))&&(n.className=o)}return this},removeClass:function(t){var e,n,r,i,o,a,s,c=0,u=0;if(t)for(e=t.match(h)||[];n=this[c++];)if(s=n.classList,a=a===di?s!==di:a)for(;i=e[u++];)s.remove(i);else if(o=n.className+p,r=1===n.nodeType&&d+_(o)+d){for(;i=e[u++];)for(;-1<r.indexOf(d+i+d);)r=r.replace(d+i+d,d);o!==(o=_(r))&&(n.className=o)}return this},hide:function(){return this.each(function(){this[vi.s].display="none"})},show:function(){return this.each(function(){this[vi.s].display="block"})},attr:function(t,e){for(var n,r=0;n=this[r++];){if(e===di)return n.getAttribute(t);n.setAttribute(t,e)}return this},removeAttr:function(t){return this.each(function(){this.removeAttribute(t)})},offset:function(){var t=this[0][vi.bCR](),e=fi.pageXOffset||hi.documentElement[A],n=fi.pageYOffset||hi.documentElement[z];return{top:t.top+n,left:t.left+e}},position:function(){var t=this[0];return{top:t.offsetTop,left:t.offsetLeft}},scrollLeft:function(t){for(var e,n=0;e=this[n++];){if(t===di)return e[A];e[A]=t}return this},scrollTop:function(t){for(var e,n=0;e=this[n++];){if(t===di)return e[z];e[z]=t}return this},val:function(t){var e=this[0];return t?(e.value=t,this):e.value},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){return N(this[0<=t?t:this[vi.l]+t])},find:function(e){var n,r=[];return this.each(function(){var t=this.querySelectorAll(e);for(n=0;n<t[vi.l];n++)r.push(t[n])}),N(r)},children:function(t){var e,n,r,i=[];return this.each(function(){for(n=this.children,r=0;r<n[vi.l];r++)e=n[r],(!t||e.matches&&e.matches(t)||y(e,t))&&i.push(e)}),N(i)},parent:function(t){var e,n=[];return this.each(function(){e=this.parentNode,t&&!N(e).is(t)||n.push(e)}),N(n)},is:function(t){for(var e,n=0;n<this[vi.l];n++){if(e=this[n],":visible"===t)return g(e);if(":hidden"===t)return!g(e);if(e.matches&&e.matches(t)||y(e,t))return!0}return!1},contents:function(){var t,e,n=[];return this.each(function(){for(t=this.childNodes,e=0;e<t[vi.l];e++)n.push(t[e])}),N(n)},each:function(t){return n(this,t)},animate:function(t,e,n,r){return this.each(function(){x(this,t,e,n,r)})},stop:function(t,e){return this.each(function(){!function(t,e,n){for(var r,i,o,a=0;a<E[vi.l];a++)if((r=E[a]).el===t){if(0<r.q[vi.l]){if((i=r.q[0]).stop=!0,_i.cAF()(i.frame),r.q.splice(0,1),n)for(o in i.props)I(t,o,i.props[o]);e?r.q=[]:W(r,!1)}break}}(this,t,e)})}},m(N,{extend:m,inArray:P,isEmptyObject:k,isPlainObject:T,each:n}),N);function m(){var t,e,n,r,i,o=arguments[0]||{},a=1,s=arguments[vi.l],c=!1;for(v(o)==pi.b&&(c=o,o=arguments[1]||{},a=2),v(o)!=pi.o&&!v(o)==pi.f&&(o={}),s===a&&(o=N,--a);a<s;a++)if(null!=(r=arguments[a]))for(n in r)i=o[n],o!==(e=r[n])&&(c&&e&&(T(e)||(t=_i.isA(e)))?(i=t?(t=!1,i&&_i.isA(i)?i:[]):i&&T(i)?i:{},o[n]=m(c,i,e)):e!==di&&(o[n]=e));return o}function P(t,e,n){for(var r=n||0;r<e[vi.l];r++)if(e[r]===t)return r;return-1}function L(t){return v(t)==pi.f}function k(t){for(var e in t)return!1;return!0}function T(t){if(!t||v(t)!=pi.o)return!1;var e,n=vi.p,r=Object[n].hasOwnProperty,i=r.call(t,"constructor"),n=t.constructor&&t.constructor[n]&&r.call(t.constructor[n],"isPrototypeOf");if(t.constructor&&!i&&!n)return!1;for(e in t);return v(e)==pi.u||r.call(t,e)}function n(t,e){var n=0;if(s(t))for(;n<t[vi.l]&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t}function s(t){var e=!!t&&[vi.l]in t&&t[vi.l],n=v(t);return!L(n)&&(n==pi.a||0===e||v(e)==pi.n&&0<e&&e-1 in t)}function _(t){return(t.match(h)||[]).join(d)}function y(t,e){for(var n=(t.parentNode||hi).querySelectorAll(e)||[],r=n[vi.l];r--;)if(n[r]==t)return 1}function i(t,e,n){if(_i.isA(n))for(var r=0;r<n[vi.l];r++)i(t,e,n[r]);else v(n)==pi.s?t.insertAdjacentHTML(e,n):t.insertAdjacentElement(e,n.nodeType?n:n[0])}function b(t,e,n){try{t[vi.s][e]!==di&&(t[vi.s][e]=function(t,e){r[t.toLowerCase()]||v(e)!=pi.n||(e+="px");return e}(e,n))}catch(t){}}function W(t,e){!1!==e&&t.q.splice(0,1),0<t.q[vi.l]?(e=t.q[0],x(t.el,e.props,e.duration,e.easing,e.complete,!0)):-1<(t=P(t,E))&&E.splice(t,1)}function I(t,e,n){e===A||e===z?t[e]=n:b(t,e,n)}function x(t,e,n,r,i,o){var a,s,c,u,l=T(n),f={},h={},d=0,p=l?(r=n.easing,n.start,c=n.progress,u=n.step,v=n.specialEasing,i=n.complete,n.duration):n,v=v||{};for(p=p||400,r=r||"swing",o=o||!1;d<E[vi.l];d++)if(E[d].el===t){s=E[d];break}for(a in s||(s={el:t,q:[]},E.push(s)),e)f[a]=a===A||a===z?t[a]:N(t).css(a);for(a in f)f[a]!==e[a]&&e[a]!==di&&(h[a]=e[a]);if(k(h))o&&W(s);else{var m,_,y,b,x,g,w,O,S,o=o?0:P(C,s.q),C={props:h,duration:l?n:p,easing:r,complete:i};if(-1===o&&(o=s.q[vi.l],s.q.push(C)),0===o)if(0<p)w=_i.now(),O=function(){for(a in m=_i.now(),S=m-w,_=C.stop||p<=S,y=1-(yi.max(0,w+p-m)/p||0),h)b=parseFloat(f[a]),x=parseFloat(h[a]),g=(x-b)*H[v[a]||r](y,y*p,0,1,p)+b,I(t,a,g),L(u)&&u(g,{elem:t,prop:a,start:b,now:g,end:x,pos:y,options:{easing:r,speacialEasing:v,duration:p,complete:i,step:u},startTime:w});L(c)&&c({},y,yi.max(0,p-S)),_?(W(s),L(i)&&i()):C.frame=_i.rAF()(O)},C.frame=_i.rAF()(O);else{for(a in h)I(t,a,h[a]);W(s)}}}function g(t){return!!(t[vi.oW]||t[vi.oH]||t.getClientRects()[vi.l])}function N(t){if(0===arguments[vi.l])return this;var e,n,r=new N,i=t,o=0;if(v(t)==pi.s)for(i=[],e="<"===t.charAt(0)?((n=hi.createElement("div")).innerHTML=t,n.children):hi.querySelectorAll(t);o<e[vi.l];o++)i.push(e[o]);if(i){for(v(i)==pi.s||s(i)&&i!==fi&&i!==i.self||(i=[i]),o=0;o<i[vi.l];o++)r[o]=i[o];r[vi.l]=i[vi.l]}return r}var w,O,gi,S,C,R,j,D,q,F,B,M,U,X,V,Y,wi,Oi=(w=[],O="__overlayScrollbars__",function(t,e){var n=arguments[vi.l];if(n<1)return w;if(e)t[O]=e,w.push(t);else{e=_i.inA(t,w);if(-1<e){if(!(1<n))return w[e][O];delete t[O],w.splice(e,1)}}}),Q=(Y=[],R=_i.type,j=[pi.b,pi.n,pi.s,pi.a,pi.o,pi.f,pi.z],D=[pi.z,pi.s],q=pi.n,F=[pi.z,pi.b],B=[!0,pi.b],M=[!1,pi.b],U=[null,[pi.z,pi.f]],X="v-h:visible-hidden v-s:visible-scroll s:scroll h:hidden",V={className:["os-theme-dark",D],resize:["none","n:none b:both h:horizontal v:vertical"],sizeAutoCapable:B,clipAlways:B,normalizeRTL:B,paddingAbsolute:M,autoUpdate:[null,F],autoUpdateInterval:[33,q],updateOnLoad:[["img"],[pi.s,pi.a,pi.z]],nativeScrollbarsOverlaid:{showNativeScrollbars:M,initialize:B},overflowBehavior:{x:["scroll",X],y:["scroll",X]},scrollbars:{visibility:["auto","v:visible h:hidden a:auto"],autoHide:["never","n:never s:scroll l:leave m:move"],autoHideDelay:[800,q],dragScrolling:B,clickScrolling:M,touchSupport:B,snapHandle:M},textarea:{dynWidth:M,dynHeight:M,inheritedAttrs:[["style","class"],[pi.s,pi.a,pi.z]]},callbacks:{onInitialized:U,onInitializationWithdrawn:U,onDestroyed:U,onScrollStart:U,onScroll:U,onScrollStop:U,onOverflowChanged:U,onOverflowAmountChanged:U,onDirectionChanged:U,onContentSizeChanged:U,onHostSizeChanged:U,onUpdated:U}},wi={_defaults:(U=function(i){var o=function(t){var e,n,r;for(e in t)t[vi.hOP](e)&&(n=t[e],(r=R(n))==pi.a?t[e]=n[i?1:0]:r==pi.o&&(t[e]=o(n)));return t};return o(xi.extend(!0,{},V))})(),_template:U(!0),_validate:function(t,e,z,n){var r={},i={},t=xi.extend(!0,{},t),E=xi.inArray,H=xi.isEmptyObject,P=function(t,e,n,r,i,o){for(var a in e)if(e[vi.hOP](a)&&t[vi.hOP](a)){var s,c,u,l,f,h,d,p,v,m=!1,_=e[a],y=R(_)==pi.o,b=_i.isA(_)?_:[_],x=n[a],g=t[a],w=R(g),O=o?o+".":"",S='The option "'+O+a+"\" wasn't set, because",C=[],A=[],x=x===di?{}:x;if(y&&w==pi.o)r[a]={},i[a]={},P(g,_,x,r[a],i[a],O+a),xi.each([t,r,i],function(t,e){H(e[a])&&delete e[a]});else if(!y){for(d=0;d<b[vi.l];d++)if(h=b[d],l=R(h)==pi.s&&-1===E(h,j))for(C.push(pi.s),c=h.split(" "),A=A.concat(c),p=0;p<c[vi.l];p++){for(f=(u=c[p].split(":"))[0],v=0;v<u[vi.l];v++)if(g===u[v]){m=!0;break}if(m)break}else if(C.push(h),w===h){m=!0;break}m?((s=g!==x)&&(r[a]=g),(l?E(x,u)<0:s)&&(i[a]=l?f:g)):z&&console.warn(S+" it doesn't accept the type [ "+w.toUpperCase()+' ] with the value of "'+g+'".\r\nAccepted types are: [ '+C.join(", ").toUpperCase()+" ]."+(0<A[length]?"\r\nValid strings are: [ "+A.join(", ").split(":").join(", ")+" ].":"")),delete t[a]}}};return P(t,e,n||{},r,i),!H(t)&&z&&console.warn("The following options are discarded due to invalidity:\r\n"+fi.JSON.stringify(t,null,2)),{_default:r,_prepared:i}}},(gi=fi.OverlayScrollbars=function(t,n,r){if(0===arguments[vi.l])return this;var i,e,o=[],a=xi.isPlainObject(n);return t?(t=t[vi.l]!=di?t:[t[0]||t],$(),0<t[vi.l]&&(a?xi.each(t,function(t,e){(i=e)!==di&&o.push(J(i,n,r,S,C))}):xi.each(t,function(t,e){i=Oi(e),("!"===n&&gi.valid(i)||_i.type(n)==pi.f&&n(e,i)||n===di)&&o.push(i)}),e=1===o[vi.l]?o[0]:o),e):a||!n?e:o}).globals=function(){$();var t=xi.extend(!0,{},S);return delete t.msie,t},gi.defaultOptions=function(t){$();var e=S.defaultOptions;if(t===di)return xi.extend(!0,{},e);S.defaultOptions=xi.extend(!0,{},e,wi._validate(t,wi._template,!0,e)._default)},gi.valid=function(t){return t instanceof gi&&!t.getState().destroyed},gi.extension=function(t,e,n){var r=_i.type(t)==pi.s,i=arguments[vi.l],o=0;if(i<1||!r)return xi.extend(!0,{length:Y[vi.l]},Y);if(r)if(_i.type(e)==pi.f)Y.push({name:t,extensionFactory:e,defaultOptions:n});else for(;o<Y[vi.l];o++)if(Y[o].name===t){if(!(1<i))return xi.extend(!0,{},Y[o]);Y.splice(o,1)}},gi);function $(){S=S||new K(wi._defaults),C=C||new G(S)}function K(t){var s=this,i="overflow",c=xi("body"),u=xi('<div id="os-dummy-scrollbar-size"><div></div></div>'),o=u[0],r=xi(u.children("div").eq(0));c.append(u),u.hide().show();var e,n,a,l,f,h,d,p,v,m,_,y,b,x=S(o),g={x:0===x.x,y:0===x.y},w=(n=fi.navigator.userAgent,l="substring",f=n[a="indexOf"]("MSIE "),h=n[a]("Trident/"),d=n[a]("Edge/"),p=n[a]("rv:"),v=parseInt,0<f?e=v(n[l](f+5,n[a](".",f)),10):0<h?e=v(n[l](p+3,n[a](".",p)),10):0<d&&(e=v(n[l](d+5,n[a](".",d)),10)),e);function O(){var t=fi.screen.deviceXDPI||0,e=fi.screen.logicalXDPI||1;return fi.devicePixelRatio||t/e}function S(t){return{x:t[vi.oH]-t[vi.cH],y:t[vi.oW]-t[vi.cW]}}xi.extend(s,{defaultOptions:t,msie:w,autoUpdateLoop:!1,autoUpdateRecommended:!_i.mO(),nativeScrollbarSize:x,nativeScrollbarIsOverlaid:g,nativeScrollbarStyling:function(){var t=!1;u.addClass("os-viewport-native-scrollbars-invisible");try{t="none"===u.css("scrollbar-width")&&(9<w||!w)||"none"===fi.getComputedStyle(o,"::-webkit-scrollbar").getPropertyValue("display")}catch(t){}return t}(),overlayScrollbarDummySize:{x:30,y:30},cssCalc:mi._cssPropertyValue("width","calc","(1px)")||null,restrictedMeasuring:function(){u.css(i,"hidden");var t=o[vi.sW],e=o[vi.sH];u.css(i,"visible");var n=o[vi.sW],r=o[vi.sH];return t-n!=0||e-r!=0}(),rtlScrollBehavior:function(){u.css({"overflow-y":"hidden","overflow-x":"scroll",direction:"rtl"}).scrollLeft(0);var t=u.offset(),e=r.offset();u.scrollLeft(-999);var n=r.offset();return{i:t.left===e.left,n:e.left!==n.left}}(),supportTransform:!!mi._cssProperty("transform"),supportTransition:!!mi._cssProperty("transition"),supportPassiveEvents:function(){var t=!1;try{fi.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){t=!0}}))}catch(t){}return t}(),supportResizeObserver:!!_i.rO(),supportMutationObserver:!!_i.mO()}),u.removeAttr(vi.s).remove(),g.x&&g.y||(m=yi.abs,_=_i.wW(),y=_i.wH(),b=O(),xi(fi).on("resize",function(){var t,e,n,r,i,o,a;0<Oi().length&&(t=_i.wW(),a=(e=_i.wH())-y,0==(i=t-_)&&0==a||(o=yi.round(t/(_/100)),n=yi.round(e/(y/100)),r=m(i),i=m(a),a=m(o),o=m(n),n=O(),r=2<r&&2<i,i=!function(t,e){t=m(t),e=m(e);return!(t===e||t+1===e||t-1===e)}(a,o),a=n!==b&&0<b,o=s.nativeScrollbarSize,r&&i&&a&&(c.append(u),a=s.nativeScrollbarSize=S(u[0]),u.remove(),o.x===a.x&&o.y===a.y||xi.each(Oi(),function(){Oi(this)&&Oi(this).update("zoom")})),_=t,y=e,b=n))}))}function G(e){var c,n=xi.inArray,u=_i.now,l="autoUpdate",f=vi.l,h=[],d=[],p=!1,v=33,m=u(),_=function(){if(0<h[f]&&p){c=_i.rAF()(function(){_()});var t,e,n,r,i=u(),o=i-m;if(v<o){m=i-o%v;for(var a=33,s=0;s<h[f];s++)(t=h[s])!==di&&(e=(r=t.options())[l],n=yi.max(1,r.autoUpdateInterval),r=u(),(!0===e||null===e)&&r-d[s]>n&&(t.update("auto"),d[s]=new Date(r+=n)),a=yi.max(1,yi.min(a,n)));v=a}}else v=33};this.add=function(t){-1===n(t,h)&&(h.push(t),d.push(u()),0<h[f]&&!p&&(p=!0,e.autoUpdateLoop=p,_()))},this.remove=function(t){t=n(t,h);-1<t&&(d.splice(t,1),h.splice(t,1),0===h[f]&&p&&(p=!1,e.autoUpdateLoop=p,c!==di&&(_i.cAF()(c),c=-1)))}}function J(n,t,e,zt,Et){var X=_i.type,V=xi.inArray,p=xi.each,Ht=new gi,r=xi[vi.p];if($r(n)){if(Oi(n)){var i=Oi(n);return i.options(t),i}var Pt,Lt,kt,Tt,N,Wt,It,Nt,y,Y,v,O,m,Rt,jt,Dt,qt,_,b,Ft,Bt,Mt,Ut,Xt,Vt,Yt,Qt,$t,Kt,o,Gt,Jt,Zt,x,R,g,j,te,ee,ne,re,ie,oe,ae,se,ce,ue,le,a,s,c,u,l,f,w,S,fe,he,de,C,pe,ve,me,_e,ye,be,xe,ge,we,Oe,Se,Ce,Ae,ze,Ee,A,He,Pe,Le,ke,Te,We,Ie,Ne,h,d,Re,je,De,qe,Fe,Be,Me,Ue,Xe,Ve,Ye,Qe,$e,Ke,z,E,H,P,Ge,Je,L,k,Ze,tn,en,nn,rn,D,q,on,an,sn,cn,un={},Q={},$={},ln={},fn={},T="-hidden",hn="margin-",dn="padding-",pn="border-",vn="top",mn="right",_n="bottom",yn="left",bn="min-",xn="max-",gn="width",wn="height",On="float",Sn="",Cn="auto",K="sync",An="scroll",zn="100%",G="x",J="y",W=".",En=" ",I="scrollbar",F="-horizontal",B="-vertical",Hn=An+"Left",Pn=An+"Top",M="mousedown touchstart",U="mouseup touchend touchcancel",Z="mousemove touchmove",tt="mouseenter",et="mouseleave",nt="keydown",rt="keyup",it="selectstart",ot="transitionend webkitTransitionEnd oTransitionEnd",at="__overlayScrollbarsRO__",i="os-",st="os-html",ct="os-host",ut=ct+"-foreign",lt=ct+"-textarea",ft=ct+"-"+I+F+T,ht=ct+"-"+I+B+T,dt=ct+"-transition",Ln=ct+"-rtl",kn=ct+"-resize-disabled",Tn=ct+"-scrolling",Wn=ct+"-overflow",In=(Wn=ct+"-overflow")+"-x",Nn=Wn+"-y",pt="os-textarea",vt=pt+"-cover",mt="os-padding",_t="os-viewport",Rn=_t+"-native-scrollbars-invisible",yt=_t+"-native-scrollbars-overlaid",bt="os-content",jn="os-content-arrange",Dn="os-content-glue",qn="os-size-auto-observer",xt="os-resize-observer",gt="os-resize-observer-item",wt=gt+"-final",Ot="os-text-inherit",St=i+I,Ct=St+"-track",At=Ct+"-off",Fn=St+"-handle",Bn=Fn+"-off",Mn=St+"-unusable",Un=St+"-"+Cn+T,Xn=St+"-corner",Vn=Xn+"-resize",Yn=Vn+"-both",Qn=Vn+F,$n=Vn+B,Kn=St+F,Gn=St+B,Jn="os-dragging",Zn="os-theme-none",tr=[Rn,yt,At,Bn,Mn,Un,Vn,Yn,Qn,$n,Jn].join(En),er=[],nr=[vi.ti],rr={},ir={},or=42,ar="load",sr=[],cr={},ur=["wrap","cols","rows"],lr=[vi.i,vi.c,vi.s,"open"].concat(nr),fr=[];return Ht.sleep=function(){Kt=!0},Ht.update=function(t){var e,n,r,i;if(!jt)return X(t)==pi.s?t===Cn?(n=function(){if(!Kt&&!Ge){var n,r,i,o=[],t=[{_elem:ee,_attrs:lr.concat(":visible")},{_elem:Dt?te:di,_attrs:ur}];return p(t,function(t,e){(n=e._elem)&&p(e._attrs,function(t,e){r=":"===e.charAt(0)?n.is(e):n.attr(e),i=cr[e],ri(r,i)&&o.push(e),cr[e]=r})}),Er(o),0<o[vi.l]}}(),e=function(){if(Kt)return!1;var t,e=Jr(),n=Dt&&we&&!Xe?te.val().length:0,r=!Ge&&we&&!Dt,i={};return r&&(t=ae.css(On),i[On]=$t?mn:yn,i[gn]=Cn,ae.css(i)),n={w:e[vi.sW]+n,h:e[vi.sH]+n},r&&(i[On]=t,i[gn]=zn,ae.css(i)),t=Cr(),i=ri(n,h),h=n,i||t}(),(n=n||e)&&Pr({_contentSizeChanged:e,_changedOptions:Rt?di:Gt})):t===K?Ge?(r=H(z.takeRecords()),i=P(E.takeRecords())):r=Ht.update(Cn):"zoom"===t&&Pr({_hostSizeChanged:!0,_contentSizeChanged:!0}):(t=Kt||t,Kt=!1,Ht.update(K)&&!t||Pr({_force:t})),Lr(),n||r||i},Ht.options=function(t,e){var n,r={};if(xi.isEmptyObject(t)||!xi.isPlainObject(t)){if(X(t)!=pi.s)return o;if(!(1<arguments.length))return ei(o,t);!function(t,e,n){for(var r=e.split(W),i=r.length,o=0,a={},e=a;o<i;o++)a=a[r[o]]=o+1<i?{}:n;xi.extend(t,e,!0)}(r,t,e),n=kr(r)}else n=kr(t);xi.isEmptyObject(n)||Pr({_changedOptions:n})},Ht.destroy=function(){if(!jt){for(var t in Et.remove(Ht),_r(),pr(re),pr(ne),rr)Ht.removeExt(t);for(;0<fr[vi.l];)fr.pop()();Sr(!0),ce&&ci(ce),se&&ci(se),Bt&&ci(ne),Ir(!0),Mr(!0),Tr(!0);for(var e=0;e<sr[vi.l];e++)xi(sr[e]).off(ar,Or);sr=di,Kt=jt=!0,Oi(n,0),Ur("onDestroyed")}},Ht.scroll=function(t,e,n,r){if(0===arguments.length||t===di){var i=Q,o=$,a=Be&&$t&&kt.i,s=Be&&$t&&kt.n,c=i._currentScroll,u=i._currentScrollRatio,l=i._maxScroll,u=a?1-u:u,c=a?l-c:c;return{position:{x:c*=s?-1:1,y:o._currentScroll},ratio:{x:u,y:o._currentScrollRatio},max:{x:l*=s?-1:1,y:o._maxScroll},handleOffset:{x:i._handleOffset,y:o._handleOffset},handleLength:{x:i._handleLength,y:o._handleLength},handleLengthRatio:{x:i._handleLengthRatio,y:o._handleLengthRatio},trackLength:{x:i._trackLength,y:o._trackLength},snappedHandleOffset:{x:i._snappedHandleOffset,y:o._snappedHandleOffset},isRTL:$t,isRTLNormalized:Be}}Ht.update(K);function f(){d&&qr(!0),p&&qr(!1)}var h,d,p,v,m,_,y,b,x,g,w,O=Be,S=[G,yn,"l"],C=[J,vn,"t"],A=["+=","-=","*=","/="],z=X(e)==pi.o,E=z?e.complete:r,H={},P={},L="begin",k="nearest",T="never",W="ifneeded",I=vi.l,N=[G,J,"xy","yx"],R=[L,"end","center",k],j=["always",T,W],D=t[vi.hOP]("el"),a=D?t.el:t,c=!!(a instanceof xi||bi)&&a instanceof bi,u=!c&&$r(a),s=X(E)!=pi.f?di:function(){f(),E()};function q(t,e){for(h=0;h<e[I];h++)if(t===e[h])return 1}function F(t,e){var n=t?S:C;if(e=X(e)==pi.s||X(e)==pi.n?[e,e]:e,_i.isA(e))return t?e[0]:e[1];if(X(e)==pi.o)for(h=0;h<n[I];h++)if(n[h]in e)return e[n[h]]}function B(t,e){var n,r,i=X(e)==pi.s,o=t?Q:$,a=o._currentScroll,s=o._maxScroll,c=$t&&t,u=c&&kt.n&&!O,o="replace",t=eval,l=i?(2<e[I]&&(i=e.substr(0,2),-1<V(i,A)&&(n=i)),e=(e=n?e.substr(2):e)[o](/min/g,0)[o](/</g,0)[o](/max/g,(u?"-":Sn)+zn)[o](/>/g,(u?"-":Sn)+zn)[o](/px/g,Sn)[o](/%/g," * "+s*(c&&kt.n?-1:1)/100)[o](/vw/g," * "+ln.w)[o](/vh/g," * "+ln.h),Kr(isNaN(e)?Kr(t(e),!0).toFixed():e)):e;if(l!==di&&!isNaN(l)&&X(l)==pi.n){var t=O&&c,f=a*(t&&kt.n?-1:1),e=t&&kt.i,t=t&&kt.n,f=e?s-f:f;switch(n){case"+=":r=f+l;break;case"-=":r=f-l;break;case"*=":r=f*l;break;case"/=":r=f/l;break;default:r=l}r=e?s-r:r,r*=t?-1:1,r=c&&kt.n?yi.min(0,yi.max(s,r)):yi.max(0,yi.min(s,r))}return r===a?di:r}function M(t,e,n,r){var i,o,a=[n,n],s=X(t);if(s==e)t=[t,t];else if(s==pi.a){if(2<(i=t[I])||i<1)t=a;else for(1===i&&(t[1]=n),h=0;h<i;h++)if(o=t[h],X(o)!=e||!q(o,r)){t=a;break}}else t=s==pi.o?[t[G]||n,t[J]||n]:a;return{x:t[0],y:t[1]}}function U(t){var e,n,r=[],i=[vn,mn,_n,yn];for(h=0;h<t[I]&&h!==i[I];h++)e=t[h],(n=X(e))==pi.b?r.push(e?Kr(w.css(hn+i[h])):0):r.push(n==pi.n?e:0);return r}(c||u)&&(l=D?t.margin:0,i=D?t.axis:0,o=D?t.scroll:0,r=D?t.block:0,u=[0,0,0,0],D=X(l),0<(w=c?a:xi(a))[I]&&(l=D==pi.n||D==pi.b?U([l,l,l,l]):D==pi.a?2===(a=l[I])?U([l[0],l[1],l[0],l[1]]):4<=a?U(l):u:D==pi.o?U([l[vn],l[mn],l[_n],l[yn]]):u,i=q(i,N)?i:"xy",v=M(o,pi.s,"always",j),m=M(r,pi.s,L,R),r=l,R=Q._currentScroll,l=$._currentScroll,_=ie.offset(),y=w.offset(),b={x:v.x==T||i==J,y:v.y==T||i==G},y[vn]-=r[0],y[yn]-=r[3],x={x:yi.round(y[yn]-_[yn]+R),y:yi.round(y[vn]-_[vn]+l)},$t&&(kt.n||kt.i||(x.x=yi.round(_[yn]-y[yn]+R)),kt.n&&O&&(x.x*=-1),kt.i&&O&&(x.x=yi.round(_[yn]-y[yn]+(Q._maxScroll-R)))),m.x==L&&m.y==L&&v.x!=W&&v.y!=W&&!$t||(R=w[0],R=Y?R[vi.bCR]():{width:R[vi.oW],height:R[vi.oH]},g={w:R[gn]+r[3]+r[1],h:R[wn]+r[0]+r[2]},(r=function(t){var e=Br(t),n=e._w_h,r=e._left_top,i=e._x_y,o=m[i]==(t&&$t?L:"end"),a="center"==m[i],s=m[i]==k,c=v[i]==T,u=v[i]==W,l=ln[n],f=_[r],h=g[n],d=y[r],e=a?2:1,n=d+h/2,r=f+l/2,f=h<=l&&f<=d&&d+h<=f+l;c?b[i]=!0:b[i]||((s||u)&&(b[i]=u&&f,o=h<l?r<n:n<r),x[i]-=o||a?(l/e-h/e)*(t&&$t&&O?-1:1):0)})(!0),r(!1)),b.y&&delete x.y,b.x&&delete x.x,t=x)),H[Hn]=B(!0,F(!0,t)),H[Pn]=B(!1,F(!1,t)),d=H[Hn]!==di,p=H[Pn]!==di,(d||p)&&(0<e||z)?z?(e.complete=s,oe.animate(H,e)):(s={duration:e,complete:s},_i.isA(n)||xi.isPlainObject(n)?(P[Hn]=n[0]||n.x,P[Pn]=n[1]||n.y,s.specialEasing=P):s.easing=n,oe.animate(H,s)):(d&&oe[Hn](H[Hn]),p&&oe[Pn](H[Pn]),f())},Ht.scrollStop=function(t,e,n){return oe.stop(t,e,n),Ht},Ht.getElements=function(t){var e={target:fe,host:he,padding:pe,viewport:ve,content:me,scrollbarHorizontal:{scrollbar:a[0],track:s[0],handle:c[0]},scrollbarVertical:{scrollbar:u[0],track:l[0],handle:f[0]},scrollbarCorner:le[0]};return X(t)==pi.s?ei(e,t):e},Ht.getState=function(t){function e(t){if(!xi.isPlainObject(t))return t;var n=ii({},t),t=function(t,e){n[vi.hOP](t)&&(n[e]=n[t],delete n[t])};return t("w",gn),t("h",wn),delete n.c,n}var n={destroyed:!!e(jt),sleeping:!!e(Kt),autoUpdate:e(!Ge),widthAuto:e(we),heightAuto:e(Oe),padding:e(Ce),overflowAmount:e(Te),hideOverflow:e(ge),hasOverflow:e(xe),contentScrollSize:e(ye),viewportSize:e(ln),hostSize:e(_e),documentMixed:e(_)};return X(t)==pi.s?ei(n,t):n},Ht.ext=function(t){var e,n="added removed on contract".split(" "),r=0;if(X(t)==pi.s){if(rr[vi.hOP](t))for(e=ii({},rr[t]);r<n.length;r++)delete e[n[r]]}else for(r in e={},rr)e[r]=ii({},Ht.ext(r));return e},Ht.addExt=function(t,e){var n,r=gi.extension(t),i=!0;if(r)return rr[vi.hOP](t)?Ht.ext(t):(n=r.extensionFactory.call(Ht,ii({},r.defaultOptions),xi,_i))&&(r=n.contract,X(r)==pi.f&&(r=r(fi),i=X(r)==pi.b?r:i),i)?(n=(rr[t]=n).added,X(n)==pi.f&&n(e),Ht.ext(t)):void 0;console.warn('A extension with the name "'+t+"\" isn't registered.")},Ht.removeExt=function(t){var e=rr[t];return!!e&&(delete rr[t],e=e.removed,X(e)==pi.f&&e(),!0)},gi.valid(li(n,t,e))&&Oi(n,Ht),Ht}function hr(t,e,n,r,i){var o=_i.isA(e)&&_i.isA(n),a=r?"removeEventListener":"addEventListener",s=r?"off":"on",c=!o&&e.split(En),u=0,l=xi.isPlainObject(i),f=v&&(l?i._passive:i)||!1,l=l&&(i._capture||!1),h=v?{passive:f,capture:l}:l;if(o)for(;u<e[vi.l];u++)hr(t,e[u],n[u],r,i);else for(;u<c[vi.l];u++)v?t[0][a](c[u],n,h):t[s](c[u],n)}function dr(t,e,n,r){hr(t,e,n,!1,r),fr.push(_i.bind(hr,0,t,e,n,!0,r))}function pr(t,e){var i,n,r,o,a,s,c,u,l,f,h,d,p,v,m,_,y,b,x,g,w;t&&(d=_i.rO(),w="animationstart mozAnimationStart webkitAnimationStart MSAnimationStart",_="childNodes",i=3333333,n=function(){t[Pn](i)[Hn]($t?kt.n?-i:kt.i?0:i:i),e()},e?(O?((g=t.addClass("observed").append(Zr(xt)).contents()[0])[at]=new d(n)).observe(g):9<N||!Tt?(t.prepend(Zr(xt,Zr({c:gt,dir:"ltr"},Zr(gt,Zr(wt))+Zr(gt,Zr({c:wt,style:"width: 200%; height: 200%"}))))),r=t[0][_][0][_][0],o=xi(r[_][1]),a=xi(r[_][0]),b=xi(a[0][_][0]),s=r[vi.oW],c=r[vi.oH],d=zt.nativeScrollbarSize,p=function(){a[Hn](i)[Pn](i),o[Hn](i)[Pn](i)},v=function(){l=0,u&&(s=f,c=h,n())},m=function(t){return f=r[vi.oW],h=r[vi.oH],u=f!=s||h!=c,t&&u&&!l?(_i.cAF()(l),l=_i.rAF()(v)):t||v(),p(),t&&(_i.prvD(t),_i.stpP(t)),!1},y={},Xr(_={},Sn,[-2*(d.y+1),-2*d.x,-2*d.y,-2*(d.x+1)]),xi(r).css(_),a.on(An,m),o.on(An,m),t.on(w,function(){m(!1)}),y[gn]=i,y[wn]=i,b.css(y),p()):(b=S.attachEvent,y=N!==di,b?(t.prepend(Zr(xt)),ui(t,W+xt)[0].attachEvent("onresize",n)):((b=S.createElement(pi.o)).setAttribute(vi.ti,"-1"),b.setAttribute(vi.c,xt),b.onload=function(){var t=this.contentDocument.defaultView;t.addEventListener("resize",n),t.document.documentElement.style.display="none"},b.type="text/html",y&&t.prepend(b),b.data="about:blank",y||t.prepend(b),t.on(w,n))),t[0]===C&&((x=function(){var t=ee.css("direction"),e={},n=0,r=!1;return t!==A&&(n="ltr"===t?(e[yn]=0,e[mn]=Cn,i):(e[yn]=Cn,e[mn]=0,kt.n?-i:kt.i?0:i),re.children().eq(0).css(e),re[Hn](n)[Pn](i),A=t,r=!0),r})(),dr(t,An,function(t){return x()&&Pr(),_i.prvD(t),_i.stpP(t),!1}))):O?(w=(g=t.contents()[0])[at])&&(w.disconnect(),delete g[at]):ci(t.children(W+xt).eq(0)))}function vr(){var t,n,o,a,s,c,u,l,r,i,f,h;m&&(t=_i.mO(),n=_i.now(),P=function(t){var e=!1;return Rt&&!Kt&&(p(t,function(){return!(e=function(t){var e=t.attributeName,n=t.target,r=t.type,i="closest";if(n===me)return null===e;if("attributes"===r&&(e===vi.c||e===vi.s)&&!Dt){if(e===vi.c&&xi(n).hasClass(ct))return Ar(t.oldValue,n.className);if(typeof n[i]!=pi.f)return!0;if(null!==n[i](W+xt)||null!==n[i](W+St)||null!==n[i](W+Xn))return!1}return!0}(this))}),e&&(i=_i.now(),f=Oe||we,h=function(){jt||(n=i,Dt&&Hr(),f?Pr():Ht.update(Cn))},clearTimeout(r),11<i-n||!f?h():r=setTimeout(h,11))),e},z=new t(H=function(t){var e,n=!1,r=!1,i=[];return Rt&&!Kt&&(p(t,function(){o=(e=this).target,a=e.attributeName,s=a===vi.c,c=e.oldValue,u=o.className,b&&s&&!r&&-1<c.indexOf(ut)&&u.indexOf(ut)<0&&(l=Yr(!0),he.className=u.split(En).concat(c.split(En).filter(function(t){return t.match(l)})).join(En),n=r=!0),n=n||(s?Ar(c,u):a!==vi.s||c!==o[vi.s].cssText),i.push(a)}),Er(i),n&&Ht.update(r||Cn)),n}),E=new t(P))}function mr(){m&&!Ge&&(z.observe(he,{attributes:!0,attributeOldValue:!0,attributeFilter:lr}),E.observe(Dt?fe:me,{attributes:!0,attributeOldValue:!0,subtree:!Dt,childList:!Dt,characterData:!Dt,attributeFilter:Dt?ur:lr}),Ge=!0)}function _r(){m&&Ge&&(z.disconnect(),E.disconnect(),Ge=!1)}function yr(){var t,e;Kt||(e=ri(t={w:C[vi.sW],h:C[vi.sH]},d),d=t,e&&Pr({_hostSizeChanged:!0}))}function br(){rn&&jr(!0)}function xr(){rn&&!j.hasClass(Jn)&&jr(!1)}function gr(){nn&&(jr(!0),clearTimeout(k),k=setTimeout(function(){nn&&!jt&&jr(!1)},100))}function wr(t){return _i.prvD(t),!1}function Or(t){var n=xi(t.target);ni(function(t,e){n.is(e)&&Pr({_contentSizeChanged:!0})})}function Sr(t){t||Sr(!0),hr(ee,Z.split(En)[0],gr,!nn||t,!0),hr(ee,[tt,et],[br,xr],!rn||t,!0),Rt||t||ee.one("mouseover",br)}function Cr(){var t={};return qt&&se&&(t.w=Kr(se.css(bn+gn)),t.h=Kr(se.css(bn+wn)),t.c=ri(t,Ke),t.f=!0),!!(Ke=t).c}function Ar(t,e){var n,r,e=typeof e==pi.s?e.split(En):[],i=function(t,e){var n,r,i=[],o=[];for(n=0;n<t.length;n++)i[t[n]]=!0;for(n=0;n<e.length;n++)i[e[n]]?delete i[e[n]]:i[e[n]]=!0;for(r in i)o.push(r);return o}(typeof t==pi.s?t.split(En):[],e),e=V(Zn,i);if(-1<e&&i.splice(e,1),0<i[vi.l])for(r=Yr(!0,!0),n=0;n<i.length;n++)if(!i[n].match(r))return!0;return!1}function zr(t){if(!Rt)return 1;function e(t,e){for(var n=0;n<t[vi.l];n++)if(t[n]===e)return!0;return!1}var n="flex-grow",r="flex-shrink",i="flex-basis",o=[gn,bn+gn,xn+gn,hn+yn,hn+mn,yn,mn,"font-weight","word-spacing",n,r,i],a=[dn+yn,dn+mn,pn+yn+gn,pn+mn+gn],s=[dn+vn,dn+_n,pn+vn+gn,pn+_n+gn],c="s"===ke.x||"v-s"===ke.x,u=!1;return("s"===ke.y||"v-s"===ke.y)&&((u=e([wn,bn+wn,xn+wn,hn+vn,hn+_n,vn,_n,"line-height",n,r,i],t))||Ft||(u=e(s,t))),c&&!u&&((u=e(o,t))||Ft||(u=e(a,t))),u}function Er(t){p(t=t||nr,function(t,e){var n;-1<_i.inA(e,nr)&&(n=te.attr(e),X(n)==pi.s?oe.attr(e,n):oe.removeAttr(e))})}function Hr(){if(!Kt){var t,e,n=!Xe,r=ln.w,i=ln.h,o={},a=we||n;return o[bn+gn]=Sn,o[bn+wn]=Sn,o[gn]=Cn,te.css(o),t=fe[vi.oW],e=a?yi.max(t,fe[vi.sW]-1):1,o[gn]=we?Cn:zn,o[bn+gn]=zn,o[wn]=Cn,te.css(o),n=fe[vi.oH],a=yi.max(n,fe[vi.sH]-1),o[gn]=e,o[wn]=a,ue.css(o),o[bn+gn]=r,o[bn+wn]=i,te.css(o),{_originalWidth:t,_originalHeight:n,_dynamicWidth:e,_dynamicHeight:a}}}function Pr(t){clearTimeout(Zt),ir._hostSizeChanged|=(t=t||{})._hostSizeChanged,ir._contentSizeChanged|=t._contentSizeChanged,ir._force|=t._force;var e=_i.now(),n=!!ir._hostSizeChanged,r=!!ir._contentSizeChanged,i=!!ir._force,o=t._changedOptions,a=0<or&&Rt&&!jt&&!i&&!o&&e-Jt<or&&!Oe&&!we;if(a&&(Zt=setTimeout(Pr,or)),!(jt||a||Kt&&!o||Rt&&!i&&(q=ee.is(":hidden"))||"inline"===ee.css("display"))){Jt=e,ir={},!Wt||Pt.x&&Pt.y?Nt=ii({},zt.nativeScrollbarSize):(Nt.x=0,Nt.y=0),fn={x:3*(Nt.x+(Pt.x?0:3)),y:3*(Nt.y+(Pt.y?0:3))};var s,o=o||{},c=function(){return ri.apply(this,[].slice.call(arguments).concat([i]))},u={x:oe[Hn](),y:oe[Pn]()},l=Gt.scrollbars,f=Gt.textarea,h=l.visibility,d=c(h,Re),p=l.autoHide,v=c(p,je),m=l.clickScrolling,_=c(m,De),y=l.dragScrolling,b=c(y,qe),x=Gt.className,g=c(x,Me),w=Gt.resize,O=c(w,Fe)&&!qt,S=Gt.paddingAbsolute,C=c(S,He),A=Gt.clipAlways,z=c(A,Pe),E=Gt.sizeAutoCapable&&!qt,H=c(E,Ne),P=Gt.nativeScrollbarsOverlaid.showNativeScrollbars,L=c(P,We),k=Gt.autoUpdate,T=c(k,Ie),W=Gt.overflowBehavior,I=c(W,ke,i),N=f.dynWidth,R=c($e,N),j=f.dynHeight,D=c(Qe,j);tn="n"===p,en="s"===p,nn="m"===p,rn="l"===p,Ze=l.autoHideDelay,Ue=Me,on="n"===w,an="b"===w,sn="h"===w,cn="v"===w,Be=Gt.normalizeRTL,P=P&&Pt.x&&Pt.y,Re=h,je=p,De=m,qe=y,Me=x,Fe=w,He=S,Pe=A,Ne=E,We=P,Ie=k,ke=ii({},W),$e=N,Qe=j,xe=xe||{x:!1,y:!1},g&&(ai(ee,Ue+En+Zn),oi(ee,x!==di&&null!==x&&0<x.length?x:Zn)),T&&(!0===k||null===k&&Tt?(_r(),Et.add(Ht)):(Et.remove(Ht),mr())),H&&(E?(ce?ce.show():(ce=xi(Zr(Dn)),ie.before(ce)),Bt?ne.show():(ne=xi(Zr(qn)),de=ne[0],ce.before(ne),s={w:-1,h:-1},pr(ne,function(){var t={w:de[vi.oW],h:de[vi.oH]};ri(t,s)&&(Rt&&Oe&&0<t.h||we&&0<t.w||Rt&&!Oe&&0===t.h||!we&&0===t.w)&&Pr(),s=t}),Bt=!0,null!==It&&ne.css(wn,It+"(100% + 1px)"))):(Bt&&ne.hide(),ce&&ce.hide())),i&&(re.find("*").trigger(An),Bt&&ne.find("*").trigger(An));var q=q===di?ee.is(":hidden"):q,F=!!Dt&&"off"!==te.attr("wrap"),B=c(F,Xe),t=ee.css("direction"),a=c(t,Ee),e=ee.css("box-sizing"),f=c(e,Se),l=Vr(dn);try{G=Bt?de[vi.bCR]():null}catch(t){return}Ft="border-box"===e;var M=($t="rtl"===t)?yn:mn,p=$t?mn:yn,w=!1,g=!(!Bt||"none"===ee.css(On))&&(0===yi.round(G.right-G.left)&&(!!S||0<he[vi.cW]-Mt));E&&!g&&(Y=he[vi.oW],V=ce.css(gn),ce.css(gn,Cn),Q=he[vi.oW],ce.css(gn,V),(w=Y!==Q)||(ce.css(gn,Y+1),Q=he[vi.oW],ce.css(gn,V),w=Y!==Q));var U=(g||w)&&E&&!q,x=c(U,we),T=!U&&we,X=!(!Bt||!E||q)&&0===yi.round(G.bottom-G.top),k=c(X,Oe),V=!X&&Oe,Y=Vr(pn,"-"+gn,!(U&&Ft||!Ft),!(X&&Ft||!Ft)),Q=Vr(hn),$={},K={},g=function(){return{w:he[vi.cW],h:he[vi.cH]}},w=function(){return{w:pe[vi.oW]+yi.max(0,me[vi.cW]-me[vi.sW]),h:pe[vi.oH]+yi.max(0,me[vi.cH]-me[vi.sH])}},q=Mt=l.l+l.r,G=Ut=l.t+l.b;q*=S?1:0,G*=S?1:0,l.c=c(l,Ce),Xt=Y.l+Y.r,Vt=Y.t+Y.b,Y.c=c(Y,Ae),Yt=Q.l+Q.r,Qt=Q.t+Q.b,Q.c=c(Q,ze),Xe=F,Ee=t,Se=e,we=U,Oe=X,Ce=l,Ae=Y,ze=Q,a&&Bt&&ne.css(On,p),(l.c||a||C||x||k||f||H)&&(bt={},At={},Ct=[l.t,l.r,l.b,l.l],Xr(K,hn,[-l.t,-l.r,-l.b,-l.l]),S?(Xr(bt,Sn,Ct),Xr(Dt?At:$,dn)):(Xr(bt,Sn),Xr(Dt?At:$,dn,Ct)),ie.css(bt),te.css(At)),ln=w();var J,Z,tt,et,nt,rt,it,ot,at,st,ct,ut,lt,ft,ht,dt,pt,vt,mt,_t,yt,bt,xt,gt,wt,Ot,St,Ct=!!Dt&&Hr(),At=Dt&&c(Ct,Ye),j=Dt&&Ct?{w:N?Ct._dynamicWidth:Ct._originalWidth,h:j?Ct._dynamicHeight:Ct._originalHeight}:{};Ye=Ct,X&&(k||C||f||l.c||Y.c)?$[wn]=Cn:(k||C)&&($[wn]=zn),U&&(x||C||f||l.c||Y.c||a)?($[gn]=Cn,K[xn+gn]=zn):(x||C)&&($[gn]=zn,$[On]=Sn,K[xn+gn]=Sn),U?(K[gn]=Cn,$[gn]=mi._cssPropertyValue(gn,"max-content intrinsic")||Cn,$[On]=p):K[gn]=Sn,K[wn]=X?j.h||me[vi.cH]:Sn,E&&ce.css(K),ae.css($),$={},K={},(n||r||At||a||f||C||x||U||k||X||L||I||z||O||d||v||b||_||R||D||B)&&(At=(J="overflow")+"-x",R=J+"-y",Wt||(vt={},Z=xe.y&&ge.ys&&!P?Pt.y?oe.css(M):-Nt.y:0,tt=xe.x&&ge.xs&&!P?Pt.x?oe.css(_n):-Nt.x:0,Xr(vt,Sn),oe.css(vt)),D=Jr(),et={w:j.w||D[vi.cW],h:j.h||D[vi.cH]},B=D[vi.sW],j=D[vi.sH],Wt||(vt[_n]=V?Sn:tt,vt[M]=T?Sn:Z,oe.css(vt)),ln=w(),vt=g(),nt={w:vt.w-Yt-Xt-(Ft?0:Mt),h:vt.h-Qt-Vt-(Ft?0:Ut)},(G={w:yi.max((U?et.w:B)+q,nt.w),h:yi.max((X?et.h:j)+G,nt.h)}).c=c(G,Le),Le=G,E&&((G.c||X||U)&&(K[gn]=G.w,K[wn]=G.h,Dt||(et={w:D[vi.cW],h:D[vi.cH]})),rt={},(G=function(t){var e=Br(t),n=e._w_h,r=e._width_height,i=t?U:X,o=t?Xt:Vt,a=t?Mt:Ut,e=t?Yt:Qt,a=ln[n]-o-e-(Ft?0:a);i||(K[r]=nt[n]-1),!(i&&et[n]<a)||t&&Dt&&F||(Dt&&(rt[r]=Kr(ue.css(r))-1),--K[r]),0<et[n]&&(K[r]=yi.max(1,K[r]))})(!0),G(!1),Dt&&ue.css(rt),ce.css(K)),U&&($[gn]=zn),!U||Ft||Ge||($[On]="none"),ae.css($),$={},(it={w:D[vi.sW],h:D[vi.sH]}).c=r=c(it,ye),ye=it,ln=w(),n=c(vt=g(),_e),_e=vt,ot=Dt&&(0===ln.w||0===ln.h),at=Te,st={},ct={},ut={},lt={},ft={},ht={},dt={},pt=pe[vi.bCR](),(vt=function(t){var e=Br(t),n=Br(!t)._x_y,r=e._x_y,i=e._w_h,t=e._width_height,e=An+e._Left_Top+"Max",t=pt[t]?yi.abs(pt[t]-ln[i]):0,e=at&&0<at[r]&&0===ve[e];st[r]="v-s"===W[r],ct[r]="v-h"===W[r],ut[r]="s"===W[r],lt[r]=yi.max(0,yi.round(100*(it[i]-ln[i]))/100),lt[r]*=ot||e&&0<t&&t<1?0:1,ft[r]=0<lt[r],ht[r]=st[r]||ct[r]?ft[n]&&!st[n]&&!ct[n]:ft[r],ht[r+"s"]=!!ht[r]&&(ut[r]||st[r]),dt[r]=ft[r]&&ht[r+"s"]})(!0),vt(!1),lt.c=c(lt,Te),Te=lt,ft.c=c(ft,xe),xe=ft,ht.c=c(ht,ge),ge=ht,(Pt.x||Pt.y)&&(vt={},mt={},_t=i,(ft.x||ft.y)&&(mt.w=Pt.y&&ft.y?it.w+Lt.y:Sn,mt.h=Pt.x&&ft.x?it.h+Lt.x:Sn,_t=c(mt,be),be=mt),(ft.c||ht.c||it.c||a||x||k||U||X||L)&&($[hn+p]=$[pn+p]=Sn,c=function(t){var e=Br(t),n=Br(!t),r=e._x_y,i=t?_n:M,e=t?X:U;Pt[r]&&ft[r]&&ht[r+"s"]?($[hn+i]=!e||P?Sn:Lt[r],$[pn+i]=t&&e||P?Sn:Lt[r]+"px solid transparent"):(mt[n._w_h]=$[hn+i]=$[pn+i]=Sn,_t=!0)},Wt?si(oe,Rn,!P):(c(!0),c(!1))),P&&(mt.w=mt.h=Sn,_t=!0),_t&&!Wt&&(vt[gn]=ht.y?mt.w:Sn,vt[wn]=ht.x?mt.h:Sn,se||(se=xi(Zr(jn)),oe.prepend(se)),se.css(vt)),ae.css($)),yt={},bt={},(n||ft.c||ht.c||it.c||I||f||L||a||z||k)&&(yt[p]=Sn,(z=function(t){var e=Br(t),n=Br(!t),r=e._x_y,e=e._X_Y,i=t?_n:M,t=function(){yt[i]=Sn,un[n._w_h]=0};ft[r]&&ht[r+"s"]?(yt[J+e]=An,P||Wt?t():(yt[i]=-(Pt[r]?Lt:Nt)[r],un[n._w_h]=Pt[r]?Lt[n._x_y]:0)):(yt[J+e]=Sn,t())})(!0),z(!1),!Wt&&(ln.h<fn.x||ln.w<fn.y)&&(ft.x&&ht.x&&!Pt.x||ft.y&&ht.y&&!Pt.y)?(yt[dn+vn]=fn.x,yt[hn+vn]=-fn.x,yt[dn+p]=fn.y,yt[hn+p]=-fn.y):yt[dn+vn]=yt[hn+vn]=yt[dn+p]=yt[hn+p]=Sn,yt[dn+M]=yt[hn+M]=Sn,ft.x&&ht.x||ft.y&&ht.y||ot?Dt&&ot&&(bt[At]=bt[R]="hidden"):(!A||ct.x||st.x||ct.y||st.y)&&(Dt&&(bt[At]=bt[R]=Sn),yt[At]=yt[R]="visible"),ie.css(bt),oe.css(yt),yt={},!(ft.c||f||x||k)||Pt.x&&Pt.y||((xt=me[vi.s]).webkitTransform="scale(1)",xt.display="run-in",me[vi.oH],xt.display=Sn,xt.webkitTransform=Sn)),$={},(a||x||k)&&($t&&U?(gt=ae.css(On),wt=yi.round(ae.css(On,Sn).css(yn,Sn).position().left),ae.css(On,gt),wt!==yi.round(ae.position().left)&&($[yn]=wt)):$[yn]=Sn),ae.css($),Dt&&r&&((St=function(){var t=fe.selectionStart;if(t!==di){var e,n,r=te.val(),i=r[vi.l],o=r.split("\n"),a=o[vi.l],s=r.substr(0,t).split("\n"),c=0,u=0,r=s[vi.l],s=s[s[vi.l]-1][vi.l];for(n=0;n<o[vi.l];n++)e=o[n][vi.l],u<e&&(c=n+1,u=e);return{_cursorRow:r,_cursorColumn:s,_rows:a,_columns:u,_widestRow:c,_cursorPosition:t,_cursorMax:i}}}())&&(At=Ve===di||St._rows!==Ve._rows,R=St._cursorRow,bt=St._cursorColumn,xt=St._widestRow,Ot=St._rows,gt=St._columns,wt=St._cursorPosition,wt=St._cursorMax<=wt&&Je,Ot={x:F||bt!==gt||R!==xt?-1:Te.x,y:(F?wt||At&&at&&u.y===at.y:(wt||At)&&R===Ot)?Te.y:-1},u.x=-1<Ot.x?$t&&Be&&kt.i?0:Ot.x:u.x,u.y=(-1<Ot.y?Ot:u).y),Ve=St),$t&&kt.i&&Pt.y&&ft.x&&Be&&(u.x+=un.w||0),U&&ee[Hn](0),X&&ee[Pn](0),oe[Hn](u.x)[Pn](u.y),Ot="v"===h,St="h"===h,u="a"===h,h=function(t,e){e=e===di?t:e,Rr(!0,t,dt.x),Rr(!1,e,dt.y)},si(ee,Wn,ht.x||ht.y),si(ee,In,ht.x),si(ee,Nn,ht.y),a&&!qt&&si(ee,Ln,$t),qt&&oi(ee,kn),O&&(si(ee,kn,on),si(le,Vn,!on),si(le,Yn,an),si(le,Qn,sn),si(le,$n,cn)),(d||I||ht.c||ft.c||L)&&(P?L&&(ai(ee,Tn),P&&h(!1)):u?h(dt.x,dt.y):Ot?h(!0):St&&h(!1)),(v||L)&&(Sr(!rn&&!nn),jr(tn,!tn)),(n||lt.c||k||x||O||f||C||L||a)&&(Dr(!0),qr(!0),Dr(!1),qr(!1)),_&&Fr(!0,m),b&&Fr(!1,y),Ur("onDirectionChanged",{isRTL:$t,dir:t},a),Ur("onHostSizeChanged",{width:_e.w,height:_e.h},n),Ur("onContentSizeChanged",{width:ye.w,height:ye.h},r),Ur("onOverflowChanged",{x:ft.x,y:ft.y,xScrollable:ht.xs,yScrollable:ht.ys,clipped:ht.x||ht.y},ft.c||ht.c),Ur("onOverflowAmountChanged",{x:lt.x,y:lt.y},lt.c)),qt&&Ke&&(xe.c||Ke.c)&&(Ke.f||Cr(),Pt.y&&xe.x&&ae.css(bn+gn,Ke.w+Lt.y),Pt.x&&xe.y&&ae.css(bn+wn,Ke.h+Lt.x),Ke.c=!1),Rt&&o.updateOnLoad&&Lr(),Ur("onUpdated",{forced:i})}}function Lr(){Dt||ni(function(t,e){ae.find(e).each(function(t,e){_i.inA(e,sr)<0&&(sr.push(e),xi(e).off(ar,Or).on(ar,Or))})})}function kr(t){t=wi._validate(t,wi._template,!0,o);return o=ii({},o,t._default),Gt=ii({},Gt,t._prepared),t._prepared}function Tr(r){function t(){var n=r?te:ee;p(a,function(t,e){X(e)==pi.s&&(t==vi.c?n.addClass(e):n.attr(t,e))})}var e="parent",n=pt+En+Ot,i=Dt?En+Ot:Sn,o=Gt.textarea.inheritedAttrs,a={},s=[ct,ut,lt,kn,Ln,ft,ht,dt,Tn,Wn,In,Nn,Zn,pt,Ot,Me].join(En),c={};ee=ee||(Dt?b?te[e]()[e]()[e]()[e]():xi(Zr(lt)):te),ae=ae||ti(bt+i),oe=oe||ti(_t+i),ie=ie||ti(mt+i),re=re||ti("os-resize-observer-host"),ue=ue||(Dt?ti(vt):di),b&&oi(ee,ut),r&&ai(ee,s),o=X(o)==pi.s?o.split(En):o,_i.isA(o)&&Dt&&p(o,function(t,e){X(e)==pi.s&&(a[e]=(r?ee:te).attr(e))}),r?(b&&Rt?(re.children().remove(),p([ie,oe,ae,ue],function(t,e){e&&ai(e.removeAttr(vi.s),tr)}),oi(ee,Dt?lt:ct)):(ci(re),ae.contents().unwrap().unwrap().unwrap(),Dt&&(te.unwrap(),ci(ee),ci(ue),t())),Dt&&te.removeAttr(vi.s),qt&&ai(g,st)):(Dt&&(Gt.sizeAutoCapable||(c[gn]=te.css(gn),c[wn]=te.css(wn)),b||te.addClass(Ot).wrap(ee),ee=te[e]().css(c)),b||(oi(te,Dt?n:ct),ee.wrapInner(ae).wrapInner(oe).wrapInner(ie).prepend(re),ae=ui(ee,W+bt),oe=ui(ee,W+_t),ie=ui(ee,W+mt),Dt&&(ae.prepend(ue),t())),Wt&&oi(oe,Rn),Pt.x&&Pt.y&&oi(oe,yt),qt&&oi(g,st),C=re[0],he=ee[0],pe=ie[0],ve=oe[0],me=ae[0],Er())}function Wr(){var e,n,r=[112,113,114,115,116,117,118,119,120,121,123,33,34,37,38,39,40,16,17,18,19,20,144],i=[],t="focus";function o(t){Hr(),Ht.update(Cn),t&&Tt&&clearInterval(e)}Dt?(9<N||!Tt?dr(te,"input",o):dr(te,[nt,rt],[function(t){t=t.keyCode,V(t,r)<0&&(i[vi.l]||(o(),e=setInterval(o,1e3/60)),V(t,i)<0&&i.push(t))},function(t){var e=t.keyCode,t=V(e,i);V(e,r)<0&&(-1<t&&i.splice(t,1),i[vi.l]||o(!0))}]),dr(te,[An,"drop",t,t+"out"],[function(t){return te[Hn](kt.i&&Be?9999999:0),te[Pn](0),_i.prvD(t),_i.stpP(t),!1},function(t){setTimeout(function(){jt||o()},50)},function(){Je=!0,oi(ee,t)},function(){Je=!1,i=[],ai(ee,t),o(!0)}])):dr(ae,ot,function(t){!0!==Ie&&zr((t=t.originalEvent||t).propertyName)&&Ht.update(Cn)}),dr(oe,An,function(t){Kt||(n!==di?clearTimeout(n):((en||nn)&&jr(!0),Gr()||oi(ee,Tn),Ur("onScrollStart",t)),q||(qr(!0),qr(!1)),Ur("onScroll",t),n=setTimeout(function(){jt||(clearTimeout(n),n=di,(en||nn)&&jr(!1),Gr()||ai(ee,Tn),Ur("onScrollStop",t))},175))},!0)}function Ir(r){function i(t){var e=ti(St+En+(t?Kn:Gn),!0),n=ti(Ct,e),t=ti(Fn,e);return b||r||(e.append(n),n.append(t)),{_scrollbar:e,_track:n,_handle:t}}var t,e;function n(t){var e=Br(t),n=e._scrollbar,r=e._track,e=e._handle;b&&Rt?p([n,r,e],function(t,e){ai(e.removeAttr(vi.s),tr)}):ci(n||i(t)._scrollbar)}r?(n(!0),n()):(t=i(!0),e=i(),a=t._scrollbar,s=t._track,c=t._handle,u=e._scrollbar,l=e._track,f=e._handle,b||(ie.after(u),ie.after(a)))}function Nr(O){var S,r,C,A,n=Br(O),z=n._info,e=w.top!==w,E=n._x_y,i=n._X_Y,H=An+n._Left_Top,o="active",a="snapHandle",s="click",P=1,c=[16,17];function u(t){return N&&e?t["screen"+i]:_i.page(t)[E]}function l(t){return Gt.scrollbars[t]}function f(){P=.5}function h(){P=1}function d(t){_i.stpP(t)}function L(t){-1<V(t.keyCode,c)&&f()}function k(t){-1<V(t.keyCode,c)&&h()}function T(t){var e=(t.originalEvent||t).touches!==di;return!(Kt||jt||Gr()||!qe||e&&!l("touchSupport"))&&(1===_i.mBtn(t)||e)}function p(t){var e,n;T(t)?(e=z._trackLength,n=z._handleLength,n=z._maxScroll*((u(t)-C)*A/(e-n)),n=isFinite(n)?n:0,$t&&O&&!kt.i&&(n*=-1),oe[H](yi.round(r+n)),q&&qr(O,r+n),v||_i.prvD(t)):W(t)}function W(t){var e;t=t||t.originalEvent,hr(R,[Z,U,nt,rt,it],[p,W,L,k,wr],!0),_i.rAF()(function(){hr(R,s,d,!0,{_capture:!0})}),q&&qr(O,!0),q=!1,ai(j,Jn),ai(n._handle,o),ai(n._track,o),ai(n._scrollbar,o),A=1,h(),S!==(C=r=di)&&(Ht.scrollStop(),clearTimeout(S),S=di),t&&(e=he[vi.bCR](),t.clientX>=e.left&&t.clientX<=e.right&&t.clientY>=e.top&&t.clientY<=e.bottom||xr(),(en||nn)&&jr(!1))}function I(t){r=oe[H](),r=isNaN(r)?0:r,($t&&O&&!kt.n||!$t)&&(r=r<0?0:r),A=Qr()[E],C=u(t),q=!l(a),oi(j,Jn),oi(n._handle,o),oi(n._scrollbar,o),hr(R,[Z,U,it],[p,W,wr]),_i.rAF()(function(){hr(R,s,d,!1,{_capture:!0})}),!N&&_||_i.prvD(t),_i.stpP(t)}dr(n._handle,M,function(t){T(t)&&I(t)}),dr(n._track,[M,tt,et],[function(t){var h,d,p,v,e,m,_,y,b,x,g,w;T(t)&&(e=n._info._handleLength/Math.round(yi.min(1,ln[n._w_h]/ye[n._w_h])*n._info._trackLength),h=yi.round(ln[n._w_h]*e),d=270*e,p=400*e,v=n._track.offset()[n._left_top],e=t.ctrlKey,m=t.shiftKey,_=m&&e,y=!0,x=function(t){q&&qr(O,t)},g=function(){x(),I(t)},w=function(){var t,e,n,r,i,o,a,s,c,u,l,f;jt||(t=(C-v)*A,e=z._handleOffset,l=z._trackLength,n=z._handleLength,r=z._maxScroll,i=z._currentScroll,o=d*P,a=y?yi.max(p,o):o,f=r*((t-n/2)/(l-n)),c=(s=$t&&O&&(!kt.i&&!kt.n||Be))?e<t:t<e,u={},l={easing:"linear",step:function(t){q&&(oe[H](t),qr(O,t))}},f=isFinite(f)?f:0,f=$t&&O&&!kt.i?r-f:f,m?(oe[H](f),_?(f=oe[H](),oe[H](i),f=s&&kt.i?r-f:f,f=s&&kt.n?-f:f,u[E]=f,Ht.scroll(u,ii(l,{duration:130,complete:g}))):g()):(b=y?c:b,(s?b?t<=e+n:e<=t:b?e<=t:t<=e+n)?(clearTimeout(S),Ht.scrollStop(),S=di,x(!0)):(S=setTimeout(w,a),u[E]=(b?"-=":"+=")+h,Ht.scroll(u,ii(l,{duration:o}))),y=!1))},e&&f(),A=Qr()[E],C=_i.page(t)[E],q=!l(a),oi(j,Jn),oi(n._track,o),oi(n._scrollbar,o),hr(R,[U,nt,rt,it],[W,L,k,wr]),w(),_i.prvD(t),_i.stpP(t))},function(t){D=!0,(en||nn)&&jr(!0)},function(t){D=!1,(en||nn)&&jr(!1)}]),dr(n._scrollbar,M,function(t){_i.stpP(t)}),y&&dr(n._scrollbar,ot,function(t){t.target===n._scrollbar[0]&&(Dr(O),qr(O))})}function Rr(t,e,n){var r=t?a:u;si(ee,t?ft:ht,!e),si(r,Mn,!n)}function jr(t,e){var n;clearTimeout(L),t?(ai(a,Un),ai(u,Un)):(t=function(){D||jt||(!(n=c.hasClass("active")||f.hasClass("active"))&&(en||nn||rn)&&oi(a,Un),!n&&(en||nn||rn)&&oi(u,Un))},0<Ze&&!0!==e?L=setTimeout(t,Ze):t())}function Dr(t){var e={},n=Br(t),r=n._info,t=yi.min(1,ln[n._w_h]/ye[n._w_h]);e[n._width_height]=yi.floor(100*t*1e6)/1e6+"%",Gr()||n._handle.css(e),r._handleLength=n._handle[0]["offset"+n._Width_Height],r._handleLengthRatio=t}function qr(t,e){function n(t){return isNaN(t/m)?0:yi.max(0,yi.min(1,t/m))}var r=X(e)==pi.b,i=$t&&t,o=Br(t),a=o._info,s="translate(",c=mi._cssProperty("transform"),u=mi._cssProperty("transition"),l=t?oe[Hn]():oe[Pn](),f=e===di||r?l:e,h=a._handleLength,d=o._track[0]["offset"+o._Width_Height],p=d-h,v={},m=(ve[An+o._Width_Height]-ve["client"+o._Width_Height])*(kt.n&&i?-1:1),_=function(t){t*=p,t=isNaN(t)?0:t;return t=i&&!kt.i?d-h-t:t,t=yi.max(0,t)},e=n(l),f=_(n(f)),_=_(e);a._maxScroll=m,a._currentScroll=l,a._currentScrollRatio=e,Y?(e=i?-(d-h-f):f,v[c]=t?s+e+"px, 0)":s+"0, "+e+"px)",y&&(v[u]=r&&1<yi.abs(f-a._handleOffset)?function(t){var e=mi._cssProperty("transition"),n=t.css(e);if(n)return n;for(var r,i,o,n="\\s*(([^,(]+(\\(.+?\\))?)+)[\\s,]*",a=new RegExp(n),s=new RegExp("^("+n+")+$"),c="property duration timing-function delay".split(" "),u=[],l=0;l<c[vi.l];l++)for(i=function(t){if(r=[],!t.match(s))return t;for(;t.match(a);)r.push(RegExp.$1),t=t.replace(a,Sn);return r}(t.css(e+"-"+c[l])),o=0;o<i[vi.l];o++)u[o]=(u[o]?u[o]+En:Sn)+i[o];return u.join(", ")}(o._handle)+", "+(c+En+250)+"ms":Sn)):v[o._left_top]=f,Gr()||(o._handle.css(v),Y&&y&&r&&o._handle.one(ot,function(){jt||o._handle.css(u,Sn)})),a._handleOffset=f,a._snappedHandleOffset=_,a._trackLength=d}function Fr(t,e){var n=e?"removeClass":"addClass",r=t?l:f,e=t?At:Bn;(t?s:c)[n](e),r[n](e)}function Br(t){return{_width_height:t?gn:wn,_Width_Height:t?"Width":"Height",_left_top:t?yn:vn,_Left_Top:t?"Left":"Top",_x_y:t?G:J,_X_Y:t?"X":"Y",_w_h:t?"w":"h",_l_t:t?"l":"t",_track:t?s:l,_handle:t?c:f,_scrollbar:t?a:u,_info:t?Q:$}}function Mr(t){le=le||ti(Xn,!0),t?b&&Rt?ai(le.removeAttr(vi.s),tr):ci(le):b||ee.append(le)}function Ur(t,e,n){var r,i;!1!==n&&(Rt?(n=Gt.callbacks[t],"on"===(r=t).substr(0,2)&&(r=r.substr(2,1).toLowerCase()+r.substr(3)),X(n)==pi.f&&n.call(Ht,e),p(rr,function(){X((i=this).on)==pi.f&&i.on(r,e)})):jt||er.push({n:t,a:e}))}function Xr(t,e,n){t[(e=e||Sn)+vn]=(n=n||[Sn,Sn,Sn,Sn])[0],t[e+mn]=n[1],t[e+_n]=n[2],t[e+yn]=n[3]}function Vr(t,e,n,r){return e=e||Sn,t=t||Sn,{t:r?0:Kr(ee.css(t+vn+e)),r:n?0:Kr(ee.css(t+mn+e)),b:r?0:Kr(ee.css(t+_n+e)),l:n?0:Kr(ee.css(t+yn+e))}}function Yr(t,e){function n(t,e){if(o="",e&&typeof t==pi.s)for(i=t.split(En),r=0;r<i[vi.l];r++)o+="|"+i[r]+"$";return o}var r,i,o;return new RegExp("(^"+ct+"([-_].+|)$)"+n(Me,t)+n(Ue,e),"g")}function Qr(){var t=pe[vi.bCR]();return{x:Y&&1/(yi.round(t.width)/pe[vi.oW])||1,y:Y&&1/(yi.round(t.height)/pe[vi.oH])||1}}function $r(t){var e="ownerDocument",n="HTMLElement",e=t&&t[e]&&t[e].parentWindow||fi;return typeof e[n]==pi.o?t instanceof e[n]:t&&typeof t==pi.o&&null!==t&&1===t.nodeType&&typeof t.nodeName==pi.s}function Kr(t,e){t=e?parseFloat(t):parseInt(t,10);return isNaN(t)?0:t}function Gr(){return We&&Pt.x&&Pt.y}function Jr(){return Dt?ue[0]:me}function Zr(n,t){return"<div "+(n?X(n)==pi.s?'class="'+n+'"':function(){var t,e=Sn;if(xi.isPlainObject(n))for(t in n)e+=("c"===t?"class":t)+'="'+n[t]+'" ';return e}():Sn)+">"+(t||Sn)+"</div>"}function ti(t,e){var n=X(e)==pi.b,e=!n&&e||ee;return b&&!e[vi.l]?null:b?e[n?"children":"find"](W+t.replace(/\s/g,W)).eq(0):xi(Zr(t))}function ei(t,e){for(var n,r=e.split(W),i=0;i<r.length;i++){if(!t[vi.hOP](r[i]))return;n=t[r[i]],i<r.length&&X(n)==pi.o&&(t=n)}return n}function ni(t){var e=Gt.updateOnLoad,e=X(e)==pi.s?e.split(En):e;_i.isA(e)&&!jt&&p(e,t)}function ri(t,e,n){if(n)return n;if(X(t)!=pi.o||X(e)!=pi.o)return t!==e;for(var r in t)if("c"!==r){if(!t[vi.hOP](r)||!e[vi.hOP](r))return!0;if(ri(t[r],e[r]))return!0}return!1}function ii(){return xi.extend.apply(this,[!0].concat([].slice.call(arguments)))}function oi(t,e){return r.addClass.call(t,e)}function ai(t,e){return r.removeClass.call(t,e)}function si(t,e,n){return(n?oi:ai)(t,e)}function ci(t){return r.remove.call(t)}function ui(t,e){return r.find.call(t,e).eq(0)}function li(t,e,n){var r,i,o,a,s,c,u;return x=zt.defaultOptions,Wt=zt.nativeScrollbarStyling,Nt=ii({},zt.nativeScrollbarSize),Pt=ii({},zt.nativeScrollbarIsOverlaid),Lt=ii({},zt.overlayScrollbarDummySize),kt=ii({},zt.rtlScrollBehavior),kr(ii({},x,e)),It=zt.cssCalc,N=zt.msie,Tt=zt.autoUpdateRecommended,y=zt.supportTransition,Y=zt.supportTransform,v=zt.supportPassiveEvents,O=zt.supportResizeObserver,m=zt.supportMutationObserver,zt.restrictedMeasuring,R=xi(t.ownerDocument),S=R[0],x=xi(S.defaultView||S.parentWindow),w=x[0],g=ui(R,"html"),j=ui(g,"body"),te=xi(t),fe=te[0],Dt=te.is("textarea"),qt=te.is("body"),_=S!==hi,b=Dt?te.hasClass(pt)&&te.parent().hasClass(bt):te.hasClass(ct)&&te.children(W+mt)[vi.l],Pt.x&&Pt.y&&!Gt.nativeScrollbarsOverlaid.initialize?(Ur("onInitializationWithdrawn"),b&&(Tr(!0),Ir(!0),Mr(!0)),Kt=jt=!0):(qt&&((r={}).l=yi.max(te[Hn](),g[Hn](),x[Hn]()),r.t=yi.max(te[Pn](),g[Pn](),x[Pn]()),i=function(){oe.removeAttr(vi.ti),hr(oe,M,i,!0,!0)}),Tr(),Ir(),Mr(),Wr(),Nr(!0),Nr(!1),a=w.top!==w,s={},c={},u={},dr(le,M,function(t){h(t)&&!on&&(Ge&&(o=!0,_r()),s=d(t),c.w=he[vi.oW]-(Ft?0:Mt),c.h=he[vi.oH]-(Ft?0:Ut),u=Qr(),hr(R,[it,Z,U],[wr,l,f]),oi(j,Jn),le.setCapture&&le.setCapture(),_i.prvD(t),_i.stpP(t))}),vr(),pr(re,yr),qt&&(oe[Hn](r.l)[Pn](r.t),hi.activeElement==t&&ve.focus&&(oe.attr(vi.ti,"-1"),ve.focus(),hr(oe,M,i,!1,!0))),Ht.update(Cn),Rt=!0,Ur("onInitialized"),p(er,function(t,e){Ur(e.n,e.a)}),er=[],X(n)==pi.s&&(n=[n]),_i.isA(n)?p(n,function(t,e){Ht.addExt(e)}):xi.isPlainObject(n)&&p(n,function(t,e){Ht.addExt(t,e)}),setTimeout(function(){y&&!jt&&oi(ee,dt)},333)),Ht;function l(t){var e,n;h(t)?(e=d(t),n={},(sn||an)&&(n[gn]=c.w+(e.x-s.x)*u.x),(cn||an)&&(n[wn]=c.h+(e.y-s.y)*u.y),ee.css(n),_i.stpP(t)):f(t)}function f(t){t=t!==di;hr(R,[it,Z,U],[wr,l,f],!0),ai(j,Jn),le.releaseCapture&&le.releaseCapture(),t&&(o&&mr(),Ht.update(Cn)),o=!1}function h(t){var e=(t.originalEvent||t).touches!==di;return!Kt&&!jt&&(1===_i.mBtn(t)||e)}function d(t){return N&&a?{x:t.screenX,y:t.screenY}:_i.page(t)}}}return bi&&bi.fn&&(bi.fn.overlayScrollbars=function(t,e){return bi.isPlainObject(t)?(bi.each(this,function(){Q(this,t,e)}),this):Q(this,t)}),Q});
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.AOS=t():e.AOS=t()}(this,function(){return n=[function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){if(v=0<arguments.length&&void 0!==arguments[0]&&arguments[0]?!0:v)return b=(0,m.default)(b,y),(0,l.default)(b,y.once),b}function a(){b=(0,p.default)(),i()}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o,n=arguments[t];for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c=(n(o(1)),o(6)),u=n(c),s=n(o(7)),d=n(o(8)),f=n(o(9)),l=n(o(10)),m=n(o(11)),p=n(o(14)),b=[],v=!1,y={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1};e.exports={init:function(e){y=r(y,e),b=(0,p.default)();var t=document.all&&!window.atob;return!0===(e=y.disable)||"mobile"===e&&f.default.mobile()||"phone"===e&&f.default.phone()||"tablet"===e&&f.default.tablet()||"function"==typeof e&&!0===e()||t?void b.forEach(function(e,t){e.node.removeAttribute("data-aos"),e.node.removeAttribute("data-aos-easing"),e.node.removeAttribute("data-aos-duration"),e.node.removeAttribute("data-aos-delay")}):(document.querySelector("body").setAttribute("data-aos-easing",y.easing),document.querySelector("body").setAttribute("data-aos-duration",y.duration),document.querySelector("body").setAttribute("data-aos-delay",y.delay),"DOMContentLoaded"===y.startEvent&&-1<["complete","interactive"].indexOf(document.readyState)?i(!0):("load"===y.startEvent?window:document).addEventListener(y.startEvent,function(){i(!0)}),window.addEventListener("resize",(0,s.default)(i,y.debounceDelay,!0)),window.addEventListener("orientationchange",(0,s.default)(i,y.debounceDelay,!0)),window.addEventListener("scroll",(0,u.default)(function(){(0,l.default)(b,y.once)},y.throttleDelay)),y.disableMutationObserver||(0,d.default)("[data-aos]",a),b)},refresh:i,refreshHard:a}},function(e,t){},,,,,function(p,e){!function(e){"use strict";function a(n,o,e){function i(e){var t=u,o=s;return u=s=void 0,p=e,f=n.apply(o,t)}function a(e){var t=e-m;return void 0===m||o<=t||t<0||v&&d<=e-p}function r(){var e,t=j();return a(t)?c(t):void(l=setTimeout(r,(t=o-((e=t)-m),v?x(t,d-(e-p)):t)))}function c(e){return l=void 0,y&&u?i(e):(u=s=void 0,f)}function t(){var e=j(),t=a(e);if(u=arguments,s=this,m=e,t){if(void 0===l)return p=t=m,l=setTimeout(r,o),b?i(t):f;if(v)return l=setTimeout(r,o),i(m)}return void 0===l&&(l=setTimeout(r,o)),f}var u,s,d,f,l,m,p=0,b=!1,v=!1,y=!0;if("function"!=typeof n)throw new TypeError(w);return o=h(o)||0,g(e)&&(b=!!e.leading,v="maxWait"in e,d=v?k(h(e.maxWait)||0,o):d,y="trailing"in e?!!e.trailing:y),t.cancel=function(){void 0!==l&&clearTimeout(l),u=m=s=l=void(p=0)},t.flush=function(){return void 0===l?f:c(j())},t}function g(e){var t=void 0===e?"undefined":n(e);return e&&("object"==t||"function"==t)}function o(e){return"symbol"==(void 0===e?"undefined":n(e))||!!(t=e)&&"object"==(void 0===t?"undefined":n(t))&&m.call(e)==r;var t}function h(e){if("number"==typeof e)return e;if(o(e))return i;if("string"!=typeof(e=g(e)?g(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t:e))return 0===e?e:+e;e=e.replace(c,"");var t=s.test(e);return t||d.test(e)?f(e.slice(2),t?2:8):u.test(e)?i:+e}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w="Expected a function",i=NaN,r="[object Symbol]",c=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,d=/^0o[0-7]+$/i,f=parseInt,t="object"==(void 0===e?"undefined":n(e))&&e&&e.Object===Object&&e,e="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,l=t||e||Function("return this")(),m=Object.prototype.toString,k=Math.max,x=Math.min,j=function(){return l.Date.now()};p.exports=function(e,t,o){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError(w);return g(o)&&(n="leading"in o?!!o.leading:n,i="trailing"in o?!!o.trailing:i),a(e,t,{leading:n,maxWait:t,trailing:i})}}.call(e,function(){return this}())},function(m,e){!function(e){"use strict";function g(e){var t=void 0===e?"undefined":n(e);return e&&("object"==t||"function"==t)}function o(e){return"symbol"==(void 0===e?"undefined":n(e))||!!(t=e)&&"object"==(void 0===t?"undefined":n(t))&&l.call(e)==a;var t}function h(e){if("number"==typeof e)return e;if(o(e))return i;if("string"!=typeof(e=g(e)?g(t="function"==typeof e.valueOf?e.valueOf():e)?t+"":t:e))return 0===e?e:+e;e=e.replace(r,"");var t=u.test(e);return t||s.test(e)?d(e.slice(2),t?2:8):c.test(e)?i:+e}function w(){return f.Date.now()}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=NaN,a="[object Symbol]",r=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,d=parseInt,t="object"==(void 0===e?"undefined":n(e))&&e&&e.Object===Object&&e,e="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,f=t||e||Function("return this")(),l=Object.prototype.toString,k=Math.max,x=Math.min;m.exports=function(n,o,e){function i(e){var t=u,o=s;return u=s=void 0,p=e,f=n.apply(o,t)}function a(e){var t=e-m;return void 0===m||o<=t||t<0||v&&d<=e-p}function r(){var e,t=w();return a(t)?c(t):void(l=setTimeout(r,(t=o-((e=t)-m),v?x(t,d-(e-p)):t)))}function c(e){return l=void 0,y&&u?i(e):(u=s=void 0,f)}function t(){var e=w(),t=a(e);if(u=arguments,s=this,m=e,t){if(void 0===l)return p=t=m,l=setTimeout(r,o),b?i(t):f;if(v)return l=setTimeout(r,o),i(m)}return void 0===l&&(l=setTimeout(r,o)),f}var u,s,d,f,l,m,p=0,b=!1,v=!1,y=!0;if("function"!=typeof n)throw new TypeError("Expected a function");return o=h(o)||0,g(e)&&(b=!!e.leading,v="maxWait"in e,d=v?k(h(e.maxWait)||0,o):d,y="trailing"in e?!!e.trailing:y),t.cancel=function(){void 0!==l&&clearTimeout(l),u=m=s=l=void(p=0)},t.flush=function(){return void 0===l?f:c(w())},t}}.call(e,function(){return this}())},function(e,t){"use strict";function i(e){e&&e.forEach(function(e){var t=Array.prototype.slice.call(e.addedNodes),e=Array.prototype.slice.call(e.removedNodes);t.concat(e).filter(function(e){return e.hasAttribute&&e.hasAttribute("data-aos")}).length&&a()})}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){};t.default=function(e,t){var o=window.document,n=new(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)(i);a=t,n.observe(o.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}},function(e,t){"use strict";function o(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(t,"__esModule",{value:!0});var n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,i=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,r=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,c=(function(e,t,o){return t&&s(e.prototype,t),o&&s(e,o),e}(u,[{key:"phone",value:function(){var e=o();return!(!n.test(e)&&!i.test(e.substr(0,4)))}},{key:"mobile",value:function(){var e=o();return!(!a.test(e)&&!r.test(e.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u)}function s(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.default=new c},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,a){var r=window.pageYOffset,c=window.innerHeight;e.forEach(function(e,t){var o,n,i;n=c+r,i=a,e=(o=e).node.getAttribute("data-aos-once"),n>o.position?o.node.classList.add("aos-animate"):void 0===e||"false"!==e&&(i||"true"===e)||o.node.classList.remove("aos-animate")})}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=o(12),a=(n=i)&&n.__esModule?n:{default:n};t.default=function(e,o){return e.forEach(function(e,t){e.node.classList.add("aos-init"),e.position=(0,a.default)(e.node,o.offset)}),e}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=o(13),r=(n=i)&&n.__esModule?n:{default:n};t.default=function(e,t){var o=0,n=0,i=window.innerHeight,a={offset:e.getAttribute("data-aos-offset"),anchor:e.getAttribute("data-aos-anchor"),anchorPlacement:e.getAttribute("data-aos-anchor-placement")};switch(a.offset&&!isNaN(a.offset)&&(n=parseInt(a.offset)),a.anchor&&document.querySelectorAll(a.anchor)&&(e=document.querySelectorAll(a.anchor)[0]),o=(0,r.default)(e).top,a.anchorPlacement){case"top-bottom":break;case"center-bottom":o+=e.offsetHeight/2;break;case"bottom-bottom":o+=e.offsetHeight;break;case"top-center":o+=i/2;break;case"bottom-center":o+=i/2+e.offsetHeight;break;case"center-center":o+=i/2+e.offsetHeight/2;break;case"top-top":o+=i;break;case"bottom-top":o+=e.offsetHeight+i;break;case"center-top":o+=e.offsetHeight/2+i}return o+(n=!(a.anchorPlacement||a.offset||isNaN(t))?t:n)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){for(var t=0,o=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-("BODY"!=e.tagName?e.scrollLeft:0),o+=e.offsetTop-("BODY"!=e.tagName?e.scrollTop:0),e=e.offsetParent;return{top:o,left:t}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return e=e||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(e,function(e){return{node:e}})}}],i={},o.m=n,o.c=i,o.p="dist/",o(0);function o(e){if(i[e])return i[e].exports;var t=i[e]={exports:{},id:e,loaded:!1};return n[e].call(t.exports,t,t.exports,o),t.loaded=!0,t.exports}var n,i});
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).ApexCharts=e()}(this,function(){"use strict";function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function o(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(e,t){var i,a=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)),a}function T(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach(function(t){l(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(i){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=h(i);return t=a?(t=h(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!=typeof t&&"function"!=typeof t?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):t}}function g(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t){if(t){if("string"==typeof t)return d(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?d(t,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}var M=(o(I,[{key:"shadeRGBColor",value:function(t,e){var i=e.split(","),a=t<0?0:255,s=t<0?-1*t:t,e=parseInt(i[0].slice(4),10),t=parseInt(i[1],10),i=parseInt(i[2],10);return"rgb("+(Math.round((a-e)*s)+e)+","+(Math.round((a-t)*s)+t)+","+(Math.round((a-i)*s)+i)+")"}},{key:"shadeHexColor",value:function(t,e){var i=parseInt(e.slice(1),16),a=t<0?0:255,s=t<0?-1*t:t,e=i>>16,t=i>>8&255,i=255&i;return"#"+(16777216+65536*(Math.round((a-e)*s)+e)+256*(Math.round((a-t)*s)+t)+(Math.round((a-i)*s)+i)).toString(16).slice(1)}},{key:"shadeColor",value:function(t,e){return I.isColorHex(e)?this.shadeHexColor(t,e):this.shadeRGBColor(t,e)}}],[{key:"bind",value:function(t,e){return function(){return t.apply(e,arguments)}}},{key:"isObject",value:function(t){return t&&"object"===v(t)&&!Array.isArray(t)&&null!=t}},{key:"listToArray",value:function(t){for(var e=[],i=0;i<t.length;i++)e[i]=t[i];return e}},{key:"extend",value:function(e,i){var a=this;"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var a=arguments[i];if(null!=a)for(var s in a)a.hasOwnProperty(s)&&(e[s]=a[s])}return e});var s=Object.assign({},e);return this.isObject(e)&&this.isObject(i)&&Object.keys(i).forEach(function(t){a.isObject(i[t])&&t in e?s[t]=a.extend(e[t],i[t]):Object.assign(s,l({},t,i[t]))}),s}},{key:"extendArray",value:function(t,e){var i=[];return t.map(function(t){i.push(I.extend(e,t))}),i}},{key:"monthMod",value:function(t){return t%12}},{key:"clone",value:function(t){if("[object Array]"===Object.prototype.toString.call(t)){for(var e=[],i=0;i<t.length;i++)e[i]=this.clone(t[i]);return e}if("[object Null]"===Object.prototype.toString.call(t))return null;if("[object Date]"===Object.prototype.toString.call(t))return t;if("object"!==v(t))return t;var a,s={};for(a in t)t.hasOwnProperty(a)&&(s[a]=this.clone(t[a]));return s}},{key:"log10",value:function(t){return Math.log(t)/Math.LN10}},{key:"roundToBase10",value:function(t){return Math.pow(10,Math.floor(Math.log10(t)))}},{key:"roundToBase",value:function(t,e){return Math.pow(e,Math.floor(Math.log(t)/Math.log(e)))}},{key:"parseNumber",value:function(t){return null===t?t:parseFloat(t)}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(t){var e=String(t).split(/[eE]/);if(1===e.length)return e[0];var i="",a=t<0?"-":"",t=e[0].replace(".",""),s=Number(e[1])+1;if(s<0){for(i=a+"0.";s++;)i+="0";return i+t.replace(/^-/,"")}for(s-=t.length;s--;)i+="0";return t+i}},{key:"getDimensions",value:function(t){var e=getComputedStyle(t,null),i=t.clientHeight,t=t.clientWidth;return i-=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),[t-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),i]}},{key:"getBoundingClientRect",value:function(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:t.clientWidth,height:t.clientHeight,x:e.left,y:e.top}}},{key:"getLargestStringFromArr",value:function(t){return t.reduce(function(t,e){return Array.isArray(e)&&(e=e.reduce(function(t,e){return t.length>e.length?t:e})),t.length>e.length?t:e},0)}},{key:"hexToRgba",value:function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"#999999",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.6,i=(i=(t="#"!==t.substring(0,1)?"#999999":t).replace("#","")).match(new RegExp("(.{"+i.length/3+"})","g")),a=0;a<i.length;a++)i[a]=parseInt(1===i[a].length?i[a]+i[a]:i[a],16);return void 0!==e&&i.push(e),"rgba("+i.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(t){return parseFloat(t.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(t)}},{key:"getPolygonPos",value:function(t,e){for(var i=[],a=2*Math.PI/e,s=0;s<e;s++){var o={};o.x=t*Math.sin(s*a),o.y=-t*Math.cos(s*a),i.push(o)}return i}},{key:"polarToCartesian",value:function(t,e,i,a){a=(a-90)*Math.PI/180;return{x:t+i*Math.cos(a),y:e+i*Math.sin(a)}}},{key:"escapeString",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"x",t=t.toString().slice();return t.replace(/[` ~!@#$%^&*()_|+\-=?;:'",.<>{}[\]\\/]/gi,e)}},{key:"negToZero",value:function(t){return t<0?0:t}},{key:"moveIndexInArray",value:function(t,e,i){if(i>=t.length)for(var a=i-t.length+1;a--;)t.push(void 0);return t.splice(i,0,t.splice(e,1)[0]),t}},{key:"extractNumber",value:function(t){return parseFloat(t.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}},{key:"setELstyles",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t.style.key=e[i])}},{key:"isNumber",value:function(t){return!isNaN(t)&&parseFloat(Number(t))===t&&!isNaN(parseInt(t,10))}},{key:"isFloat",value:function(t){return Number(t)===t&&t%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return-1<navigator.userAgent.toLowerCase().indexOf("firefox")}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||-1<window.navigator.appVersion.indexOf("Trident/"))return!0}},{key:"isIE",value:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(0<e)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(0<t.indexOf("Trident/")){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}i=t.indexOf("Edge/");return 0<i&&parseInt(t.substring(i+5,t.indexOf(".",i)),10)}},{key:"sanitizeDom",value:function(t){return t.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;")}}]),I),S=(o(L,[{key:"setEasingFunctions",value:function(){var t;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":t="-";break;case"easein":t="<";break;case"easeout":t=">";break;case"easeinout":t="<>";break;case"swing":t=function(t){return--t*t*(2.70158*t+1.70158)+1};break;case"bounce":t=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};break;case"elastic":t=function(t){return t===!!t?t:Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1};break;default:t="<>"}this.w.globals.easing=t}}},{key:"animateLine",value:function(t,e,i,a){t.attr(e).animate(a).attr(i)}},{key:"animateMarker",value:function(t,e,i,a,s,o){t.attr({r:e=e||0,width:e,height:e}).animate(a,s).attr({r:i,width:i.width,height:i.height}).afterAll(function(){o()})}},{key:"animateCircle",value:function(t,e,i,a,s){t.attr({r:e.r,cx:e.cx,cy:e.cy}).animate(a,s).attr({r:i.r,cx:i.cx,cy:i.cy})}},{key:"animateRect",value:function(t,e,i,a,s){t.attr(e).animate(a).attr(i).afterAll(function(){return s()})}},{key:"animatePathsGradually",value:function(t){var e=t.el,i=t.realIndex,a=t.j,s=t.fill,o=t.pathFrom,r=t.pathTo,n=t.speed,l=t.delay,h=this.w,t=0;h.config.chart.animations.animateGradually.enabled&&(t=h.config.chart.animations.animateGradually.delay),h.config.chart.animations.dynamicAnimation.enabled&&h.globals.dataChanged&&"bar"!==h.config.chart.type&&(t=0),this.morphSVG(e,i,a,"line"!==h.config.chart.type||h.globals.comboCharts?s:"stroke",o,r,n,l*t)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(t){t.el.classList.remove("apexcharts-element-hidden")})}},{key:"animationCompleted",value:function(t){var e=this.w;e.globals.animationEnded||(e.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof e.config.chart.events.animationEnd&&e.config.chart.events.animationEnd(this.ctx,{el:t,w:e}))}},{key:"morphSVG",value:function(t,e,i,a,s,o,r,n){var l=this,h=this.w;s=s||t.attr("pathFrom"),o=o||t.attr("pathTo");function c(t){return"radar"===h.config.chart.type&&(r=1),"M 0 ".concat(h.globals.gridHeight)}(!s||-1<s.indexOf("undefined")||-1<s.indexOf("NaN"))&&(s=c()),(!o||-1<o.indexOf("undefined")||-1<o.indexOf("NaN"))&&(o=c()),h.globals.shouldAnimate||(r=1),t.plot(s).animate(1,h.globals.easing,n).plot(s).animate(r,h.globals.easing,n).plot(o).afterAll(function(){M.isNumber(i)?i===h.globals.series[h.globals.maxValsInArrayIndex].length-2&&h.globals.shouldAnimate&&l.animationCompleted(t):"none"!==a&&h.globals.shouldAnimate&&(!h.globals.comboCharts&&e===h.globals.series.length-1||h.globals.comboCharts)&&l.animationCompleted(t),l.showDelayedElements()})}}]),L),C=(o(A,[{key:"getDefaultFilter",value:function(t,e){var i=this.w;t.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==i.config.states.normal.filter?this.applyFilter(t,e,i.config.states.normal.filter.type,i.config.states.normal.filter.value):i.config.chart.dropShadow.enabled&&this.dropShadow(t,i.config.chart.dropShadow,e)}},{key:"addNormalFilter",value:function(t,e){var i=this.w;i.config.chart.dropShadow.enabled&&!t.node.classList.contains("apexcharts-marker")&&this.dropShadow(t,i.config.chart.dropShadow,e)}},{key:"addLightenFilter",value:function(t,i,e){var a=this,s=this.w,o=e.intensity;t.unfilter(!0),new window.SVG.Filter,t.filter(function(t){var e=s.config.chart.dropShadow;(e.enabled?a.addShadow(t,i,e):t).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:o}})}),t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)}},{key:"addDarkenFilter",value:function(t,i,e){var a=this,s=this.w,o=e.intensity;t.unfilter(!0),new window.SVG.Filter,t.filter(function(t){var e=s.config.chart.dropShadow;(e.enabled?a.addShadow(t,i,e):t).componentTransfer({rgb:{type:"linear",slope:o}})}),t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)}},{key:"applyFilter",value:function(t,e,i){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:.5;switch(i){case"none":this.addNormalFilter(t,e);break;case"lighten":this.addLightenFilter(t,e,{intensity:a});break;case"darken":this.addDarkenFilter(t,e,{intensity:a})}}},{key:"addShadow",value:function(t,e,i){var a=i.blur,s=i.top,o=i.left,r=i.color,i=i.opacity,a=t.flood(Array.isArray(r)?r[e]:r,i).composite(t.sourceAlpha,"in").offset(o,s).gaussianBlur(a).merge(t.source);return t.blend(t.source,a)}},{key:"dropShadow",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=e.top,s=e.left,o=e.blur,r=e.color,n=e.opacity,l=e.noUserSpaceOnUse,e=this.w;return t.unfilter(!0),M.isIE()&&"radialBar"===e.config.chart.type||(r=Array.isArray(r)?r[i]:r,t.filter(function(t){var e=M.isSafari()||M.isFirefox()||M.isIE()?t.flood(r,n).composite(t.sourceAlpha,"in").offset(s,a).gaussianBlur(o):t.flood(r,n).composite(t.sourceAlpha,"in").offset(s,a).gaussianBlur(o).merge(t.source);t.blend(t.source,e)}),l||t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)),t}},{key:"setSelectionFilter",value:function(t,e,i){var a=this.w;void 0!==a.globals.selectedDataPoints[e]&&-1<a.globals.selectedDataPoints[e].indexOf(i)&&(t.node.setAttribute("selected",!0),"none"!==(a=a.config.states.active.filter)&&this.applyFilter(t,e,a.type,a.value))}},{key:"_scaleFilterSize",value:function(i){!function(t){for(var e in t)t.hasOwnProperty(e)&&i.setAttribute(e,t[e])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),A),z=(o(k,[{key:"drawLine",value:function(t,e,i,a){var s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,r=6<arguments.length&&void 0!==arguments[6]?arguments[6]:null;return this.w.globals.dom.Paper.line().attr({x1:t,y1:e,x2:i,y2:a,stroke:s,"stroke-dasharray":o,"stroke-width":r})}},{key:"drawRect",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"#fefefe",r=6<arguments.length&&void 0!==arguments[6]?arguments[6]:1,n=7<arguments.length&&void 0!==arguments[7]?arguments[7]:null,l=8<arguments.length&&void 0!==arguments[8]?arguments[8]:null,h=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0,c=this.w.globals.dom.Paper.rect();return c.attr({x:t,y:e,width:0<i?i:0,height:0<a?a:0,rx:s,ry:s,opacity:r,"stroke-width":null!==n?n:0,stroke:null!==l?l:"none","stroke-dasharray":h}),c.node.setAttribute("fill",o),c}},{key:"drawPolygon",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(t).attr({fill:a,stroke:e,"stroke-width":i})}},{key:"drawCircle",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,t=this.w.globals.dom.Paper.circle(2*(t=t<0?0:t));return null!==e&&t.attr(e),t}},{key:"drawPath",value:function(t){var e=t.d,i=void 0===e?"":e,a=t.stroke,s=void 0===a?"#a8a8a8":a,o=t.strokeWidth,r=void 0===o?1:o,n=t.fill,l=t.fillOpacity,h=void 0===l?1:l,e=t.strokeOpacity,a=void 0===e?1:e,o=t.classes,l=t.strokeLinecap,e=void 0===l?null:l,l=t.strokeDashArray,t=void 0===l?0:l,l=this.w;return null===e&&(e=l.config.stroke.lineCap),(-1<i.indexOf("undefined")||-1<i.indexOf("NaN"))&&(i="M 0 ".concat(l.globals.gridHeight)),l.globals.dom.Paper.path(i).attr({fill:n,"fill-opacity":h,stroke:s,"stroke-opacity":a,"stroke-linecap":e,"stroke-width":r,"stroke-dasharray":t,class:o})}},{key:"group",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=this.w.globals.dom.Paper.group();return null!==t&&e.attr(t),e}},{key:"move",value:function(t,e){return["M",t,e].join(" ")}},{key:"line",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=null;return null===i?a=["L",t,e].join(" "):"H"===i?a=["H",t].join(" "):"V"===i&&(a=["V",e].join(" ")),a}},{key:"curve",value:function(t,e,i,a,s,o){return["C",t,e,i,a,s,o].join(" ")}},{key:"quadraticCurve",value:function(t,e,i,a){return["Q",t,e,i,a].join(" ")}},{key:"arc",value:function(t,e,i,a,s,o,r){var n="A";return[n=7<arguments.length&&void 0!==arguments[7]&&arguments[7]?"a":n,t,e,i,a,s,o,r].join(" ")}},{key:"renderPaths",value:function(t){var e,i=t.j,a=t.realIndex,s=t.pathFrom,o=t.pathTo,r=t.stroke,n=t.strokeWidth,l=t.strokeLinecap,h=t.fill,c=t.animationDelay,d=t.initialSpeed,g=t.dataChangeSpeed,u=t.className,p=t.shouldClipToGrid,f=void 0===p||p,x=t.bindEventsOnPaths,b=void 0===x||x,m=t.drawShadow,v=void 0===m||m,y=this.w,w=new C(this.ctx),k=new S(this.ctx),A=this.w.config.chart.animations.enabled,p=A&&this.w.config.chart.animations.dynamicAnimation.enabled,x=!!(A&&!y.globals.resized||p&&y.globals.dataChanged&&y.globals.shouldAnimate);x?e=s:(e=o,y.globals.animationEnded=!0);t=y.config.stroke.dashArray,m=0,m=Array.isArray(t)?t[a]:y.config.stroke.dashArray,m=this.drawPath({d:e,stroke:r,strokeWidth:n,fill:h,fillOpacity:1,classes:u,strokeLinecap:l,strokeDashArray:m});m.attr("index",a),f&&m.attr({"clip-path":"url(#gridRectMask".concat(y.globals.cuid,")")}),"none"!==y.config.states.normal.filter.type?w.getDefaultFilter(m,a):y.config.chart.dropShadow.enabled&&v&&(!y.config.chart.dropShadow.enabledOnSeries||y.config.chart.dropShadow.enabledOnSeries&&-1!==y.config.chart.dropShadow.enabledOnSeries.indexOf(a))&&(v=y.config.chart.dropShadow,w.dropShadow(m,v,a)),b&&(m.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,m)),m.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,m)),m.node.addEventListener("mousedown",this.pathMouseDown.bind(this,m))),m.attr({pathTo:o,pathFrom:s});c={el:m,j:i,realIndex:a,pathFrom:s,pathTo:o,fill:h,strokeWidth:n,delay:c};return!A||y.globals.resized||y.globals.dataChanged?!y.globals.resized&&y.globals.dataChanged||k.showDelayedElements():k.animatePathsGradually(T(T({},c),{},{speed:d})),y.globals.dataChanged&&p&&x&&k.animatePathsGradually(T(T({},c),{},{speed:g})),m}},{key:"drawPattern",value:function(e,i,a){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;return this.w.globals.dom.Paper.pattern(i,a,function(t){"horizontalLines"===e?t.line(0,0,a,0).stroke({color:s,width:o+1}):"verticalLines"===e?t.line(0,0,0,i).stroke({color:s,width:o+1}):"slantedLines"===e?t.line(0,0,i,a).stroke({color:s,width:o}):"squares"===e?t.rect(i,a).fill("none").stroke({color:s,width:o}):"circles"===e&&t.circle(i).fill("none").stroke({color:s,width:o})})}},{key:"drawGradient",value:function(t,e,i,a,s){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,r=6<arguments.length&&void 0!==arguments[6]?arguments[6]:null,n=7<arguments.length&&void 0!==arguments[7]?arguments[7]:null,l=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,h=this.w;e.length<9&&0===e.indexOf("#")&&(e=M.hexToRgba(e,a)),i.length<9&&0===i.indexOf("#")&&(i=M.hexToRgba(i,s));var c=0,d=1,g=1,u=null;null!==r&&(c=void 0!==r[0]?r[0]/100:0,d=void 0!==r[1]?r[1]/100:1,g=void 0!==r[2]?r[2]/100:1,u=void 0!==r[3]?r[3]/100:null);var p=!("donut"!==h.config.chart.type&&"pie"!==h.config.chart.type&&"polarArea"!==h.config.chart.type&&"bubble"!==h.config.chart.type),f=null===n||0===n.length?h.globals.dom.Paper.gradient(p?"radial":"linear",function(t){t.at(c,e,a),t.at(d,i,s),t.at(g,i,s),null!==u&&t.at(u,e,a)}):h.globals.dom.Paper.gradient(p?"radial":"linear",function(e){(Array.isArray(n[l])?n[l]:n).forEach(function(t){e.at(t.offset/100,t.color,t.opacity)})});return p?(r=h.globals.gridWidth/2,p=h.globals.gridHeight/2,"bubble"!==h.config.chart.type?f.attr({gradientUnits:"userSpaceOnUse",cx:r,cy:p,r:o}):f.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})):"vertical"===t?f.from(0,0).to(0,1):"diagonal"===t?f.from(0,0).to(1,1):"horizontal"===t?f.from(0,1).to(1,1):"diagonal2"===t&&f.from(1,0).to(0,1),f}},{key:"drawText",value:function(t){var e=t.x,i=t.y,a=t.text,s=t.textAnchor,o=t.fontSize,r=t.fontFamily,n=t.fontWeight,l=t.foreColor,h=t.opacity,c=t.cssClass,d=void 0===c?"":c,c=t.isPlainText,t=void 0===c||c,c=this.w;return void 0===a&&(a=""),s=s||"start",l&&l.length||(l=c.config.chart.foreColor),r=r||c.config.chart.fontFamily,n=n||"regular",(c=Array.isArray(a)?c.globals.dom.Paper.text(function(t){for(var e=0;e<a.length;e++)0===e?t.tspan(a[e]):t.tspan(a[e]).newLine()}):t?c.globals.dom.Paper.plain(a):c.globals.dom.Paper.text(function(t){return t.tspan(a)})).attr({x:e,y:i,"text-anchor":s,"dominant-baseline":"auto","font-size":o,"font-family":r,"font-weight":n,fill:l,class:"apexcharts-text "+d}),c.node.style.fontFamily=r,c.node.style.opacity=h,c}},{key:"drawMarker",value:function(t,e,i){t=t||0;var a,s,o=i.pSize||0,r=null;return"square"===i.shape||"rect"===i.shape?(s=void 0===i.pRadius?o/2:i.pRadius,null!==e&&o||(s=o=0),(s=this.drawRect(a=1.2*o+s,a,a,a,s)).attr({x:t-a/2,y:e-a/2,cx:t,cy:e,class:i.class||"",fill:i.pointFillColor,"fill-opacity":i.pointFillOpacity||1,stroke:i.pointStrokeColor,"stroke-width":i.pointStrokeWidth||0,"stroke-opacity":i.pointStrokeOpacity||1}),r=s):"circle"!==i.shape&&i.shape||(M.isNumber(e)||(e=o=0),r=this.drawCircle(o,{cx:t,cy:e,class:i.class||"",stroke:i.pointStrokeColor,fill:i.pointFillColor,"fill-opacity":i.pointFillOpacity||1,"stroke-width":i.pointStrokeWidth||0,"stroke-opacity":i.pointStrokeOpacity||1})),r}},{key:"pathMouseEnter",value:function(t,e){var i=this.w,a=new C(this.ctx),s=parseInt(t.node.getAttribute("index"),10),o=parseInt(t.node.getAttribute("j"),10);"function"==typeof i.config.chart.events.dataPointMouseEnter&&i.config.chart.events.dataPointMouseEnter(e,this.ctx,{seriesIndex:s,dataPointIndex:o,w:i}),this.ctx.events.fireEvent("dataPointMouseEnter",[e,this.ctx,{seriesIndex:s,dataPointIndex:o,w:i}]),"none"!==i.config.states.active.filter.type&&"true"===t.node.getAttribute("selected")||"none"===i.config.states.hover.filter.type||"none"===i.config.states.active.filter.type||i.globals.isTouchDevice||(i=i.config.states.hover.filter,a.applyFilter(t,s,i.type,i.value))}},{key:"pathMouseLeave",value:function(t,e){var i=this.w,a=new C(this.ctx),s=parseInt(t.node.getAttribute("index"),10),o=parseInt(t.node.getAttribute("j"),10);"function"==typeof i.config.chart.events.dataPointMouseLeave&&i.config.chart.events.dataPointMouseLeave(e,this.ctx,{seriesIndex:s,dataPointIndex:o,w:i}),this.ctx.events.fireEvent("dataPointMouseLeave",[e,this.ctx,{seriesIndex:s,dataPointIndex:o,w:i}]),"none"!==i.config.states.active.filter.type&&"true"===t.node.getAttribute("selected")||"none"!==i.config.states.hover.filter.type&&a.getDefaultFilter(t,s)}},{key:"pathMouseDown",value:function(t,e){var i,a,s,o=this.w,r=new C(this.ctx),n=parseInt(t.node.getAttribute("index"),10),l=parseInt(t.node.getAttribute("j"),10),h="false";"true"===t.node.getAttribute("selected")?(t.node.setAttribute("selected","false"),-1<o.globals.selectedDataPoints[n].indexOf(l)&&(s=o.globals.selectedDataPoints[n].indexOf(l),o.globals.selectedDataPoints[n].splice(s,1))):(!o.config.states.active.allowMultipleDataPointsSelection&&0<o.globals.selectedDataPoints.length&&(o.globals.selectedDataPoints=[],i=o.globals.dom.Paper.select(".apexcharts-series path").members,a=o.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,(s=function(t){Array.prototype.forEach.call(t,function(t){t.node.setAttribute("selected","false"),r.getDefaultFilter(t,n)})})(i),s(a)),t.node.setAttribute("selected","true"),h="true",void 0===o.globals.selectedDataPoints[n]&&(o.globals.selectedDataPoints[n]=[]),o.globals.selectedDataPoints[n].push(l)),"true"===h?"none"!==(h=o.config.states.active.filter)&&r.applyFilter(t,n,h.type,h.value):"none"!==o.config.states.active.filter.type&&r.getDefaultFilter(t,n),"function"==typeof o.config.chart.events.dataPointSelection&&o.config.chart.events.dataPointSelection(e,this.ctx,{selectedDataPoints:o.globals.selectedDataPoints,seriesIndex:n,dataPointIndex:l,w:o}),e&&this.ctx.events.fireEvent("dataPointSelection",[e,this.ctx,{selectedDataPoints:o.globals.selectedDataPoints,seriesIndex:n,dataPointIndex:l,w:o}])}},{key:"rotateAroundCenter",value:function(t){t=t.getBBox();return{x:t.x+t.width/2,y:t.y+t.height/2}}},{key:"getTextRects",value:function(t,e,i,a){var s=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],o=this.w,i=this.drawText({x:-200,y:-200,text:t,textAnchor:"start",fontSize:e,fontFamily:i,foreColor:"#fff",opacity:0});a&&i.attr("transform",a),o.globals.dom.Paper.add(i);o=i.bbox();return s||(o=i.node.getBoundingClientRect()),i.remove(),{width:o.width,height:o.height}}},{key:"placeTextWithEllipsis",value:function(t,e,i){if("function"==typeof t.getComputedTextLength&&(0<(t.textContent=e).length&&t.getComputedTextLength()>=i/1.1)){for(var a=e.length-3;0<a;a-=3)if(t.getSubStringLength(0,a)<=i/1.1)return void(t.textContent=e.substring(0,a)+"...");t.textContent="."}}}],[{key:"setAttrs",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])}}]),k),e=(o(w,[{key:"setOrientations",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=this.w;"vertical"!==t.label.orientation||null!==(i=i.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(null!==e?e:0,"']")))&&(e=i.getBoundingClientRect(),i.setAttribute("x",parseFloat(i.getAttribute("x"))-e.height+4),"top"===t.label.position?i.setAttribute("y",parseFloat(i.getAttribute("y"))+e.width):i.setAttribute("y",parseFloat(i.getAttribute("y"))-e.width),e=(t=this.annoCtx.graphics.rotateAroundCenter(i)).x,t=t.y,i.setAttribute("transform","rotate(-90 ".concat(e," ").concat(t,")")))}},{key:"addBackgroundToAnno",value:function(t,e){var i=this.w;if(!t||!e.label.text||e.label.text&&!e.label.text.trim())return null;var a=i.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),s=t.getBoundingClientRect(),o=e.label.style.padding.left,r=e.label.style.padding.right,n=e.label.style.padding.top,l=e.label.style.padding.bottom;"vertical"===e.label.orientation&&(n=e.label.style.padding.left,l=e.label.style.padding.right,o=e.label.style.padding.top,r=e.label.style.padding.bottom);t=s.left-a.left-o,a=s.top-a.top-n,l=this.annoCtx.graphics.drawRect(t-i.globals.barPadForNumericAxis,a,s.width+o+r,s.height+n+l,e.label.borderRadius,e.label.style.background,1,e.label.borderWidth,e.label.borderColor,0);return e.id&&l.node.classList.add(e.id),l}},{key:"annotationsBackground",value:function(){function i(t,e,i){(i=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(i,"-annotations .apexcharts-").concat(i,"-annotation-label[rel='").concat(e,"']")))&&(e=i.parentNode,(t=a.addBackgroundToAnno(i,t))&&e.insertBefore(t.node,i))}var a=this,s=this.w;s.config.annotations.xaxis.map(function(t,e){i(t,e,"xaxis")}),s.config.annotations.yaxis.map(function(t,e){i(t,e,"yaxis")}),s.config.annotations.points.map(function(t,e){i(t,e,"point")})}},{key:"getStringX",value:function(t){var e=this.w,i=t;e.config.xaxis.convertedCatToNumeric&&e.globals.categoryLabels.length&&(t=e.globals.categoryLabels.indexOf(t)+1);t=e.globals.labels.indexOf(t),t=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(t+1)+")");return i=t?parseFloat(t.getAttribute("x")):i}}]),w),u=(o(y,[{key:"addXaxisAnnotation",value:function(t,e,i){var a=this.w,s=this.invertAxis?a.globals.minY:a.globals.minX,o=this.invertAxis?a.globals.maxY:a.globals.maxX,r=this.invertAxis?a.globals.yRange[0]:a.globals.xRange,n=(t.x-s)/(r/a.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(n=(o-t.x)/(r/a.globals.gridWidth));var l=t.label.text;"category"!==a.config.xaxis.type&&!a.config.xaxis.convertedCatToNumeric||this.invertAxis||a.globals.dataFormatXNumeric||(n=this.annoCtx.helpers.getStringX(t.x));var h,c,d=t.strokeDashArray;M.isNumber(n)&&(null===t.x2||void 0===t.x2?(h=this.annoCtx.graphics.drawLine(n+t.offsetX,0+t.offsetY,n+t.offsetX,a.globals.gridHeight+t.offsetY,t.borderColor,d,t.borderWidth),e.appendChild(h.node),t.id&&h.node.classList.add(t.id)):(c=(t.x2-s)/(r/a.globals.gridWidth),this.annoCtx.inversedReversedAxis&&(c=(o-t.x2)/(r/a.globals.gridWidth)),(c=!("category"!==a.config.xaxis.type&&!a.config.xaxis.convertedCatToNumeric||this.invertAxis||a.globals.dataFormatXNumeric)?this.annoCtx.helpers.getStringX(t.x2):c)<n&&(r=n,n=c,c=r),(c=this.annoCtx.graphics.drawRect(n+t.offsetX,0+t.offsetY,c-n,a.globals.gridHeight+t.offsetY,0,t.fillColor,t.opacity,1,t.borderColor,d)).node.classList.add("apexcharts-annotation-rect"),c.attr("clip-path","url(#gridRectMask".concat(a.globals.cuid,")")),e.appendChild(c.node),t.id&&c.node.classList.add(t.id)),c="top"===t.label.position?4:a.globals.gridHeight,a=this.annoCtx.graphics.getTextRects(l,parseFloat(t.label.style.fontSize)),(l=this.annoCtx.graphics.drawText({x:n+t.label.offsetX,y:c+t.label.offsetY-("vertical"===t.label.orientation?"top"===t.label.position?a.width/2-12:-a.width/2:0),text:l,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id||"")})).attr({rel:i}),e.appendChild(l.node),this.annoCtx.helpers.setOrientations(t,i))}},{key:"drawXAxisAnnotations",value:function(){var i=this,t=this.w,a=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return t.config.annotations.xaxis.map(function(t,e){i.addXaxisAnnotation(t,a.node,e)}),a}}]),y),P=(o(m,[{key:"getStackedSeriesTotals",value:function(){var t=this.w,e=[];if(0===t.globals.series.length)return e;for(var i=0;i<t.globals.series[t.globals.maxValsInArrayIndex].length;i++){for(var a=0,s=0;s<t.globals.series.length;s++)void 0!==t.globals.series[s][i]&&(a+=t.globals.series[s][i]);e.push(a)}return t.globals.stackedSeriesTotals=e}},{key:"getSeriesTotalByIndex",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return null===t?this.w.config.series.reduce(function(t,e){return t+e},0):this.w.globals.series[t].reduce(function(t,e){return t+e},0)}},{key:"isSeriesNull",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===t?this.w.config.series.filter(function(t){return null!==t}):this.w.config.series[t].data.filter(function(t){return null!==t})).length}},{key:"seriesHaveSameValues",value:function(t){return this.w.globals.series[t].every(function(t,e,i){return t===i[0]})}},{key:"getCategoryLabels",value:function(t){var i=this.w,e=t.slice();return e=i.config.xaxis.convertedCatToNumeric?t.map(function(t,e){return i.config.xaxis.labels.formatter(t-i.globals.minX+1)}):e}},{key:"getLargestSeries",value:function(){var t=this.w;t.globals.maxValsInArrayIndex=t.globals.series.map(function(t){return t.length}).indexOf(Math.max.apply(Math,t.globals.series.map(function(t){return t.length})))}},{key:"getLargestMarkerSize",value:function(){var t=this.w,e=0;return t.globals.markers.size.forEach(function(t){e=Math.max(e,t)}),t.globals.markers.largestSize=e}},{key:"getSeriesTotals",value:function(){var t=this.w;t.globals.seriesTotals=t.globals.series.map(function(t,e){var i=0;if(Array.isArray(t))for(var a=0;a<t.length;a++)i+=t[a];else i+=t;return i})}},{key:"getSeriesTotalsXRange",value:function(s,o){var r=this.w;return r.globals.series.map(function(t,e){for(var i=0,a=0;a<t.length;a++)r.globals.seriesX[e][a]>s&&r.globals.seriesX[e][a]<o&&(i+=t[a]);return i})}},{key:"getPercentSeries",value:function(){var n=this.w;n.globals.seriesPercent=n.globals.series.map(function(t,e){var i=[];if(Array.isArray(t))for(var a=0;a<t.length;a++){var s=n.globals.stackedSeriesTotals[a],o=0;s&&(o=100*t[a]/s),i.push(o)}else{var r=100*t/n.globals.seriesTotals.reduce(function(t,e){return t+e},0);i.push(r)}return i})}},{key:"getCalculatedRatios",value:function(){var t,e,i,a,s=this.w.globals,o=[],r=0,n=[],l=.1,h=0;if(s.yRange=[],s.isMultipleYAxis)for(var c=0;c<s.minYArr.length;c++)s.yRange.push(Math.abs(s.minYArr[c]-s.maxYArr[c])),n.push(0);else s.yRange.push(Math.abs(s.minY-s.maxY));s.xRange=Math.abs(s.maxX-s.minX),s.zRange=Math.abs(s.maxZ-s.minZ);for(var d=0;d<s.yRange.length;d++)o.push(s.yRange[d]/s.gridHeight);if(e=s.xRange/s.gridWidth,i=Math.abs(s.initialMaxX-s.initialMinX)/s.gridWidth,t=s.yRange/s.gridWidth,a=s.xRange/s.gridHeight,(r=s.zRange/s.gridHeight*16)||(r=1),s.minY!==Number.MIN_VALUE&&0!==Math.abs(s.minY)&&(s.hasNegs=!0),s.isMultipleYAxis)for(var n=[],g=0;g<o.length;g++)n.push(-s.minYArr[g]/o[g]);else n.push(-s.minY/o[0]),s.minY!==Number.MIN_VALUE&&0!==Math.abs(s.minY)&&(l=-s.minY/t,h=s.minX/e);return{yRatio:o,invertedYRatio:t,zRatio:r,xRatio:e,initialXRatio:i,invertedXRatio:a,baseLineInvertedY:l,baseLineY:n,baseLineX:h}}},{key:"getLogSeries",value:function(t){var i=this,a=this.w;return a.globals.seriesLog=t.map(function(t,e){return a.config.yaxis[e]&&a.config.yaxis[e].logarithmic?t.map(function(t){return null===t?null:i.getLogVal(t,e)}):t}),a.globals.invalidLogScale?t:a.globals.seriesLog}},{key:"getLogVal",value:function(t,e){var i=this.w;return(Math.log(t)-Math.log(i.globals.minYArr[e]))/(Math.log(i.globals.maxYArr[e])-Math.log(i.globals.minYArr[e]))}},{key:"getLogYRatios",value:function(t){var o=this,r=this.w,n=this.w.globals;return n.yLogRatio=t.slice(),n.logYRange=n.yRange.map(function(t,e){if(r.config.yaxis[e]&&o.w.config.yaxis[e].logarithmic){var i,a=-Number.MAX_VALUE,s=Number.MIN_VALUE;return n.seriesLog.forEach(function(t,e){t.forEach(function(t){r.config.yaxis[e]&&r.config.yaxis[e].logarithmic&&(a=Math.max(t,a),s=Math.min(t,s))})}),i=Math.pow(n.yRange[e],Math.abs(s-a)/n.yRange[e]),n.yLogRatio[e]=i/n.gridHeight,i}}),n.invalidLogScale?t.slice():n.yLogRatio}}],[{key:"checkComboSeries",value:function(t){var e=!1,i=0,a=0;return t.length&&void 0!==t[0].type&&t.forEach(function(t){"bar"!==t.type&&"column"!==t.type&&"candlestick"!==t.type&&"boxPlot"!==t.type||i++,void 0!==t.type&&a++}),{comboBarCount:i,comboCharts:e=1<a?!0:e}}},{key:"extendArrayProps",value:function(t,e,i){return(e=e.yaxis?t.extendYAxis(e,i):e).annotations&&((e=(e=e.annotations.yaxis?t.extendYAxisAnnotations(e):e).annotations.xaxis?t.extendXAxisAnnotations(e):e).annotations.points&&(e=t.extendPointAnnotations(e))),e}}]),m),p=(o(b,[{key:"addYaxisAnnotation",value:function(t,e,i){var a,s,o=this.w,r=t.strokeDashArray,n=this._getY1Y2("y1",t),l=t.label.text;null===t.y2||void 0===t.y2?(a=this.annoCtx.graphics.drawLine(0+t.offsetX,n+t.offsetY,this._getYAxisAnnotationWidth(t),n+t.offsetY,t.borderColor,r,t.borderWidth),e.appendChild(a.node),t.id&&a.node.classList.add(t.id)):((s=this._getY1Y2("y2",t))>n&&(a=n,n=s,s=a),(r=this.annoCtx.graphics.drawRect(0+t.offsetX,s+t.offsetY,this._getYAxisAnnotationWidth(t),n-s,0,t.fillColor,t.opacity,1,t.borderColor,r)).node.classList.add("apexcharts-annotation-rect"),r.attr("clip-path","url(#gridRectMask".concat(o.globals.cuid,")")),e.appendChild(r.node),t.id&&r.node.classList.add(t.id));o="right"===t.label.position?o.globals.gridWidth:0,t=this.annoCtx.graphics.drawText({x:o+t.label.offsetX,y:(s||n)+t.label.offsetY-3,text:l,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id||"")});t.attr({rel:i}),e.appendChild(t.node)}},{key:"_getY1Y2",value:function(t,e){var i,a="y1"===t?e.y:e.y2,s=this.w;return this.annoCtx.invertAxis?(t=s.globals.labels.indexOf(a),s.config.xaxis.convertedCatToNumeric&&(t=s.globals.categoryLabels.indexOf(a)),(t=s.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(t+1)+")"))&&(i=parseFloat(t.getAttribute("y")))):(a=s.config.yaxis[e.yAxisIndex].logarithmic?(a=new P(this.annoCtx.ctx).getLogVal(a,e.yAxisIndex))/s.globals.yLogRatio[e.yAxisIndex]:(a-s.globals.minYArr[e.yAxisIndex])/(s.globals.yRange[e.yAxisIndex]/s.globals.gridHeight),i=s.globals.gridHeight-a,s.config.yaxis[e.yAxisIndex]&&s.config.yaxis[e.yAxisIndex].reversed&&(i=a)),i}},{key:"_getYAxisAnnotationWidth",value:function(t){var e=this.w;return e.globals.gridWidth,(-1<t.width.indexOf("%")?e.globals.gridWidth*parseInt(t.width,10)/100:parseInt(t.width,10))+t.offsetX}},{key:"drawYAxisAnnotations",value:function(){var i=this,t=this.w,a=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return t.config.annotations.yaxis.map(function(t,e){i.addYaxisAnnotation(t,a.node,e)}),a}}]),b),f=(o(x,[{key:"addPointAnnotation",value:function(t,e,i){var a=this.w,s=0,o=0,r=0;this.annoCtx.invertAxis&&console.warn("Point annotation is not supported in horizontal bar charts.");var n,l=parseFloat(t.y);"string"==typeof t.x?(n=a.globals.labels.indexOf(t.x),a.config.xaxis.convertedCatToNumeric&&(n=a.globals.categoryLabels.indexOf(t.x)),s=this.annoCtx.helpers.getStringX(t.x),null===t.y&&(l=a.globals.series[t.seriesIndex][n])):s=(t.x-a.globals.minX)/(a.globals.xRange/a.globals.gridWidth);for(var h=[],c=0,d=0;d<=t.seriesIndex;d++){var g=a.config.yaxis[d].seriesName;if(g)for(var u=d+1;u<=t.seriesIndex;u++)a.config.yaxis[u].seriesName===g&&-1===h.indexOf(g)&&(c++,h.push(g))}p=a.config.yaxis[t.yAxisIndex].logarithmic?(l=new P(this.annoCtx.ctx).getLogVal(l,t.yAxisIndex))/a.globals.yLogRatio[t.yAxisIndex]:(p=t.yAxisIndex+c,(l-a.globals.minYArr[p])/(a.globals.yRange[p]/a.globals.gridHeight));var p,f,o=a.globals.gridHeight-p-parseFloat(t.label.style.fontSize)-t.marker.size,r=a.globals.gridHeight-p;a.config.yaxis[t.yAxisIndex]&&a.config.yaxis[t.yAxisIndex].reversed&&(o=p+parseFloat(t.label.style.fontSize)+t.marker.size,r=p),M.isNumber(s)&&(p={pSize:t.marker.size,pointStrokeWidth:t.marker.strokeWidth,pointFillColor:t.marker.fillColor,pointStrokeColor:t.marker.strokeColor,shape:t.marker.shape,pRadius:t.marker.radius,class:"apexcharts-point-annotation-marker ".concat(t.marker.cssClass," ").concat(t.id||"")},p=this.annoCtx.graphics.drawMarker(s+t.marker.offsetX,r+t.marker.offsetY,p),e.appendChild(p.node),p=t.label.text||"",(p=this.annoCtx.graphics.drawText({x:s+t.label.offsetX,y:o+t.label.offsetY,text:p,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id||"")})).attr({rel:i}),e.appendChild(p.node),t.customSVG.SVG&&((f=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+t.customSVG.cssClass})).attr({transform:"translate(".concat(s+t.customSVG.offsetX,", ").concat(o+t.customSVG.offsetY,")")}),f.node.innerHTML=t.customSVG.SVG,e.appendChild(f.node)),t.image.path&&(e=t.image.width||20,f=t.image.height||20,this.annoCtx.addImage({x:s+t.image.offsetX-e/2,y:o+t.image.offsetY-f/2,width:e,height:f,path:t.image.path,appendTo:".apexcharts-point-annotations"})))}},{key:"drawPointAnnotations",value:function(){var i=this,t=this.w,a=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return t.config.annotations.points.map(function(t,e){i.addPointAnnotation(t,a.node,e)}),a}}]),x);function x(t){s(this,x),this.w=t.w,this.annoCtx=t}function b(t){s(this,b),this.w=t.w,this.annoCtx=t}function m(t){s(this,m),this.ctx=t,this.w=t.w}function y(t){s(this,y),this.w=t.w,this.annoCtx=t,this.invertAxis=this.annoCtx.invertAxis}function w(t){s(this,w),this.w=t.w,this.annoCtx=t}function k(t){s(this,k),this.ctx=t,this.w=t.w}function A(t){s(this,A),this.ctx=t,this.w=t.w}function L(t){s(this,L),this.ctx=t,this.w=t.w,this.setEasingFunctions()}function I(){s(this,I)}var E={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},X=(o(Ye,[{key:"init",value:function(){return{annotations:{position:"front",yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[E],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0},stacked:!1,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(t){return new Date(t).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,rangeBarOverlap:!0,rangeBarGroupRows:!1,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal"}},bubble:{minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(t){return t}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(t){return t+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce(function(t,e){return t+e},0)/t.globals.series.length+"%"}}}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(t){return t}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(t){return t}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce(function(t,e){return t+e},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(t){return null!==t?t:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(t){return t?t+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),Ye),Y=(o(Xe,[{key:"drawAxesAnnotations",value:function(){var t=this.w;if(t.globals.axisCharts){for(var e=this.yAxisAnnotations.drawYAxisAnnotations(),i=this.xAxisAnnotations.drawXAxisAnnotations(),a=this.pointsAnnotations.drawPointAnnotations(),s=t.config.chart.animations.enabled,o=[e,i,a],r=[i.node,e.node,a.node],n=0;n<3;n++)t.globals.dom.elGraphical.add(o[n]),!s||t.globals.resized||t.globals.dataChanged||"scatter"!==t.config.chart.type&&"bubble"!==t.config.chart.type&&1<t.globals.dataPoints&&r[n].classList.add("apexcharts-element-hidden"),t.globals.delayedElements.push({el:r[n],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var i=this;this.w.config.annotations.images.map(function(t,e){i.addImage(t,e)})}},{key:"drawTextAnnos",value:function(){var i=this;this.w.config.annotations.texts.map(function(t,e){i.addText(t,e)})}},{key:"addXaxisAnnotation",value:function(t,e,i){this.xAxisAnnotations.addXaxisAnnotation(t,e,i)}},{key:"addYaxisAnnotation",value:function(t,e,i){this.yAxisAnnotations.addYaxisAnnotation(t,e,i)}},{key:"addPointAnnotation",value:function(t,e,i){this.pointsAnnotations.addPointAnnotation(t,e,i)}},{key:"addText",value:function(t,e){var i=t.x,a=t.y,s=t.text,o=t.textAnchor,r=t.foreColor,n=t.fontSize,l=t.fontFamily,h=t.fontWeight,c=t.cssClass,d=t.backgroundColor,g=t.borderWidth,u=t.strokeDashArray,p=t.borderRadius,f=t.borderColor,x=t.appendTo,b=void 0===x?".apexcharts-annotations":x,m=t.paddingLeft,v=void 0===m?4:m,y=t.paddingRight,x=void 0===y?4:y,m=t.paddingBottom,y=void 0===m?2:m,m=t.paddingTop,t=void 0===m?2:m,m=this.w,c=this.graphics.drawText({x:i,y:a,text:s,textAnchor:o||"start",fontSize:n||"12px",fontWeight:h||"regular",fontFamily:l||m.config.chart.fontFamily,foreColor:r||m.config.chart.foreColor,cssClass:c}),m=m.globals.dom.baseEl.querySelector(b);m&&m.appendChild(c.node);b=c.bbox();s&&(u=this.graphics.drawRect(b.x-v,b.y-t,b.width+v+x,b.height+y+t,p,d||"transparent",1,g,f,u),m.insertBefore(u.node,c.node))}},{key:"addImage",value:function(t,e){var i=this.w,a=t.path,s=t.x,o=void 0===s?0:s,r=t.y,n=void 0===r?0:r,s=t.width,r=void 0===s?20:s,s=t.height,s=void 0===s?20:s,t=t.appendTo,t=void 0===t?".apexcharts-annotations":t,a=i.globals.dom.Paper.image(a);a.size(r,s).move(o,n);t=i.globals.dom.baseEl.querySelector(t);t&&t.appendChild(a.node)}},{key:"addXaxisAnnotationExternal",value:function(t,e,i){return this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"xaxis",contextMethod:i.addXaxisAnnotation}),i}},{key:"addYaxisAnnotationExternal",value:function(t,e,i){return this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"yaxis",contextMethod:i.addYaxisAnnotation}),i}},{key:"addPointAnnotationExternal",value:function(t,e,i){return void 0===this.invertAxis&&(this.invertAxis=i.w.globals.isBarHorizontal),this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"point",contextMethod:i.addPointAnnotation}),i}},{key:"addAnnotationExternal",value:function(t){var e=t.params,i=t.pushToMemory,a=t.context,s=t.type,o=t.contextMethod,r=a,n=r.w,l=n.globals.dom.baseEl.querySelector(".apexcharts-".concat(s,"-annotations")),h=l.childNodes.length+1,t=new X,t=Object.assign({},"xaxis"===s?t.xAxisAnnotation:"yaxis"===s?t.yAxisAnnotation:t.pointAnnotation),c=M.extend(t,e);switch(s){case"xaxis":this.addXaxisAnnotation(c,l,h);break;case"yaxis":this.addYaxisAnnotation(c,l,h);break;case"point":this.addPointAnnotation(c,l,h)}t=n.globals.dom.baseEl.querySelector(".apexcharts-".concat(s,"-annotations .apexcharts-").concat(s,"-annotation-label[rel='").concat(h,"']")),s=this.helpers.addBackgroundToAnno(t,c);return s&&l.insertBefore(s.node,t),i&&n.globals.memory.methodsToExec.push({context:r,id:c.id||M.randomId(),method:o,label:"addAnnotation",params:e}),a}},{key:"clearAnnotations",value:function(t){var i=t.w,t=i.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");i.globals.memory.methodsToExec.map(function(t,e){"addText"!==t.label&&"addAnnotation"!==t.label||i.globals.memory.methodsToExec.splice(e,1)}),t=M.listToArray(t),Array.prototype.forEach.call(t,function(t){for(;t.firstChild;)t.removeChild(t.firstChild)})}},{key:"removeAnnotation",value:function(t,i){var a=t.w,t=a.globals.dom.baseEl.querySelectorAll(".".concat(i));t&&(a.globals.memory.methodsToExec.map(function(t,e){t.id===i&&a.globals.memory.methodsToExec.splice(e,1)}),Array.prototype.forEach.call(t,function(t){t.parentElement.removeChild(t)}))}}]),Xe),F=(o(Ee,[{key:"clippedImgArea",value:function(t){var e=this.w,i=e.config,a=parseInt(e.globals.gridWidth,10),s=parseInt(e.globals.gridHeight,10),o=s<a?a:s,r=t.image,a=0,s=0,s=void 0===t.width&&void 0===t.height?void 0!==i.fill.image.width&&void 0!==i.fill.image.height?(a=i.fill.image.width+1,i.fill.image.height):(a=o+1,o):(a=t.width,t.height),i=document.createElementNS(e.globals.SVGNS,"pattern");z.setAttrs(i,{id:t.patternID,patternUnits:t.patternUnits||"userSpaceOnUse",width:a+"px",height:s+"px"});o=document.createElementNS(e.globals.SVGNS,"image");i.appendChild(o),o.setAttributeNS(window.SVG.xlink,"href",r),z.setAttrs(o,{x:0,y:0,preserveAspectRatio:"none",width:a+"px",height:s+"px"}),o.style.opacity=t.opacity,e.globals.dom.elDefs.node.appendChild(i)}},{key:"getSeriesIndex",value:function(t){var e=this.w;return("bar"===e.config.chart.type||"rangeBar"===e.config.chart.type)&&e.config.plotOptions.bar.distributed||"heatmap"===e.config.chart.type||"treemap"===e.config.chart.type?this.seriesIndex=t.seriesNumber:this.seriesIndex=t.seriesNumber%e.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(t){var e=this.w;this.opts=t;var i,a,s=this.w.config;this.seriesIndex=this.getSeriesIndex(t);var o=this.getFillColors()[this.seriesIndex];"function"==typeof(o=void 0!==e.globals.seriesColors[this.seriesIndex]?e.globals.seriesColors[this.seriesIndex]:o)&&(o=o({seriesIndex:this.seriesIndex,dataPointIndex:t.dataPointIndex,value:t.value,w:e}));var r=this.getFillType(this.seriesIndex),n=Array.isArray(s.fill.opacity)?s.fill.opacity[this.seriesIndex]:s.fill.opacity,l=o=t.color?t.color:o;return-1===o.indexOf("rgb")?o.length<9&&(l=M.hexToRgba(o,n)):-1<o.indexOf("rgba")&&(n=M.getOpacityFromRGBA(o)),t.opacity&&(n=t.opacity),"pattern"===r&&(i=this.handlePatternFill(i,o,n,l)),"gradient"===r&&(a=this.handleGradientFill(o,n,this.seriesIndex)),i="image"===r?(o=s.fill.image.src,s=t.patternID||"",this.clippedImgArea({opacity:n,image:Array.isArray(o)?t.seriesNumber<o.length?o[t.seriesNumber]:o[0]:o,width:t.width||void 0,height:t.height||void 0,patternUnits:t.patternUnits,patternID:"pattern".concat(e.globals.cuid).concat(t.seriesNumber+1).concat(s)}),"url(#pattern".concat(e.globals.cuid).concat(t.seriesNumber+1).concat(s,")")):"gradient"===r?a:"pattern"===r?i:l,i=t.solid?l:i}},{key:"getFillType",value:function(t){var e=this.w;return Array.isArray(e.config.fill.type)?e.config.fill.type[t]:e.config.fill.type}},{key:"getFillColors",value:function(){var t=this.w,e=t.config,i=this.opts,a=[];return t.globals.comboCharts?"line"===t.config.series[this.seriesIndex].type?Array.isArray(t.globals.stroke.colors)?a=t.globals.stroke.colors:a.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?a=t.globals.fill.colors:a.push(t.globals.fill.colors):"line"===e.chart.type?Array.isArray(t.globals.stroke.colors)?a=t.globals.stroke.colors:a.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?a=t.globals.fill.colors:a.push(t.globals.fill.colors),void 0!==i.fillColors&&(a=[],Array.isArray(i.fillColors)?a=i.fillColors.slice():a.push(i.fillColors)),a}},{key:"handlePatternFill",value:function(t,e,i,a){var s=this.w.config,o=this.opts,r=new z(this.ctx),n=void 0===s.fill.pattern.strokeWidth?Array.isArray(s.stroke.width)?s.stroke.width[this.seriesIndex]:s.stroke.width:Array.isArray(s.fill.pattern.strokeWidth)?s.fill.pattern.strokeWidth[this.seriesIndex]:s.fill.pattern.strokeWidth,e=e;return Array.isArray(s.fill.pattern.style)?void 0!==s.fill.pattern.style[o.seriesNumber]?r.drawPattern(s.fill.pattern.style[o.seriesNumber],s.fill.pattern.width,s.fill.pattern.height,e,n,i):a:r.drawPattern(s.fill.pattern.style,s.fill.pattern.width,s.fill.pattern.height,e,n,i)}},{key:"handleGradientFill",value:function(t,e,i){var a=this.w.config,s=this.opts,o=new z(this.ctx),r=new M,n=a.fill.gradient.type,l=t,h=void 0===a.fill.gradient.opacityFrom?e:Array.isArray(a.fill.gradient.opacityFrom)?a.fill.gradient.opacityFrom[i]:a.fill.gradient.opacityFrom;-1<l.indexOf("rgba")&&(h=M.getOpacityFromRGBA(l));var c,e=void 0===a.fill.gradient.opacityTo?e:Array.isArray(a.fill.gradient.opacityTo)?a.fill.gradient.opacityTo[i]:a.fill.gradient.opacityTo;return void 0===a.fill.gradient.gradientToColors||0===a.fill.gradient.gradientToColors.length?c="dark"===a.fill.gradient.shade?r.shadeColor(-1*parseFloat(a.fill.gradient.shadeIntensity),-1<t.indexOf("rgb")?M.rgb2hex(t):t):r.shadeColor(parseFloat(a.fill.gradient.shadeIntensity),-1<t.indexOf("rgb")?M.rgb2hex(t):t):a.fill.gradient.gradientToColors[s.seriesNumber]?-1<(c=r=a.fill.gradient.gradientToColors[s.seriesNumber]).indexOf("rgba")&&(e=M.getOpacityFromRGBA(r)):c=t,a.fill.gradient.inverseColors&&(t=l,l=c,c=t),-1<l.indexOf("rgb")&&(l=M.rgb2hex(l)),-1<c.indexOf("rgb")&&(c=M.rgb2hex(c)),o.drawGradient(n,l,c,h,e,s.size,a.fill.gradient.stops,a.fill.gradient.colorStops,i)}}]),Ee),R=(o(Ie,[{key:"setGlobalMarkerSize",value:function(){var e=this.w;if(e.globals.markers.size=Array.isArray(e.config.markers.size)?e.config.markers.size:[e.config.markers.size],0<e.globals.markers.size.length){if(e.globals.markers.size.length<e.globals.series.length+1)for(var t=0;t<=e.globals.series.length;t++)void 0===e.globals.markers.size[t]&&e.globals.markers.size.push(e.globals.markers.size[0])}else e.globals.markers.size=e.config.series.map(function(t){return e.config.markers.size})}},{key:"plotChartMarkers",value:function(t,e,i,a){var s=4<arguments.length&&void 0!==arguments[4]&&arguments[4],o=this.w,r=e,n=t,l=null,h=new z(this.ctx);if((0<o.globals.markers.size[e]||s)&&(l=h.group({class:s?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(o.globals.cuid,")")),Array.isArray(n.x))for(var c=0;c<n.x.length;c++){var d,g=1===i&&1===c?1:1===i&&0===c?0:i,u="apexcharts-marker";"line"!==o.config.chart.type&&"area"!==o.config.chart.type||o.globals.comboCharts||o.config.tooltip.intersect||(u+=" no-pointer-events"),(Array.isArray(o.config.markers.size)?0<o.globals.markers.size[e]:0<o.config.markers.size)||s?(M.isNumber(n.y[c])?u+=" w".concat(M.randomId()):u="apexcharts-nullpoint",d=this.getMarkerConfig(u,e,g),o.config.series[r].data[g]&&(o.config.series[r].data[g].fillColor&&(d.pointFillColor=o.config.series[r].data[g].fillColor),o.config.series[r].data[g].strokeColor&&(d.pointStrokeColor=o.config.series[r].data[g].strokeColor)),a&&(d.pSize=a),(u=h.drawMarker(n.x[c],n.y[c],d)).attr("rel",g),u.attr("j",g),u.attr("index",e),u.node.setAttribute("default-marker-size",d.pSize),new C(this.ctx).setSelectionFilter(u,e,g),this.addEvents(u),l&&l.add(u)):(void 0===o.globals.pointsArray[e]&&(o.globals.pointsArray[e]=[]),o.globals.pointsArray[e].push([n.x[c],n.y[c]]))}return l}},{key:"getMarkerConfig",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=this.w,s=this.getMarkerStyle(e),o=a.globals.markers.size[e],a=a.config.markers;return null!==i&&a.discrete.length&&a.discrete.map(function(t){t.seriesIndex===e&&t.dataPointIndex===i&&(s.pointStrokeColor=t.strokeColor,s.pointFillColor=t.fillColor,o=t.size,s.pointShape=t.shape)}),{pSize:o,pRadius:a.radius,width:Array.isArray(a.width)?a.width[e]:a.width,height:Array.isArray(a.height)?a.height[e]:a.height,pointStrokeWidth:Array.isArray(a.strokeWidth)?a.strokeWidth[e]:a.strokeWidth,pointStrokeColor:s.pointStrokeColor,pointFillColor:s.pointFillColor,shape:s.pointShape||(Array.isArray(a.shape)?a.shape[e]:a.shape),class:t,pointStrokeOpacity:Array.isArray(a.strokeOpacity)?a.strokeOpacity[e]:a.strokeOpacity,pointStrokeDashArray:Array.isArray(a.strokeDashArray)?a.strokeDashArray[e]:a.strokeDashArray,pointFillOpacity:Array.isArray(a.fillOpacity)?a.fillOpacity[e]:a.fillOpacity,seriesIndex:e}}},{key:"addEvents",value:function(t){var e=this.w,i=new z(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this.ctx,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this.ctx,t)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this.ctx,t)),t.node.addEventListener("click",e.config.markers.onClick),t.node.addEventListener("dblclick",e.config.markers.onDblClick),t.node.addEventListener("touchstart",i.pathMouseDown.bind(this.ctx,t),{passive:!0})}},{key:"getMarkerStyle",value:function(t){var e=this.w,i=e.globals.markers.colors,e=e.config.markers.strokeColor||e.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(e)?e[t]:e,pointFillColor:Array.isArray(i)?i[t]:i}}}]),Ie),H=(o(ze,[{key:"draw",value:function(t,e,i){var a=this.w,s=new z(this.ctx),o=i.realIndex,r=i.pointsPos,n=i.zRatio,l=i.elParent,h=s.group({class:"apexcharts-series-markers apexcharts-series-".concat(a.config.chart.type)});if(h.attr("clip-path","url(#gridRectMarkerMask".concat(a.globals.cuid,")")),Array.isArray(r.x))for(var c=0;c<r.x.length;c++){var d=e+1,g=!0;0===e&&0===c&&(d=0),0===e&&1===c&&(d=1);var u=0,p=a.globals.markers.size[o];n!==1/0&&(p=a.globals.seriesZ[o][d]/n,(x=a.config.plotOptions.bubble).minBubbleRadius&&p<x.minBubbleRadius&&(p=x.minBubbleRadius),x.maxBubbleRadius&&p>x.maxBubbleRadius&&(p=x.maxBubbleRadius)),a.config.chart.animations.enabled||(u=p);var f=r.x[c],x=r.y[c],u=u||0;(g=null!==x&&void 0!==a.globals.series[o][d]&&g)&&(d=this.drawPoint(f,x,u,p,o,d,e),h.add(d)),l.add(h)}}},{key:"drawPoint",value:function(t,e,i,a,s,o,r){var n,l,h=this.w,c=s,d=new S(this.ctx),g=new C(this.ctx),u=new F(this.ctx),p=new R(this.ctx),f=new z(this.ctx),x=p.getMarkerConfig("apexcharts-marker",c),u=u.fillPath({seriesNumber:s,dataPointIndex:o,patternUnits:"objectBoundingBox",value:h.globals.series[s][r]});if("circle"===x.shape?n=f.drawCircle(i):"square"!==x.shape&&"rect"!==x.shape||(n=f.drawRect(0,0,x.width-x.pointStrokeWidth/2,x.height-x.pointStrokeWidth/2,x.pRadius)),h.config.series[c].data[o]&&h.config.series[c].data[o].fillColor&&(u=h.config.series[c].data[o].fillColor),n.attr({x:t-x.width/2-x.pointStrokeWidth/2,y:e-x.height/2-x.pointStrokeWidth/2,cx:t,cy:e,fill:u,"fill-opacity":x.pointFillOpacity,stroke:x.pointStrokeColor,r:a,"stroke-width":x.pointStrokeWidth,"stroke-dasharray":x.pointStrokeDashArray,"stroke-opacity":x.pointStrokeOpacity}),h.config.chart.dropShadow.enabled&&(l=h.config.chart.dropShadow,g.dropShadow(n,l,s)),!this.initialAnim||h.globals.dataChanged||h.globals.resized?h.globals.animationEnded=!0:(l=h.config.chart.animations.speed,d.animateMarker(n,0,"circle"===x.shape?a:{width:x.width,height:x.height},l,h.globals.easing,function(){window.setTimeout(function(){d.animationCompleted(n)},100)})),h.globals.dataChanged&&"circle"===x.shape)if(this.dynamicAnim){var b,m,v,y=h.config.chart.animations.dynamicAnimation.speed;null!=(r=h.globals.previousPaths[s]&&h.globals.previousPaths[s][r])&&(b=r.x,m=r.y,v=void 0!==r.r?r.r:a);for(var w=0;w<h.globals.collapsedSeries.length;w++)h.globals.collapsedSeries[w].index===s&&(y=1,a=0);d.animateCircle(n,{cx:b,cy:m,r:v},{cx:t,cy:e,r:a=0===t&&0===e?0:a},y,h.globals.easing)}else n.attr({r:a});return n.attr({rel:o,j:o,index:s,"default-marker-size":a}),g.setSelectionFilter(n,s,o),p.addEvents(n),n.node.classList.add("apexcharts-marker"),n}},{key:"centerTextInBubble",value:function(t){var e=this.w;return{y:t+=parseInt(e.config.dataLabels.style.fontSize,10)/4}}}]),ze),D=(o(Me,[{key:"dataLabelsCorrection",value:function(t,e,i,a,s,o,r){var n=this.w,l=!1,h=new z(this.ctx).getTextRects(i,r),c=h.width,i=h.height;(e=e<0?0:e)>n.globals.gridHeight+i&&(e=n.globals.gridHeight+i/2),void 0===n.globals.dataLabelsRects[a]&&(n.globals.dataLabelsRects[a]=[]),n.globals.dataLabelsRects[a].push({x:t,y:e,width:c,height:i});r=n.globals.dataLabelsRects[a].length-2,i=void 0!==n.globals.lastDrawnDataLabelsIndexes[a]?n.globals.lastDrawnDataLabelsIndexes[a][n.globals.lastDrawnDataLabelsIndexes[a].length-1]:0;return void 0===n.globals.dataLabelsRects[a][r]||(t>(i=n.globals.dataLabelsRects[a][i]).x+i.width+2||e>i.y+i.height+2||t+c<i.x)&&(l=!0),{x:t,y:e,textRects:h,drawnextLabel:l=0===s||o?!0:l}}},{key:"drawDataLabel",value:function(t,e,i){var a=this,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:2,o=this.w,r=new z(this.ctx),n=o.config.dataLabels,l=0,h=i,c=null;if(!n.enabled||!Array.isArray(t.x))return c;for(var c=r.group({class:"apexcharts-data-labels"}),d=0;d<t.x.length;d++){var g,u,p,f=t.x[d]+n.offsetX;l=t.y[d]+n.offsetY+s,isNaN(f)||(1===i&&0===d&&(h=0),1===i&&1===d&&(h=1),g=o.globals.series[e][h],p="",u=function(t){return o.config.dataLabels.formatter(t,{ctx:a.ctx,seriesIndex:e,dataPointIndex:h,w:o})},"bubble"===o.config.chart.type?(p=u(g=o.globals.seriesZ[e][h]),l=t.y[d],l=new H(this.ctx).centerTextInBubble(l,e,h).y):void 0!==g&&(p=u(g)),this.plotDataLabelsText({x:f,y:l,text:p,i:e,j:h,parent:c,offsetCorrection:!0,dataLabelsConfig:o.config.dataLabels}))}return c}},{key:"plotDataLabelsText",value:function(t){var e=this.w,i=new z(this.ctx),a=t.x,s=t.y,o=t.i,r=t.j,n=t.text,l=t.textAnchor,h=t.fontSize,c=t.parent,d=t.dataLabelsConfig,g=t.color,u=t.alwaysDrawDataLabel,p=t.offsetCorrection;Array.isArray(e.config.dataLabels.enabledOnSeries)&&e.config.dataLabels.enabledOnSeries.indexOf(o)<0||(t={x:a,y:s,drawnextLabel:!0},p&&(t=this.dataLabelsCorrection(a,s,n,o,r,u,parseInt(d.style.fontSize,10))),e.globals.zoomed||(a=t.x,s=t.y),t.textRects&&(a<-10-t.textRects.width||a>e.globals.gridWidth+t.textRects.width+10)&&(n=""),p=e.globals.dataLabels.style.colors[o],"function"==typeof(p=("bar"===e.config.chart.type||"rangeBar"===e.config.chart.type)&&e.config.plotOptions.bar.distributed||e.config.dataLabels.distributed?e.globals.dataLabels.style.colors[r]:p)&&(p=p({series:e.globals.series,seriesIndex:o,dataPointIndex:r,w:e})),g&&(p=g),u=d.offsetX,g=d.offsetY,"bar"!==e.config.chart.type&&"rangeBar"!==e.config.chart.type||(g=u=0),t.drawnextLabel&&((h=i.drawText({width:100,height:parseInt(d.style.fontSize,10),x:a+u,y:s+g,foreColor:p,textAnchor:l||d.textAnchor,text:n,fontSize:h||d.style.fontSize,fontFamily:d.style.fontFamily,fontWeight:d.style.fontWeight||"normal"})).attr({class:"apexcharts-datalabel",cx:a,cy:s}),d.dropShadow.enabled&&(d=d.dropShadow,new C(this.ctx).dropShadow(h,d)),c.add(h),void 0===e.globals.lastDrawnDataLabelsIndexes[o]&&(e.globals.lastDrawnDataLabelsIndexes[o]=[]),e.globals.lastDrawnDataLabelsIndexes[o].push(r)))}},{key:"addBackgroundToDataLabel",value:function(t,e){var i=this.w,a=i.config.dataLabels.background,s=a.padding,o=a.padding/2,r=e.width,n=e.height,i=new z(this.ctx).drawRect(e.x-s,e.y-o/2,r+2*s,n+o,a.borderRadius,"transparent"===i.config.chart.background?"#fff":i.config.chart.background,a.opacity,a.borderWidth,a.borderColor);return a.dropShadow.enabled&&new C(this.ctx).dropShadow(i,a.dropShadow),i}},{key:"dataLabelsBackground",value:function(){var t=this.w;if("bubble"!==t.config.chart.type)for(var e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),i=0;i<e.length;i++){var a=e[i],s=a.getBBox(),o=null;(o=s.width&&s.height?this.addBackgroundToDataLabel(a,s):o)&&(a.parentNode.insertBefore(o.node,a),s=a.getAttribute("fill"),(!t.config.chart.animations.enabled||t.globals.resized||t.globals.dataChanged?o:o.animate()).attr({fill:s}),a.setAttribute("fill",t.config.dataLabels.background.foreColor))}}},{key:"bringForward",value:function(){for(var t=this.w,e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),i=t.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),a=0;a<e.length;a++)i&&i.insertBefore(e[a],i.nextSibling)}}]),Me),N=(o(Te,[{key:"handleBarDataLabels",value:function(t){var e=t.x,i=t.y,a=t.y1,s=t.y2,o=t.i,r=t.j,n=t.realIndex,l=t.series,h=t.barHeight,c=t.barWidth,d=t.barYPosition,g=t.visibleSeries,u=t.renderedPath,p=this.w,f=new z(this.barCtx.ctx),x=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[n]:this.barCtx.strokeWidth,b=e+parseFloat(c*g),m=i+parseFloat(h*g);p.globals.isXNumeric&&!p.globals.isBarHorizontal&&(b=e+parseFloat(c*(g+1)),m=i+parseFloat(h*(g+1))-x);var v=e,y=i,w=p.config.dataLabels,k=this.barCtx.barOptions.dataLabels;void 0!==d&&this.barCtx.isTimelineBar&&(y=m=d);var A=w.offsetX,t=w.offsetY,g={width:0,height:0};p.config.dataLabels.enabled&&(d=this.barCtx.series[o][r],g=f.getTextRects(p.globals.yLabelFormatters[0](d),parseFloat(w.style.fontSize)));var t={x:e,y:i,i:o,j:r,renderedPath:u,bcx:b,bcy:m,barHeight:h,barWidth:c,textRects:g,strokeWidth:x,dataLabelsX:v,dataLabelsY:y,barDataLabelsConfig:k,offX:A,offY:t},S=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(t):this.calculateColumnsDataLabelsPosition(t);return u.attr({cy:S.bcy,cx:S.bcx,j:r,val:l[o][r],barHeight:h,barWidth:c}),this.drawCalculatedDataLabels({x:S.dataLabelsX,y:S.dataLabelsY,val:this.barCtx.isTimelineBar?[a,s]:l[o][r],i:n,j:r,barWidth:c,barHeight:h,textRects:g,dataLabelsConfig:w})}},{key:"calculateColumnsDataLabelsPosition",value:function(t){var e=this.w,i=t.i,a=t.j,s=t.y,o=t.bcx,r=t.barWidth,n=t.barHeight,l=t.textRects,h=t.dataLabelsY,c=t.barDataLabelsConfig,d=t.strokeWidth,g=t.offX,u=t.offY,n=Math.abs(n),p="vertical"===e.config.plotOptions.bar.dataLabels.orientation;o-=d/2;t=e.globals.gridWidth/e.globals.dataPoints,g=e.globals.isXNumeric?o-r/2+g:o-t+r/2+g;p&&(g=g+l.height/2-d/2-2);var f=this.barCtx.series[i][a]<0,x=s;switch(this.barCtx.isReversed&&(x=s-n+(f?2*n:0),s-=n),c.position){case"center":h=p?f?x+n/2+u:x+n/2-u:f?x-n/2+l.height/2+u:x+n/2+l.height/2-u;break;case"bottom":h=p?f?x+n+u:x+n-u:f?x-n+l.height+d+u:x+n-l.height/2+d-u;break;case"top":h=p?f?x+u:x-u:f?x-l.height/2-u:x+l.height+u}return e.config.chart.stacked||(h<0?h=0+d:h+l.height/3>e.globals.gridHeight&&(h=e.globals.gridHeight-d)),{bcx:o,bcy:s,dataLabelsX:g,dataLabelsY:h}}},{key:"calculateBarsDataLabelsPosition",value:function(t){var e=this.w,i=t.x,a=t.i,s=t.j,o=t.bcy,r=t.barHeight,n=t.barWidth,l=t.textRects,h=t.dataLabelsX,c=t.strokeWidth,d=t.barDataLabelsConfig,g=t.offX,u=t.offY,t=e.globals.gridHeight/e.globals.dataPoints,n=Math.abs(n),u=o-(this.barCtx.isTimelineBar?0:t)+r/2+l.height/2+u-3,p=this.barCtx.series[a][s]<0,f=i;switch(this.barCtx.isReversed&&(f=i+n-(p?2*n:0),i=e.globals.gridWidth-n),d.position){case"center":h=p?f+n/2-g:Math.max(l.width/2,f-n/2)+g;break;case"bottom":h=p?f+n-c-Math.round(l.width/2)-g:f-n+c+Math.round(l.width/2)+g;break;case"top":h=p?f-c+Math.round(l.width/2)-g:f-c-Math.round(l.width/2)+g}return e.config.chart.stacked||(h<0?h=h+l.width+c:h+l.width/2>e.globals.gridWidth&&(h=e.globals.gridWidth-l.width-c)),{bcx:i,bcy:o,dataLabelsX:h,dataLabelsY:u}}},{key:"drawCalculatedDataLabels",value:function(t){var e=t.x,i=t.y,a=t.val,s=t.i,o=t.j,r=t.textRects,n=t.barHeight,l=t.barWidth,h=t.dataLabelsConfig,c=this.w,d="rotate(0)";"vertical"===c.config.plotOptions.bar.dataLabels.orientation&&(d="rotate(-90, ".concat(e,", ").concat(i,")"));var g=new D(this.barCtx.ctx),u=new z(this.barCtx.ctx),p=h.formatter,f=null,t=-1<c.globals.collapsedSeriesIndices.indexOf(s);return h.enabled&&!t&&(f=u.group({class:"apexcharts-data-labels",transform:d}),t="",void 0!==a&&(t=p(a,{seriesIndex:s,dataPointIndex:o,w:c})),d=c.globals.series[s][o]<0,p=c.config.plotOptions.bar.dataLabels.position,"vertical"===c.config.plotOptions.bar.dataLabels.orientation&&("top"===p&&(h.textAnchor=d?"end":"start"),"center"===p&&(h.textAnchor="middle"),"bottom"===p&&(h.textAnchor=d?"end":"start")),this.barCtx.isTimelineBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&l<u.getTextRects(t,parseFloat(h.style.fontSize)).width&&(t=""),c.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?(0<l&&r.width/1.6>l||l<0&&r.width/1.6<l)&&(t=""):r.height/1.6>n&&(t="")),n=T({},h),this.barCtx.isHorizontal&&a<0&&("start"===h.textAnchor?n.textAnchor="end":"end"===h.textAnchor&&(n.textAnchor="start")),g.plotDataLabelsText({x:e,y:i,text:t,i:s,j:o,parent:f,dataLabelsConfig:n,alwaysDrawDataLabel:!0,offsetCorrection:!0})),f}}]),Te),O=(o(Pe,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(t){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(M.escapeString(t),"']"))}},{key:"isSeriesHidden",value:function(t){var e=this.getSeriesByName(t),t=parseInt(e.getAttribute("data:realIndex"),10);return{isHidden:e.classList.contains("apexcharts-series-collapsed"),realIndex:t}}},{key:"addCollapsedClassToSeries",value:function(i,a){var t=this.w;function e(t){for(var e=0;e<t.length;e++)t[e].index===a&&i.node.classList.add("apexcharts-series-collapsed")}e(t.globals.collapsedSeries),e(t.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(t){t=this.isSeriesHidden(t);return this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,t.isHidden),t.isHidden}},{key:"showSeries",value:function(t){t=this.isSeriesHidden(t);t.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!0)}},{key:"hideSeries",value:function(t){t=this.isSeriesHidden(t);t.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!1)}},{key:"resetSeries",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],a=this.w,s=M.clone(a.globals.initialSeries);a.globals.previousPaths=[],i?(a.globals.collapsedSeries=[],a.globals.ancillaryCollapsedSeries=[],a.globals.collapsedSeriesIndices=[],a.globals.ancillaryCollapsedSeriesIndices=[]):s=this.emptyCollapsedSeries(s),a.config.series=s,t&&(e&&(a.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(s,a.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(t){for(var e=this.w,i=0;i<t.length;i++)-1<e.globals.collapsedSeriesIndices.indexOf(i)&&(t[i].data=[]);return t}},{key:"toggleSeriesOnHover",value:function(t,e){var i=this.w,a=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===t.type){var s=parseInt(e.getAttribute("rel"),10)-1,o=null,e=null;i.globals.axisCharts||"radialBar"===i.config.chart.type?i.globals.axisCharts?(o=i.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(s,"']")),e=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(s,"']"))):o=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(1+s,"']")):o=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(1+s,"'] path"));for(var r=0;r<a.length;r++)a[r].classList.add(this.legendInactiveClass);null!==o&&(i.globals.axisCharts||o.parentNode.classList.remove(this.legendInactiveClass),o.classList.remove(this.legendInactiveClass),null!==e&&e.classList.remove(this.legendInactiveClass))}else if("mouseout"===t.type)for(var n=0;n<a.length;n++)a[n].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(t,e){function i(t){for(var e=0;e<o.length;e++)o[e].classList[t](a.legendInactiveClass)}var a=this,s=this.w,o=s.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect");"mousemove"===t.type?(e=parseInt(e.getAttribute("rel"),10)-1,i("add"),function(t){for(var e=0;e<o.length;e++){var i=parseInt(o[e].getAttribute("val"),10);i>=t.from&&i<=t.to&&o[e].classList.remove(a.legendInactiveClass)}}(s.config.plotOptions.heatmap.colorScale.ranges[e])):"mouseout"===t.type&&i("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var a=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"asc",s=this.w,e=0;if(1<s.config.series.length)for(var i=s.config.series.map(function(t,e){var i=!1;return a&&(i="bar"===s.config.series[e].type||"column"===s.config.series[e].type),t.data&&0<t.data.length&&!i?e:-1}),o="asc"===t?0:i.length-1;"asc"===t?o<i.length:0<=o;"asc"===t?o++:o--)if(-1!==i[o]){e=i[o];break}return e}},{key:"getPreviousPaths",value:function(){var n=this.w;n.globals.previousPaths=[],["line","area","bar","rangebar","candlestick","radar"].forEach(function(t){for(var e=n.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series")),i=0;i<e.length;i++)!function(t,e,i){for(var a,s=t[e].childNodes,o={type:i,paths:[],realIndex:t[e].getAttribute("data:realIndex")},r=0;r<s.length;r++)s[r].hasAttribute("pathTo")&&(a=s[r].getAttribute("pathTo"),o.paths.push({d:a}));n.globals.previousPaths.push(o)}(e,i,t)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var t=n.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(n.config.chart.type," .apexcharts-series"));if(0<t.length)for(var e=0;e<t.length;e++)!function(t){for(var i=n.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(n.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(t,"'] rect")),a=[],e=0;e<i.length;e++)!function(e){var t=function(t){return i[e].getAttribute(t)},t={x:parseFloat(t("x")),y:parseFloat(t("y")),width:parseFloat(t("width")),height:parseFloat(t("height"))};a.push({rect:t,color:i[e].getAttribute("color")})}(e);n.globals.previousPaths.push(a)}(e);n.globals.axisCharts||(n.globals.previousPaths=n.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(t){var e=this.w,i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series"));if(0<i.length)for(var a=0;a<i.length;a++){for(var s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series[data\\:realIndex='").concat(a,"'] circle")),o=[],r=0;r<s.length;r++)o.push({x:s[r].getAttribute("cx"),y:s[r].getAttribute("cy"),r:s[r].getAttribute("r")});e.globals.previousPaths.push(o)}}},{key:"clearPreviousPaths",value:function(){var t=this.w;t.globals.previousPaths=[],t.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var t=this.w,e=t.config.noData,i=new z(this.ctx),a=t.globals.svgWidth/2,s=t.globals.svgHeight/2,o="middle";t.globals.noData=!0,t.globals.animationEnded=!0,"left"===e.align?(a=10,o="start"):"right"===e.align&&(a=t.globals.svgWidth-10,o="end"),"top"===e.verticalAlign?s=50:"bottom"===e.verticalAlign&&(s=t.globals.svgHeight-50),a+=e.offsetX,s=s+parseInt(e.style.fontSize,10)+2+e.offsetY,void 0!==e.text&&""!==e.text&&(e=i.drawText({x:a,y:s,text:e.text,textAnchor:o,fontSize:e.style.fontSize,fontFamily:e.style.fontFamily,foreColor:e.style.color,opacity:1,class:"apexcharts-text-nodata"}),t.globals.dom.Paper.add(e))}},{key:"setNullSeriesToZeroValues",value:function(t){for(var e=this.w,i=0;i<t.length;i++)if(0===t[i].length)for(var a=0;a<t[e.globals.maxValsInArrayIndex].length;a++)t[i].push(0);return t}},{key:"hasAllSeriesEqualX",value:function(){for(var t=!0,e=this.w,i=this.filteredSeriesX(),a=0;a<i.length-1;a++)if(i[a][0]!==i[a+1][0]){t=!1;break}return e.globals.allSeriesHasEqualX=t}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map(function(t){return 0<t.length?t:[]})}}]),Pe),W=(o(Le,[{key:"initVariables",value:function(t){var e=this.w;this.barCtx.series=t,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var i=0;i<t.length;i++)if(0<t[i].length&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=t[i].length),e.globals.isXNumeric)for(var a=0;a<t[i].length;a++)e.globals.seriesX[i][a]>e.globals.minX&&e.globals.seriesX[i][a]<e.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=e.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],this.barCtx.radiusOnSeriesNumber=t.length-1,e.globals.comboCharts||this.checkZeroSeries({series:t})}},{key:"initialPositions",value:function(){var t,e,i,a,s,o=this.w,r=o.globals.dataPoints;this.barCtx.isTimelineBar&&(r=o.globals.labels.length);var n,l,h,c=this.barCtx.seriesLen;return o.config.plotOptions.bar.rangeBarGroupRows&&(c=1),this.barCtx.isHorizontal?(i=(e=o.globals.gridHeight/r)/c,i=(i=o.globals.isXNumeric?(e=o.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen:i)*parseInt(this.barCtx.barOptions.barHeight,10)/100,s=this.barCtx.baseLineInvertedY+o.globals.padHorizontal+(this.barCtx.isReversed?o.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),t=(e-i*this.barCtx.seriesLen)/2):(l=o.globals.gridWidth/this.barCtx.visibleItems,h=(l=o.config.xaxis.convertedCatToNumeric?o.globals.gridWidth/o.globals.dataPoints:l)/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100,o.globals.isXNumeric&&(n=this.barCtx.xRatio,o.config.xaxis.convertedCatToNumeric&&(n=this.barCtx.initialXRatio),(h=(l=o.globals.minXDiff&&.5!==o.globals.minXDiff&&0<o.globals.minXDiff/n?o.globals.minXDiff/n:l)/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(h=1)),a=o.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?o.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),n=o.globals.padHorizontal+(l-h*this.barCtx.seriesLen)/2),{x:n,y:t,yDivision:e,xDivision:l,barHeight:i,barWidth:h,zeroH:a,zeroW:s}}},{key:"getPathFillColor",value:function(e,i,a,t){var s=this.w,o=new F(this.barCtx.ctx),r=null,n=this.barCtx.barOptions.distributed?a:i;return 0<this.barCtx.barOptions.colors.ranges.length&&this.barCtx.barOptions.colors.ranges.map(function(t){e[i][a]>=t.from&&e[i][a]<=t.to&&(r=t.color)}),s.config.series[i].data[a]&&s.config.series[i].data[a].fillColor&&(r=s.config.series[i].data[a].fillColor),o.fillPath({seriesNumber:this.barCtx.barOptions.distributed?n:t,dataPointIndex:a,color:r,value:e[i][a]})}},{key:"getStrokeWidth",value:function(t,e,i){var a=0,s=this.w;return void 0===this.barCtx.series[t][e]||null===this.barCtx.series[t][e]?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,s.config.stroke.show&&(this.barCtx.isNullValue||(a=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[i]:this.barCtx.strokeWidth)),a}},{key:"barBackground",value:function(t){var e=t.j,i=t.i,a=t.x1,s=t.x2,o=t.y1,r=t.y2,n=t.elSeries,l=this.w,h=new z(this.barCtx.ctx),t=new O(this.barCtx.ctx).getActiveConfigSeriesIndex();0<this.barCtx.barOptions.colors.backgroundBarColors.length&&t===i&&(e>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(e-=this.barCtx.barOptions.colors.backgroundBarColors.length),e=this.barCtx.barOptions.colors.backgroundBarColors[e],e=h.drawRect(void 0!==a?a:0,void 0!==o?o:0,void 0!==s?s:l.globals.gridWidth,void 0!==r?r:l.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,e,this.barCtx.barOptions.colors.backgroundBarOpacity),n.add(e),e.node.classList.add("apexcharts-backgroundBar"))}},{key:"getColumnPaths",value:function(t){var e=t.barWidth,i=t.barXPosition,a=t.yRatio,s=t.y1,o=t.y2,r=t.strokeWidth,n=t.series,l=t.realIndex,h=t.i,c=t.j,d=t.w,g=new z(this.barCtx.ctx);(r=Array.isArray(r)?r[l]:r)||(r=0);t=this.getRoundedBars(d,{barWidth:e,strokeWidth:r,yRatio:a,barXPosition:i,y1:s,y2:o},n,h,c),a=i,o=i+e,n=g.move(a,s),i=g.move(a,s),e=g.line(o-r,s);return 0<d.globals.previousPaths.length&&(i=this.barCtx.getPreviousPath(l,c,!1)),n=n+g.line(a,t.y2)+t.pathWithRadius+g.line(o-r,t.y2)+e+e+"z",i=i+g.line(a,s)+e+e+e+e+e+g.line(a,s),d.config.chart.stacked&&(this.barCtx.yArrj.push(t.y2),this.barCtx.yArrjF.push(Math.abs(s-t.y2)),this.barCtx.yArrjVal.push(this.barCtx.series[h][c])),{pathTo:n,pathFrom:i}}},{key:"getBarpaths",value:function(t){var e=t.barYPosition,i=t.barHeight,a=t.x1,s=t.x2,o=t.strokeWidth,r=t.series,n=t.realIndex,l=t.i,h=t.j,c=t.w,d=new z(this.barCtx.ctx);(o=Array.isArray(o)?o[n]:o)||(o=0);t=this.getRoundedBars(c,{barHeight:i,strokeWidth:o,barYPosition:e,x2:s,x1:a},r,l,h),s=d.move(a,e),r=d.move(a,e);0<c.globals.previousPaths.length&&(r=this.barCtx.getPreviousPath(n,h,!1));n=e,e+=i,i=d.line(a,e-o),s=s+d.line(t.x2,n)+t.pathWithRadius+d.line(t.x2,e-o)+i+i+"z",r=r+d.line(a,n)+i+i+i+i+i+d.line(a,n);return c.config.chart.stacked&&(this.barCtx.xArrj.push(t.x2),this.barCtx.xArrjF.push(Math.abs(a-t.x2)),this.barCtx.xArrjVal.push(this.barCtx.series[l][h])),{pathTo:s,pathFrom:r}}},{key:"getRoundedBars",value:function(t,e,i,a,s){var o=new z(this.barCtx.ctx),r=t.config.plotOptions.bar.borderRadius;if(t.config.chart.stacked&&1<i.length&&a!==this.barCtx.radiusOnSeriesNumber&&(r=0),this.barCtx.isHorizontal){var n="",l=e.x2;return Math.abs(e.x1-e.x2)<r&&(r=Math.abs(e.x1-e.x2)),void 0===i[a][s]&&null===i[a][s]||((t=this.barCtx.isReversed?0<i[a][s]:i[a][s]<0)&&(r*=-1),n=o.quadraticCurve((l-=r)+r,e.barYPosition,l+r,e.barYPosition+(t?-1*r:r))+o.line(l+r,e.barYPosition+e.barHeight-e.strokeWidth-(t?-1*r:r))+o.quadraticCurve(l+r,e.barYPosition+e.barHeight-e.strokeWidth,l,e.barYPosition+e.barHeight-e.strokeWidth)),{pathWithRadius:n,x2:l}}n="",l=e.y2;return Math.abs(e.y1-e.y2)<r&&(r=Math.abs(e.y1-e.y2)),void 0===i[a][s]&&null===i[a][s]||((s=i[a][s]<0)&&(r*=-1),n=o.quadraticCurve(e.barXPosition,(l+=r)-r,e.barXPosition+(s?-1*r:r),l-r)+o.line(e.barXPosition+e.barWidth-e.strokeWidth-(s?-1*r:r),l-r)+o.quadraticCurve(e.barXPosition+e.barWidth-e.strokeWidth,l-r,e.barXPosition+e.barWidth-e.strokeWidth,l)),{pathWithRadius:n,y2:l}}},{key:"checkZeroSeries",value:function(t){for(var e=t.series,i=this.w,a=0;a<e.length;a++){for(var s=0,o=0;o<e[i.globals.maxValsInArrayIndex].length;o++)s+=e[a][o];0===s&&this.barCtx.zeroSerieses.push(a)}for(var r=e.length-1;0<=r;r--)-1<this.barCtx.zeroSerieses.indexOf(r)&&r===this.radiusOnSeriesNumber&&--this.barCtx.radiusOnSeriesNumber;for(var n=e.length-1;0<=n;n--)-1<i.globals.collapsedSeriesIndices.indexOf(this.barCtx.radiusOnSeriesNumber)&&--this.barCtx.radiusOnSeriesNumber}},{key:"getXForValue",value:function(t,e){var i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2]?e:null;return i=null!=t?e+t/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?t/this.barCtx.invertedYRatio:0):i}},{key:"getYForValue",value:function(t,e){var i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2]?e:null;return i=null!=t?e-t/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?t/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0):i}},{key:"getGoalValues",value:function(i,a,s,t,e){var o=this,r=this.w,n=[];return r.globals.seriesGoals[t]&&r.globals.seriesGoals[t][e]&&Array.isArray(r.globals.seriesGoals[t][e])&&r.globals.seriesGoals[t][e].forEach(function(t){var e;n.push((l(e={},i,"x"===i?o.getXForValue(t.value,a,!1):o.getYForValue(t.value,s,!1)),l(e,"attrs",t),e))}),n}},{key:"drawGoalLine",value:function(t){var e=t.barXPosition,i=t.barYPosition,a=t.goalX,s=t.goalY,o=t.barWidth,r=t.barHeight,n=new z(this.barCtx.ctx),l=n.group({className:"apexcharts-bar-goals-groups"}),h=null;return this.barCtx.isHorizontal?Array.isArray(a)&&a.forEach(function(t){h=n.drawLine(t.x,i,t.x,i+r,t.attrs.strokeColor||void 0,0,t.attrs.strokeWidth||2),l.add(h)}):Array.isArray(s)&&s.forEach(function(t){h=n.drawLine(e,t.y,e+o,t.y,t.attrs.strokeColor||void 0,0,t.attrs.strokeWidth||2),l.add(h)}),l}}]),Le),B=(o(Ce,[{key:"draw",value:function(t,e){var i=this.w,a=new z(this.ctx),s=new P(this.ctx,i);t=s.getLogSeries(t),this.series=t,this.yRatio=s.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);var o=a.group({class:"apexcharts-bar-series apexcharts-plot-series"});i.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering.");for(var r=0,n=0;r<t.length;r++,n++){var l=void 0,h=void 0,c=[],d=[],g=i.globals.comboCharts?e[r]:r,u=a.group({class:"apexcharts-series",rel:r+1,seriesName:M.escapeString(i.globals.seriesNames[g]),"data:realIndex":g});this.ctx.series.addCollapsedClassToSeries(u,g),0<t[r].length&&(this.visibleI=this.visibleI+1);var p=0,f=0;1<this.yRatio.length&&(this.yaxisIndex=g),this.isReversed=i.config.yaxis[this.yaxisIndex]&&i.config.yaxis[this.yaxisIndex].reversed;var x=this.barHelpers.initialPositions(),h=x.y,p=x.barHeight,b=x.yDivision,m=x.zeroW,l=x.x,f=x.barWidth,v=x.xDivision,y=x.zeroH;this.horizontal||d.push(l+f/2);for(var w=a.group({class:"apexcharts-datalabels","data:realIndex":g}),k=a.group({class:"apexcharts-bar-goals-markers",style:"pointer-events: none"}),A=0;A<i.globals.dataPoints;A++){var S=this.barHelpers.getStrokeWidth(r,A,g),C=null,L={indexes:{i:r,j:A,realIndex:g,bc:n},x:l,y:h,strokeWidth:S,elSeries:u};this.isHorizontal?(C=this.drawBarPaths(T(T({},L),{},{barHeight:p,zeroW:m,yDivision:b})),f=this.series[r][A]/this.invertedYRatio):(C=this.drawColumnPaths(T(T({},L),{},{xDivision:v,barWidth:f,zeroH:y})),p=this.series[r][A]/this.yRatio[this.yaxisIndex]);L=this.barHelpers.drawGoalLine({barXPosition:C.barXPosition,barYPosition:C.barYPosition,goalX:C.goalX,goalY:C.goalY,barHeight:p,barWidth:f});L&&k.add(L),h=C.y,l=C.x,0<A&&d.push(l+f/2),c.push(h);L=this.barHelpers.getPathFillColor(t,r,A,g);this.renderSeries({realIndex:g,pathFill:L,j:A,i:r,pathFrom:C.pathFrom,pathTo:C.pathTo,strokeWidth:S,elSeries:u,x:l,y:h,series:t,barHeight:p,barWidth:f,elDataLabelsWrap:w,elGoalsMarkers:k,visibleSeries:this.visibleI,type:"bar"})}i.globals.seriesXvalues[g]=d,i.globals.seriesYvalues[g]=c,o.add(u)}return o}},{key:"renderSeries",value:function(t){var e=t.realIndex,i=t.pathFill,a=t.lineFill,s=t.j,o=t.i,r=t.pathFrom,n=t.pathTo,l=t.strokeWidth,h=t.elSeries,c=t.x,d=t.y,g=t.y1,u=t.y2,p=t.series,f=t.barHeight,x=t.barWidth,b=t.barYPosition,m=t.elDataLabelsWrap,v=t.elGoalsMarkers,y=t.visibleSeries,w=t.type,k=this.w,A=new z(this.ctx),a=a||(this.barOptions.distributed?k.globals.stroke.colors[s]:k.globals.stroke.colors[e]);k.config.series[o].data[s]&&k.config.series[o].data[s].strokeColor&&(a=k.config.series[o].data[s].strokeColor),this.isNullValue&&(i="none");t=s/k.config.chart.animations.animateGradually.delay*(k.config.chart.animations.speed/k.globals.dataPoints)/2.4,t=A.renderPaths({i:o,j:s,realIndex:e,pathFrom:r,pathTo:n,stroke:a,strokeWidth:l,strokeLineCap:k.config.stroke.lineCap,fill:i,animationDelay:t,initialSpeed:k.config.chart.animations.speed,dataChangeSpeed:k.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(w,"-area")});t.attr("clip-path","url(#gridRectMask".concat(k.globals.cuid,")"));w=k.config.forecastDataPoints;0<w.count&&s>=k.globals.dataPoints-w.count&&(t.node.setAttribute("stroke-dasharray",w.dashArray),t.node.setAttribute("stroke-width",w.strokeWidth),t.node.setAttribute("fill-opacity",w.fillOpacity)),void 0!==g&&void 0!==u&&(t.attr("data-range-y1",g),t.attr("data-range-y2",u)),new C(this.ctx).setSelectionFilter(t,e,s),h.add(t);y=new N(this).handleBarDataLabels({x:c,y:d,y1:g,y2:u,i:o,j:s,series:p,realIndex:e,barHeight:f,barWidth:x,barYPosition:b,renderedPath:t,visibleSeries:y});return null!==y&&m.add(y),h.add(m),v&&h.add(v),h}},{key:"drawBarPaths",value:function(t){var e=t.indexes,i=t.barHeight,a=t.strokeWidth,s=t.zeroW,o=(t.x,t.y),r=t.yDivision,n=t.elSeries,l=this.w,h=e.i,c=e.j,t=(o=l.globals.isXNumeric?(l.globals.seriesX[h][c]-l.globals.minX)/this.invertedXRatio-i:o)+i*this.visibleI,d=this.barHelpers.getXForValue(this.series[h][c],s),e=this.barHelpers.getBarpaths({barYPosition:t,barHeight:i,x1:s,x2:d,strokeWidth:a,series:this.series,realIndex:e.realIndex,i:h,j:c,w:l});return l.globals.isXNumeric||(o+=r),this.barHelpers.barBackground({j:c,i:h,y1:t-i*this.visibleI,y2:i*this.seriesLen,elSeries:n}),{pathTo:e.pathTo,pathFrom:e.pathFrom,x:d,y:o,goalX:this.barHelpers.getGoalValues("x",s,null,h,c),barYPosition:t}}},{key:"drawColumnPaths",value:function(t){var e=t.indexes,i=t.x,a=(t.y,t.xDivision),s=t.barWidth,o=t.zeroH,r=t.strokeWidth,n=t.elSeries,l=this.w,h=e.realIndex,c=e.i,d=e.j,t=e.bc;l.globals.isXNumeric&&(l.globals.seriesX[g=h].length||(g=l.globals.maxValsInArrayIndex),i=(l.globals.seriesX[g][d]-l.globals.minX)/this.xRatio-s*this.seriesLen/2);var g=i+s*this.visibleI,u=this.barHelpers.getYForValue(this.series[c][d],o),e=this.barHelpers.getColumnPaths({barXPosition:g,barWidth:s,y1:o,y2:u,strokeWidth:r,series:this.series,realIndex:e.realIndex,i:c,j:d,w:l});return l.globals.isXNumeric||(i+=a),this.barHelpers.barBackground({bc:t,j:d,i:c,x1:g-r/2-s*this.visibleI,x2:s*this.seriesLen+r/2,elSeries:n}),{pathTo:e.pathTo,pathFrom:e.pathFrom,x:i,y:u,goalY:this.barHelpers.getGoalValues("y",null,o,c,d),barXPosition:g}}},{key:"getPreviousPath",value:function(t,e){for(var i,a=this.w,s=0;s<a.globals.previousPaths.length;s++){var o=a.globals.previousPaths[s];o.paths&&0<o.paths.length&&parseInt(o.realIndex,10)===parseInt(t,10)&&void 0!==a.globals.previousPaths[s].paths[e]&&(i=a.globals.previousPaths[s].paths[e].d)}return i}}]),Ce),V=(o(Se,[{key:"isValidDate",value:function(t){return!isNaN(this.parseDate(t))}},{key:"getTimeStamp",value:function(t){return Date.parse(t)?(this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toISOString().substr(0,25)):new Date(t)).getTime():t}},{key:"getDate",value:function(t){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toUTCString()):new Date(t)}},{key:"parseDate",value:function(t){var e=Date.parse(t);if(!isNaN(e))return this.getTimeStamp(t);t=Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(t)}},{key:"parseDateWithTimezone",value:function(t){return Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(t,e){var i=this.w.globals.locale,a=this.w.config.xaxis.labels.datetimeUTC,s=["\0"].concat(g(i.months)),o=[""].concat(g(i.shortMonths)),r=[""].concat(g(i.days)),n=[""].concat(g(i.shortDays));function l(t,e){var i=t+"";for(e=e||2;i.length<e;)i="0"+i;return i}var h=a?t.getUTCFullYear():t.getFullYear();e=(e=(e=e.replace(/(^|[^\\])yyyy+/g,"$1"+h)).replace(/(^|[^\\])yy/g,"$1"+h.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+h);var c=(a?t.getUTCMonth():t.getMonth())+1;e=(e=(e=(e=e.replace(/(^|[^\\])MMMM+/g,"$1"+s[0])).replace(/(^|[^\\])MMM/g,"$1"+o[0])).replace(/(^|[^\\])MM/g,"$1"+l(c))).replace(/(^|[^\\])M/g,"$1"+c);var d=a?t.getUTCDate():t.getDate();e=(e=(e=(e=e.replace(/(^|[^\\])dddd+/g,"$1"+r[0])).replace(/(^|[^\\])ddd/g,"$1"+n[0])).replace(/(^|[^\\])dd/g,"$1"+l(d))).replace(/(^|[^\\])d/g,"$1"+d);i=a?t.getUTCHours():t.getHours(),h=12<i?i-12:0===i?12:i;e=(e=(e=(e=e.replace(/(^|[^\\])HH+/g,"$1"+l(i))).replace(/(^|[^\\])H/g,"$1"+i)).replace(/(^|[^\\])hh+/g,"$1"+l(h))).replace(/(^|[^\\])h/g,"$1"+h);d=a?t.getUTCMinutes():t.getMinutes();e=(e=e.replace(/(^|[^\\])mm+/g,"$1"+l(d))).replace(/(^|[^\\])m/g,"$1"+d);h=a?t.getUTCSeconds():t.getSeconds();e=(e=e.replace(/(^|[^\\])ss+/g,"$1"+l(h))).replace(/(^|[^\\])s/g,"$1"+h);d=a?t.getUTCMilliseconds():t.getMilliseconds();e=e.replace(/(^|[^\\])fff+/g,"$1"+l(d,3)),d=Math.round(d/10),e=e.replace(/(^|[^\\])ff/g,"$1"+l(d));d=Math.round(d/10),h=i<12?"AM":"PM";e=(e=(e=e.replace(/(^|[^\\])f/g,"$1"+d)).replace(/(^|[^\\])TT+/g,"$1"+h)).replace(/(^|[^\\])T/g,"$1"+h.charAt(0));i=h.toLowerCase();e=(e=e.replace(/(^|[^\\])tt+/g,"$1"+i)).replace(/(^|[^\\])t/g,"$1"+i.charAt(0));d=-t.getTimezoneOffset(),h=a||!d?"Z":0<d?"+":"-";a||(i=(d=Math.abs(d))%60,h+=l(Math.floor(d/60))+":"+l(i)),e=e.replace(/(^|[^\\])K/g,"$1"+h);t=(a?t.getUTCDay():t.getDay())+1;return(e=(e=(e=(e=e.replace(new RegExp(r[0],"g"),r[t])).replace(new RegExp(n[0],"g"),n[t])).replace(new RegExp(s[0],"g"),s[c])).replace(new RegExp(o[0],"g"),o[c])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(t,e,i){var a=this.w;void 0!==a.config.xaxis.min&&(t=a.config.xaxis.min),void 0!==a.config.xaxis.max&&(e=a.config.xaxis.max);t=this.getDate(t),e=this.getDate(e),t=this.formatDate(t,"yyyy MM dd HH mm ss fff").split(" "),e=this.formatDate(e,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(t[6],10),maxMillisecond:parseInt(e[6],10),minSecond:parseInt(t[5],10),maxSecond:parseInt(e[5],10),minMinute:parseInt(t[4],10),maxMinute:parseInt(e[4],10),minHour:parseInt(t[3],10),maxHour:parseInt(e[3],10),minDate:parseInt(t[2],10),maxDate:parseInt(e[2],10),minMonth:parseInt(t[1],10)-1,maxMonth:parseInt(e[1],10)-1,minYear:parseInt(t[0],10),maxYear:parseInt(e[0],10)}}},{key:"isLeapYear",value:function(t){return t%4==0&&t%100!=0||t%400==0}},{key:"calculcateLastDaysOfMonth",value:function(t,e,i){return this.determineDaysOfMonths(t,e)-i}},{key:"determineDaysOfYear",value:function(t){var e=365;return e=this.isLeapYear(t)?366:e}},{key:"determineRemainingDaysOfYear",value:function(t,e,i){i=this.daysCntOfYear[e]+i;return 1<e&&this.isLeapYear()&&i++,i}},{key:"determineDaysOfMonths",value:function(t,e){var i=30;return t=M.monthMod(t),!0==-1<this.months30.indexOf(t)?2===t&&(i=this.isLeapYear(e)?29:28):(this.months31.indexOf(t),i=31),i}}]),Se),G=function(){n(e,B);var t=c(e);function e(){return s(this,e),t.apply(this,arguments)}return o(e,[{key:"draw",value:function(t,e){var i=this.w,a=new z(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=t,this.seriesRangeStart=i.globals.seriesRangeStart,this.seriesRangeEnd=i.globals.seriesRangeEnd,this.barHelpers.initVariables(t);for(var s=a.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),o=0;o<t.length;o++){var r,n=void 0,l=void 0,h=i.globals.comboCharts?e[o]:o,c=a.group({class:"apexcharts-series",seriesName:M.escapeString(i.globals.seriesNames[h]),rel:o+1,"data:realIndex":h});0<t[o].length&&(this.visibleI=this.visibleI+1);var d=0,g=0;1<this.yRatio.length&&(this.yaxisIndex=h);var u=this.barHelpers.initialPositions();l=u.y,r=u.zeroW,n=u.x;for(var g=u.barWidth,p=u.xDivision,f=u.zeroH,x=a.group({class:"apexcharts-datalabels","data:realIndex":h}),b=a.group({class:"apexcharts-rangebar-goals-markers",style:"pointer-events: none"}),m=0;m<i.globals.dataPoints;m++){var v=this.barHelpers.getStrokeWidth(o,m,h),y=this.seriesRangeStart[o][m],w=this.seriesRangeEnd[o][m],k=null,A=null,S={x:n,y:l,strokeWidth:v,elSeries:c},C=u.yDivision;if(d=u.barHeight,this.isHorizontal){A=l+d*this.visibleI;var L=this.seriesLen,L=(C-d*(L=i.config.plotOptions.bar.rangeBarGroupRows?1:L))/2;if(void 0===i.config.series[o].data[m])break;this.isTimelineBar&&i.config.series[o].data[m].x&&(d=(P=this.detectOverlappingBars({i:o,j:m,barYPosition:A,srty:L,barHeight:d,yDivision:C,initPositions:u})).barHeight,A=P.barYPosition),g=(k=this.drawRangeBarPaths(T({indexes:{i:o,j:m,realIndex:h},barHeight:d,barYPosition:A,zeroW:r,yDivision:C,y1:y,y2:w},S))).barWidth}else d=(k=this.drawRangeColumnPaths(T({indexes:{i:o,j:m,realIndex:h},zeroH:f,barWidth:g,xDivision:p},S))).barHeight;var P=this.barHelpers.drawGoalLine({barXPosition:k.barXPosition,barYPosition:A,goalX:k.goalX,goalY:k.goalY,barHeight:d,barWidth:g});P&&b.add(P);l=k.y,n=k.x,S=this.barHelpers.getPathFillColor(t,o,m,h),P=i.globals.stroke.colors[h];this.renderSeries({realIndex:h,pathFill:S,lineFill:P,j:m,i:o,x:n,y:l,y1:y,y2:w,pathFrom:k.pathFrom,pathTo:k.pathTo,strokeWidth:v,elSeries:c,series:t,barHeight:d,barYPosition:A,barWidth:g,elDataLabelsWrap:x,elGoalsMarkers:b,visibleSeries:this.visibleI,type:"rangebar"})}s.add(c)}return s}},{key:"detectOverlappingBars",value:function(t){var e=t.i,i=t.j,a=t.barYPosition,s=t.srty,o=t.barHeight,r=t.yDivision,n=t.initPositions,l=this.w,h=[],c=l.config.series[e].data[i].rangeName,d=l.config.series[e].data[i].x,t=l.globals.labels.indexOf(d),i=l.globals.seriesRangeBarTimeline[e].findIndex(function(t){return t.x===d&&0<t.overlaps.length}),a=l.config.plotOptions.bar.rangeBarGroupRows?s+r*t:s+o*this.visibleI+r*t;return{barYPosition:a=-1<i&&!l.config.plotOptions.bar.rangeBarOverlap&&-1<(h=l.globals.seriesRangeBarTimeline[e][i].overlaps).indexOf(c)?(o=n.barHeight/h.length)*this.visibleI+r*(100-parseInt(this.barOptions.barHeight,10))/100/2+o*(this.visibleI+h.indexOf(c))+r*t:a,barHeight:o}}},{key:"drawRangeColumnPaths",value:function(t){var e=t.indexes,i=t.x,a=(t.strokeWidth,t.xDivision),s=t.barWidth,o=t.zeroH,r=this.w,n=e.i,l=e.j,h=this.yRatio[this.yaxisIndex],c=e.realIndex,d=this.getRangeValue(c,l),g=Math.min(d.start,d.end),t=Math.max(d.start,d.end),d=(i=r.globals.isXNumeric?(r.globals.seriesX[n][l]-r.globals.minX)/this.xRatio-s/2:i)+s*this.visibleI;void 0===this.series[n][l]||null===this.series[n][l]?g=o:(g=o-g/h,t=o-t/h);h=Math.abs(t-g),c=this.barHelpers.getColumnPaths({barXPosition:d,barWidth:s,y1:g,y2:t,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:e.realIndex,i:c,j:l,w:r});return r.globals.isXNumeric||(i+=a),{pathTo:c.pathTo,pathFrom:c.pathFrom,barHeight:h,x:i,y:t,goalY:this.barHelpers.getGoalValues("y",null,o,n,l),barXPosition:d}}},{key:"drawRangeBarPaths",value:function(t){var e=t.indexes,i=t.y,a=t.y1,s=t.y2,o=t.yDivision,r=t.barHeight,n=t.barYPosition,l=t.zeroW,h=this.w,t=l+a/this.invertedYRatio,a=l+s/this.invertedYRatio,s=Math.abs(a-t),t=this.barHelpers.getBarpaths({barYPosition:n,barHeight:r,x1:t,x2:a,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:e.realIndex,realIndex:e.realIndex,j:e.j,w:h});return h.globals.isXNumeric||(i+=o),{pathTo:t.pathTo,pathFrom:t.pathFrom,barWidth:s,x:a,goalX:this.barHelpers.getGoalValues("x",l,null,e.realIndex,e.j),y:i}}},{key:"getRangeValue",value:function(t,e){var i=this.w;return{start:i.globals.seriesRangeStart[t][e],end:i.globals.seriesRangeEnd[t][e]}}},{key:"getTooltipValues",value:function(t){var e=t.ctx,i=t.seriesIndex,a=t.dataPointIndex,s=t.y1,o=t.y2,r=t.w,n=r.globals.seriesRangeStart[i][a],l=r.globals.seriesRangeEnd[i][a],h=r.globals.labels[a],c=r.config.series[i].name||"",d=r.config.tooltip.y.formatter,g=r.config.tooltip.y.title.formatter,t={w:r,seriesIndex:i,dataPointIndex:a,start:n,end:l};"function"==typeof g&&(c=g(c,t)),Number.isFinite(s)&&Number.isFinite(o)&&(n=s,l=o,r.config.series[i].data[a].x&&(h=r.config.series[i].data[a].x+":"),"function"==typeof d&&(h=d(h,t)));d="",t="",i=r.globals.colors[i];return t=void 0===r.config.tooltip.x.formatter?"datetime"===r.config.xaxis.type?(d=(e=new V(e)).formatDate(e.getDate(n),r.config.tooltip.x.format),e.formatDate(e.getDate(l),r.config.tooltip.x.format)):(d=n,l):(d=r.config.tooltip.x.formatter(n),r.config.tooltip.x.formatter(l)),{start:n,end:l,startVal:d,endVal:t,ylabel:h,color:i,seriesName:c}}},{key:"buildCustomTooltipHTML",value:function(t){return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+t.color+'">'+(t.seriesName||"")+'</span></div><div> <span class="category">'+t.ylabel+' </span> <span class="value start-value">'+t.start+'</span> <span class="separator">-</span> <span class="value end-value">'+t.end+"</span></div></div>"}}]),e}(),_=(o(Ae,[{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(t){return this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0,M.extend(t,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"candlestick",value:function(){var a=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var e=t.seriesIndex,i=t.dataPointIndex,t=t.w;return a._getBoxTooltip(t,e,i,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var a=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var e=t.seriesIndex,i=t.dataPointIndex,t=t.w;return a._getBoxTooltip(t,e,i,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(t,e){e.ctx;var i=e.seriesIndex,a=e.dataPointIndex,s=e.w,e=s.globals.seriesRangeStart[i][a];return s.globals.seriesRangeEnd[i][a]-e},background:{enabled:!1},style:{colors:["#fff"]}},tooltip:{shared:!1,followCursor:!0,custom:function(t){return t.w.config.plotOptions&&t.w.config.plotOptions.bar&&t.w.config.plotOptions.bar.horizontal?(i=new G((e=t).ctx,null),a=i.getTooltipValues(e),s=a.color,o=a.seriesName,r=a.ylabel,e=a.startVal,a=a.endVal,i.buildCustomTooltipHTML({color:s,seriesName:o,ylabel:r,start:e,end:a})):(o=new G((s=t).ctx,null),r=o.getTooltipValues(s),e=r.color,a=r.seriesName,t=r.ylabel,s=r.start,r=r.end,o.buildCustomTooltipHTML({color:e,seriesName:a,ylabel:t,start:s,end:r}));var e,i,a,s,o,r}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"area",value:function(){return{stroke:{width:4},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"brush",value:function(t){return M.extend(t,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(i){i.dataLabels=i.dataLabels||{},i.dataLabels.formatter=i.dataLabels.formatter||void 0;var t=i.dataLabels.formatter;return i.yaxis.forEach(function(t,e){i.yaxis[e].min=0,i.yaxis[e].max=100}),"bar"===i.chart.type&&(i.dataLabels.formatter=t||function(t){return"number"==typeof t&&t?t.toFixed(0)+"%":t}),i}},{key:"convertCatToNumeric",value:function(t){return t.xaxis.convertedCatToNumeric=!0,t}},{key:"convertCatToNumericXaxis",value:function(t,e,i){t.xaxis.type="numeric",t.xaxis.labels=t.xaxis.labels||{},t.xaxis.labels.formatter=t.xaxis.labels.formatter||function(t){return M.isNumber(t)?Math.floor(t):t};var a=t.xaxis.labels.formatter,s=t.xaxis.categories&&t.xaxis.categories.length?t.xaxis.categories:t.labels;return(s=i&&i.length?i.map(function(t){return Array.isArray(t)?t:String(t)}):s)&&s.length&&(t.xaxis.labels.formatter=function(t){return M.isNumber(t)?a(s[Math.floor(t)-1]):a(t)}),t.xaxis.categories=[],t.labels=[],t.xaxis.tickAmount=t.xaxis.tickAmount||"dataPoints",t}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return this.opts.yaxis[0].tickAmount=this.opts.yaxis[0].tickAmount||6,{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY||6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(t){return t},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(t,e,i,a,s){var o=t.globals.seriesCandleO[e][i],r=t.globals.seriesCandleH[e][i],n=t.globals.seriesCandleM[e][i],l=t.globals.seriesCandleL[e][i],h=t.globals.seriesCandleC[e][i];return t.config.series[e].type&&t.config.series[e].type!==s?'<div class="apexcharts-custom-tooltip">\n          '.concat(t.config.series[e].name||"series-"+(e+1),": <strong>").concat(t.globals.series[e][i],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(t.config.chart.type,'">')+"<div>".concat(a[0],': <span class="value">')+o+"</span></div>"+"<div>".concat(a[1],': <span class="value">')+r+"</span></div>"+(n?"<div>".concat(a[2],': <span class="value">')+n+"</span></div>":"")+"<div>".concat(a[3],': <span class="value">')+l+"</span></div>"+"<div>".concat(a[4],': <span class="value">')+h+"</span></div></div>"}}]),Ae),j=(o(ke,[{key:"init",value:function(t){var e=t.responsiveOverride,i=this.opts,a=new X,s=new _(i);this.chartType=i.chart.type,"histogram"===this.chartType&&(i.chart.type="bar",i=M.extend({plotOptions:{bar:{columnWidth:"99.99%"}}},i)),i=this.extendYAxis(i);var i=this.extendAnnotations(i),o=a.init(),t={};i&&"object"===v(i)&&(a={},a=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","histogram","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(i.chart.type)?s[i.chart.type]():s.line(),i.chart.brush&&i.chart.brush.enabled&&(a=s.brush(a)),i.chart.stacked&&"100%"===i.chart.stackType&&(i=s.stacked100(i)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(i),i.xaxis=i.xaxis||window.Apex.xaxis||{},e||(i.xaxis.convertedCatToNumeric=!1),((i=this.checkForCatToNumericXAxis(this.chartType,a,i)).chart.sparkline&&i.chart.sparkline.enabled||window.Apex.chart&&window.Apex.chart.sparkline&&window.Apex.chart.sparkline.enabled)&&(a=s.sparkline(a)),t=M.extend(o,a));t=M.extend(t,window.Apex),o=M.extend(t,i);return this.handleUserInputErrors(o)}},{key:"checkForCatToNumericXAxis",value:function(t,e,i){var a=new _(i),s="bar"===t&&i.plotOptions&&i.plotOptions.bar&&i.plotOptions.bar.horizontal,o="datetime"!==i.xaxis.type&&"numeric"!==i.xaxis.type,e=i.xaxis.tickPlacement||e.xaxis&&e.xaxis.tickPlacement;return i=!s&&!("pie"===t||"polarArea"===t||"donut"===t||"radar"===t||"radialBar"===t||"heatmap"===t)&&o&&"between"!==e?a.convertCatToNumeric(i):i}},{key:"extendYAxis",value:function(i,t){var a=new X;(void 0===i.yaxis||!i.yaxis||Array.isArray(i.yaxis)&&0===i.yaxis.length)&&(i.yaxis={}),i.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(i.yaxis=M.extend(i.yaxis,window.Apex.yaxis)),i.yaxis.constructor!==Array?i.yaxis=[M.extend(a.yAxis,i.yaxis)]:i.yaxis=M.extendArray(i.yaxis,a.yAxis);var e=!1;i.yaxis.forEach(function(t){t.logarithmic&&(e=!0)});var s=i.series;return t&&!s&&(s=t.config.series),e&&s.length!==i.yaxis.length&&s.length&&(i.yaxis=s.map(function(t,e){if(t.name||(s[e].name="series-".concat(e+1)),i.yaxis[e])return i.yaxis[e].seriesName=s[e].name,i.yaxis[e];e=M.extend(a.yAxis,i.yaxis[0]);return e.show=!1,e})),e&&1<s.length&&s.length!==i.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes. Please make sure to equalize both."),i}},{key:"extendAnnotations",value:function(t){return void 0===t.annotations&&(t.annotations={},t.annotations.yaxis=[],t.annotations.xaxis=[],t.annotations.points=[]),t=this.extendYAxisAnnotations(t),t=this.extendXAxisAnnotations(t),this.extendPointAnnotations(t)}},{key:"extendYAxisAnnotations",value:function(t){var e=new X;return t.annotations.yaxis=M.extendArray(void 0!==t.annotations.yaxis?t.annotations.yaxis:[],e.yAxisAnnotation),t}},{key:"extendXAxisAnnotations",value:function(t){var e=new X;return t.annotations.xaxis=M.extendArray(void 0!==t.annotations.xaxis?t.annotations.xaxis:[],e.xAxisAnnotation),t}},{key:"extendPointAnnotations",value:function(t){var e=new X;return t.annotations.points=M.extendArray(void 0!==t.annotations.points?t.annotations.points:[],e.pointAnnotation),t}},{key:"checkForDarkTheme",value:function(t){t.theme&&"dark"===t.theme.mode&&(t.tooltip||(t.tooltip={}),"light"!==t.tooltip.theme&&(t.tooltip.theme="dark"),t.chart.foreColor||(t.chart.foreColor="#f6f7f8"),t.chart.background||(t.chart.background="#424242"),t.theme.palette||(t.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(t){if(t.tooltip.shared&&t.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===t.chart.type&&t.plotOptions.bar.horizontal){if(1<t.yaxis.length)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");t.yaxis[0].reversed&&(t.yaxis[0].opposite=!0),t.xaxis.tooltip.enabled=!1,t.yaxis[0].tooltip.enabled=!1,t.chart.zoom.enabled=!1}return"bar"!==t.chart.type&&"rangeBar"!==t.chart.type||t.tooltip.shared&&"barWidth"===t.xaxis.crosshairs.width&&1<t.series.length&&(t.xaxis.crosshairs.width="tickWidth"),"candlestick"!==t.chart.type&&"boxPlot"!==t.chart.type||t.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(t.chart.type," chart is not supported.")),t.yaxis[0].reversed=!1),t.chart.group&&0===t.yaxis[0].labels.minWidth&&console.warn("It looks like you have multiple charts in synchronization. You must provide yaxis.labels.minWidth which must be EQUAL for all grouped charts to prevent incorrect behaviour."),Array.isArray(t.stroke.width)&&"line"!==t.chart.type&&"area"!==t.chart.type&&(console.warn("stroke.width option accepts array only for line and area charts. Reverted back to Number"),t.stroke.width=t.stroke.width[0]),t}}]),ke),U=(o(we,[{key:"initGlobalVars",value:function(t){t.series=[],t.seriesCandleO=[],t.seriesCandleH=[],t.seriesCandleM=[],t.seriesCandleL=[],t.seriesCandleC=[],t.seriesRangeStart=[],t.seriesRangeEnd=[],t.seriesRangeBarTimeline=[],t.seriesPercent=[],t.seriesGoals=[],t.seriesX=[],t.seriesZ=[],t.seriesNames=[],t.seriesTotals=[],t.seriesLog=[],t.seriesColors=[],t.stackedSeriesTotals=[],t.seriesXvalues=[],t.seriesYvalues=[],t.labels=[],t.categoryLabels=[],t.timescaleLabels=[],t.noLabelsProvided=!1,t.resizeTimer=null,t.selectionResizeTimer=null,t.delayedElements=[],t.pointsArray=[],t.dataLabelsRects=[],t.isXNumeric=!1,t.xaxisLabelsCount=0,t.skipLastTimelinelabel=!1,t.skipFirstTimelinelabel=!1,t.isDataXYZ=!1,t.isMultiLineX=!1,t.isMultipleYAxis=!1,t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE,t.minYArr=[],t.maxYArr=[],t.maxX=-Number.MAX_VALUE,t.minX=Number.MAX_VALUE,t.initialMaxX=-Number.MAX_VALUE,t.initialMinX=Number.MAX_VALUE,t.maxDate=0,t.minDate=Number.MAX_VALUE,t.minZ=Number.MAX_VALUE,t.maxZ=-Number.MAX_VALUE,t.minXDiff=Number.MAX_VALUE,t.yAxisScale=[],t.xAxisScale=null,t.xAxisTicksPositions=[],t.yLabelsCoords=[],t.yTitleCoords=[],t.barPadForNumericAxis=0,t.padHorizontal=0,t.xRange=0,t.yRange=[],t.zRange=0,t.dataPoints=0,t.xTickAmount=0}},{key:"globalVars",value:function(t){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:t.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.zoom&&t.chart.zoom.enabled,panEnabled:"pan"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.pan,selectionEnabled:"selection"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(t){var e=this.globalVars(t);return this.initGlobalVars(e),e.initialConfig=M.extend({},t),e.initialSeries=M.clone(t.series),e.lastXAxis=M.clone(e.initialConfig.xaxis),e.lastYAxis=M.clone(e.initialConfig.yaxis),e}}]),we),q=(o(ye,[{key:"init",value:function(){var t=new j(this.opts).init({responsiveOverride:!1});return{config:t,globals:(new U).init(t)}}}]),ye),Z=(o(ve,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var t=this.w.config.series.slice(),e=new O(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&0<t[this.activeSeriesIndex].data.length&&null!==t[this.activeSeriesIndex].data[0]&&void 0!==t[this.activeSeriesIndex].data[0].x&&null!==t[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var t=this.w.config.series.slice(),e=new O(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&0<t[this.activeSeriesIndex].data.length&&void 0!==t[this.activeSeriesIndex].data[0]&&null!==t[this.activeSeriesIndex].data[0]&&t[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(t,e){for(var i,a=this.w.config,s=this.w.globals,o="boxPlot"===a.chart.type||"boxPlot"===a.series[e].type,r=0;r<t[e].data.length;r++)void 0!==t[e].data[r][1]&&(Array.isArray(t[e].data[r][1])&&4===t[e].data[r][1].length&&!o?this.twoDSeries.push(M.parseNumber(t[e].data[r][1][3])):5<=t[e].data[r].length?this.twoDSeries.push(M.parseNumber(t[e].data[r][4])):this.twoDSeries.push(M.parseNumber(t[e].data[r][1])),s.dataFormatXNumeric=!0),"datetime"===a.xaxis.type?(i=new Date(t[e].data[r][0]),i=new Date(i).getTime(),this.twoDSeriesX.push(i)):this.twoDSeriesX.push(t[e].data[r][0]);for(var n=0;n<t[e].data.length;n++)void 0!==t[e].data[n][2]&&(this.threeDSeries.push(t[e].data[n][2]),s.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(t,e){var i=this.w.config,a=this.w.globals,s=new V(this.ctx),o=e;-1<a.collapsedSeriesIndices.indexOf(e)&&(o=this.activeSeriesIndex);for(var r=0;r<t[e].data.length;r++)void 0!==t[e].data[r].y&&(Array.isArray(t[e].data[r].y)?this.twoDSeries.push(M.parseNumber(t[e].data[r].y[t[e].data[r].y.length-1])):this.twoDSeries.push(M.parseNumber(t[e].data[r].y))),void 0!==t[e].data[r].goals&&Array.isArray(t[e].data[r].goals)?(void 0===this.seriesGoals[e]&&(this.seriesGoals[e]=[]),this.seriesGoals[e].push(t[e].data[r].goals)):(void 0===this.seriesGoals[e]&&(this.seriesGoals[e]=[]),this.seriesGoals[e].push(null));for(var n=0;n<t[o].data.length;n++){var l="string"==typeof t[o].data[n].x,h=Array.isArray(t[o].data[n].x),c=!h&&!!s.isValidDate(t[o].data[n].x.toString());l||c?l||i.xaxis.convertedCatToNumeric?(l=a.isBarHorizontal&&a.isRangeData,"datetime"!==i.xaxis.type||l?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[o].data[n].x)):this.twoDSeriesX.push(s.parseDate(t[o].data[n].x))):"datetime"===i.xaxis.type?this.twoDSeriesX.push(s.parseDate(t[o].data[n].x.toString())):(a.dataFormatXNumeric=!0,a.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(t[o].data[n].x))):(h?this.fallbackToCategory=!0:(a.isXNumeric=!0,a.dataFormatXNumeric=!0),this.twoDSeriesX.push(t[o].data[n].x))}if(t[e].data[0]&&void 0!==t[e].data[0].z){for(var d=0;d<t[e].data.length;d++)this.threeDSeries.push(t[e].data[d].z);a.isDataXYZ=!0}}},{key:"handleRangeData",value:function(t,e){var i=this.w.config,a=this.w.globals,s={};return this.isFormat2DArray()?s=this.handleRangeDataFormat("array",t,e):this.isFormatXY()&&(s=this.handleRangeDataFormat("xy",t,e)),a.seriesRangeStart.push(s.start),a.seriesRangeEnd.push(s.end),"datetime"===i.xaxis.type&&a.seriesRangeBarTimeline.push(s.rangeUniques),a.seriesRangeBarTimeline.forEach(function(t,e){t&&t.forEach(function(r,t){r.y.forEach(function(t,e){for(var i,a,s,o=0;o<r.y.length;o++)e!==o&&(i=t.y1,a=t.y2,s=r.y[o].y1,i<=r.y[o].y2&&s<=a&&(r.overlaps.indexOf(t.rangeName)<0&&r.overlaps.push(t.rangeName),r.overlaps.indexOf(r.y[o].rangeName)<0&&r.overlaps.push(r.y[o].rangeName)))})})}),s}},{key:"handleCandleStickBoxData",value:function(t,e){var i=this.w.globals,a={};return this.isFormat2DArray()?a=this.handleCandleStickBoxDataFormat("array",t,e):this.isFormatXY()&&(a=this.handleCandleStickBoxDataFormat("xy",t,e)),i.seriesCandleO[e]=a.o,i.seriesCandleH[e]=a.h,i.seriesCandleM[e]=a.m,i.seriesCandleL[e]=a.l,i.seriesCandleC[e]=a.c,a}},{key:"handleRangeDataFormat",value:function(t,s,o){var r=[],n=[],l=s[o].data.filter(function(e,t,i){return t===i.findIndex(function(t){return t.x===e.x})}).map(function(t,e){return{x:t.x,overlaps:[],y:[]}}),e="Please provide [Start, End] values in valid format. Read more https://apexcharts.com/docs/series/#rangecharts",i=new O(this.ctx).getActiveConfigSeriesIndex();if("array"===t){if(2!==s[i].data[0][1].length)throw new Error(e);for(var a=0;a<s[o].data.length;a++)r.push(s[o].data[a][1][0]),n.push(s[o].data[a][1][1])}else if("xy"===t){if(2!==s[i].data[0].y.length)throw new Error(e);for(var h=0;h<s[o].data.length;h++)!function(t){var e=M.randomId(),i=s[o].data[t].x,a={y1:s[o].data[t].y[0],y2:s[o].data[t].y[1],rangeName:e};s[o].data[t].rangeName=e;e=l.findIndex(function(t){return t.x===i});l[e].y.push(a),r.push(a.y1),n.push(a.y2)}(h)}return{start:r,end:n,rangeUniques:l}}},{key:"handleCandleStickBoxDataFormat",value:function(t,e,i){var a=this.w,s="boxPlot"===a.config.chart.type||"boxPlot"===a.config.series[i].type,o=[],r=[],n=[],l=[],h=[];if("array"===t)if(s&&6===e[i].data[0].length||!s&&5===e[i].data[0].length)for(var c=0;c<e[i].data.length;c++)o.push(e[i].data[c][1]),r.push(e[i].data[c][2]),s?(n.push(e[i].data[c][3]),l.push(e[i].data[c][4]),h.push(e[i].data[c][5])):(l.push(e[i].data[c][3]),h.push(e[i].data[c][4]));else for(var d=0;d<e[i].data.length;d++)Array.isArray(e[i].data[d][1])&&(o.push(e[i].data[d][1][0]),r.push(e[i].data[d][1][1]),s?(n.push(e[i].data[d][1][2]),l.push(e[i].data[d][1][3]),h.push(e[i].data[d][1][4])):(l.push(e[i].data[d][1][2]),h.push(e[i].data[d][1][3])));else if("xy"===t)for(var g=0;g<e[i].data.length;g++)Array.isArray(e[i].data[g].y)&&(o.push(e[i].data[g].y[0]),r.push(e[i].data[g].y[1]),s?(n.push(e[i].data[g].y[2]),l.push(e[i].data[g].y[3]),h.push(e[i].data[g].y[4])):(l.push(e[i].data[g].y[2]),h.push(e[i].data[g].y[3])));return{o:o,h:r,m:n,l:l,c:h}}},{key:"parseDataAxisCharts",value:function(t){var e=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.ctx,a=this.w.config,s=this.w.globals,o=new V(i),r=(0<a.labels.length?a.labels:a.xaxis.categories).slice();s.isTimelineBar="rangeBar"===a.chart.type&&"datetime"===a.xaxis.type;for(var n,l=0;l<t.length;l++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===t[l].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");"rangeBar"!==a.chart.type&&"rangeArea"!==a.chart.type&&"rangeBar"!==t[l].type&&"rangeArea"!==t[l].type||(s.isRangeData=!0,this.handleRangeData(t,l)),this.isMultiFormat()?(this.isFormat2DArray()?this.handleFormat2DArray(t,l):this.isFormatXY()&&this.handleFormatXY(t,l),"candlestick"!==a.chart.type&&"candlestick"!==t[l].type&&"boxPlot"!==a.chart.type&&"boxPlot"!==t[l].type||this.handleCandleStickBoxData(t,l),s.series.push(this.twoDSeries),s.labels.push(this.twoDSeriesX),s.seriesX.push(this.twoDSeriesX),s.seriesGoals=this.seriesGoals,l!==this.activeSeriesIndex||this.fallbackToCategory||(s.isXNumeric=!0)):("datetime"===a.xaxis.type?(s.isXNumeric=!0,function(){for(var t=0;t<r.length;t++)if("string"==typeof r[t]){if(!o.isValidDate(r[t]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");e.twoDSeriesX.push(o.parseDate(r[t]))}else e.twoDSeriesX.push(r[t])}(),s.seriesX.push(this.twoDSeriesX)):"numeric"===a.xaxis.type&&(s.isXNumeric=!0,0<r.length&&(this.twoDSeriesX=r,s.seriesX.push(this.twoDSeriesX))),s.labels.push(this.twoDSeriesX),n=t[l].data.map(function(t){return M.parseNumber(t)}),s.series.push(n)),s.seriesZ.push(this.threeDSeries),void 0!==t[l].name?s.seriesNames.push(t[l].name):s.seriesNames.push("series-"+parseInt(l+1,10)),void 0!==t[l].color?s.seriesColors.push(t[l].color):s.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(t){var e=this.w.globals,i=this.w.config;e.series=t.slice(),e.seriesNames=i.labels.slice();for(var a=0;a<e.series.length;a++)void 0===e.seriesNames[a]&&e.seriesNames.push("series-"+(a+1));return this.w}},{key:"handleExternalLabelsData",value:function(t){var e=this.w.config,i=this.w.globals;0<e.xaxis.categories.length?i.labels=e.xaxis.categories:0<e.labels.length?i.labels=e.labels.slice():this.fallbackToCategory?(i.labels=i.labels[0],i.seriesRangeBarTimeline.length&&(i.seriesRangeBarTimeline.map(function(t){t.forEach(function(t){i.labels.indexOf(t.x)<0&&t.x&&i.labels.push(t.x)})}),i.labels=i.labels.filter(function(t,e,i){return i.indexOf(t)===e})),e.xaxis.convertedCatToNumeric&&(new _(e).convertCatToNumericXaxis(e,this.ctx,i.seriesX[0]),this._generateExternalLabels(t))):this._generateExternalLabels(t)}},{key:"_generateExternalLabels",value:function(t){var e=this.w.globals,i=this.w.config,a=[];if(e.axisCharts){if(0<e.series.length)for(var s=0;s<e.series[e.maxValsInArrayIndex].length;s++)a.push(s+1);e.seriesX=[];for(var o=0;o<t.length;o++)e.seriesX.push(a);e.isXNumeric=!0}if(0===a.length)for(var a=e.axisCharts?[]:e.series.map(function(t,e){return e+1}),r=0;r<t.length;r++)e.seriesX.push(a);e.labels=a,i.xaxis.convertedCatToNumeric&&(e.categoryLabels=a.map(function(t){return i.xaxis.labels.formatter(t)})),e.noLabelsProvided=!0}},{key:"parseData",value:function(t){var e=this.w,i=e.config,a=e.globals;this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),a.axisCharts?this.parseDataAxisCharts(t):this.parseDataNonAxisCharts(t),this.coreUtils.getLargestSeries(),"bar"===i.chart.type&&i.chart.stacked&&(e=new O(this.ctx),a.series=e.setNullSeriesToZeroValues(a.series)),this.coreUtils.getSeriesTotals(),a.axisCharts&&this.coreUtils.getStackedSeriesTotals(),this.coreUtils.getPercentSeries(),a.dataFormatXNumeric||a.isXNumeric&&("numeric"!==i.xaxis.type||0!==i.labels.length||0!==i.xaxis.categories.length)||this.handleExternalLabelsData(t);for(var s=this.coreUtils.getCategoryLabels(a.labels),o=0;o<s.length;o++)if(Array.isArray(s[o])){a.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var i=this,a=this.w;a.globals.ignoreYAxisIndexes=a.globals.collapsedSeries.map(function(t,e){if(i.w.globals.isMultipleYAxis&&!a.config.chart.stacked)return t.index})}}]),ve),$=(o(me,[{key:"xLabelFormat",value:function(t,e,i,a){var s=this.w;if("datetime"!==s.config.xaxis.type||void 0!==s.config.xaxis.labels.formatter||void 0!==s.config.tooltip.x.formatter)return t(e,i,a);a=new V(this.ctx);return a.formatDate(a.getDate(e),s.config.tooltip.x.format)}},{key:"defaultGeneralFormatter",value:function(t){return Array.isArray(t)?t.map(function(t){return t}):t}},{key:"defaultYFormatter",value:function(t,e,i){var a=this.w;return t=M.isNumber(t)?0!==a.globals.yValueDecimal?t.toFixed(void 0!==e.decimalsInFloat?e.decimalsInFloat:a.globals.yValueDecimal):a.globals.maxYArr[i]-a.globals.minYArr[i]<5?t.toFixed(1):t.toFixed(0):t}},{key:"setLabelFormatters",value:function(){var a=this,s=this.w;return s.globals.xaxisTooltipFormatter=function(t){return a.defaultGeneralFormatter(t)},s.globals.ttKeyFormatter=function(t){return a.defaultGeneralFormatter(t)},s.globals.ttZFormatter=function(t){return t},s.globals.legendFormatter=function(t){return a.defaultGeneralFormatter(t)},void 0!==s.config.xaxis.labels.formatter?s.globals.xLabelFormatter=s.config.xaxis.labels.formatter:s.globals.xLabelFormatter=function(t){if(M.isNumber(t)){if(s.config.xaxis.convertedCatToNumeric||"numeric"!==s.config.xaxis.type)return s.globals.isBarHorizontal&&s.globals.maxY-s.globals.minYArr<4?t.toFixed(1):t.toFixed(0);if(M.isNumber(s.config.xaxis.decimalsInFloat))return t.toFixed(s.config.xaxis.decimalsInFloat);var e=s.globals.maxX-s.globals.minX;return 0<e&&e<100?t.toFixed(1):t.toFixed(0)}return t},"function"==typeof s.config.tooltip.x.formatter?s.globals.ttKeyFormatter=s.config.tooltip.x.formatter:s.globals.ttKeyFormatter=s.globals.xLabelFormatter,"function"==typeof s.config.xaxis.tooltip.formatter&&(s.globals.xaxisTooltipFormatter=s.config.xaxis.tooltip.formatter),!Array.isArray(s.config.tooltip.y)&&void 0===s.config.tooltip.y.formatter||(s.globals.ttVal=s.config.tooltip.y),void 0!==s.config.tooltip.z.formatter&&(s.globals.ttZFormatter=s.config.tooltip.z.formatter),void 0!==s.config.legend.formatter&&(s.globals.legendFormatter=s.config.legend.formatter),s.config.yaxis.forEach(function(e,i){void 0!==e.labels.formatter?s.globals.yLabelFormatters[i]=e.labels.formatter:s.globals.yLabelFormatters[i]=function(t){return s.globals.xyCharts?Array.isArray(t)?t.map(function(t){return a.defaultYFormatter(t,e,i)}):a.defaultYFormatter(t,e,i):t}}),s.globals}},{key:"heatmapLabelFormatters",value:function(){var t,e=this.w;"heatmap"===e.config.chart.type&&(e.globals.yAxisScale[0].result=e.globals.seriesNames.slice(),t=e.globals.seriesNames.reduce(function(t,e){return t.length>e.length?t:e},0),e.globals.yAxisScale[0].niceMax=t,e.globals.yAxisScale[0].niceMin=t)}}]),me),J=(o(be,[{key:"getLabel",value:function(t,e,i,a){var s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[],o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"12px",r=this.w,n=void 0===t[a]?"":t[a],l=n,h=r.globals.xLabelFormatter,c=r.config.xaxis.labels.formatter,d=!1,l=new $(this.ctx).xLabelFormat(h,n,n,{i:a,dateFormatter:new V(this.ctx).formatDate,w:r});void 0!==c&&(l=c(n,t[a],{i:a,dateFormatter:new V(this.ctx).formatDate,w:r}));var g,u;0<e.length?(g=e[a].unit,u=null,e.forEach(function(t){"month"===t.unit?u="year":"day"===t.unit?u="month":"hour"===t.unit?u="day":"minute"===t.unit&&(u="hour")}),d=u===g,i=e[a].position,l=e[a].value):"datetime"===r.config.xaxis.type&&void 0===c&&(l=""),void 0===l&&(l=""),l=Array.isArray(l)?l:l.toString();a=new z(this.ctx),c={},c=r.globals.rotateXLabels?a.getTextRects(l,parseInt(o,10),null,"rotate(".concat(r.config.xaxis.labels.rotate," 0 0)"),!1):a.getTextRects(l,parseInt(o,10)),r=!r.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return{x:i,text:l=!Array.isArray(l)&&(0===l.indexOf("NaN")||0===l.toLowerCase().indexOf("invalid")||0<=l.toLowerCase().indexOf("infinity")||0<=s.indexOf(l)&&r)?"":l,textRect:c,isBold:d}}},{key:"checkLabelBasedOnTickamount",value:function(t,e,i){var a=this.w,s=a.config.xaxis.tickAmount;return i<(s="dataPoints"===s?Math.round(a.globals.gridWidth/120):s)||t%Math.round(i/(s+1))==0||(e.text=""),e}},{key:"checkForOverflowingLabels",value:function(t,e,i,a,s){var o=this.w;return 0===t&&o.globals.skipFirstTimelinelabel&&(e.text=""),t===i-1&&o.globals.skipLastTimelinelabel&&(e.text=""),o.config.xaxis.labels.hideOverlappingLabels&&0<a.length&&(s=s[s.length-1],e.x<s.textRect.width/(o.globals.rotateXLabels?Math.abs(o.config.xaxis.labels.rotate)/12:1.01)+s.x&&(e.text="")),e}},{key:"checkForReversedLabels",value:function(t,e){var i=this.w;return i.config.yaxis[t]&&i.config.yaxis[t].reversed&&e.reverse(),e}},{key:"isYAxisHidden",value:function(t){var e=this.w,i=new P(this.ctx);return!e.config.yaxis[t].show||!e.config.yaxis[t].showForNullSeries&&i.isSeriesNull(t)&&-1===e.globals.collapsedSeriesIndices.indexOf(t)}},{key:"getYAxisForeColor",value:function(t,e){var i=this.w;return Array.isArray(t)&&i.globals.yAxisScale[e]&&this.ctx.theme.pushExtraColors(t,i.globals.yAxisScale[e].result.length,!1),t}},{key:"drawYAxisTicks",value:function(t,e,i,a,s,o,r){var n=this.w,l=new z(this.ctx),h=n.globals.translateY;if(a.show&&0<e){!0===n.config.yaxis[s].opposite&&(t+=a.width);for(var c=e;0<=c;c--){var d=h+e/10+n.config.yaxis[s].labels.offsetY-1;n.globals.isBarHorizontal&&(d=o*c),"heatmap"===n.config.chart.type&&(d+=o/2);d=l.drawLine(t+i.offsetX-a.width+a.offsetX,d+a.offsetY,t+i.offsetX+a.offsetX,d+a.offsetY,a.color);r.add(d),h+=o}}}}]),be),Q=(o(xe,[{key:"scaleSvgNode",value:function(t,e){var i=parseFloat(t.getAttributeNS(null,"width")),a=parseFloat(t.getAttributeNS(null,"height"));t.setAttributeNS(null,"width",i*e),t.setAttributeNS(null,"height",a*e),t.setAttributeNS(null,"viewBox","0 0 "+i+" "+a)}},{key:"fixSvgStringForIe11",value:function(t){if(!M.isIE11())return t;var e=0,t=t.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(t){return 2==++e?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"':t});return(t=t.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(t){var e,i=this.w.globals.dom.Paper.svg();return 1!==t&&(e=this.w.globals.dom.Paper.node.cloneNode(!0),this.scaleSvgNode(e,t),i=(new XMLSerializer).serializeToString(e)),this.fixSvgStringForIe11(i)}},{key:"cleanup",value:function(){var t=this.w,e=t.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),i=t.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),t=t.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(t,function(t){t.setAttribute("width",0)}),e&&e[0]&&(e[0].setAttribute("x",-500),e[0].setAttribute("x1",-500),e[0].setAttribute("x2",-500)),i&&i[0]&&(i[0].setAttribute("y",-100),i[0].setAttribute("y1",-100),i[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var t=this.getSvgString(),t=new Blob([t],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(t)}},{key:"dataURI",value:function(n){var l=this;return new Promise(function(e){var t=l.w,i=n?n.scale||n.width/t.globals.svgWidth:1;l.cleanup();var a=document.createElement("canvas");a.width=t.globals.svgWidth*i,a.height=parseInt(t.globals.dom.elWrap.style.height,10)*i;var s="transparent"===t.config.chart.background?"#fff":t.config.chart.background,o=a.getContext("2d");o.fillStyle=s,o.fillRect(0,0,a.width*i,a.height*i);var r,t=l.getSvgString(i);window.canvg&&M.isIE11()?((s=window.canvg.Canvg.fromString(o,t,{ignoreClear:!0,ignoreDimensions:!0})).start(),i=a.msToBlob(),s.stop(),e({blob:i})):(t="data:image/svg+xml,"+encodeURIComponent(t),(r=new Image).crossOrigin="anonymous",r.onload=function(){var t;o.drawImage(r,0,0),a.msToBlob?(t=a.msToBlob(),e({blob:t})):(t=a.toDataURL("image/png"),e({imgURI:t}))},r.src=t)})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var i=this;this.dataURI().then(function(t){var e=t.imgURI,t=t.blob;t?navigator.msSaveOrOpenBlob(t,i.w.globals.chartID+".png"):i.triggerDownload(e,i.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(t){var l=this,h=t.series,c=t.columnDelimiter,e=t.lineDelimiter,t=void 0===e?"\n":e,d=this.w,g=[],u=[],e="data:text/csv;charset=utf-8,\ufeff",p=new Z(this.ctx),f=new J(this.ctx);g.push(d.config.chart.toolbar.export.csv.headerCategory),h.map(function(t,e){t=t.name||"series-".concat(e);d.globals.axisCharts&&g.push(t.split(c).join("")?t.split(c).join(""):"series-".concat(e))}),d.globals.axisCharts||(g.push(d.config.chart.toolbar.export.csv.headerValue),u.push(g.join(c))),h.map(function(t,e){d.globals.axisCharts?function(t,e){if(g.length&&0===e&&u.push(g.join(c)),t.data&&t.data.length)for(var i=0;i<t.data.length;i++){g=[];s=(s=i,r=o=void 0,n="",d.globals.axisCharts?("category"!==d.config.xaxis.type&&!d.config.xaxis.convertedCatToNumeric||(n=d.globals.isBarHorizontal?(o=d.globals.yLabelFormatters[0],r=new O(l.ctx).getActiveConfigSeriesIndex(),o(d.globals.labels[s],{seriesIndex:r,dataPointIndex:s,w:d})):f.getLabel(d.globals.labels,d.globals.timescaleLabels,0,s).text),"datetime"===d.config.xaxis.type&&(d.config.xaxis.categories.length?n=d.config.xaxis.categories[s]:d.config.labels.length&&(n=d.config.labels[s]))):n=d.config.labels[s],Array.isArray(n)&&(n=n.join(" ")),M.isNumber(n)?n:n.split(c).join(""));if(s||(p.isFormatXY()?s=h[e].data[i].x:p.isFormat2DArray()&&(s=h[e].data[i]?h[e].data[i][0]:"")),0===e){g.push((n=s,"datetime"===d.config.xaxis.type&&10<=String(n).length?d.config.chart.toolbar.export.csv.dateFormatter(s):M.isNumber(s)?s:s.split(c).join("")));for(var a=0;a<d.globals.series.length;a++)g.push(d.globals.series[a][i])}("candlestick"===d.config.chart.type||t.type&&"candlestick"===t.type)&&(g.pop(),g.push(d.globals.seriesCandleO[e][i]),g.push(d.globals.seriesCandleH[e][i]),g.push(d.globals.seriesCandleL[e][i]),g.push(d.globals.seriesCandleC[e][i])),("boxPlot"===d.config.chart.type||t.type&&"boxPlot"===t.type)&&(g.pop(),g.push(d.globals.seriesCandleO[e][i]),g.push(d.globals.seriesCandleH[e][i]),g.push(d.globals.seriesCandleM[e][i]),g.push(d.globals.seriesCandleL[e][i]),g.push(d.globals.seriesCandleC[e][i])),"rangeBar"===d.config.chart.type&&(g.pop(),g.push(d.globals.seriesRangeStart[e][i]),g.push(d.globals.seriesRangeEnd[e][i])),g.length&&u.push(g.join(c))}var s,o,r,n}(t,e):((g=[]).push(d.globals.labels[e].split(c).join("")),g.push(d.globals.series[e]),u.push(g.join(c)))}),e+=u.join(t),this.triggerDownload(encodeURI(e),d.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(t,e,i){var a=document.createElement("a");a.href=t,a.download=(e||this.w.globals.chartID)+i,document.body.appendChild(a),a.click(),document.body.removeChild(a)}}]),xe),K=(o(fe,[{key:"drawXaxis",value:function(){var a=this,s=this.w,o=new z(this.ctx),t=o.group({class:"apexcharts-xaxis",transform:"translate(".concat(s.config.xaxis.offsetX,", ").concat(s.config.xaxis.offsetY,")")}),r=o.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(s.globals.translateXAxisX,", ").concat(s.globals.translateXAxisY,")")});t.add(r);for(var n=s.globals.padHorizontal,l=[],e=0;e<this.xaxisLabels.length;e++)l.push(this.xaxisLabels[e]);var h,c=l.length;n=s.globals.isXNumeric?(h=s.globals.gridWidth/(1<c?c-1:c),n+h/2+s.config.xaxis.labels.offsetX):(h=s.globals.gridWidth/l.length,n+h+s.config.xaxis.labels.offsetX);for(var i,d,g=0;g<=c-1;g++)!function(t){var e=n-h/2+s.config.xaxis.labels.offsetX;0===t&&1===c&&h/2===n&&1===s.globals.dataPoints&&(e=s.globals.gridWidth/2);var i=a.axesUtils.getLabel(l,s.globals.timescaleLabels,e,t,a.drawnLabels,a.xaxisFontSize),e=28;s.globals.rotateXLabels&&(e=22),(i=void 0!==s.config.xaxis.tickAmount&&"dataPoints"!==s.config.xaxis.tickAmount&&"datetime"!==s.config.xaxis.type?a.axesUtils.checkLabelBasedOnTickamount(t,i,c):a.axesUtils.checkForOverflowingLabels(t,i,c,a.drawnLabels,a.drawnLabelsRects)).text&&s.globals.xaxisLabelsCount++,s.config.xaxis.labels.show&&(e=o.drawText({x:i.x,y:a.offY+s.config.xaxis.labels.offsetY+e-("top"===s.config.xaxis.position?s.globals.xAxisHeight+s.config.xaxis.axisTicks.height-2:0),text:i.text,textAnchor:"middle",fontWeight:i.isBold?600:s.config.xaxis.labels.style.fontWeight,fontSize:a.xaxisFontSize,fontFamily:a.xaxisFontFamily,foreColor:Array.isArray(a.xaxisForeColors)?s.config.xaxis.convertedCatToNumeric?a.xaxisForeColors[s.globals.minX+t-1]:a.xaxisForeColors[t]:a.xaxisForeColors,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+s.config.xaxis.labels.style.cssClass}),r.add(e),(t=document.createElementNS(s.globals.SVGNS,"title")).textContent=Array.isArray(i.text)?i.text.join(" "):i.text,e.node.appendChild(t),""!==i.text&&(a.drawnLabels.push(i.text),a.drawnLabelsRects.push(i))),n+=h}(g);return void 0!==s.config.xaxis.title.text&&(d=o.group({class:"apexcharts-xaxis-title"}),i=o.drawText({x:s.globals.gridWidth/2+s.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+s.globals.xAxisLabelsHeight+s.config.xaxis.title.offsetY,text:s.config.xaxis.title.text,textAnchor:"middle",fontSize:s.config.xaxis.title.style.fontSize,fontFamily:s.config.xaxis.title.style.fontFamily,fontWeight:s.config.xaxis.title.style.fontWeight,foreColor:s.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+s.config.xaxis.title.style.cssClass}),d.add(i),t.add(d)),s.config.xaxis.axisBorder.show&&(d=s.globals.barPadForNumericAxis,d=o.drawLine(s.globals.padHorizontal+s.config.xaxis.axisBorder.offsetX-d,this.offY,this.xaxisBorderWidth+d,this.offY,s.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight),t.add(d)),t}},{key:"drawXaxisInversed",value:function(s){var o=this,r=this.w,n=new z(this.ctx),t=r.config.yaxis[0].opposite?r.globals.translateYAxisX[s]:0,e=n.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:s}),l=n.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+t+", 0)"});e.add(l);var h=[];if(r.config.yaxis[s].show)for(var i=0;i<this.xaxisLabels.length;i++)h.push(this.xaxisLabels[i]);var c,d=-(c=r.globals.gridHeight/h.length)/2.2,g=r.globals.yLabelFormatters[0],u=r.config.yaxis[0].labels;if(u.show)for(var a=0;a<=h.length-1;a++)!function(t){var e=void 0===h[t]?"":h[t],e=g(e,{seriesIndex:s,dataPointIndex:t,w:r}),i=o.axesUtils.getYAxisForeColor(u.style.colors,s),a=0;Array.isArray(e)&&(a=e.length/2*parseInt(u.style.fontSize,10));t=n.drawText({x:u.offsetX-15,y:d+c+u.offsetY-a,text:e,textAnchor:o.yaxis.opposite?"start":"end",foreColor:Array.isArray(i)?i[t]:i,fontSize:u.style.fontSize,fontFamily:u.style.fontFamily,fontWeight:u.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+u.style.cssClass});l.add(t);i=document.createElementNS(r.globals.SVGNS,"title");i.textContent=Array.isArray(e)?e.join(" "):e,t.node.appendChild(i),0!==r.config.yaxis[s].labels.rotate&&(i=n.rotateAroundCenter(t.node),t.node.setAttribute("transform","rotate(".concat(r.config.yaxis[s].labels.rotate," 0 ").concat(i.y,")"))),d+=c}(a);void 0!==r.config.yaxis[0].title.text&&(f=n.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+t+", 0)"}),p=n.drawText({x:0,y:r.globals.gridHeight/2,text:r.config.yaxis[0].title.text,textAnchor:"middle",foreColor:r.config.yaxis[0].title.style.color,fontSize:r.config.yaxis[0].title.style.fontSize,fontWeight:r.config.yaxis[0].title.style.fontWeight,fontFamily:r.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+r.config.yaxis[0].title.style.cssClass}),f.add(p),e.add(f));var p=0;this.isCategoryBarHorizontal&&r.config.yaxis[0].opposite&&(p=r.globals.gridWidth);var f=r.config.xaxis.axisBorder;return f.show&&(f=n.drawLine(r.globals.padHorizontal+f.offsetX+p,1+f.offsetY,r.globals.padHorizontal+f.offsetX+p,r.globals.gridHeight+f.offsetY,f.color,0),e.add(f)),r.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(p,h.length,r.config.yaxis[0].axisBorder,r.config.yaxis[0].axisTicks,0,c,e),e}},{key:"drawXaxisTicks",value:function(t,e){var i,a,s=this.w,o=t;t<0||t-2>s.globals.gridWidth||(a=(i=this.offY+s.config.xaxis.axisTicks.offsetY)+s.config.xaxis.axisTicks.height,"top"===s.config.xaxis.position&&(a=i-s.config.xaxis.axisTicks.height),s.config.xaxis.axisTicks.show&&(s=new z(this.ctx).drawLine(t+s.config.xaxis.axisTicks.offsetX,i+s.config.xaxis.offsetY,o+s.config.xaxis.axisTicks.offsetX,a+s.config.xaxis.offsetY,s.config.xaxis.axisTicks.color),e.add(s),s.node.classList.add("apexcharts-xaxis-tick")))}},{key:"getXAxisTicksPositions",value:function(){var t=this.w,e=[],i=this.xaxisLabels.length,a=t.globals.padHorizontal;if(0<t.globals.timescaleLabels.length)for(var s=0;s<i;s++)a=this.xaxisLabels[s].position,e.push(a);else for(var o=i,r=0;r<o;r++){var n=o;t.globals.isXNumeric&&"bar"!==t.config.chart.type&&--n,a+=t.globals.gridWidth/n,e.push(a)}return e}},{key:"xAxisLabelCorrections",value:function(){var a=this.w,s=new z(this.ctx),t=a.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),o=a.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text"),e=a.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),i=a.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(a.globals.rotateXLabels||a.config.xaxis.labels.rotateAlways)for(var r=0;r<o.length;r++){var n=s.rotateAroundCenter(o[r]);n.y=n.y-1,n.x=n.x+1,o[r].setAttribute("transform","rotate(".concat(a.config.xaxis.labels.rotate," ").concat(n.x," ").concat(n.y,")")),o[r].setAttribute("text-anchor","end"),t.setAttribute("transform","translate(0, ".concat(-10,")"));n=o[r].childNodes;a.config.xaxis.labels.trim&&Array.prototype.forEach.call(n,function(t){s.placeTextWithEllipsis(t,t.textContent,a.globals.xAxisLabelsHeight-("bottom"===a.config.legend.position?20:10))})}else!function(){for(var e=a.globals.gridWidth/(a.globals.labels.length+1),t=0;t<o.length;t++){var i=o[t].childNodes;a.config.xaxis.labels.trim&&"datetime"!==a.config.xaxis.type&&Array.prototype.forEach.call(i,function(t){s.placeTextWithEllipsis(t,t.textContent,e)})}}();if(0<e.length){var l=e[e.length-1].getBBox(),h=e[0].getBBox();l.x<-20&&e[e.length-1].parentNode.removeChild(e[e.length-1]),h.x+h.width>a.globals.gridWidth&&!a.globals.isBarHorizontal&&e[0].parentNode.removeChild(e[0]);for(var c=0;c<i.length;c++)s.placeTextWithEllipsis(i[c],i[c].textContent,a.config.yaxis[0].labels.maxWidth-2*parseFloat(a.config.yaxis[0].title.style.fontSize)-20)}}}]),fe),tt=(o(pe,[{key:"drawGridArea",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=this.w,i=new z(this.ctx);null===t&&(t=i.group({class:"apexcharts-grid"}));var a=i.drawLine(e.globals.padHorizontal,1,e.globals.padHorizontal,e.globals.gridHeight,"transparent"),e=i.drawLine(e.globals.padHorizontal,e.globals.gridHeight,e.globals.gridWidth,e.globals.gridHeight,"transparent");return t.add(e),t.add(a),t}},{key:"drawGrid",value:function(){var t=null;return this.w.globals.axisCharts&&(t=this.renderGrid(),this.drawGridArea(t.el)),t}},{key:"createGridMask",value:function(){var e,t=this.w,i=t.globals,a=new z(this.ctx),s=Array.isArray(t.config.stroke.width)?0:t.config.stroke.width;Array.isArray(t.config.stroke.width)&&(e=0,t.config.stroke.width.forEach(function(t){e=Math.max(e,t)}),s=e),i.dom.elGridRectMask=document.createElementNS(i.SVGNS,"clipPath"),i.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(i.cuid)),i.dom.elGridRectMarkerMask=document.createElementNS(i.SVGNS,"clipPath"),i.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(i.cuid)),i.dom.elForecastMask=document.createElementNS(i.SVGNS,"clipPath"),i.dom.elForecastMask.setAttribute("id","forecastMask".concat(i.cuid)),i.dom.elNonForecastMask=document.createElementNS(i.SVGNS,"clipPath"),i.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(i.cuid));var o=t.config.chart.type,r=0,n=0;("bar"===o||"rangeBar"===o||"candlestick"===o||"boxPlot"===o||0<t.globals.comboBarCount)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&(r=t.config.grid.padding.left,n=t.config.grid.padding.right,i.barPadForNumericAxis>r&&(r=i.barPadForNumericAxis,n=i.barPadForNumericAxis)),i.dom.elGridRect=a.drawRect(-s/2-r-2,-s/2,i.gridWidth+s+n+r+4,i.gridHeight+s,0,"#fff"),new P(this).getLargestMarkerSize();t=t.globals.markers.largestSize+1;i.dom.elGridRectMarker=a.drawRect(2*-t,2*-t,i.gridWidth+4*t,i.gridHeight+4*t,0,"#fff"),i.dom.elGridRectMask.appendChild(i.dom.elGridRect.node),i.dom.elGridRectMarkerMask.appendChild(i.dom.elGridRectMarker.node);t=i.dom.baseEl.querySelector("defs");t.appendChild(i.dom.elGridRectMask),t.appendChild(i.dom.elForecastMask),t.appendChild(i.dom.elNonForecastMask),t.appendChild(i.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(t){var e=t.i,i=t.x1,a=t.y1,s=t.x2,o=t.y2,r=t.xCount,n=t.parent,t=this.w;0===e&&t.globals.skipFirstTimelinelabel||e===r-1&&t.globals.skipLastTimelinelabel&&!t.config.xaxis.labels.formatter||"radar"===t.config.chart.type||(t.config.grid.xaxis.lines.show&&this._drawGridLine({x1:i,y1:a,x2:s,y2:o,parent:n}),new K(this.ctx).drawXaxisTicks(i,this.elg))}},{key:"_drawGridLine",value:function(t){var e=t.x1,i=t.y1,a=t.x2,s=t.y2,o=t.parent,r=this.w,n=o.node.classList.contains("apexcharts-gridlines-horizontal"),l=r.config.grid.strokeDashArray,t=r.globals.barPadForNumericAxis,l=new z(this).drawLine(e-(n?t:0),i,a+(n?t:0),s,r.config.grid.borderColor,l);l.node.classList.add("apexcharts-gridline"),o.add(l)}},{key:"_drawGridBandRect",value:function(t){var e=t.c,i=t.x1,a=t.y1,s=t.x2,o=t.y2,r=t.type,n=this.w,l=new z(this.ctx),t=n.globals.barPadForNumericAxis;"column"===r&&"datetime"===n.config.xaxis.type||(e=n.config.grid[r].colors[e],e=l.drawRect(i-("row"===r?t:0),a,s+("row"===r?2*t:0),o,0,e,n.config.grid[r].opacity),this.elg.add(e),e.attr("clip-path","url(#gridRectMask".concat(n.globals.cuid,")")),e.node.classList.add("apexcharts-grid-".concat(r)))}},{key:"_drawXYLines",value:function(t){var e,n=this,l=t.xCount,i=t.tickAmount,h=this.w;if((h.config.grid.xaxis.lines.show||h.config.xaxis.axisTicks.show)&&(e=h.globals.padHorizontal,t=h.globals.gridHeight,h.globals.timescaleLabels.length?function(t){for(var e,i,a=t.xC,s=t.y1,o=t.y2,r=0;r<a;r++)e=n.xaxisLabels[r].position,i=n.xaxisLabels[r].position,n._drawGridLines({i:r,x1:e,y1:s,x2:i,y2:o,xCount:l,parent:n.elgridLinesV})}({xC:l,x1:e,y1:0,x2:void 0,y2:t}):(h.globals.isXNumeric&&(l=h.globals.xAxisScale.result.length),function(t){var e=t.xC,i=t.x1,a=t.y1,s=t.x2,o=t.y2;if(void 0!==h.config.xaxis.tickAmount&&"dataPoints"!==h.config.xaxis.tickAmount)h.globals.dom.baseEl.querySelectorAll(".apexcharts-text.apexcharts-xaxis-label tspan:not(:empty)").forEach(function(t,e){t=t.getBBox();n._drawGridLines({i:e,x1:t.x+t.width/2,y1:a,x2:t.x+t.width/2,y2:o,xCount:l,parent:n.elgridLinesV})});else for(var r=0;r<e+(h.globals.isXNumeric?0:1);r++)0===r&&1===e&&1===h.globals.dataPoints&&(s=i=h.globals.gridWidth/2),n._drawGridLines({i:r,x1:i,y1:a,x2:s,y2:o,xCount:l,parent:n.elgridLinesV}),s=i+=h.globals.gridWidth/(h.globals.isXNumeric?e-1:e)}({xC:l=h.config.xaxis.convertedCatToNumeric?h.globals.xaxisLabelsCount:l,x1:e,y1:0,x2:void 0,y2:t}))),h.config.grid.yaxis.lines.show){var a=0,s=0,o=h.globals.gridWidth,r=i+1;this.isTimelineBar&&(r=h.globals.labels.length);for(var c=0;c<r+(this.isTimelineBar?1:0);c++)this._drawGridLine({x1:0,y1:a,x2:o,y2:s,parent:this.elgridLinesH}),s=a+=h.globals.gridHeight/(this.isTimelineBar?r:i)}}},{key:"_drawInvertedXYLines",value:function(t){var e=t.xCount,i=this.w;if(i.config.grid.xaxis.lines.show||i.config.xaxis.axisTicks.show)for(var a,s=i.globals.padHorizontal,o=i.globals.gridHeight,r=0;r<e+1;r++)i.config.grid.xaxis.lines.show&&this._drawGridLine({x1:s,y1:0,x2:a,y2:o,parent:this.elgridLinesV}),new K(this.ctx).drawXaxisTicks(s,this.elg),a=s=s+i.globals.gridWidth/e+.3;if(i.config.grid.yaxis.lines.show)for(var n=0,l=0,h=i.globals.gridWidth,c=0;c<i.globals.dataPoints+1;c++)this._drawGridLine({x1:0,y1:n,x2:h,y2:l,parent:this.elgridLinesH}),l=n+=i.globals.gridHeight/i.globals.dataPoints}},{key:"renderGrid",value:function(){var t=this.w,e=new z(this.ctx);this.elg=e.group({class:"apexcharts-grid"}),this.elgridLinesH=e.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=e.group({class:"apexcharts-gridlines-vertical"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),t.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide());for(var i,a=t.globals.yAxisScale.length?t.globals.yAxisScale[0].result.length-1:5,s=0;s<t.globals.series.length&&!(2<(a=void 0!==t.globals.yAxisScale[s]?t.globals.yAxisScale[s].result.length-1:a));s++);return!t.globals.isBarHorizontal||this.isTimelineBar?(i=this.xaxisLabels.length,this.isTimelineBar&&(a=t.globals.labels.length,t.config.xaxis.tickAmount&&t.config.xaxis.labels.formatter&&(i=t.config.xaxis.tickAmount)),this._drawXYLines({xCount:i,tickAmount:a})):(i=a,a=t.globals.xTickAmount,this._drawInvertedXYLines({xCount:i,tickAmount:a})),this.drawGridBands(i,a),{el:this.elg,xAxisTickWidth:t.globals.gridWidth/i}}},{key:"drawGridBands",value:function(t,e){var i=this.w;if(void 0!==i.config.grid.row.colors&&0<i.config.grid.row.colors.length)for(var a=0,s=i.globals.gridHeight/e,o=i.globals.gridWidth,r=0,n=0;r<e;r++,n++)n>=i.config.grid.row.colors.length&&(n=0),this._drawGridBandRect({c:n,x1:0,y1:a,x2:o,y2:s,type:"row"}),a+=i.globals.gridHeight/e;if(void 0!==i.config.grid.column.colors&&0<i.config.grid.column.colors.length)for(var l=i.globals.isBarHorizontal||"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric?t:t-1,h=i.globals.padHorizontal,c=i.globals.padHorizontal+i.globals.gridWidth/l,d=i.globals.gridHeight,g=0,u=0;g<t;g++,u++)u>=i.config.grid.column.colors.length&&(u=0),this._drawGridBandRect({c:u,x1:h,y1:0,x2:c,y2:d,type:"column"}),h+=i.globals.gridWidth/l}}]),pe),et=(o(ue,[{key:"niceScale",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:10,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,s=4<arguments.length?arguments[4]:void 0,o=this.w,r=Math.abs(e-t);if("dataPoints"===(i=this._adjustTicksForSmallRange(i,a,r))&&(i=o.globals.dataPoints-1),t===Number.MIN_VALUE&&0===e||!M.isNumber(t)&&!M.isNumber(e)||t===Number.MIN_VALUE&&e===-Number.MAX_VALUE)return e=i,this.linearScale(t=0,e,i);e<t?(console.warn("axis.min cannot be greater than axis.max"),e=t+.1):t===e&&(t=0===t?0:t-.5,e=0===e?2:e+.5);var n=[];r<1&&s&&("candlestick"===o.config.chart.type||"candlestick"===o.config.series[a].type||"boxPlot"===o.config.chart.type||"boxPlot"===o.config.series[a].type||o.globals.isRangeData)&&(e*=1.01);a=i+1;a<2?a=2:2<a&&(a-=2);var o=r/a,a=Math.floor(M.log10(o)),a=Math.pow(10,a),o=Math.round(o/a),l=(o=o<1?1:o)*a,a=l*Math.floor(t/l),h=l*Math.ceil(e/l),c=a;if(s&&2<r){for(;n.push(c),!((c+=l)>h););return{result:n,niceMin:n[0],niceMax:n[n.length-1]}}var d=t;(n=[]).push(d);for(var g=Math.abs(e-t)/i,u=0;u<=i;u++)n.push(d+=g);return n[n.length-2]>=e&&n.pop(),{result:n,niceMin:n[0],niceMax:n[n.length-1]}}},{key:"linearScale",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:10,a=3<arguments.length?arguments[3]:void 0,e=Math.abs(e-t),s=e/(i="dataPoints"===(i=this._adjustTicksForSmallRange(i,a,e))?this.w.globals.dataPoints-1:i);i===Number.MAX_VALUE&&(i=10,s=1);for(var o=[],r=t;0<=i;)o.push(r),r+=s,--i;return{result:o,niceMin:o[0],niceMax:o[o.length-1]}}},{key:"logarithmicScale",value:function(t){for(var e=[],i=Math.ceil(Math.log10(t))+1,a=0;a<i;a++)e.push(Math.pow(10,a));return{result:e,niceMin:e[0],niceMax:e[e.length-1]}}},{key:"_adjustTicksForSmallRange",value:function(t,e,i){var a=t;return void 0!==e&&this.w.config.yaxis[e].labels.formatter&&void 0===this.w.config.yaxis[e].tickAmount&&(e=this.w.config.yaxis[e].labels.formatter(1),M.isNumber(Number(e))&&!M.isFloat(e)&&(a=Math.ceil(i))),a<t?a:t}},{key:"setYScaleForIndex",value:function(t,e,i){var a=this.w.globals,s=this.w.config,o=a.isBarHorizontal?s.xaxis:s.yaxis[t];void 0===a.yAxisScale[t]&&(a.yAxisScale[t]=[]);var r=Math.abs(i-e);o.logarithmic&&r<=5&&(a.invalidLogScale=!0),o.logarithmic&&5<r?(a.allSeriesCollapsed=!1,a.yAxisScale[t]=this.logarithmicScale(i)):i!==-Number.MAX_VALUE&&M.isNumber(i)?(a.allSeriesCollapsed=!1,void 0===o.min&&void 0===o.max||o.forceNiceScale?(s=void 0===s.yaxis[t].max&&void 0===s.yaxis[t].min||s.yaxis[t].forceNiceScale,a.yAxisScale[t]=this.niceScale(e,i,o.tickAmount||(r<5&&1<r?r+1:5),t,s)):a.yAxisScale[t]=this.linearScale(e,i,o.tickAmount,t)):a.yAxisScale[t]=this.linearScale(0,5,5)}},{key:"setXScale",value:function(t,e){var i=this.w,a=i.globals,s=i.config.xaxis,i=Math.abs(e-t);return e!==-Number.MAX_VALUE&&M.isNumber(e)?a.xAxisScale=this.linearScale(t,e,s.tickAmount||(i<5&&1<i?i+1:5),0):a.xAxisScale=this.linearScale(0,5,5),a.xAxisScale}},{key:"setMultipleYScales",value:function(){var o=this,t=this.w.globals,r=this.w.config,n=t.minYArr.concat([]),l=t.maxYArr.concat([]),h=[];r.yaxis.forEach(function(i,a){var s=a;r.series.forEach(function(t,e){t.name===i.seriesName&&(a!==(s=e)?h.push({index:e,similarIndex:a,alreadyExists:!0}):h.push({index:e}))});var t=n[s],e=l[s];o.setYScaleForIndex(a,t,e)}),this.sameScaleInMultipleAxes(n,l,h)}},{key:"sameScaleInMultipleAxes",value:function(t,s,e){var n=this,l=this.w.config,h=this.w.globals,o=[];e.forEach(function(t){t.alreadyExists&&(void 0===o[t.index]&&(o[t.index]=[]),o[t.index].push(t.index),o[t.index].push(t.similarIndex))}),(h.yAxisSameScaleIndices=o).forEach(function(a,s){o.forEach(function(t,e){var i;s!==e&&(i=t,0<a.filter(function(t){return-1!==i.indexOf(t)}).length)&&(o[s]=o[s].concat(o[e]))})});var e=o.map(function(i){return i.filter(function(t,e){return i.indexOf(t)===e})}).map(function(t){return t.sort()}),o=o.filter(function(t){return!!t}),i=(r=e.slice()).map(function(t){return JSON.stringify(t)}),r=r.filter(function(t,e){return i.indexOf(JSON.stringify(t))===e}),c=[],d=[];t.forEach(function(i,a){r.forEach(function(t,e){-1<t.indexOf(a)&&(void 0===c[e]&&(c[e]=[],d[e]=[]),c[e].push({key:a,value:i}),d[e].push({key:a,value:s[a]}))})});var g=Array.apply(null,Array(r.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),u=Array.apply(null,Array(r.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);c.forEach(function(t,i){t.forEach(function(t,e){g[i]=Math.min(t.value,g[i])})}),d.forEach(function(t,i){t.forEach(function(t,e){u[i]=Math.max(t.value,u[i])})}),t.forEach(function(t,r){d.forEach(function(i,a){var s=g[a],o=u[a];l.chart.stacked&&(o=0,i.forEach(function(t,e){t.value!==-Number.MAX_VALUE&&(o+=t.value),s!==Number.MIN_VALUE&&(s+=c[a][e].value)})),i.forEach(function(t,e){i[e].key===r&&(void 0!==l.yaxis[r].min&&(s="function"==typeof l.yaxis[r].min?l.yaxis[r].min(h.minY):l.yaxis[r].min),void 0!==l.yaxis[r].max&&(o="function"==typeof l.yaxis[r].max?l.yaxis[r].max(h.maxY):l.yaxis[r].max),n.setYScaleForIndex(r,s,o))})})})}},{key:"autoScaleY",value:function(t,c,d){var g=(t=t||this).w;if(g.globals.isMultipleYAxis||g.globals.collapsedSeries.length)return console.warn("autoScaleYaxis is not supported in a multi-yaxis chart."),c;var u=g.globals.seriesX[0],p=g.config.chart.stacked;return c.forEach(function(a,t){for(var s=0,e=0;e<u.length;e++)if(u[e]>=d.xaxis.min){s=e;break}var r,n,o=g.globals.minYArr[t],l=g.globals.maxYArr[t],h=g.globals.stackedSeriesTotals;g.globals.series.forEach(function(i,t){var e=i[s];p?(e=h[s],r=n=e,h.forEach(function(t,e){u[e]<=d.xaxis.max&&u[e]>=d.xaxis.min&&(n<t&&null!==t&&(n=t),i[e]<r&&null!==i[e]&&(r=i[e]))})):(r=n=e,i.forEach(function(i,a){var s,o;u[a]<=d.xaxis.max&&u[a]>=d.xaxis.min&&(o=s=i,g.globals.series.forEach(function(t,e){null!==i&&(s=Math.min(t[a],s),o=Math.max(t[a],o))}),n<o&&null!==o&&(n=o),s<r&&null!==s&&(r=s))})),void 0===r&&void 0===n&&(r=o,n=l),(n*=n<0?.9:1.1)<0&&n<l&&(n=l),(r*=r<0?1.1:.9)<0&&o<r&&(r=o),1<c.length?(c[t].min=void 0===a.min?r:a.min,c[t].max=void 0===a.max?n:a.max):(c[0].min=void 0===a.min?r:a.min,c[0].max=void 0===a.max?n:a.max)})}),c}}]),ue),it=(o(ge,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=this.w.config,o=this.w.globals,r=-Number.MAX_VALUE,n=Number.MIN_VALUE;null===a&&(a=t+1);var l=o.series,h=l,c=l;"candlestick"===s.chart.type?(h=o.seriesCandleL,c=o.seriesCandleH):"boxPlot"===s.chart.type?(h=o.seriesCandleO,c=o.seriesCandleC):o.isRangeData&&(h=o.seriesRangeStart,c=o.seriesRangeEnd);for(var d=t;d<a;d++){o.dataPoints=Math.max(o.dataPoints,l[d].length);for(var g=0;g<o.series[d].length;g++){var u=l[d][g];null!==u&&M.isNumber(u)?(void 0!==c[d][g]&&(r=Math.max(r,c[d][g])),void 0!==h[d][g]&&(e=Math.min(e,h[d][g]),i=Math.max(i,h[d][g])),"candlestick"!==this.w.config.chart.type&&"boxPlot"!==this.w.config.chart.type||(void 0!==o.seriesCandleC[d][g]&&(r=Math.max(r,o.seriesCandleO[d][g]),r=Math.max(r,o.seriesCandleH[d][g]),r=Math.max(r,o.seriesCandleL[d][g]),r=Math.max(r,o.seriesCandleC[d][g]),"boxPlot"===this.w.config.chart.type&&(r=Math.max(r,o.seriesCandleM[d][g]))),!s.series[d].type||"candlestick"===s.series[d].type&&"boxPlot"===s.series[d].type||(r=Math.max(r,o.series[d][g]),e=Math.min(e,o.series[d][g])),i=r),o.seriesGoals[d]&&o.seriesGoals[d][g]&&Array.isArray(o.seriesGoals[d][g])&&o.seriesGoals[d][g].forEach(function(t){n!==Number.MIN_VALUE&&(n=Math.min(n,t.value),e=n),r=Math.max(r,t.value),i=r}),M.isFloat(u)&&(u=M.noExponents(u),o.yValueDecimal=Math.max(o.yValueDecimal,u.toString().split(".")[1].length)),n>h[d][g]&&h[d][g]<0&&(n=h[d][g])):o.hasNullValues=!0}}return"rangeBar"===s.chart.type&&o.seriesRangeStart.length&&o.isBarHorizontal&&"datetime"===s.xaxis.type&&(n=e),"bar"===s.chart.type&&(n<0&&r<0&&(r=0),n===Number.MIN_VALUE&&(n=0)),{minY:n,maxY:r,lowestY:e,highestY:i}}},{key:"setYRange",value:function(){var i=this.w.globals,e=this.w.config;i.maxY=-Number.MAX_VALUE,i.minY=Number.MIN_VALUE;var t=Number.MAX_VALUE;if(i.isMultipleYAxis)for(var a=0;a<i.series.length;a++){var s=this.getMinYMaxY(a,t,null,a+1);i.minYArr.push(s.minY),i.maxYArr.push(s.maxY),t=s.lowestY}var o=this.getMinYMaxY(0,t,null,i.series.length);return i.minY=o.minY,i.maxY=o.maxY,t=o.lowestY,e.chart.stacked&&this._setStackedMinMax(),"line"!==e.chart.type&&"area"!==e.chart.type&&"candlestick"!==e.chart.type&&"boxPlot"!==e.chart.type&&("rangeBar"!==e.chart.type||i.isBarHorizontal)||i.minY!==Number.MIN_VALUE||t===-Number.MAX_VALUE||t===i.maxY||(o=i.maxY-t,(0<=t&&t<=10||void 0!==e.yaxis[0].min||void 0!==e.yaxis[0].max)&&(o=0),i.minY=t-5*o/100,0<t&&i.minY<0&&(i.minY=0),i.maxY=i.maxY+5*o/100),e.yaxis.forEach(function(t,e){void 0!==t.max&&("number"==typeof t.max?i.maxYArr[e]=t.max:"function"==typeof t.max&&(i.maxYArr[e]=t.max(i.isMultipleYAxis?i.maxYArr[e]:i.maxY)),i.maxY=i.maxYArr[e]),void 0!==t.min&&("number"==typeof t.min?i.minYArr[e]=t.min:"function"==typeof t.min&&(i.minYArr[e]=t.min(i.isMultipleYAxis?i.minYArr[e]===Number.MIN_VALUE?0:i.minYArr[e]:i.minY)),i.minY=i.minYArr[e])}),i.isBarHorizontal&&["min","max"].forEach(function(t){void 0!==e.xaxis[t]&&"number"==typeof e.xaxis[t]&&("min"===t?i.minY=e.xaxis[t]:i.maxY=e.xaxis[t])}),i.isMultipleYAxis?(this.scales.setMultipleYScales(),i.minY=t,i.yAxisScale.forEach(function(t,e){i.minYArr[e]=t.niceMin,i.maxYArr[e]=t.niceMax})):(this.scales.setYScaleForIndex(0,i.minY,i.maxY),i.minY=i.yAxisScale[0].niceMin,i.maxY=i.yAxisScale[0].niceMax,i.minYArr[0]=i.yAxisScale[0].niceMin,i.maxYArr[0]=i.yAxisScale[0].niceMax),{minY:i.minY,maxY:i.maxY,minYArr:i.minYArr,maxYArr:i.maxYArr,yAxisScale:i.yAxisScale}}},{key:"setXRange",value:function(){var t,i=this.w.globals,e=this.w.config,a="numeric"===e.xaxis.type||"datetime"===e.xaxis.type||"category"===e.xaxis.type&&!i.noLabelsProvided||i.noLabelsProvided||i.isXNumeric;if(i.isXNumeric&&function(){for(var t=0;t<i.series.length;t++)if(i.labels[t])for(var e=0;e<i.labels[t].length;e++)null!==i.labels[t][e]&&M.isNumber(i.labels[t][e])&&(i.maxX=Math.max(i.maxX,i.labels[t][e]),i.initialMaxX=Math.max(i.maxX,i.labels[t][e]),i.minX=Math.min(i.minX,i.labels[t][e]),i.initialMinX=Math.min(i.minX,i.labels[t][e]))}(),i.noLabelsProvided&&0===e.xaxis.categories.length&&(i.maxX=i.labels[i.labels.length-1],i.initialMaxX=i.labels[i.labels.length-1],i.minX=1,i.initialMinX=1),i.isXNumeric||i.noLabelsProvided||i.dataFormatXNumeric){if(void 0===e.xaxis.tickAmount?(t=Math.round(i.svgWidth/150),(t="numeric"===e.xaxis.type&&i.dataPoints<30?i.dataPoints-1:t)>i.dataPoints&&0!==i.dataPoints&&(t=i.dataPoints-1)):"dataPoints"===e.xaxis.tickAmount?(1<i.series.length&&(t=i.series[i.maxValsInArrayIndex].length-1),i.isXNumeric&&(t=i.maxX-i.minX-1)):t=e.xaxis.tickAmount,i.xTickAmount=t,void 0!==e.xaxis.max&&"number"==typeof e.xaxis.max&&(i.maxX=e.xaxis.max),void 0!==e.xaxis.min&&"number"==typeof e.xaxis.min&&(i.minX=e.xaxis.min),void 0!==e.xaxis.range&&(i.minX=i.maxX-e.xaxis.range),i.minX!==Number.MAX_VALUE&&i.maxX!==-Number.MAX_VALUE)if(e.xaxis.convertedCatToNumeric&&!i.dataFormatXNumeric){for(var s=[],o=i.minX-1;o<i.maxX;o++)s.push(o+1);i.xAxisScale={result:s,niceMin:s[0],niceMax:s[s.length-1]}}else i.xAxisScale=this.scales.setXScale(i.minX,i.maxX);else i.xAxisScale=this.scales.linearScale(1,t,t),i.noLabelsProvided&&0<i.labels.length&&(i.xAxisScale=this.scales.linearScale(1,i.labels.length,t-1),i.seriesX=i.labels.slice());a&&(i.labels=i.xAxisScale.result.slice())}return i.isBarHorizontal&&i.labels.length&&(i.xTickAmount=i.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:i.minX,maxX:i.maxX}}},{key:"setZRange",value:function(){var t=this.w.globals;if(t.isDataXYZ)for(var e=0;e<t.series.length;e++)if(void 0!==t.seriesZ[e])for(var i=0;i<t.seriesZ[e].length;i++)null!==t.seriesZ[e][i]&&M.isNumber(t.seriesZ[e][i])&&(t.maxZ=Math.max(t.maxZ,t.seriesZ[e][i]),t.minZ=Math.min(t.minZ,t.seriesZ[e][i]))}},{key:"_handleSingleDataPoint",value:function(){var t,e,i=this.w.globals,a=this.w.config;i.minX===i.maxX&&(e=new V(this.ctx),"datetime"===a.xaxis.type?((t=e.getDate(i.minX)).setUTCDate(t.getDate()-2),i.minX=new Date(t).getTime(),(e=e.getDate(i.maxX)).setUTCDate(e.getDate()+2),i.maxX=new Date(e).getTime()):"numeric"!==a.xaxis.type&&("category"!==a.xaxis.type||i.noLabelsProvided)||(i.minX=i.minX-2,i.initialMinX=i.minX,i.maxX=i.maxX+2,i.initialMaxX=i.maxX))}},{key:"_getMinXDiff",value:function(){var a=this.w.globals;a.isXNumeric&&a.seriesX.forEach(function(t,e){1===t.length&&t.push(a.seriesX[a.maxValsInArrayIndex][a.seriesX[a.maxValsInArrayIndex].length-1]);var i=t.slice();i.sort(function(t,e){return t-e}),i.forEach(function(t,e){0<e&&(0<(e=t-i[e-1])&&(a.minXDiff=Math.min(e,a.minXDiff)))}),1===a.dataPoints&&a.minXDiff===Number.MAX_VALUE&&(a.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var t=this.w.globals,e=[],i=[];if(t.series.length)for(var a=0;a<t.series[t.maxValsInArrayIndex].length;a++)for(var s=0,o=0,r=0;r<t.series.length;r++)null!==t.series[r][a]&&M.isNumber(t.series[r][a])&&(0<t.series[r][a]?s=s+parseFloat(t.series[r][a])+1e-4:o+=parseFloat(t.series[r][a])),r===t.series.length-1&&(e.push(s),i.push(o));for(var n=0;n<e.length;n++)t.maxY=Math.max(t.maxY,e[n]),t.minY=Math.min(t.minY,i[n])}}]),ge),at=(o(de,[{key:"drawYaxis",value:function(s){var o=this,r=this.w,n=new z(this.ctx),l=r.config.yaxis[s].labels.style,h=l.fontSize,c=l.fontFamily,d=l.fontWeight,t=n.group({class:"apexcharts-yaxis",rel:s,transform:"translate("+r.globals.translateYAxisX[s]+", 0)"});if(this.axesUtils.isYAxisHidden(s))return t;var g=n.group({class:"apexcharts-yaxis-texts-g"});t.add(g);var u=r.globals.yAxisScale[s].result.length-1,p=r.globals.gridHeight/u,f=r.globals.translateY,x=r.globals.yLabelFormatters[s],b=r.globals.yAxisScale[s].result.slice(),b=this.axesUtils.checkForReversedLabels(s,b),m="";if(r.config.yaxis[s].labels.show)for(var e=u;0<=e;e--)!function(t){var e=b[t],e=x(e,t,r),i=r.config.yaxis[s].labels.padding;r.config.yaxis[s].opposite&&0!==r.config.yaxis.length&&(i*=-1);var a=o.axesUtils.getYAxisForeColor(l.colors,s),a=n.drawText({x:i,y:f+u/10+r.config.yaxis[s].labels.offsetY+1,text:e,textAnchor:r.config.yaxis[s].opposite?"start":"end",fontSize:h,fontFamily:c,fontWeight:d,foreColor:Array.isArray(a)?a[t]:a,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+l.cssClass});t===u&&(m=a),g.add(a);t=document.createElementNS(r.globals.SVGNS,"title");t.textContent=Array.isArray(e)?e.join(" "):e,a.node.appendChild(t),0!==r.config.yaxis[s].labels.rotate&&(e=n.rotateAroundCenter(m.node),t=n.rotateAroundCenter(a.node),a.node.setAttribute("transform","rotate(".concat(r.config.yaxis[s].labels.rotate," ").concat(e.x," ").concat(t.y,")"))),f+=p}(e);void 0!==r.config.yaxis[s].title.text&&(i=n.group({class:"apexcharts-yaxis-title"}),a=0,r.config.yaxis[s].opposite&&(a=r.globals.translateYAxisX[s]),v=n.drawText({x:a,y:r.globals.gridHeight/2+r.globals.translateY+r.config.yaxis[s].title.offsetY,text:r.config.yaxis[s].title.text,textAnchor:"end",foreColor:r.config.yaxis[s].title.style.color,fontSize:r.config.yaxis[s].title.style.fontSize,fontWeight:r.config.yaxis[s].title.style.fontWeight,fontFamily:r.config.yaxis[s].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+r.config.yaxis[s].title.style.cssClass}),i.add(v),t.add(i));var i,a=r.config.yaxis[s].axisBorder,v=31+a.offsetX;return r.config.yaxis[s].opposite&&(v=-31-a.offsetX),a.show&&(i=n.drawLine(v,r.globals.translateY+a.offsetY-2,v,r.globals.gridHeight+r.globals.translateY+a.offsetY+2,a.color,0,a.width),t.add(i)),r.config.yaxis[s].axisTicks.show&&this.axesUtils.drawYAxisTicks(v,u,a,r.config.yaxis[s].axisTicks,s,p,t),t}},{key:"drawYaxisInversed",value:function(t){var e=this.w,i=new z(this.ctx),a=i.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),s=i.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});a.add(s);var o=e.globals.yAxisScale[t].result.length-1,r=e.globals.gridWidth/o+.1,n=r+e.config.xaxis.labels.offsetX,l=e.globals.xLabelFormatter,h=e.globals.yAxisScale[t].result.slice(),c=e.globals.timescaleLabels;0<c.length&&(this.xaxisLabels=c.slice(),o=(h=c.slice()).length);var h=this.axesUtils.checkForReversedLabels(t,h),d=c.length;if(e.config.xaxis.labels.show)for(var g=d?0:o;d?g<d:0<=g;d?g++:g--){var u=h[g];u=l(u,g,e);var p=e.globals.gridWidth+e.globals.padHorizontal-(n-r+e.config.xaxis.labels.offsetX);c.length&&(p=(f=this.axesUtils.getLabel(h,c,p,g,this.drawnLabels,this.xaxisFontSize)).x,u=f.text,this.drawnLabels.push(f.text),0===g&&e.globals.skipFirstTimelinelabel&&(u=""),g===h.length-1&&e.globals.skipLastTimelinelabel&&(u=""));var f=i.drawText({x:p,y:this.xAxisoffX+e.config.xaxis.labels.offsetY+30-("top"===e.config.xaxis.position?e.globals.xAxisHeight+e.config.xaxis.axisTicks.height-2:0),text:u,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[t]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:e.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+e.config.xaxis.labels.style.cssClass});s.add(f),f.tspan(u);p=document.createElementNS(e.globals.SVGNS,"title");p.textContent=u,f.node.appendChild(p),n+=r}return this.inversedYAxisTitleText(a),this.inversedYAxisBorder(a),a}},{key:"inversedYAxisBorder",value:function(t){var e,i=this.w,a=new z(this.ctx),s=i.config.xaxis.axisBorder;s.show&&(e=0,"bar"===i.config.chart.type&&i.globals.isXNumeric&&(e-=15),s=a.drawLine(i.globals.padHorizontal+e+s.offsetX,this.xAxisoffX,i.globals.gridWidth,this.xAxisoffX,s.color,0,s.height),t.add(s))}},{key:"inversedYAxisTitleText",value:function(t){var e,i=this.w,a=new z(this.ctx);void 0!==i.config.xaxis.title.text&&(e=a.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),i=a.drawText({x:i.globals.gridWidth/2+i.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(i.config.xaxis.title.style.fontSize)+i.config.xaxis.title.offsetY+20,text:i.config.xaxis.title.text,textAnchor:"middle",fontSize:i.config.xaxis.title.style.fontSize,fontFamily:i.config.xaxis.title.style.fontFamily,fontWeight:i.config.xaxis.title.style.fontWeight,foreColor:i.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+i.config.xaxis.title.style.cssClass}),e.add(i),t.add(e))}},{key:"yAxisTitleRotate",value:function(t,e){var i=this.w,a=new z(this.ctx),s={width:0,height:0},o={width:0,height:0},r=i.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-texts-g"));null!==r&&(s=r.getBoundingClientRect());r=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-title text"));null!==r&&(o=r.getBoundingClientRect()),null!==r&&(o=this.xPaddingForYAxisTitle(t,s,o,e),r.setAttribute("x",o.xPos-(e?10:0))),null!==r&&(a=a.rotateAroundCenter(r),r.setAttribute("transform","rotate(".concat(e?-1*i.config.yaxis[t].title.rotate:i.config.yaxis[t].title.rotate," ").concat(a.x," ").concat(a.y,")")))}},{key:"xPaddingForYAxisTitle",value:function(t,e,i,a){var s=this.w,o=0,r=10;return void 0===s.config.yaxis[t].title.text||t<0?{xPos:o,padd:0}:(a?o=e.width+s.config.yaxis[t].title.offsetX+i.width/2+r/2:(o=-1*e.width+s.config.yaxis[t].title.offsetX+r/2+i.width/2,s.globals.isBarHorizontal&&(o=-1*e.width-s.config.yaxis[t].title.offsetX-(r=25))),{xPos:o,padd:r})}},{key:"setYAxisXPosition",value:function(s,o){var r,n=this.w,l=0,h=18,c=1;1<n.config.yaxis.length&&(this.multipleYs=!0),n.config.yaxis.map(function(t,e){var i=-1<n.globals.ignoreYAxisIndexes.indexOf(e)||!t.show||t.floating||0===s[e].width,a=s[e].width+o[e].width;t.opposite?n.globals.isBarHorizontal?(l=n.globals.gridWidth+n.globals.translateX-1,n.globals.translateYAxisX[e]=l-t.labels.offsetX):(l=n.globals.gridWidth+n.globals.translateX+c,i||(c=c+a+20),n.globals.translateYAxisX[e]=l-t.labels.offsetX+20):(r=n.globals.translateX-h,i||(h=h+a+20),n.globals.translateYAxisX[e]=r+t.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var o=this.w,t=o.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(t=M.listToArray(t)).forEach(function(t,e){var i,a,s=o.config.yaxis[e];s&&void 0!==s.labels.align&&(i=o.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-texts-g")),a=o.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-label")),a=M.listToArray(a),e=i.getBoundingClientRect(),"left"===s.labels.align?(a.forEach(function(t,e){t.setAttribute("text-anchor","start")}),s.opposite||i.setAttribute("transform","translate(-".concat(e.width,", 0)"))):"center"===s.labels.align?(a.forEach(function(t,e){t.setAttribute("text-anchor","middle")}),i.setAttribute("transform","translate(".concat(e.width/2*(s.opposite?1:-1),", 0)"))):"right"===s.labels.align&&(a.forEach(function(t,e){t.setAttribute("text-anchor","end")}),s.opposite&&i.setAttribute("transform","translate(".concat(e.width,", 0)"))))})}}]),de),t=(o(ce,[{key:"addEventListener",value:function(t,e){var i=this.w;i.globals.events.hasOwnProperty(t)?i.globals.events[t].push(e):i.globals.events[t]=[e]}},{key:"removeEventListener",value:function(t,e){var i=this.w;!i.globals.events.hasOwnProperty(t)||-1!==(e=i.globals.events[t].indexOf(e))&&i.globals.events[t].splice(e,1)}},{key:"fireEvent",value:function(t,e){var i=this.w;if(i.globals.events.hasOwnProperty(t)){e&&e.length||(e=[]);for(var a=i.globals.events[t],s=a.length,o=0;o<s;o++)a[o].apply(null,e)}}},{key:"setupEventHandlers",value:function(){var e=this,i=this.w,a=this.ctx,s=i.globals.dom.baseEl.querySelector(i.globals.chartClass);this.ctx.eventList.forEach(function(t){s.addEventListener(t,function(t){var e=Object.assign({},i,{seriesIndex:i.globals.capturedSeriesIndex,dataPointIndex:i.globals.capturedDataPointIndex});"mousemove"===t.type||"touchmove"===t.type?"function"==typeof i.config.chart.events.mouseMove&&i.config.chart.events.mouseMove(t,a,e):"mouseleave"===t.type||"touchleave"===t.type?"function"==typeof i.config.chart.events.mouseLeave&&i.config.chart.events.mouseLeave(t,a,e):("mouseup"===t.type&&1===t.which||"touchend"===t.type)&&("function"==typeof i.config.chart.events.click&&i.config.chart.events.click(t,a,e),a.ctx.events.fireEvent("click",[t,a,e]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(t){i.globals.dom.baseEl.addEventListener(t,e.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(t){var e,i=this.w,a=t.target.className;"click"!==t.type||(e=i.globals.dom.baseEl.querySelector(".apexcharts-menu"))&&e.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==a&&e.classList.remove("apexcharts-menu-open"),i.globals.clientX=("touchmove"===t.type?t.touches[0]:t).clientX,i.globals.clientY=("touchmove"===t.type?t.touches[0]:t).clientY}}]),ce),st=(o(he,[{key:"setCurrentLocaleValues",value:function(e){var t=this.w.config.chart.locales,t=(t=window.Apex.chart&&window.Apex.chart.locales&&0<window.Apex.chart.locales.length?this.w.config.chart.locales.concat(window.Apex.chart.locales):t).filter(function(t){return t.name===e})[0];if(!t)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");t=M.extend(E,t);this.w.globals.locale=t.options}}]),he),ot=(o(le,[{key:"drawAxis",value:function(t,e){var i,a,s=this.w.globals,o=this.w.config,r=new K(this.ctx),n=new at(this.ctx);s.axisCharts&&"radar"!==t&&(s.isBarHorizontal?(a=n.drawYaxisInversed(0),i=r.drawXaxisInversed(0),s.dom.elGraphical.add(i),s.dom.elGraphical.add(a)):(i=r.drawXaxis(),s.dom.elGraphical.add(i),o.yaxis.map(function(t,e){-1===s.ignoreYAxisIndexes.indexOf(e)&&(a=n.drawYaxis(e),s.dom.Paper.add(a))})))}}]),le),rt=(o(ne,[{key:"drawXCrosshairs",value:function(){var t=this.w,e=new z(this.ctx),i=new C(this.ctx),a=t.config.xaxis.crosshairs.fill.gradient,s=t.config.xaxis.crosshairs.dropShadow,o=t.config.xaxis.crosshairs.fill.type,r=a.colorFrom,n=a.colorTo,l=a.opacityFrom,h=a.opacityTo,c=a.stops,d=s.enabled,g=s.left,u=s.top,p=s.blur,f=s.color,a=s.opacity,s=t.config.xaxis.crosshairs.fill.color;t.config.xaxis.crosshairs.show&&("gradient"===o&&(s=e.drawGradient("vertical",r,n,l,h,null,c,null)),h=e.drawRect(),1===t.config.xaxis.crosshairs.width&&(h=e.drawLine()),c=t.globals.gridHeight,(!M.isNumber(c)||c<0)&&(c=0),e=t.config.xaxis.crosshairs.width,(!M.isNumber(e)||e<0)&&(e=0),h.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:c,width:e,height:c,fill:s,filter:"none","fill-opacity":t.config.xaxis.crosshairs.opacity,stroke:t.config.xaxis.crosshairs.stroke.color,"stroke-width":t.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":t.config.xaxis.crosshairs.stroke.dashArray}),d&&(h=i.dropShadow(h,{left:g,top:u,blur:p,color:f,opacity:a})),t.globals.dom.elGraphical.add(h))}},{key:"drawYCrosshairs",value:function(){var t,e=this.w,i=new z(this.ctx),a=e.config.yaxis[0].crosshairs,s=e.globals.barPadForNumericAxis;e.config.yaxis[0].crosshairs.show&&((t=i.drawLine(-s,0,e.globals.gridWidth+s,0,a.stroke.color,a.stroke.dashArray,a.stroke.width)).attr({class:"apexcharts-ycrosshairs"}),e.globals.dom.elGraphical.add(t));a=i.drawLine(-s,0,e.globals.gridWidth+s,0,a.stroke.color,0,0);a.attr({class:"apexcharts-ycrosshairs-hidden"}),e.globals.dom.elGraphical.add(a)}}]),ne),nt=(o(re,[{key:"checkResponsiveConfig",value:function(t){var s,o,e,r=this,n=this.w,i=n.config;0!==i.responsive.length&&((s=i.responsive.slice()).sort(function(t,e){return t.breakpoint>e.breakpoint?1:e.breakpoint>t.breakpoint?-1:0}).reverse(),o=new j({}),e=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=s[0].breakpoint,i=0<window.innerWidth?window.innerWidth:screen.width;if(e<i){e=P.extendArrayProps(o,n.globals.initialConfig,n),t=M.extend(e,t);t=M.extend(n.config,t),r.overrideResponsiveOptions(t)}else for(var a=0;a<s.length;a++)i<s[a].breakpoint&&(t=P.extendArrayProps(o,s[a].options,n),t=M.extend(n.config,t),r.overrideResponsiveOptions(t))},t?(i=P.extendArrayProps(o,t,n),i=M.extend(n.config,i),e(i=M.extend(i,t))):e({}))}},{key:"overrideResponsiveOptions",value:function(t){t=new j(t).init({responsiveOverride:!0});this.w.config=t}}]),re),lt=(o(oe,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var a=this,s=this.w,t=new M;if(s.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(s.config.theme.mode)),void 0===s.config.colors?s.globals.colors=this.predefined():(s.globals.colors=s.config.colors,Array.isArray(s.config.colors)&&0<s.config.colors.length&&"function"==typeof s.config.colors[0]&&(s.globals.colors=s.config.series.map(function(t,e){var i=s.config.colors[e];return"function"==typeof(i=i||s.config.colors[0])?(a.isColorFn=!0,i({value:s.globals.axisCharts?s.globals.series[e][0]||0:s.globals.series[e],seriesIndex:e,dataPointIndex:e,w:s})):i}))),s.globals.seriesColors.map(function(t,e){t&&(s.globals.colors[e]=t)}),s.config.theme.monochrome.enabled){var e=[],i=s.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(i=s.globals.series[0].length*s.globals.series.length);for(var o=s.config.theme.monochrome.color,r=1/(i/s.config.theme.monochrome.shadeIntensity),n=s.config.theme.monochrome.shadeTo,l=0,h=0;h<i;h++){var c=void 0,c="dark"===n?t.shadeColor(-1*l,o):t.shadeColor(l,o);l+=r,e.push(c)}s.globals.colors=e.slice()}var d=s.globals.colors.slice();this.pushExtraColors(s.globals.colors),["fill","stroke"].forEach(function(t){void 0===s.config[t].colors?s.globals[t].colors=a.isColorFn?s.config.colors:d:s.globals[t].colors=s.config[t].colors.slice(),a.pushExtraColors(s.globals[t].colors)}),void 0===s.config.dataLabels.style.colors?s.globals.dataLabels.style.colors=d:s.globals.dataLabels.style.colors=s.config.dataLabels.style.colors.slice(),this.pushExtraColors(s.globals.dataLabels.style.colors,50),void 0===s.config.plotOptions.radar.polygons.fill.colors?s.globals.radarPolygons.fill.colors=["dark"===s.config.theme.mode?"#424242":"none"]:s.globals.radarPolygons.fill.colors=s.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(s.globals.radarPolygons.fill.colors,20),void 0===s.config.markers.colors?s.globals.markers.colors=d:s.globals.markers.colors=s.config.markers.colors.slice(),this.pushExtraColors(s.globals.markers.colors)}},{key:"pushExtraColors",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=this.w,e=e||a.globals.series.length;if((i=null===i?this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===a.config.chart.type&&a.config.plotOptions.heatmap.colorScale.inverse:i)&&a.globals.series.length&&(e=a.globals.series[a.globals.maxValsInArrayIndex].length*a.globals.series.length),t.length<e)for(var s=e-t.length,o=0;o<s;o++)t.push(t[o])}},{key:"updateThemeOptions",value:function(t){t.chart=t.chart||{},t.tooltip=t.tooltip||{};var e=t.theme.mode||"light",i=t.theme.palette||("dark"===e?"palette4":"palette1"),a=t.chart.foreColor||("dark"===e?"#f6f7f8":"#373d3f");return t.tooltip.theme=e,t.chart.foreColor=a,t.theme.palette=i,t}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"];break;default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"]}return this.colors}}]),oe),ht=(o(se,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(t){var e=this.w,i="title"===t?e.config.title:e.config.subtitle,a=e.globals.svgWidth/2,s=i.offsetY,o="middle";"left"===i.align?(a=10,o="start"):"right"===i.align&&(a=e.globals.svgWidth-10,o="end"),a+=i.offsetX,s=s+parseInt(i.style.fontSize,10)+i.margin/2,void 0!==i.text&&((i=new z(this.ctx).drawText({x:a,y:s,text:i.text,textAnchor:o,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,fontWeight:i.style.fontWeight,foreColor:i.style.color,opacity:1})).node.setAttribute("class","apexcharts-".concat(t,"-text")),e.globals.dom.Paper.add(i))}}]),se),ct=(o(ae,[{key:"getTitleSubtitleCoords",value:function(t){var e=this.w,i=0,a=0,s=("title"===t?e.config.title:e.config.subtitle).floating,t=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(t,"-text"));return null===t||s||(i=(t=t.getBoundingClientRect()).width,a=e.globals.axisCharts?t.height+5:t.height),{width:i,height:a}}},{key:"getLegendsRect",value:function(){var t=this.w,e=t.globals.dom.baseEl.querySelector(".apexcharts-legend");t.config.legend.height||"top"!==t.config.legend.position&&"bottom"!==t.config.legend.position||(e.style.maxHeight=t.globals.svgHeight/2+"px");var i=Object.assign({},M.getBoundingClientRect(e));return null!==e&&!t.config.legend.floating&&t.config.legend.show?this.dCtx.lgRect={x:i.x,y:i.y,height:i.height,width:0===i.height?0:i.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},"left"!==t.config.legend.position&&"right"!==t.config.legend.position||1.5*this.dCtx.lgRect.width>t.globals.svgWidth&&(this.dCtx.lgRect.width=t.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(t,e){var i,a=t;return this.w.globals.isMultiLineX&&(i=e.map(function(t,e){return Array.isArray(t)?t.length:1}),t=Math.max.apply(Math,g(i)),a=e[i.indexOf(t)]),a}}]),ae),dt=(o(ie,[{key:"getxAxisLabelsCoords",value:function(){var t,e,i,a,s,o,r,n=this.w,l=n.globals.labels.slice();return n.config.xaxis.convertedCatToNumeric&&0===l.length&&(l=n.globals.categoryLabels),0<n.globals.timescaleLabels.length?(t={width:(e=this.getxAxisTimeScaleLabelsCoords()).width,height:e.height},n.globals.rotateXLabels=!1):(this.dCtx.lgWidthForSideLegends="left"!==n.config.legend.position&&"right"!==n.config.legend.position||n.config.legend.floating?0:this.dCtx.lgRect.width,r=n.globals.xLabelFormatter,i=M.getLargestStringFromArr(l),a=this.dCtx.dimHelpers.getLargestStringFromMultiArr(i,l),n.globals.isBarHorizontal&&(a=i=n.globals.yAxisScale[0].result.reduce(function(t,e){return t.length>e.length?t:e},0)),o=i,i=(e=new $(this.dCtx.ctx)).xLabelFormat(r,i,o,{i:void 0,dateFormatter:new V(this.dCtx.ctx).formatDate,w:n}),a=e.xLabelFormat(r,a,o,{i:void 0,dateFormatter:new V(this.dCtx.ctx).formatDate,w:n}),(n.config.xaxis.convertedCatToNumeric&&void 0===i||""===String(i).trim())&&(a=i="1"),o=r=(s=new z(this.dCtx.ctx)).getTextRects(i,n.config.xaxis.labels.style.fontSize),i!==a&&(o=s.getTextRects(a,n.config.xaxis.labels.style.fontSize)),(t={width:(r.width>=o.width?r:o).width,height:(r.height>=o.height?r:o).height}).width*l.length>n.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==n.config.xaxis.labels.rotate||n.config.xaxis.labels.rotateAlways?n.globals.isBarHorizontal||(n.globals.rotateXLabels=!0,r=(l=function(t){return s.getTextRects(t,n.config.xaxis.labels.style.fontSize,n.config.xaxis.labels.style.fontFamily,"rotate(".concat(n.config.xaxis.labels.rotate," 0 0)"),!1)})(i),i!==a&&(o=l(a)),t.height=(r.height>o.height?r:o).height/1.5,t.width=(r.width>o.width?r:o).width):n.globals.rotateXLabels=!1),{width:(t=!n.config.xaxis.labels.show?{width:0,height:0}:t).width,height:t.height}}},{key:"getxAxisTitleCoords",value:function(){var t=this.w,e=0,i=0;return void 0!==t.config.xaxis.title.text&&(e=(t=new z(this.dCtx.ctx).getTextRects(t.config.xaxis.title.text,t.config.xaxis.title.style.fontSize)).width,i=t.height),{width:e,height:i}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var t=this.w;this.dCtx.timescaleLabels=t.globals.timescaleLabels.slice();var e=this.dCtx.timescaleLabels.map(function(t){return t.value}),i=e.reduce(function(t,e){return void 0===t?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):t.length>e.length?t:e},0);return 1.05*(i=new z(this.dCtx.ctx).getTextRects(i,t.config.xaxis.labels.style.fontSize)).width*e.length>t.globals.gridWidth&&0!==t.config.xaxis.labels.rotate&&(t.globals.overlappingXLabels=!0),i}},{key:"additionalPaddingXLabels",value:function(t){var s=this,o=this.w,r=o.globals,n=o.config,l=n.xaxis.type,h=t.width;r.skipLastTimelinelabel=!1,r.skipFirstTimelinelabel=!1;var c=o.config.yaxis[0].opposite&&o.globals.isBarHorizontal;n.yaxis.forEach(function(t,e){var i,a;c?(s.dCtx.gridPad.left<h&&(s.dCtx.xPadLeft=h/2+1),s.dCtx.xPadRight=h/2+1):(i=t,a=e,-1!==r.collapsedSeriesIndices.indexOf(a)||(t=i,s.dCtx.timescaleLabels&&s.dCtx.timescaleLabels.length?(e=s.dCtx.timescaleLabels[0],a=s.dCtx.timescaleLabels[s.dCtx.timescaleLabels.length-1].position+h/1.75-s.dCtx.yAxisWidthRight,i=e.position-h/1.75+s.dCtx.yAxisWidthLeft,e="right"===o.config.legend.position&&0<s.dCtx.lgRect.width?s.dCtx.lgRect.width:0,a>r.svgWidth-r.translateX-e&&(r.skipLastTimelinelabel=!0),i<-(t.show&&!t.floating||"bar"!==n.chart.type&&"candlestick"!==n.chart.type&&"rangeBar"!==n.chart.type&&"boxPlot"!==n.chart.type?10:h/1.75)&&(r.skipFirstTimelinelabel=!0)):"datetime"===l?s.dCtx.gridPad.right<h&&!r.rotateXLabels&&(r.skipLastTimelinelabel=!0):"datetime"!==l&&s.dCtx.gridPad.right<h/2-s.dCtx.yAxisWidthRight&&!r.rotateXLabels&&("between"!==o.config.xaxis.tickPlacement||o.globals.isBarHorizontal)&&(s.dCtx.xPadRight=h/2+1)))})}}]),ie),gt=(o(ee,[{key:"getyAxisLabelsCoords",value:function(){var l=this,h=this.w,c=[],d=10,g=new J(this.dCtx.ctx);return h.config.yaxis.map(function(t,e){var i,a,s,o,r=h.globals.yAxisScale[e],n=0;!g.isYAxisHidden(e)&&t.labels.show&&void 0!==t.labels.minWidth&&(n=t.labels.minWidth),!g.isYAxisHidden(e)&&t.labels.show&&r.result.length?(s=h.globals.yLabelFormatters[e],i=r.niceMin===Number.MIN_VALUE?0:r.niceMin,void 0!==(r=i=s(a=String(i).length>String(r.niceMax).length?i:r.niceMax,{seriesIndex:e,dataPointIndex:-1,w:h}))&&0!==i.length||(i=a),h.globals.isBarHorizontal&&(d=0,o=h.globals.labels.slice(),i=s(i=M.getLargestStringFromArr(o),{seriesIndex:e,dataPointIndex:-1,w:h}),r=l.dCtx.dimHelpers.getLargestStringFromMultiArr(i,o)),a=new z(l.dCtx.ctx),s="rotate(".concat(t.labels.rotate," 0 0)"),o=e=a.getTextRects(i,t.labels.style.fontSize,t.labels.style.fontFamily,s,!1),i!==r&&(o=a.getTextRects(r,t.labels.style.fontSize,t.labels.style.fontFamily,s,!1)),c.push({width:(n>o.width||n>e.width?n:(o.width>e.width?o:e).width)+d,height:(o.height>e.height?o:e).height})):c.push({width:0,height:0})}),c}},{key:"getyAxisTitleCoords",value:function(){var s=this,t=this.w,o=[];return t.config.yaxis.map(function(t,e){var i,a;t.show&&void 0!==t.title.text?(i=new z(s.dCtx.ctx),a="rotate(".concat(t.title.rotate," 0 0)"),a=i.getTextRects(t.title.text,t.title.style.fontSize,t.title.style.fontFamily,a,!1),o.push({width:a.width,height:a.height})):o.push({width:0,height:0})}),o}},{key:"getTotalYAxisWidth",value:function(){function i(t,e){var i=s.config.yaxis[e].floating,a=0;0<t.width&&!i?(a=t.width+l,-1<s.globals.ignoreYAxisIndexes.indexOf(e)&&(a=a-t.width-l)):a=i||h.isYAxisHidden(e)?0:5,s.config.yaxis[e].opposite?n+=a:r+=a,o+=a}var s=this.w,o=0,r=0,n=0,l=1<s.globals.yAxisScale.length?10:0,h=new J(this.dCtx.ctx);return s.globals.yLabelsCoords.map(function(t,e){i(t,e)}),s.globals.yTitleCoords.map(function(t,e){i(t,e)}),s.globals.isBarHorizontal&&!s.config.yaxis[0].floating&&(o=s.globals.yLabelsCoords[0].width+s.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=r,this.dCtx.yAxisWidthRight=n,o}}]),ee),ut=(o(te,[{key:"gridPadForColumnsInNumericAxis",value:function(t){var e=this.w;if(e.globals.noData||e.globals.allSeriesCollapsed)return 0;function i(t){return"bar"===t||"rangeBar"===t||"candlestick"===t||"boxPlot"===t}var a,s=e.config.chart.type,o=0,r=i(s)?e.config.series.length:1;return 0<e.globals.comboBarCount&&(r=e.globals.comboBarCount),e.globals.collapsedSeries.forEach(function(t){i(t.type)&&--r}),e.config.chart.stacked&&(r=1),(i(s)||0<e.globals.comboBarCount)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&0<r&&(s=(s=(s=Math.abs(e.globals.initialMaxX-e.globals.initialMinX))<=3?e.globals.dataPoints:s)/t,t/2<(a=e.globals.minXDiff&&0<e.globals.minXDiff/s?e.globals.minXDiff/s:a)&&(a/=2),o=(o=(o=a/r*parseInt(e.config.plotOptions.bar.columnWidth,10)/100)<1?1:o)/(1<r?1:1.5)+5,e.globals.barPadForNumericAxis=o),o}},{key:"gridPadFortitleSubtitle",value:function(){var e=this,i=this.w,t=i.globals,a=this.dCtx.isSparkline||!i.globals.axisCharts?0:10;["title","subtitle"].forEach(function(t){void 0!==i.config[t].text?a+=i.config[t].margin:a+=e.dCtx.isSparkline||!i.globals.axisCharts?0:5}),!i.config.legend.show||"bottom"!==i.config.legend.position||i.config.legend.floating||i.globals.axisCharts||(a+=10);var s=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),o=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");t.gridHeight=t.gridHeight-s.height-o.height-a,t.translateY=t.translateY+s.height+o.height+a}},{key:"setGridXPosForDualYAxis",value:function(i,a){var s=this.w,o=new J(this.dCtx.ctx);s.config.yaxis.map(function(t,e){-1!==s.globals.ignoreYAxisIndexes.indexOf(e)||t.floating||o.isYAxisHidden(e)||(t.opposite&&(s.globals.translateX=s.globals.translateX-(a[e].width+i[e].width)-parseInt(s.config.yaxis[e].labels.style.fontSize,10)/1.2-12),s.globals.translateX<2&&(s.globals.translateX=2))})}}]),te),pt=(o(Kt,[{key:"plotCoords",value:function(){var t=this.w.globals;this.lgRect=this.dimHelpers.getLegendsRect(),t.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),t.gridHeight=t.gridHeight-this.gridPad.top-this.gridPad.bottom,t.gridWidth=t.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var e=this.dimGrid.gridPadForColumnsInNumericAxis(t.gridWidth);t.gridWidth=t.gridWidth-2*e,t.translateX=t.translateX+this.gridPad.left+this.xPadLeft+(0<e?e+4:0),t.translateY=t.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var t=this,i=this.w,e=i.globals,a=this.dimYAxis.getyAxisLabelsCoords(),s=this.dimYAxis.getyAxisTitleCoords();i.globals.yLabelsCoords=[],i.globals.yTitleCoords=[],i.config.yaxis.map(function(t,e){i.globals.yLabelsCoords.push({width:a[e].width,index:e}),i.globals.yTitleCoords.push({width:s[e].width,index:e})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var o=this.dimXAxis.getxAxisLabelsCoords(),r=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(o,r),e.translateXAxisY=i.globals.rotateXLabels?this.xAxisHeight/8:-4,e.translateXAxisX=i.globals.rotateXLabels&&i.globals.isXNumeric&&i.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,i.globals.isBarHorizontal&&(e.rotateXLabels=!1,e.translateXAxisY=parseInt(i.config.xaxis.labels.style.fontSize,10)/1.5*-1),e.translateXAxisY=e.translateXAxisY+i.config.xaxis.labels.offsetY,e.translateXAxisX=e.translateXAxisX+i.config.xaxis.labels.offsetX;var n=this.yAxisWidth,l=this.xAxisHeight;e.xAxisLabelsHeight=this.xAxisHeight-r.height,e.xAxisLabelsWidth=this.xAxisWidth,e.xAxisHeight=this.xAxisHeight;var h=10;"radar"!==i.config.chart.type&&!this.isSparkline||(n=0,l=e.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),!this.isSparkline&&"treemap"!==i.config.chart.type||(h=l=n=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(o);function c(){e.translateX=n,e.gridHeight=e.svgHeight-t.lgRect.height-l-(t.isSparkline||"treemap"===i.config.chart.type?0:i.globals.rotateXLabels?10:15),e.gridWidth=e.svgWidth-n}switch("top"===i.config.xaxis.position&&(h=e.xAxisHeight-i.config.xaxis.axisTicks.height-5),i.config.legend.position){case"bottom":e.translateY=h,c();break;case"top":e.translateY=this.lgRect.height+h,c();break;case"left":e.translateY=h,e.translateX=this.lgRect.width+n,e.gridHeight=e.svgHeight-l-12,e.gridWidth=e.svgWidth-this.lgRect.width-n;break;case"right":e.translateY=h,e.translateX=n,e.gridHeight=e.svgHeight-l-12,e.gridWidth=e.svgWidth-this.lgRect.width-n-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(s,a),new at(this.ctx).setYAxisXPosition(a,s)}},{key:"setDimensionsForNonAxisCharts",value:function(){var t=this.w,e=t.globals,i=t.config,a=0;t.config.legend.show&&!t.config.legend.floating&&(a=20);var t="pie"===i.chart.type||"polarArea"===i.chart.type||"donut"===i.chart.type?"pie":"radialBar",s=i.plotOptions[t].offsetY,o=i.plotOptions[t].offsetX;if(!i.legend.show||i.legend.floating)return e.gridHeight=e.svgHeight-i.grid.padding.left+i.grid.padding.right,e.gridWidth=e.gridHeight,e.translateY=s,void(e.translateX=o+(e.svgWidth-e.gridWidth)/2);switch(i.legend.position){case"bottom":e.gridHeight=e.svgHeight-this.lgRect.height-e.goldenPadding,e.gridWidth=e.svgWidth,e.translateY=s-10,e.translateX=o+(e.svgWidth-e.gridWidth)/2;break;case"top":e.gridHeight=e.svgHeight-this.lgRect.height-e.goldenPadding,e.gridWidth=e.svgWidth,e.translateY=this.lgRect.height+s+10,e.translateX=o+(e.svgWidth-e.gridWidth)/2;break;case"left":e.gridWidth=e.svgWidth-this.lgRect.width-a,e.gridHeight="auto"!==i.chart.height?e.svgHeight:e.gridWidth,e.translateY=s,e.translateX=o+this.lgRect.width+a;break;case"right":e.gridWidth=e.svgWidth-this.lgRect.width-a-5,e.gridHeight="auto"!==i.chart.height?e.svgHeight:e.gridWidth,e.translateY=s,e.translateX=o+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(t,e){var i=this.w;this.xAxisHeight=(t.height+e.height)*(i.globals.isMultiLineX?1.2:i.globals.LINE_HEIGHT_RATIO)+(i.globals.rotateXLabels?22:10),this.xAxisWidth=t.width,this.xAxisHeight-e.height>i.config.xaxis.labels.maxHeight&&(this.xAxisHeight=i.config.xaxis.labels.maxHeight),i.config.xaxis.labels.minHeight&&this.xAxisHeight<i.config.xaxis.labels.minHeight&&(this.xAxisHeight=i.config.xaxis.labels.minHeight),i.config.xaxis.floating&&(this.xAxisHeight=0);var a=0,s=0;i.config.yaxis.forEach(function(t){a+=t.labels.minWidth,s+=t.labels.maxWidth}),this.yAxisWidth<a&&(this.yAxisWidth=a),this.yAxisWidth>s&&(this.yAxisWidth=s)}}]),Kt),ft=(o(Qt,[{key:"getLegendStyles",value:function(){var t=document.createElement("style");t.setAttribute("type","text/css");var e=document.createTextNode("\t\n    \t\n      .apexcharts-legend {\t\n        display: flex;\t\n        overflow: auto;\t\n        padding: 0 10px;\t\n      }\t\n      .apexcharts-legend.position-bottom, .apexcharts-legend.position-top {\t\n        flex-wrap: wrap\t\n      }\t\n      .apexcharts-legend.position-right, .apexcharts-legend.position-left {\t\n        flex-direction: column;\t\n        bottom: 0;\t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-left, .apexcharts-legend.position-top.apexcharts-align-left, .apexcharts-legend.position-right, .apexcharts-legend.position-left {\t\n        justify-content: flex-start;\t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-center, .apexcharts-legend.position-top.apexcharts-align-center {\t\n        justify-content: center;  \t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-right, .apexcharts-legend.position-top.apexcharts-align-right {\t\n        justify-content: flex-end;\t\n      }\t\n      .apexcharts-legend-series {\t\n        cursor: pointer;\t\n        line-height: normal;\t\n      }\t\n      .apexcharts-legend.position-bottom .apexcharts-legend-series, .apexcharts-legend.position-top .apexcharts-legend-series{\t\n        display: flex;\t\n        align-items: center;\t\n      }\t\n      .apexcharts-legend-text {\t\n        position: relative;\t\n        font-size: 14px;\t\n      }\t\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\t\n        pointer-events: none;\t\n      }\t\n      .apexcharts-legend-marker {\t\n        position: relative;\t\n        display: inline-block;\t\n        cursor: pointer;\t\n        margin-right: 3px;\t\n        border-style: solid;\n      }\t\n      \t\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\t\n        display: inline-block;\t\n      }\t\n      .apexcharts-legend-series.apexcharts-no-click {\t\n        cursor: auto;\t\n      }\t\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\t\n        display: none !important;\t\n      }\t\n      .apexcharts-inactive-legend {\t\n        opacity: 0.45;\t\n      }");return t.appendChild(e),t}},{key:"getLegendBBox",value:function(){var t=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),e=t.width;return{clwh:t.height,clww:e}}},{key:"appendToForeignObject",value:function(){var t=this.w.globals;t.dom.elLegendForeign=document.createElementNS(t.SVGNS,"foreignObject");var e=t.dom.elLegendForeign;e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("width",t.svgWidth),e.setAttribute("height",t.svgHeight),t.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),e.appendChild(t.dom.elLegendWrap),e.appendChild(this.getLegendStyles()),t.dom.Paper.node.insertBefore(e,t.dom.elGraphical.node)}},{key:"toggleDataSeries",value:function(t,e){var i,a,s=this,o=this.w;o.globals.axisCharts||"radialBar"===o.config.chart.type?(o.globals.resized=!0,i=a=null,o.globals.risingSeries=[],i=o.globals.axisCharts?(a=o.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"']")),parseInt(a.getAttribute("data:realIndex"),10)):(a=o.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(t+1,"']")),parseInt(a.getAttribute("rel"),10)-1),e?[{cs:o.globals.collapsedSeries,csi:o.globals.collapsedSeriesIndices},{cs:o.globals.ancillaryCollapsedSeries,csi:o.globals.ancillaryCollapsedSeriesIndices}].forEach(function(t){s.riseCollapsedSeries(t.cs,t.csi,i)}):this.hideSeries({seriesEl:a,realIndex:i})):(a=o.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(t+1,"'] path")),"pie"!==(t=o.config.chart.type)&&"polarArea"!==t&&"donut"!==t||(o=o.config.plotOptions.pie.donut.labels,new z(this.lgCtx.ctx).pathMouseDown(a.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(a.members[0].node,o)),a.fire("click"))}},{key:"hideSeries",value:function(t){var e=t.seriesEl,i=t.realIndex,a=this.w,s=M.clone(a.config.series);a.globals.axisCharts?(t=!1,a.config.yaxis[i]&&a.config.yaxis[i].show&&a.config.yaxis[i].showAlways&&(t=!0,a.globals.ancillaryCollapsedSeriesIndices.indexOf(i)<0&&(a.globals.ancillaryCollapsedSeries.push({index:i,data:s[i].data.slice(),type:e.parentNode.className.baseVal.split("-")[1]}),a.globals.ancillaryCollapsedSeriesIndices.push(i))),t||(a.globals.collapsedSeries.push({index:i,data:s[i].data.slice(),type:e.parentNode.className.baseVal.split("-")[1]}),a.globals.collapsedSeriesIndices.push(i),t=a.globals.risingSeries.indexOf(i),a.globals.risingSeries.splice(t,1))):(a.globals.collapsedSeries.push({index:i,data:s[i]}),a.globals.collapsedSeriesIndices.push(i));for(var o=e.childNodes,r=0;r<o.length;r++)o[r].classList.contains("apexcharts-series-markers-wrap")&&(o[r].classList.contains("apexcharts-hide")?o[r].classList.remove("apexcharts-hide"):o[r].classList.add("apexcharts-hide"));a.globals.allSeriesCollapsed=a.globals.collapsedSeries.length===a.config.series.length,s=this._getSeriesBasedOnCollapsedState(s),this.lgCtx.ctx.updateHelpers._updateSeries(s,a.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(t,e,i){var a=this.w,s=M.clone(a.config.series);if(0<t.length){for(var o=0;o<t.length;o++)t[o].index===i&&(a.globals.axisCharts?s[i].data=t[o].data.slice():s[i]=t[o].data,t.splice(o,1),e.splice(o,1),a.globals.risingSeries.push(i));s=this._getSeriesBasedOnCollapsedState(s),this.lgCtx.ctx.updateHelpers._updateSeries(s,a.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(i){var a=this.w;return a.globals.axisCharts?i.forEach(function(t,e){-1<a.globals.collapsedSeriesIndices.indexOf(e)&&(i[e].data=[])}):i.forEach(function(t,e){-1<a.globals.collapsedSeriesIndices.indexOf(e)&&(i[e]=0)}),i}}]),Qt),xt=(o(Jt,[{key:"init",value:function(){var t=this.w,e=t.globals,t=t.config;if((t.legend.showForSingleSeries&&1===e.series.length||this.isBarsDistributed||1<e.series.length||!e.axisCharts)&&t.legend.show){for(;e.dom.elLegendWrap.firstChild;)e.dom.elLegendWrap.removeChild(e.dom.elLegendWrap.firstChild);this.drawLegends(),M.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===t.legend.position||"top"===t.legend.position?this.legendAlignHorizontal():"right"!==t.legend.position&&"left"!==t.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var t,e=this.w,i=e.config.legend.fontFamily,a=e.globals.seriesNames,s=e.globals.colors.slice();"heatmap"===e.config.chart.type?(a=(t=e.config.plotOptions.heatmap.colorScale.ranges).map(function(t){return t.name||t.from+" - "+t.to}),s=t.map(function(t){return t.color})):this.isBarsDistributed&&(a=e.globals.labels.slice()),e.config.legend.customLegendItems.length&&(a=e.config.legend.customLegendItems);for(var o=e.globals.legendFormatter,r=e.config.legend.inverseOrder,n=r?a.length-1:0;r?0<=n:n<=a.length-1;r?n--:n++){var l=o(a[n],{seriesIndex:n,w:e}),h=!1,c=!1;if(0<e.globals.collapsedSeries.length)for(var d=0;d<e.globals.collapsedSeries.length;d++)e.globals.collapsedSeries[d].index===n&&(h=!0);if(0<e.globals.ancillaryCollapsedSeriesIndices.length)for(var g=0;g<e.globals.ancillaryCollapsedSeriesIndices.length;g++)e.globals.ancillaryCollapsedSeriesIndices[g]===n&&(c=!0);var u=document.createElement("span");u.classList.add("apexcharts-legend-marker");var p=e.config.legend.markers.offsetX,f=e.config.legend.markers.offsetY,x=e.config.legend.markers.height,b=e.config.legend.markers.width,m=e.config.legend.markers.strokeWidth,v=e.config.legend.markers.strokeColor,y=e.config.legend.markers.radius,w=u.style;w.background=s[n],w.color=s[n],w.setProperty("background",s[n],"important"),e.config.legend.markers.fillColors&&e.config.legend.markers.fillColors[n]&&(w.background=e.config.legend.markers.fillColors[n]),void 0!==e.globals.seriesColors[n]&&(w.background=e.globals.seriesColors[n],w.color=e.globals.seriesColors[n]),w.height=Array.isArray(x)?parseFloat(x[n])+"px":parseFloat(x)+"px",w.width=Array.isArray(b)?parseFloat(b[n])+"px":parseFloat(b)+"px",w.left=(Array.isArray(p)?parseFloat(p[n]):parseFloat(p))+"px",w.top=(Array.isArray(f)?parseFloat(f[n]):parseFloat(f))+"px",w.borderWidth=Array.isArray(m)?m[n]:m,w.borderColor=Array.isArray(v)?v[n]:v,w.borderRadius=Array.isArray(y)?parseFloat(y[n])+"px":parseFloat(y)+"px",e.config.legend.markers.customHTML&&(Array.isArray(e.config.legend.markers.customHTML)?e.config.legend.markers.customHTML[n]&&(u.innerHTML=e.config.legend.markers.customHTML[n]()):u.innerHTML=e.config.legend.markers.customHTML()),z.setAttrs(u,{rel:n+1,"data:collapsed":h||c}),(h||c)&&u.classList.add("apexcharts-inactive-legend");v=document.createElement("div"),w=document.createElement("span");w.classList.add("apexcharts-legend-text"),w.innerHTML=Array.isArray(l)?M.sanitizeDom(l.join(" ")):M.sanitizeDom(l);y=(y=e.config.legend.labels.useSeriesColors?e.globals.colors[n]:e.config.legend.labels.colors)||e.config.chart.foreColor;w.style.color=y,w.style.fontSize=parseFloat(e.config.legend.fontSize)+"px",w.style.fontWeight=e.config.legend.fontWeight,w.style.fontFamily=i||e.config.chart.fontFamily,z.setAttrs(w,{rel:n+1,i:n,"data:default-text":encodeURIComponent(l),"data:collapsed":h||c}),v.appendChild(u),v.appendChild(w);w=new P(this.ctx);e.config.legend.showForZeroSeries||0===w.getSeriesTotalByIndex(n)&&w.seriesHaveSameValues(n)&&!w.isSeriesNull(n)&&-1===e.globals.collapsedSeriesIndices.indexOf(n)&&-1===e.globals.ancillaryCollapsedSeriesIndices.indexOf(n)&&v.classList.add("apexcharts-hidden-zero-series"),e.config.legend.showForNullSeries||w.isSeriesNull(n)&&-1===e.globals.collapsedSeriesIndices.indexOf(n)&&-1===e.globals.ancillaryCollapsedSeriesIndices.indexOf(n)&&v.classList.add("apexcharts-hidden-null-series"),e.globals.dom.elLegendWrap.appendChild(v),e.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(e.config.legend.horizontalAlign)),e.globals.dom.elLegendWrap.classList.add("position-"+e.config.legend.position),v.classList.add("apexcharts-legend-series"),v.style.margin="".concat(e.config.legend.itemMargin.vertical,"px ").concat(e.config.legend.itemMargin.horizontal,"px"),e.globals.dom.elLegendWrap.style.width=e.config.legend.width?e.config.legend.width+"px":"",e.globals.dom.elLegendWrap.style.height=e.config.legend.height?e.config.legend.height+"px":"",z.setAttrs(v,{rel:n+1,seriesName:M.escapeString(a[n]),"data:collapsed":h||c}),(h||c)&&v.classList.add("apexcharts-inactive-legend"),e.config.legend.onItemClick.toggleDataSeries||v.classList.add("apexcharts-no-click")}e.globals.dom.elWrap.addEventListener("click",this.onLegendClick,!0),e.config.legend.onItemHover.highlightDataSeries&&0===e.config.legend.customLegendItems.length&&(e.globals.dom.elWrap.addEventListener("mousemove",this.onLegendHovered,!0),e.globals.dom.elWrap.addEventListener("mouseout",this.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(t,e){var i,a,s=this.w,o=s.globals.dom.baseEl.querySelector(".apexcharts-legend"),r=o.getBoundingClientRect(),n=0;"bottom"===s.config.legend.position?n+=s.globals.svgHeight-r.height/2:"top"===s.config.legend.position&&(n=n+(0<(r=(a=new pt(this.ctx)).dimHelpers.getTitleSubtitleCoords("title").height)?r-10:0)+(0<(a=a.dimHelpers.getTitleSubtitleCoords("subtitle").height)?a-10:0)),o.style.position="absolute",i=0+t+s.config.legend.offsetX,n=n+e+s.config.legend.offsetY,o.style.left=i+"px",o.style.top=n+"px","bottom"===s.config.legend.position?(o.style.top="auto",o.style.bottom=5-s.config.legend.offsetY+"px"):"right"===s.config.legend.position&&(o.style.left="auto",o.style.right=25+s.config.legend.offsetX+"px"),["width","height"].forEach(function(t){o.style[t]&&(o.style[t]=parseInt(s.config.legend[t],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var t=this.w;t.globals.dom.baseEl.querySelector(".apexcharts-legend").style.right=0;var e=this.legendHelpers.getLegendBBox(),i=new pt(this.ctx),a=i.dimHelpers.getTitleSubtitleCoords("title"),s=i.dimHelpers.getTitleSubtitleCoords("subtitle"),i=0;"bottom"===t.config.legend.position?i=-e.clwh/1.8:"top"===t.config.legend.position&&(i=a.height+s.height+t.config.title.margin+t.config.subtitle.margin-10),this.setLegendWrapXY(20,i)}},{key:"legendAlignVertical",value:function(){var t=this.w,e=this.legendHelpers.getLegendBBox(),i=0;"left"===t.config.legend.position&&(i=20),"right"===t.config.legend.position&&(i=t.globals.svgWidth-e.clww-10),this.setLegendWrapXY(i,20)}},{key:"onLegendHovered",value:function(t){var e=this.w,i=t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker");"heatmap"===e.config.chart.type||this.isBarsDistributed?i&&(e=parseInt(t.target.getAttribute("rel"),10)-1,this.ctx.events.fireEvent("legendHover",[this.ctx,e,this.w]),new O(this.ctx).highlightRangeInSeries(t,t.target)):!t.target.classList.contains("apexcharts-inactive-legend")&&i&&new O(this.ctx).toggleSeriesOnHover(t,t.target)}},{key:"onLegendClick",value:function(t){var e,i,a,s=this.w;s.config.legend.customLegendItems.length||!t.target.classList.contains("apexcharts-legend-text")&&!t.target.classList.contains("apexcharts-legend-marker")||(e=parseInt(t.target.getAttribute("rel"),10)-1,i="true"===t.target.getAttribute("data:collapsed"),"function"==typeof(a=this.w.config.chart.events.legendClick)&&a(this.ctx,e,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,e,this.w]),"function"==typeof(a=this.w.config.legend.markers.onClick)&&t.target.classList.contains("apexcharts-legend-marker")&&(a(this.ctx,e,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,e,this.w])),"treemap"!==s.config.chart.type&&"heatmap"!==s.config.chart.type&&!this.isBarsDistributed&&s.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(e,i))}}]),Jt),bt=(o($t,[{key:"createToolbar",value:function(){function t(){return document.createElement("div")}var s=this,o=this.w,e=t();if(e.setAttribute("class","apexcharts-toolbar"),e.style.top=o.config.chart.toolbar.offsetY+"px",e.style.right=3-o.config.chart.toolbar.offsetX+"px",o.globals.dom.elWrap.appendChild(e),this.elZoom=t(),this.elZoomIn=t(),this.elZoomOut=t(),this.elPan=t(),this.elSelection=t(),this.elZoomReset=t(),this.elMenuIcon=t(),this.elMenu=t(),this.elCustomIcons=[],this.t=o.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var i=0;i<this.t.customIcons.length;i++)this.elCustomIcons.push(t());function a(t,e,i){var a=t.toLowerCase();s.t[a]&&o.config.chart.zoom.enabled&&r.push({el:e,icon:"string"==typeof s.t[a]?s.t[a]:i,title:s.localeValues[t],class:"apexcharts-".concat(a,"-icon")})}var r=[];a("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),a("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');function n(t){s.t[t]&&o.config.chart[t].enabled&&r.push({el:"zoom"===t?s.elZoom:s.elSelection,icon:"string"==typeof s.t[t]?s.t[t]:"zoom"===t?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:s.localeValues["zoom"===t?"selectionZoom":"selection"],class:o.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(t,"-icon")})}n("zoom"),n("selection"),this.t.pan&&o.config.chart.zoom.enabled&&r.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:o.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),a("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&r.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var l=0;l<this.elCustomIcons.length;l++)r.push({el:this.elCustomIcons[l],icon:this.t.customIcons[l].icon,title:this.t.customIcons[l].title,index:this.t.customIcons[l].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[l].class});r.forEach(function(t,e){t.index&&M.moveIndexInArray(r,e,t.index)});for(var h=0;h<r.length;h++)z.setAttrs(r[h].el,{class:r[h].class,title:r[h].title}),r[h].el.innerHTML=r[h].icon,e.appendChild(r[h].el);this._createHamburgerMenu(e),o.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):o.globals.panEnabled?this.elPan.classList.add(this.selectedClass):o.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(t){this.elMenuItems=[],t.appendChild(this.elMenu),z.setAttrs(this.elMenu,{class:"apexcharts-menu"});var e=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];this.w.globals.allSeriesHasEqualX||e.splice(2,1);for(var i=0;i<e.length;i++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[i].innerHTML=e[i].title,z.setAttrs(this.elMenuItems[i],{class:"apexcharts-menu-item ".concat(e[i].name),title:e[i].title}),this.elMenu.appendChild(this.elMenuItems[i])}},{key:"addToolbarEventListeners",value:function(){var e=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(t){t.classList.contains("exportSVG")?t.addEventListener("click",e.handleDownload.bind(e,"svg")):t.classList.contains("exportPNG")?t.addEventListener("click",e.handleDownload.bind(e,"png")):t.classList.contains("exportCSV")&&t.addEventListener("click",e.handleDownload.bind(e,"csv"))});for(var t=0;t<this.t.customIcons.length;t++)this.elCustomIcons[t].addEventListener("click",this.t.customIcons[t].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(a){this.ctx.getSyncedCharts().forEach(function(t){t.ctx.toolbar.toggleOtherControls();var e="selection"===a?t.ctx.toolbar.elSelection:t.ctx.toolbar.elZoom,i="selection"===a?"selectionEnabled":"zoomEnabled";t.w.globals[i]=!t.w.globals[i],e.classList.contains(t.ctx.toolbar.selectedClass)?e.classList.remove(t.ctx.toolbar.selectedClass):e.classList.add(t.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var t=this.w;this.elZoom||(this.elZoom=t.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=t.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=t.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(t){this.toggleOtherControls(),"pan"===t?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var e="pan"===t?this.elPan:this.elZoom,t="pan"===t?this.elZoom:this.elPan;e&&e.classList.add(this.selectedClass),t&&t.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(t){t.ctx.toolbar.toggleOtherControls(),t.w.globals.panEnabled=!t.w.globals.panEnabled,t.ctx.toolbar.elPan.classList.contains(t.ctx.toolbar.selectedClass)?t.ctx.toolbar.elPan.classList.remove(t.ctx.toolbar.selectedClass):t.ctx.toolbar.elPan.classList.add(t.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var e=this,t=this.w;t.globals.panEnabled=!1,t.globals.zoomEnabled=!1,t.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(t){t&&t.classList.remove(e.selectedClass)})}},{key:"handleZoomIn",value:function(){var t=this.w;t.globals.isTimelineBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY);var e=(this.minX+this.maxX)/2,i=(this.minX+e)/2,e=(this.maxX+e)/2,e=this._getNewMinXMaxX(i,e);t.globals.disableZoomIn||this.zoomUpdateOptions(e.minX,e.maxX)}},{key:"handleZoomOut",value:function(){var t,e,i=this.w;i.globals.isTimelineBar&&(this.minX=i.globals.minY,this.maxX=i.globals.maxY),"datetime"===i.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3||(e=(this.minX+this.maxX)/2,t=this.minX-(e-this.minX),e=this.maxX-(e-this.maxX),e=this._getNewMinXMaxX(t,e),i.globals.disableZoomOut||this.zoomUpdateOptions(e.minX,e.maxX))}},{key:"_getNewMinXMaxX",value:function(t,e){var i=this.w.config.xaxis.convertedCatToNumeric;return{minX:i?Math.floor(t):t,maxX:i?Math.floor(e):e}}},{key:"zoomUpdateOptions",value:function(t,e){var i,a=this.w;void 0!==t||void 0!==e?a.config.xaxis.convertedCatToNumeric&&(t<1&&(t=1,e=a.globals.dataPoints),e-t<2)||(e={xaxis:i=(t=this.getBeforeZoomRange(i={min:t,max:e}))?t.xaxis:i},t=M.clone(a.globals.initialConfig.yaxis),a.config.chart.zoom.autoScaleYaxis&&(t=new et(this.ctx).autoScaleY(this.ctx,t,{xaxis:i})),a.config.chart.group||(e.yaxis=t),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(e,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(i,t)):this.handleZoomReset()}},{key:"zoomCallback",value:function(t,e){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:t,yaxis:e})}},{key:"getBeforeZoomRange",value:function(t,e){var i=null;return i="function"==typeof this.ev.beforeZoom?this.ev.beforeZoom(this,{xaxis:t,yaxis:e}):i}},{key:"toggleMenu",value:function(){var t=this;window.setTimeout(function(){t.elMenu.classList.contains("apexcharts-menu-open")?t.elMenu.classList.remove("apexcharts-menu-open"):t.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(t){var e=this.w,i=new Q(this.ctx);switch(t){case"svg":i.exportToSVG(this.ctx);break;case"png":i.exportToPng(this.ctx);break;case"csv":i.exportToCSV({series:e.config.series,columnDelimiter:e.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(t){this.ctx.getSyncedCharts().forEach(function(t){var e=t.w;e.globals.lastXAxis.min=void 0,e.globals.lastXAxis.max=void 0,t.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof e.config.chart.events.beforeResetZoom&&(i=e.config.chart.events.beforeResetZoom(t,e))&&t.updateHelpers.revertDefaultAxisMinMax(i),"function"==typeof e.config.chart.events.zoomed&&t.ctx.toolbar.zoomCallback({min:e.config.xaxis.min,max:e.config.xaxis.max}),e.globals.zoomed=!1;var i=t.ctx.series.emptyCollapsedSeries(M.clone(e.globals.initialSeries));t.updateHelpers._updateSeries(i,e.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),$t),mt=function(){n(a,bt);var i=c(a);function a(t){var e;return s(this,a),(e=i.call(this,t)).ctx=t,e.w=t.w,e.dragged=!1,e.graphics=new z(e.ctx),e.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],e.clientX=0,e.clientY=0,e.startX=0,e.endX=0,e.dragX=0,e.startY=0,e.endY=0,e.dragY=0,e.moveDirection="none",e}return o(a,[{key:"init",value:function(t){var e=this,i=t.xyRatios,t=this.w,a=this;this.xyRatios=i,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=t.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),t.globals.dom.elGraphical.add(this.zoomRect),t.globals.dom.elGraphical.add(this.selectionRect),"x"===t.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:t.globals.gridWidth,maxY:t.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===t.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:t.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=t.globals.dom.baseEl.querySelector("".concat(t.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(t){e.hoverArea.addEventListener(t,a.svgMouseEvents.bind(a,i),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(t,e){var i=this.w,a=this,s=this.ctx.toolbar,o=(i.globals.zoomEnabled?i.config.chart.zoom:i.config.chart.selection).type,r=i.config.chart.toolbar.autoSelected;e.shiftKey?(this.shiftWasPressed=!0,s.enableZoomPanFromToolbar("pan"===r?"zoom":"pan")):this.shiftWasPressed&&(s.enableZoomPanFromToolbar(r),this.shiftWasPressed=!1);r=e.target.classList;r.contains("apexcharts-selection-rect")||r.contains("apexcharts-legend-marker")||r.contains("apexcharts-legend-text")||e.target.parentNode.classList.contains("apexcharts-toolbar")||(a.clientX=("touchmove"===e.type||"touchstart"===e.type?e.touches[0]:"touchend"===e.type?e.changedTouches[0]:e).clientX,a.clientY=("touchmove"===e.type||"touchstart"===e.type?e.touches[0]:"touchend"===e.type?e.changedTouches[0]:e).clientY,"mousedown"===e.type&&1===e.which&&(r=a.gridRect.getBoundingClientRect(),a.startX=a.clientX-r.left,a.startY=a.clientY-r.top,a.dragged=!1,a.w.globals.mousedown=!0),("mousemove"===e.type&&1===e.which||"touchmove"===e.type)&&(a.dragged=!0,i.globals.panEnabled?(i.globals.selection=null,a.w.globals.mousedown&&a.panDragging({context:a,zoomtype:o,xyRatios:t})):(a.w.globals.mousedown&&i.globals.zoomEnabled||a.w.globals.mousedown&&i.globals.selectionEnabled)&&(a.selection=a.selectionDrawing({context:a,zoomtype:o}))),"mouseup"!==e.type&&"touchend"!==e.type&&"mouseleave"!==e.type||(e=a.gridRect.getBoundingClientRect(),a.w.globals.mousedown&&(a.endX=a.clientX-e.left,a.endY=a.clientY-e.top,a.dragX=Math.abs(a.endX-a.startX),a.dragY=Math.abs(a.endY-a.startY),(i.globals.zoomEnabled||i.globals.selectionEnabled)&&a.selectionDrawn({context:a,zoomtype:o}),i.globals.panEnabled&&i.config.xaxis.convertedCatToNumeric&&a.delayedPanScrolled()),i.globals.zoomEnabled&&a.hideSelectionRect(this.selectionRect),a.dragged=!1,a.w.globals.mousedown=!1),this.makeSelectionRectDraggable())}},{key:"makeSelectionRectDraggable",value:function(){var t,e=this.w;!this.selectionRect||0<(t=this.selectionRect.node.getBoundingClientRect()).width&&0<t.height&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:e.globals.gridWidth,maxY:e.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}},{key:"preselectedSelection",value:function(){var t,e=this.w,i=this.xyRatios;e.globals.zoomEnabled||(void 0!==e.globals.selection&&null!==e.globals.selection?this.drawSelectionRect(e.globals.selection):void 0!==e.config.chart.selection.xaxis.min&&void 0!==e.config.chart.selection.xaxis.max&&(t={x:t=(e.config.chart.selection.xaxis.min-e.globals.minX)/i.xRatio,y:0,width:e.globals.gridWidth-(e.globals.maxX-e.config.chart.selection.xaxis.max)/i.xRatio-t,height:e.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0},this.drawSelectionRect(t),this.makeSelectionRectDraggable(),"function"==typeof e.config.chart.events.selection&&e.config.chart.events.selection(this.ctx,{xaxis:{min:e.config.chart.selection.xaxis.min,max:e.config.chart.selection.xaxis.max},yaxis:{}})))}},{key:"drawSelectionRect",value:function(t){var e=t.x,i=t.y,a=t.width,s=t.height,o=t.translateX,r=t.translateY,n=this.w,l=this.zoomRect,t=this.selectionRect;!this.dragged&&null===n.globals.selection||(r={transform:"translate("+(void 0===o?0:o)+", "+(void 0===r?0:r)+")"},n.globals.zoomEnabled&&this.dragged&&(l.attr({x:e,y:i,width:a=a<0?1:a,height:s,fill:n.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":n.config.chart.zoom.zoomedArea.fill.opacity,stroke:n.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":n.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":n.config.chart.zoom.zoomedArea.stroke.opacity}),z.setAttrs(l.node,r)),n.globals.selectionEnabled&&(t.attr({x:e,y:i,width:0<a?a:0,height:0<s?s:0,fill:n.config.chart.selection.fill.color,"fill-opacity":n.config.chart.selection.fill.opacity,stroke:n.config.chart.selection.stroke.color,"stroke-width":n.config.chart.selection.stroke.width,"stroke-dasharray":n.config.chart.selection.stroke.dashArray,"stroke-opacity":n.config.chart.selection.stroke.opacity}),z.setAttrs(t.node,r)))}},{key:"hideSelectionRect",value:function(t){t&&t.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(t){var e=t.context,i=t.zoomtype,a=this.w,s=e,o=this.gridRect.getBoundingClientRect(),r=s.startX-1,n=s.startY,l=!1,h=!1,c=s.clientX-o.left-r,t=s.clientY-o.top-n;return Math.abs(c+r)>a.globals.gridWidth?c=a.globals.gridWidth-r:s.clientX-o.left<0&&(c=r),r>s.clientX-o.left&&(l=!0,c=Math.abs(c)),n>s.clientY-o.top&&(h=!0,t=Math.abs(t)),e="x"===i?{x:l?r-c:r,y:0,width:c,height:a.globals.gridHeight}:"y"===i?{x:0,y:h?n-t:n,width:a.globals.gridWidth,height:t}:{x:l?r-c:r,y:h?n-t:n,width:c,height:t},s.drawSelectionRect(e),s.selectionDragging("resizing"),e}},{key:"selectionDragging",value:function(t,e){var i=this,a=this.w,s=this.xyRatios,o=this.selectionRect,r=0;"resizing"===t&&(r=30);t=function(t){return parseFloat(o.node.getAttribute(t))},t={x:t("x"),y:t("y"),width:t("width"),height:t("height")};a.globals.selection=t,"function"==typeof a.config.chart.events.selection&&a.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var t=i.gridRect.getBoundingClientRect(),e=o.node.getBoundingClientRect(),t={xaxis:{min:a.globals.xAxisScale.niceMin+(e.left-t.left)*s.xRatio,max:a.globals.xAxisScale.niceMin+(e.right-t.left)*s.xRatio},yaxis:{min:a.globals.yAxisScale[0].niceMin+(t.bottom-e.bottom)*s.yRatio[0],max:a.globals.yAxisScale[0].niceMax-(e.top-t.top)*s.yRatio[0]}};a.config.chart.events.selection(i.ctx,t),a.config.chart.brush.enabled&&void 0!==a.config.chart.events.brushScrolled&&a.config.chart.events.brushScrolled(i.ctx,t)},r))}},{key:"selectionDrawn",value:function(t){var e=t.context,i=t.zoomtype,a=this.w,s=e,o=this.xyRatios,t=this.ctx.toolbar;s.startX>s.endX&&(c=s.startX,s.startX=s.endX,s.endX=c),s.startY>s.endY&&(r=s.startY,s.startY=s.endY,s.endY=r);var r,n,l,h,e=void 0,c=void 0,c=a.globals.isTimelineBar?(e=a.globals.yAxisScale[0].niceMin+s.startX*o.invertedYRatio,a.globals.yAxisScale[0].niceMin+s.endX*o.invertedYRatio):(e=a.globals.xAxisScale.niceMin+s.startX*o.xRatio,a.globals.xAxisScale.niceMin+s.endX*o.xRatio),d=[],g=[];a.config.yaxis.forEach(function(t,e){d.push(a.globals.yAxisScale[e].niceMax-o.yRatio[e]*s.startY),g.push(a.globals.yAxisScale[e].niceMax-o.yRatio[e]*s.endY)}),s.dragged&&(10<s.dragX||10<s.dragY)&&e!==c&&(a.globals.zoomEnabled?(n=M.clone(a.globals.initialConfig.yaxis),r=M.clone(a.globals.initialConfig.xaxis),a.globals.zoomed=!0,a.config.xaxis.convertedCatToNumeric&&(e=Math.floor(e),c=Math.floor(c),e<1&&(e=1,c=a.globals.dataPoints),c-e<2&&(c=e+1)),"xy"!==i&&"x"!==i||(r={min:e,max:c}),"xy"!==i&&"y"!==i||n.forEach(function(t,e){n[e].min=g[e],n[e].max=d[e]}),a.config.chart.zoom.autoScaleYaxis&&(n=new et(s.ctx).autoScaleY(s.ctx,n,{xaxis:r})),!t||(l=t.getBeforeZoomRange(r,n))&&(r=l.xaxis||r,n=l.yaxis||n),l={xaxis:r},a.config.chart.group||(l.yaxis=n),s.ctx.updateHelpers._updateOptions(l,!1,s.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof a.config.chart.events.zoomed&&t.zoomCallback(r,n)):a.globals.selectionEnabled&&(h=null,c={min:e,max:c},"xy"!==i&&"y"!==i||(h=M.clone(a.config.yaxis)).forEach(function(t,e){h[e].min=g[e],h[e].max=d[e]}),a.globals.selection=s.selection,"function"==typeof a.config.chart.events.selection&&a.config.chart.events.selection(s.ctx,{xaxis:c,yaxis:h})))}},{key:"panDragging",value:function(t){var e=t.context,t=this.w,e=e;void 0!==t.globals.lastClientPosition.x&&(i=t.globals.lastClientPosition.x-e.clientX,a=t.globals.lastClientPosition.y-e.clientY,Math.abs(i)>Math.abs(a)&&0<i?this.moveDirection="left":Math.abs(i)>Math.abs(a)&&i<0?this.moveDirection="right":Math.abs(a)>Math.abs(i)&&0<a?this.moveDirection="up":Math.abs(a)>Math.abs(i)&&a<0&&(this.moveDirection="down")),t.globals.lastClientPosition={x:e.clientX,y:e.clientY};var i=t.globals.isTimelineBar?t.globals.minY:t.globals.minX,a=t.globals.isTimelineBar?t.globals.maxY:t.globals.maxX;t.config.xaxis.convertedCatToNumeric||e.panScrolled(i,a)}},{key:"delayedPanScrolled",value:function(){var t=this.w,e=t.globals.minX,i=t.globals.maxX,a=(t.globals.maxX-t.globals.minX)/2;"left"===this.moveDirection?(e=t.globals.minX+a,i=t.globals.maxX+a):"right"===this.moveDirection&&(e=t.globals.minX-a,i=t.globals.maxX-a),e=Math.floor(e),i=Math.floor(i),this.updateScrolledChart({xaxis:{min:e,max:i}},e,i)}},{key:"panScrolled",value:function(t,e){var i=this.w,a=this.xyRatios,s=M.clone(i.globals.initialConfig.yaxis),o=a.xRatio,r=i.globals.minX,n=i.globals.maxX;i.globals.isTimelineBar&&(o=a.invertedYRatio,r=i.globals.minY,n=i.globals.maxY),"left"===this.moveDirection?(t=r+i.globals.gridWidth/15*o,e=n+i.globals.gridWidth/15*o):"right"===this.moveDirection&&(t=r-i.globals.gridWidth/15*o,e=n-i.globals.gridWidth/15*o),i.globals.isTimelineBar||(t<i.globals.initialMinX||e>i.globals.initialMaxX)&&(t=r,e=n);n={min:t,max:e};i.config.chart.zoom.autoScaleYaxis&&(s=new et(this.ctx).autoScaleY(this.ctx,s,{xaxis:n}));n={xaxis:{min:t,max:e}};i.config.chart.group||(n.yaxis=s),this.updateScrolledChart(n,t,e)}},{key:"updateScrolledChart",value:function(t,e,i){var a=this.w;this.ctx.updateHelpers._updateOptions(t,!1,!1),"function"==typeof a.config.chart.events.scrolled&&a.config.chart.events.scrolled(this.ctx,{xaxis:{min:e,max:i}})}}]),a}(),vt=(o(Zt,[{key:"getNearestValues",value:function(t){var e=t.hoverArea,i=t.elGrid,a=t.clientX,s=t.clientY,o=this.w,r=o.globals.gridWidth,n=o.globals.gridHeight,l=r/(o.globals.dataPoints-1),t=n/o.globals.dataPoints,n=i.getBoundingClientRect(),i=this.hasBars();!o.globals.comboCharts&&!i||o.config.xaxis.convertedCatToNumeric||(l=r/o.globals.dataPoints);a=a-n.left-o.globals.barPadForNumericAxis,s-=n.top;a<0||s<0||a>o.globals.gridWidth||s>o.globals.gridHeight?(e.classList.remove("hovering-zoom"),e.classList.remove("hovering-pan")):o.globals.zoomEnabled?(e.classList.remove("hovering-pan"),e.classList.add("hovering-zoom")):o.globals.panEnabled&&(e.classList.remove("hovering-zoom"),e.classList.add("hovering-pan"));n=Math.round(a/l),e=Math.floor(s/t);i&&!o.config.xaxis.convertedCatToNumeric&&(n=Math.ceil(a/l),--n);for(var t=null,i=null,h=[],c=0;c<o.globals.seriesXvalues.length;c++)h.push([o.globals.seriesXvalues[c][0]-1e-6].concat(o.globals.seriesXvalues[c]));return h=h.map(function(t){return t.filter(function(t){return t})}),l=o.globals.seriesYvalues.map(function(t){return t.filter(function(t){return M.isNumber(t)})}),o.globals.isXNumeric&&(t=(i=this.closestInMultiArray(a,s,h,l)).index,n=i.j,null!==t&&(h=o.globals.seriesXvalues[t],n=(i=this.closestInArray(a,h)).index)),o.globals.capturedSeriesIndex=null===t?-1:t,o.globals.capturedDataPointIndex=n=!n||n<1?0:n,{capturedSeries:t,j:o.globals.isBarHorizontal?e:n,hoverX:a,hoverY:s}}},{key:"closestInMultiArray",value:function(r,n,l,h){var t=this.w,e=0,c=null,d=-1;1<t.globals.series.length?e=this.getFirstActiveXArray(l):c=0;var t=h[e][0],e=l[e][0],i=Math.abs(r-e),g=Math.abs(n-t)+i;return h.map(function(t,o){t.map(function(t,e){var i=Math.abs(n-h[o][e]),a=Math.abs(r-l[o][e]),s=a+i;s<g&&(g=s,c=o,d=e)})}),{index:c,j:d}}},{key:"getFirstActiveXArray",value:function(t){for(var e=0,i=t.map(function(t,e){return 0<t.length?e:-1}),a=0;a<i.length;a++)if(-1!==i[a]){e=i[a];break}return e}},{key:"closestInArray",value:function(t,e){for(var i=e[0],a=null,s=Math.abs(t-i),o=0;o<e.length;o++){var r=Math.abs(t-e[o]);r<s&&(s=r,a=o)}return{index:a}}},{key:"isXoverlap",value:function(t){var e=[],i=this.w.globals.seriesX.filter(function(t){return void 0!==t[0]});if(0<i.length)for(var a=0;a<i.length-1;a++)void 0!==i[a][t]&&void 0!==i[a+1][t]&&i[a][t]!==i[a+1][t]&&e.push("unEqual");return 0===e.length}},{key:"isInitialSeriesSameLen",value:function(){for(var t=!0,e=this.w.globals.initialSeries,i=0;i<e.length-1;i++)if(e[i].data.length!==e[i+1].data.length){t=!1;break}return t}},{key:"getBarsHeight",value:function(t){return g(t).reduce(function(t,e){return t+e.getBBox().height},0)}},{key:"getElMarkers",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(" .apexcharts-series-markers")}},{key:"getAllMarkers",value:function(){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(t=g(t)).sort(function(t,e){return Number(e.getAttribute("data:realIndex"))<Number(t.getAttribute("data:realIndex"))?0:-1});var e=[];return t.forEach(function(t){e.push(t.querySelector(".apexcharts-marker"))}),e}},{key:"hasMarkers",value:function(){return 0<this.getElMarkers().length}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return 0<this.getElBars().length}},{key:"getHoverMarkerSize",value:function(t){var e=this.w,i=e.config.markers.hover.size;return i=void 0===i?e.globals.markers.size[t]+e.config.markers.hover.sizeOffset:i}},{key:"toggleAllTooltipSeriesGroups",value:function(t){var e=this.w,i=this.ttCtx;0===i.allTooltipSeriesGroups.length&&(i.allTooltipSeriesGroups=e.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var a=i.allTooltipSeriesGroups,s=0;s<a.length;s++)"enable"===t?(a[s].classList.add("apexcharts-active"),a[s].style.display=e.config.tooltip.items.display):(a[s].classList.remove("apexcharts-active"),a[s].style.display="none")}}]),Zt),yt=(o(qt,[{key:"drawSeriesTexts",value:function(t){var e=t.shared,i=void 0===e||e,a=t.ttItems,s=t.i,o=void 0===s?0:s,r=t.j,n=void 0===r?null:r,e=t.y1,s=t.y2,r=t.e,t=this.w;void 0!==t.config.tooltip.custom?this.handleCustomTooltip({i:o,j:n,y1:e,y2:s,w:t}):this.toggleActiveInactiveSeries(i);t=this.getValuesToPrint({i:o,j:n});this.printLabels({i:o,j:n,values:t,ttItems:a,shared:i,e:r});r=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=r.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=r.getBoundingClientRect().height}},{key:"printLabels",value:function(t){function s(t){return g.globals.seriesGoals[t]&&g.globals.seriesGoals[t][l]&&Array.isArray(g.globals.seriesGoals[t][l])}var o,r=this,n=t.i,l=t.j,e=t.values,h=t.ttItems,c=t.shared,d=t.e,g=this.w,u=[],p=e.xVal,f=e.zVal,x=e.xAxisTTVal,b="",m=g.globals.colors[n];null!==l&&g.config.plotOptions.bar.distributed&&(m=g.globals.colors[l]);for(var i=0,a=g.globals.series.length-1;i<g.globals.series.length;i++,a--)!function(t,e){var i=r.getFormatters(n);b=r.getSeriesName({fn:i.yLbTitleFormatter,index:n,seriesIndex:n,j:l}),"treemap"===g.config.chart.type&&(b=i.yLbTitleFormatter(String(g.config.series[n].data[l].x),{series:g.globals.series,seriesIndex:n,dataPointIndex:l,w:g}));var a=g.config.tooltip.inverseOrder?e:t;g.globals.axisCharts&&(t=function(t){return i.yLbFormatter(g.globals.series[t][l],{series:g.globals.series,seriesIndex:t,dataPointIndex:l,w:g})},c?(i=r.getFormatters(a),b=r.getSeriesName({fn:i.yLbTitleFormatter,index:a,seriesIndex:n,j:l}),m=g.globals.colors[a],o=t(a),s(a)&&(u=g.globals.seriesGoals[a][l].map(function(t){return{attrs:t,val:i.yLbFormatter(t.value,{seriesIndex:a,dataPointIndex:l,w:g})}}))):(d&&d.target&&d.target.getAttribute("fill")&&(m=d.target.getAttribute("fill")),o=t(n),s(n)&&Array.isArray(g.globals.seriesGoals[n][l])&&(u=g.globals.seriesGoals[n][l].map(function(t){return{attrs:t,val:i.yLbFormatter(t.value,{seriesIndex:n,dataPointIndex:l,w:g})}})))),null===l&&(o=i.yLbFormatter(g.globals.series[n],T(T({},g),{},{seriesIndex:n,dataPointIndex:n}))),r.DOMHandling({i:n,t:a,j:l,ttItems:h,values:{val:o,goalVals:u,xVal:p,xAxisTTVal:x,zVal:f},seriesName:b,shared:c,pColor:m})}(i,a)}},{key:"getFormatters",value:function(t){var e,i=this.w,a=i.globals.yLabelFormatters[t];return void 0!==i.globals.ttVal?Array.isArray(i.globals.ttVal)?(a=i.globals.ttVal[t]&&i.globals.ttVal[t].formatter,e=i.globals.ttVal[t]&&i.globals.ttVal[t].title&&i.globals.ttVal[t].title.formatter):(a=i.globals.ttVal.formatter,"function"==typeof i.globals.ttVal.title.formatter&&(e=i.globals.ttVal.title.formatter)):e=i.config.tooltip.y.title.formatter,{yLbFormatter:a="function"!=typeof a?i.globals.yLabelFormatters[0]||function(t){return t}:a,yLbTitleFormatter:e="function"!=typeof e?function(t){return t}:e}}},{key:"getSeriesName",value:function(t){var e=t.fn,i=t.index,a=t.seriesIndex,s=t.j,t=this.w;return e(String(t.globals.seriesNames[i]),{series:t.globals.series,seriesIndex:a,dataPointIndex:s,w:t})}},{key:"DOMHandling",value:function(t){t.i;var e=t.t,i=t.j,a=t.ttItems,s=t.values,o=t.seriesName,r=t.shared,n=t.pColor,l=this.w,h=this.ttCtx;Object.keys(s).forEach(function(t){"string"==typeof s[t]&&(s[t]=M.sanitizeDom(s[t]))});var c=s.val,d=s.goalVals,g=s.xVal,u=s.xAxisTTVal,p=s.zVal,t=null,t=a[e].children;l.config.tooltip.fillSeriesColor&&(a[e].style.backgroundColor=n,t[0].style.display="none"),h.showTooltipTitle&&(null===h.tooltipTitle&&(h.tooltipTitle=l.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),h.tooltipTitle.innerHTML=g),h.blxaxisTooltip&&(h.xaxisTooltipText.innerHTML=""!==u?u:g);g=a[e].querySelector(".apexcharts-tooltip-text-y-label");g&&(g.innerHTML=o?M.sanitizeDom(o):"");o=a[e].querySelector(".apexcharts-tooltip-text-y-value");o&&(o.innerHTML=void 0!==c?c:""),t[0]&&t[0].classList.contains("apexcharts-tooltip-marker")&&(l.config.tooltip.marker.fillColors&&Array.isArray(l.config.tooltip.marker.fillColors)&&(n=l.config.tooltip.marker.fillColors[e]),t[0].style.backgroundColor=n),l.config.tooltip.marker.show||(t[0].style.display="none");var f=a[e].querySelector(".apexcharts-tooltip-text-goals-label"),x=a[e].querySelector(".apexcharts-tooltip-text-goals-value");d.length&&l.globals.seriesGoals[e]?(n=function(){var i="<div >",a="<div>";d.forEach(function(t,e){i+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(t.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(t.attrs.name,"</div>"),a+="<div>".concat(t.val,"</div>")}),f.innerHTML=i+"</div>",x.innerHTML=a+"</div>"},!r||l.globals.seriesGoals[e][i]&&Array.isArray(l.globals.seriesGoals[e][i])?n():(f.innerHTML="",x.innerHTML="")):(f.innerHTML="",x.innerHTML=""),null!==p&&(a[e].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=l.config.tooltip.z.title,a[e].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==p?p:""),r&&t[0]&&(null==c||-1<l.globals.collapsedSeriesIndices.indexOf(e)?t[0].parentNode.style.display="none":t[0].parentNode.style.display=l.config.tooltip.items.display)}},{key:"toggleActiveInactiveSeries",value:function(t){var e=this.w;t?this.tooltipUtil.toggleAllTooltipSeriesGroups("enable"):(this.tooltipUtil.toggleAllTooltipSeriesGroups("disable"),(t=e.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group"))&&(t.classList.add("apexcharts-active"),t.style.display=e.config.tooltip.items.display))}},{key:"getValuesToPrint",value:function(t){var e=t.i,i=t.j,a=this.w,s=this.ctx.series.filteredSeriesX(),o="",r="",n=null,l=null,h={series:a.globals.series,seriesIndex:e,dataPointIndex:i,w:a},t=a.globals.ttZFormatter;null===i?l=a.globals.series[e]:a.globals.isXNumeric&&"treemap"!==a.config.chart.type?(o=s[e][i],0===s[e].length&&(o=s[this.tooltipUtil.getFirstActiveXArray(s)][i])):o=void 0!==a.globals.labels[i]?a.globals.labels[i]:"";s=o,o=a.globals.isXNumeric&&"datetime"===a.config.xaxis.type?new $(this.ctx).xLabelFormat(a.globals.ttKeyFormatter,s,s,{i:void 0,dateFormatter:new V(this.ctx).formatDate,w:this.w}):a.globals.isBarHorizontal?a.globals.yLabelFormatters[0](s,h):a.globals.xLabelFormatter(s,h);return void 0!==a.config.tooltip.x.formatter&&(o=a.globals.ttKeyFormatter(s,h)),0<a.globals.seriesZ.length&&0<a.globals.seriesZ[e].length&&(n=t(a.globals.seriesZ[e][i],a)),r="function"==typeof a.config.xaxis.tooltip.formatter?a.globals.xaxisTooltipFormatter(s,h):o,{val:Array.isArray(l)?l.join(" "):l,xVal:Array.isArray(o)?o.join(" "):o,xAxisTTVal:Array.isArray(r)?r.join(" "):r,zVal:n}}},{key:"handleCustomTooltip",value:function(t){var e=t.i,i=t.j,a=t.y1,s=t.y2,o=t.w,r=this.ttCtx.getElTooltip(),t=o.config.tooltip.custom;Array.isArray(t)&&t[e]&&(t=t[e]),r.innerHTML=t({ctx:this.ctx,series:o.globals.series,seriesIndex:e,dataPointIndex:i,y1:a,y2:s,w:o})}}]),qt),wt=(o(Ut,[{key:"moveXCrosshairs",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=this.ttCtx,a=this.w,s=i.getElXCrosshairs(),o=t-i.xcrosshairsWidth/2,t=a.globals.labels.slice().length;null!==e&&(o=a.globals.gridWidth/t*e),null!==s&&(s.setAttribute("x",o),s.setAttribute("x1",o),s.setAttribute("x2",o),s.setAttribute("y2",a.globals.gridHeight),s.classList.add("apexcharts-active")),(o=o<0?0:o)>a.globals.gridWidth&&(o=a.globals.gridWidth),i.blxaxisTooltip&&(s=o,"tickWidth"!==a.config.xaxis.crosshairs.width&&"barWidth"!==a.config.xaxis.crosshairs.width||(s=o+i.xcrosshairsWidth/2),this.moveXAxisTooltip(s))}},{key:"moveYCrosshairs",value:function(t){var e=this.ttCtx;null!==e.ycrosshairs&&z.setAttrs(e.ycrosshairs,{y1:t,y2:t}),null!==e.ycrosshairsHidden&&z.setAttrs(e.ycrosshairsHidden,{y1:t,y2:t})}},{key:"moveXAxisTooltip",value:function(t){var e,i=this.w,a=this.ttCtx;null!==a.xaxisTooltip&&(a.xaxisTooltip.classList.add("apexcharts-active"),e=a.xaxisOffY+i.config.xaxis.tooltip.offsetY+i.globals.translateY+1+i.config.xaxis.offsetY,t-=a.xaxisTooltip.getBoundingClientRect().width/2,isNaN(t)||(t+=i.globals.translateX,i=new z(this.ctx).getTextRects(a.xaxisTooltipText.innerHTML),a.xaxisTooltipText.style.minWidth=i.width+"px",a.xaxisTooltip.style.left=t+"px",a.xaxisTooltip.style.top=e+"px"))}},{key:"moveYAxisTooltip",value:function(t){var e=this.w,i=this.ttCtx;null===i.yaxisTTEls&&(i.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var a=parseInt(i.ycrosshairsHidden.getAttribute("y1"),10),s=e.globals.translateY+a,o=i.yaxisTTEls[t].getBoundingClientRect().height,a=e.globals.translateYAxisX[t]-2;e.config.yaxis[t].opposite&&(a-=26),s-=o/2,-1===e.globals.ignoreYAxisIndexes.indexOf(t)?(i.yaxisTTEls[t].classList.add("apexcharts-active"),i.yaxisTTEls[t].style.top=s+"px",i.yaxisTTEls[t].style.left=a+e.config.yaxis[t].tooltip.offsetX+"px"):i.yaxisTTEls[t].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=this.w,s=this.ttCtx,o=s.getElTooltip(),r=s.tooltipRect,i=null!==i?parseFloat(i):1,t=parseFloat(t)+i+5,e=parseFloat(e)+i/2;(t=(t=t>a.globals.gridWidth/2?t-r.ttWidth-i-15:t)>a.globals.gridWidth-r.ttWidth-10?a.globals.gridWidth-r.ttWidth:t)<-20&&(t=-20),a.config.tooltip.followCursor?(i=s.getElGrid().getBoundingClientRect(),e=s.e.clientY+a.globals.translateY-i.top-r.ttHeight/2):a.globals.isBarHorizontal?e-=r.ttHeight:(e=r.ttHeight/2+e>a.globals.gridHeight?a.globals.gridHeight-r.ttHeight+a.globals.translateY:e)<0&&(e=0),isNaN(t)||(t+=a.globals.translateX,o.style.left=t+"px",o.style.top=e+"px")}},{key:"moveMarkers",value:function(t,e){var i=this.w,a=this.ttCtx;if(0<i.globals.markers.size[t])for(var s=i.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-marker")),o=0;o<s.length;o++)parseInt(s[o].getAttribute("rel"),10)===e&&(a.marker.resetPointsSize(),a.marker.enlargeCurrentPoint(e,s[o]));else a.marker.resetPointsSize(),this.moveDynamicPointOnHover(e,t)}},{key:"moveDynamicPointOnHover",value:function(t,e){var i=this.w,a=this.ttCtx,s=i.globals.pointsArray,o=a.tooltipUtil.getHoverMarkerSize(e),r=i.config.series[e].type;r&&("column"===r||"candlestick"===r||"boxPlot"===r)||(r=s[e][t][0],t=s[e][t][1]||0,(e=i.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers circle")))&&t<i.globals.gridHeight&&0<t&&(e.setAttribute("r",o),e.setAttribute("cx",r),e.setAttribute("cy",t)),this.moveXCrosshairs(r),a.fixedTooltip||this.moveTooltip(r,t,o))}},{key:"moveDynamicPointsOnHover",value:function(t){var e=this.ttCtx,i=e.w,a=0,s=0,o=i.globals.pointsArray,r=new O(this.ctx).getActiveConfigSeriesIndex(!0),n=e.tooltipUtil.getHoverMarkerSize(r);o[r]&&(a=o[r][t][0],s=o[r][t][1]);var l=e.tooltipUtil.getAllMarkers();if(null!==l)for(var h=0;h<i.globals.series.length;h++){var c=o[h];i.globals.comboCharts&&void 0===c&&l.splice(h,0,null),c&&c.length&&(c=o[h][t][1],l[h].setAttribute("cx",a),null!==c&&!isNaN(c)&&c<i.globals.gridHeight&&0<c?(l[h]&&l[h].setAttribute("r",n),l[h]&&l[h].setAttribute("cy",c)):l[h]&&l[h].setAttribute("r",0))}this.moveXCrosshairs(a),e.fixedTooltip||(s=s||i.globals.gridHeight,this.moveTooltip(a,s,n))}},{key:"moveStickyTooltipOverBars",value:function(t){var e=this.w,i=this.ttCtx,a=(e.globals.columnSeries||e.globals.series).length,s=2<=a&&a%2==0?Math.floor(a/2):Math.floor(a/2)+1;e.globals.isBarHorizontal&&(s=new O(this.ctx).getActiveConfigSeriesIndex(!1,"desc")+1);var o=e.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(s,"'] path[j='").concat(t,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(s,"'] path[j='").concat(t,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(s,"'] path[j='").concat(t,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(s,"'] path[j='").concat(t,"']")),r=o?parseFloat(o.getAttribute("cx")):0,n=o?parseFloat(o.getAttribute("cy")):0,l=o?parseFloat(o.getAttribute("barWidth")):0,h=o?parseFloat(o.getAttribute("barHeight")):0,s=i.getElGrid().getBoundingClientRect();e.globals.isXNumeric?(r-=a%2!=0?l/2:0,o&&(o.classList.contains("apexcharts-candlestick-area")||o.classList.contains("apexcharts-boxPlot-area"))&&e.globals.comboCharts&&(r-=l/2)):e.globals.isBarHorizontal||(r=i.xAxisTicksPositions[t-1]+i.dataPointsDividedWidth/2,isNaN(r)&&(r=i.xAxisTicksPositions[t]-i.dataPointsDividedWidth/2)),e.globals.isBarHorizontal?n+=h/3:n=i.e.clientY-s.top-i.tooltipRect.ttHeight/2,e.globals.isBarHorizontal||this.moveXCrosshairs(r),i.fixedTooltip||(e=n||e.globals.gridHeight,this.moveTooltip(r,e))}}]),Ut),kt=(o(jt,[{key:"drawDynamicPoints",value:function(){var t=this.w,e=new z(this.ctx),i=new R(this.ctx),a=g(a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series"));t.config.chart.stacked&&a.sort(function(t,e){return parseFloat(t.getAttribute("data:realIndex"))-parseFloat(e.getAttribute("data:realIndex"))});for(var s=0;s<a.length;s++){var o,r,n=a[s].querySelector(".apexcharts-series-markers-wrap");null!==n&&(o=void 0,r="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4)),"line"!==t.config.chart.type&&"area"!==t.config.chart.type||t.globals.comboCharts||t.config.tooltip.intersect||(r+=" no-pointer-events"),r=i.getMarkerConfig(r,s),(o=e.drawMarker(0,0,r)).node.setAttribute("default-marker-size",0),(r=document.createElementNS(t.globals.SVGNS,"g")).classList.add("apexcharts-series-markers"),r.appendChild(o.node),n.appendChild(r))}}},{key:"enlargeCurrentPoint",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=this.w;"bubble"!==s.config.chart.type&&this.newPointSize(t,e);t=e.getAttribute("cx"),e=e.getAttribute("cy");null!==i&&null!==a&&(t=i,e=a),this.tooltipPosition.moveXCrosshairs(t),this.fixedTooltip||("radar"===s.config.chart.type&&(a=this.ttCtx.getElGrid().getBoundingClientRect(),t=this.ttCtx.e.clientX-a.left),this.tooltipPosition.moveTooltip(t,e,s.config.markers.hover.size))}},{key:"enlargePoints",value:function(t){for(var e=this.w,i=this.ttCtx,a=t,s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),o=e.config.markers.hover.size,r=0;r<s.length;r++){var n=s[r].getAttribute("rel"),l=s[r].getAttribute("index");void 0===o&&(o=e.globals.markers.size[l]+e.config.markers.hover.sizeOffset),a===parseInt(n,10)?(this.newPointSize(a,s[r]),l=s[r].getAttribute("cx"),n=s[r].getAttribute("cy"),this.tooltipPosition.moveXCrosshairs(l),i.fixedTooltip||this.tooltipPosition.moveTooltip(l,n,o)):this.oldPointSize(s[r])}}},{key:"newPointSize",value:function(t,e){var i=this.w,a=i.config.markers.hover.size,t=0===t?e.parentNode.firstChild:e.parentNode.lastChild;"0"!==t.getAttribute("default-marker-size")&&(e=parseInt(t.getAttribute("index"),10),void 0===a&&(a=i.globals.markers.size[e]+i.config.markers.hover.sizeOffset),t.setAttribute("r",a=a<0?0:a))}},{key:"oldPointSize",value:function(t){var e=parseFloat(t.getAttribute("default-marker-size"));t.setAttribute("r",e)}},{key:"resetPointsSize",value:function(){for(var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),e=0;e<t.length;e++){var i=parseFloat(t[e].getAttribute("default-marker-size"));M.isNumber(i)&&0<=i?t[e].setAttribute("r",i):t[e].setAttribute("r",0)}}}]),jt),At=(o(_t,[{key:"getAttr",value:function(t,e){return parseFloat(t.target.getAttribute(e))}},{key:"handleHeatTreeTooltip",value:function(t){var e,i,a,s,o=t.e,r=t.opt,n=t.x,l=t.y,h=t.type,c=this.ttCtx,d=this.w;return o.target.classList.contains("apexcharts-".concat(h,"-rect"))&&(e=this.getAttr(o,"i"),i=this.getAttr(o,"j"),a=this.getAttr(o,"cx"),s=this.getAttr(o,"cy"),t=this.getAttr(o,"width"),h=this.getAttr(o,"height"),c.tooltipLabels.drawSeriesTexts({ttItems:r.ttItems,i:e,j:i,shared:!1,e:o}),d.globals.capturedSeriesIndex=e,d.globals.capturedDataPointIndex=i,n=a+c.tooltipRect.ttWidth/2+t,l=s+c.tooltipRect.ttHeight/2-h/2,c.tooltipPosition.moveXCrosshairs(a+t/2),n>d.globals.gridWidth/2&&(n=a-c.tooltipRect.ttWidth/2+t),c.w.config.tooltip.followCursor&&(t=d.globals.dom.elWrap.getBoundingClientRect(),n=d.globals.clientX-t.left-c.tooltipRect.ttWidth/2,l=d.globals.clientY-t.top-c.tooltipRect.ttHeight-5)),{x:n,y:l}}},{key:"handleMarkerTooltip",value:function(t){var e,i,a,s,o,r=t.e,n=t.opt,l=t.x,h=t.y,c=this.w,d=this.ttCtx;return r.target.classList.contains("apexcharts-marker")&&(o=parseInt(n.paths.getAttribute("cx"),10),e=parseInt(n.paths.getAttribute("cy"),10),i=parseFloat(n.paths.getAttribute("val")),s=parseInt(n.paths.getAttribute("rel"),10),t=parseInt(n.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,d.intersect&&(a=M.findAncestor(n.paths,"apexcharts-series"))&&(t=parseInt(a.getAttribute("data:realIndex"),10)),d.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:t,j:s,shared:!d.showOnIntersect&&c.config.tooltip.shared,e:r}),"mouseup"===r.type&&d.markerClick(r,t,s),c.globals.capturedSeriesIndex=t,c.globals.capturedDataPointIndex=s,l=o,h=e+c.globals.translateY-1.4*d.tooltipRect.ttHeight,d.w.config.tooltip.followCursor&&(o=d.getElGrid().getBoundingClientRect(),h=d.e.clientY+c.globals.translateY-o.top),d.marker.enlargeCurrentPoint(s,n.paths,l,h=i<0?e:h)),{x:l,y:h}}},{key:"handleBarTooltip",value:function(t){var e,i=t.e,a=t.opt,s=this.w,o=this.ttCtx,r=o.getElTooltip(),n=0,l=0,h=0,c=this.getBarTooltipXY({e:i,opt:a}),d=c.i,t=c.barHeight,i=c.j;s.globals.capturedSeriesIndex=d,s.globals.capturedDataPointIndex=i,s.globals.isBarHorizontal&&o.tooltipUtil.hasBars()||!s.config.tooltip.shared?(l=c.x,h=c.y,e=Array.isArray(s.config.stroke.width)?s.config.stroke.width[d]:s.config.stroke.width,n=l):s.globals.comboCharts||s.config.tooltip.shared||(n/=2),isNaN(h)?h=s.globals.svgHeight-o.tooltipRect.ttHeight:h<0&&(h=0);c=parseInt(a.paths.parentNode.getAttribute("data:realIndex"),10),a=s.globals.isMultipleYAxis?s.config.yaxis[c]&&s.config.yaxis[c].reversed:s.config.yaxis[0].reversed;l+o.tooltipRect.ttWidth>s.globals.gridWidth&&!a?l-=o.tooltipRect.ttWidth:l<0&&(l=0),o.w.config.tooltip.followCursor&&(c=o.getElGrid().getBoundingClientRect(),h=o.e.clientY-c.top),null===o.tooltip&&(o.tooltip=s.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),s.config.tooltip.shared||(0<s.globals.comboBarCount?o.tooltipPosition.moveXCrosshairs(n+e/2):o.tooltipPosition.moveXCrosshairs(n)),!o.fixedTooltip&&(!s.config.tooltip.shared||s.globals.isBarHorizontal&&o.tooltipUtil.hasBars())&&(a&&(l-=o.tooltipRect.ttWidth)<0&&(l=0),r.style.left=l+s.globals.translateX+"px",!a||s.globals.isBarHorizontal&&o.tooltipUtil.hasBars()||(h=h+t-2*(s.globals.series[d][i]<0?t:0)),o.tooltipRect.ttHeight+h>s.globals.gridHeight?(h=s.globals.gridHeight-o.tooltipRect.ttHeight+s.globals.translateY,r.style.top=h+"px"):r.style.top=h+s.globals.translateY-o.tooltipRect.ttHeight/2+"px")}},{key:"getBarTooltipXY",value:function(t){var e,i,a,s,o,r,n,l=t.e,h=t.opt,c=this.w,d=null,g=this.ttCtx,u=0,p=0,f=0,x=0,b=0,m=l.target.classList;return(m.contains("apexcharts-bar-area")||m.contains("apexcharts-candlestick-area")||m.contains("apexcharts-boxPlot-area")||m.contains("apexcharts-rangebar-area"))&&(n=(e=l.target).getBoundingClientRect(),i=h.elGrid.getBoundingClientRect(),a=n.height,b=n.height,s=n.width,o=parseInt(e.getAttribute("cx"),10),r=parseInt(e.getAttribute("cy"),10),x=parseFloat(e.getAttribute("barWidth")),t=("touchmove"===l.type?l.touches[0]:l).clientX,d=parseInt(e.getAttribute("j"),10),u=parseInt(e.parentNode.getAttribute("rel"),10)-1,m=e.getAttribute("data-range-y1"),n=e.getAttribute("data-range-y2"),c.globals.comboCharts&&(u=parseInt(e.parentNode.getAttribute("data:realIndex"),10)),g.tooltipLabels.drawSeriesTexts({ttItems:h.ttItems,i:u,j:d,y1:m?parseInt(m,10):null,y2:n?parseInt(n,10):null,shared:!g.showOnIntersect&&c.config.tooltip.shared,e:l}),f=c.config.tooltip.followCursor?c.globals.isBarHorizontal?(p=t-i.left+15,r-g.dataPointsDividedHeight+a/2-g.tooltipRect.ttHeight/2):(p=c.globals.isXNumeric?o-s/2:o-g.dataPointsDividedWidth+s/2,l.clientY-i.top-g.tooltipRect.ttHeight/2-15):c.globals.isBarHorizontal?((p=o)<g.xyRatios.baseLineInvertedY&&(p=o-g.tooltipRect.ttWidth),r-g.dataPointsDividedHeight+a/2-g.tooltipRect.ttHeight/2):(p=c.globals.isXNumeric?o-s/2:o-g.dataPointsDividedWidth+s/2,r)),{x:p,y:f,barHeight:b,barWidth:x,i:u,j:d}}}]),_t),St=(o(Gt,[{key:"drawXaxisTooltip",value:function(){var t=this.w,e=this.ttCtx,i="bottom"===t.config.xaxis.position;e.xaxisOffY=i?t.globals.gridHeight+1:-t.globals.xAxisHeight-t.config.xaxis.axisTicks.height+3;var a=i?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",i=t.globals.dom.elWrap;e.blxaxisTooltip&&null===t.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(e.xaxisTooltip=document.createElement("div"),e.xaxisTooltip.setAttribute("class",a+" apexcharts-theme-"+t.config.tooltip.theme),i.appendChild(e.xaxisTooltip),e.xaxisTooltipText=document.createElement("div"),e.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),e.xaxisTooltipText.style.fontFamily=t.config.xaxis.tooltip.style.fontFamily||t.config.chart.fontFamily,e.xaxisTooltipText.style.fontSize=t.config.xaxis.tooltip.style.fontSize,e.xaxisTooltip.appendChild(e.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var s=this.w,e=this.ttCtx,t=0;t<s.config.yaxis.length;t++)!function(i){var t=s.config.yaxis[i].opposite||s.config.yaxis[i].crosshairs.opposite;e.yaxisOffX=t?s.globals.gridWidth+1:1;var a="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i,t?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");s.globals.yAxisSameScaleIndices.map(function(t,e){t.map(function(t,e){e===i&&(a+=s.config.yaxis[e].show?" ":" apexcharts-yaxistooltip-hidden")})});t=s.globals.dom.elWrap;null===s.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i))&&(e.yaxisTooltip=document.createElement("div"),e.yaxisTooltip.setAttribute("class",a+" apexcharts-theme-"+s.config.tooltip.theme),t.appendChild(e.yaxisTooltip),0===i&&(e.yaxisTooltipText=[]),e.yaxisTooltipText[i]=document.createElement("div"),e.yaxisTooltipText[i].classList.add("apexcharts-yaxistooltip-text"),e.yaxisTooltip.appendChild(e.yaxisTooltipText[i]))}(t)}},{key:"setXCrosshairWidth",value:function(){var t,e,i,a=this.w,s=this.ttCtx,o=s.getElXCrosshairs();s.xcrosshairsWidth=parseInt(a.config.xaxis.crosshairs.width,10),a.globals.comboCharts?null!==(t=a.globals.dom.baseEl.querySelector(".apexcharts-bar-area"))&&"barWidth"===a.config.xaxis.crosshairs.width?(e=parseFloat(t.getAttribute("barWidth")),s.xcrosshairsWidth=e):"tickWidth"===a.config.xaxis.crosshairs.width&&(e=a.globals.labels.length,s.xcrosshairsWidth=a.globals.gridWidth/e):"tickWidth"===a.config.xaxis.crosshairs.width?(i=a.globals.labels.length,s.xcrosshairsWidth=a.globals.gridWidth/i):"barWidth"===a.config.xaxis.crosshairs.width&&(null!==(i=a.globals.dom.baseEl.querySelector(".apexcharts-bar-area"))?(i=parseFloat(i.getAttribute("barWidth")),s.xcrosshairsWidth=i):s.xcrosshairsWidth=1),a.globals.isBarHorizontal&&(s.xcrosshairsWidth=0),null!==o&&0<s.xcrosshairsWidth&&o.setAttribute("width",s.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var t=this.w,e=this.ttCtx;e.ycrosshairs=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),e.ycrosshairsHidden=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(t,e,i){var a,s,o=this.ttCtx,r=this.w,n=r.globals.yLabelFormatters[t];o.yaxisTooltips[t]&&(s=(e-(a=o.getElGrid().getBoundingClientRect()).top)*i.yRatio[t],i=r.globals.maxYArr[t]-r.globals.minYArr[t],s=r.globals.minYArr[t]+(i-s),o.tooltipPosition.moveYCrosshairs(e-a.top),o.yaxisTooltipText[t].innerHTML=n(s),o.tooltipPosition.moveYAxisTooltip(t))}}]),Gt),Ct=(o(Vt,[{key:"getElTooltip",value:function(t){return(t=t||this).w.globals.dom.baseEl.querySelector(".apexcharts-tooltip")}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(t){var i=this.w;this.xyRatios=t,this.blxaxisTooltip=i.config.xaxis.tooltip.enabled&&i.globals.axisCharts,this.yaxisTooltips=i.config.yaxis.map(function(t,e){return!!(t.show&&t.tooltip.enabled&&i.globals.axisCharts)}),this.allTooltipSeriesGroups=[],i.globals.axisCharts||(this.showTooltipTitle=!1);var e=document.createElement("div");e.classList.add("apexcharts-tooltip"),e.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),i.globals.dom.elWrap.appendChild(e),i.globals.axisCharts&&(this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair(),t=new K(this.ctx),this.xAxisTicksPositions=t.getXAxisTicksPositions()),!i.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==i.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==i.config.markers.size&&0!==i.globals.markers.largestSize||this.marker.drawDynamicPoints(this),i.globals.collapsedSeries.length!==i.globals.series.length&&(this.dataPointsDividedHeight=i.globals.gridHeight/i.globals.dataPoints,this.dataPointsDividedWidth=i.globals.gridWidth/i.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||i.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,e.appendChild(this.tooltipTitle)),e=i.globals.series.length,(i.globals.xyCharts||i.globals.comboCharts)&&this.tConfig.shared&&(e=this.showOnIntersect?1:i.globals.series.length),this.legendLabels=i.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(e),this.addSVGEvents())}},{key:"createTTElements",value:function(s){for(var o=this,r=this.w,n=[],l=this.getElTooltip(),t=0;t<s;t++)!function(t){var e=document.createElement("div");e.classList.add("apexcharts-tooltip-series-group"),e.style.order=r.config.tooltip.inverseOrder?s-t:t+1,o.tConfig.shared&&o.tConfig.enabledOnSeries&&Array.isArray(o.tConfig.enabledOnSeries)&&o.tConfig.enabledOnSeries.indexOf(t)<0&&e.classList.add("apexcharts-tooltip-series-group-hidden");var i=document.createElement("span");i.classList.add("apexcharts-tooltip-marker"),i.style.backgroundColor=r.globals.colors[t],e.appendChild(i);var a=document.createElement("div");a.classList.add("apexcharts-tooltip-text"),a.style.fontFamily=o.tConfig.style.fontFamily||r.config.chart.fontFamily,a.style.fontSize=o.tConfig.style.fontSize,["y","goals","z"].forEach(function(t){var e=document.createElement("div");e.classList.add("apexcharts-tooltip-".concat(t,"-group"));var i=document.createElement("span");i.classList.add("apexcharts-tooltip-text-".concat(t,"-label")),e.appendChild(i);i=document.createElement("span");i.classList.add("apexcharts-tooltip-text-".concat(t,"-value")),e.appendChild(i),a.appendChild(e)}),e.appendChild(a),l.appendChild(e),n.push(e)}(t);return n}},{key:"addSVGEvents",value:function(){var t=this.w,e=t.config.chart.type,i=this.getElTooltip(),a=!("bar"!==e&&"candlestick"!==e&&"boxPlot"!==e&&"rangeBar"!==e),s="area"===e||"line"===e||"scatter"===e||"bubble"===e||"radar"===e,o=t.globals.dom.Paper.node,r=this.getElGrid();r&&(this.seriesBound=r.getBoundingClientRect());var n,l=[],h=[],i={hoverArea:o,elGrid:r,tooltipEl:i,tooltipY:l,tooltipX:h,ttItems:this.ttItems};if(t.globals.axisCharts&&(s?n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):a?n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==e&&"treemap"!==e||(n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),n&&n.length))for(var c=0;c<n.length;c++)l.push(n[c].getAttribute("cy")),h.push(n[c].getAttribute("cx"));t.globals.xyCharts&&!this.showOnIntersect||t.globals.comboCharts&&!this.showOnIntersect||a&&this.tooltipUtil.hasBars()&&this.tConfig.shared?this.addPathsEventListeners([o],i):a&&!t.globals.comboCharts||s&&this.showOnIntersect?this.addDatapointEventsListeners(i):t.globals.axisCharts&&"heatmap"!==e&&"treemap"!==e||(e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series"),this.addPathsEventListeners(e,i)),this.showOnIntersect&&(0<(t=t.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker")).length&&this.addPathsEventListeners(t,i),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(i))}},{key:"drawFixedTooltipRect",value:function(){var t=this.w,e=this.getElTooltip(),i=e.getBoundingClientRect(),a=i.width+10,s=i.height+10,o=this.tConfig.fixed.offsetX,r=this.tConfig.fixed.offsetY,i=this.tConfig.fixed.position.toLowerCase();return-1<i.indexOf("right")&&(o=o+t.globals.svgWidth-a+10),-1<i.indexOf("bottom")&&(r=r+t.globals.svgHeight-s-10),e.style.left=o+"px",e.style.top=r+"px",{x:o,y:r,ttWidth:a,ttHeight:s}}},{key:"addDatapointEventsListeners",value:function(t){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(e,t)}},{key:"addPathsEventListeners",value:function(a,t){for(var s=this,e=0;e<a.length;e++)!function(e){var i={paths:a[e],tooltipEl:t.tooltipEl,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:t.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(t){return a[e].addEventListener(t,s.seriesHover.bind(s,i),{capture:!1,passive:!0})})}(e)}},{key:"seriesHover",value:function(i,a){var s=this,t=[],e=this.w;e.config.chart.group&&(t=this.ctx.getGroupedCharts()),e.globals.axisCharts&&(e.globals.minX===-1/0&&e.globals.maxX===1/0||0===e.globals.dataPoints)||(t.length?t.forEach(function(t){var e=s.getElTooltip(t),e={paths:i.paths,tooltipEl:e,tooltipY:i.tooltipY,tooltipX:i.tooltipX,elGrid:i.elGrid,hoverArea:i.hoverArea,ttItems:t.w.globals.tooltip.ttItems};t.w.globals.minX===s.w.globals.minX&&t.w.globals.maxX===s.w.globals.maxX&&t.w.globals.tooltip.seriesHoverByContext({chartCtx:t,ttCtx:t.w.globals.tooltip,opt:e,e:a})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:i,e:a}))}},{key:"seriesHoverByContext",value:function(t){var e=t.chartCtx,i=t.ttCtx,a=t.opt,s=t.e,o=e.w,t=this.getElTooltip();i.tooltipRect={x:0,y:0,ttWidth:t.getBoundingClientRect().width,ttHeight:t.getBoundingClientRect().height},i.e=s,!i.tooltipUtil.hasBars()||o.globals.comboCharts||i.isBarShared||this.tConfig.onDatasetHover.highlightDataSeries&&new O(e).toggleSeriesOnHover(s,s.target.parentNode),i.fixedTooltip&&i.drawFixedTooltipRect(),o.globals.axisCharts?i.axisChartsTooltips({e:s,opt:a,tooltipRect:i.tooltipRect}):i.nonAxisChartsTooltips({e:s,opt:a,tooltipRect:i.tooltipRect})}},{key:"axisChartsTooltips",value:function(t){var e=t.e,i=t.opt,a=this.w,s=i.elGrid.getBoundingClientRect(),o=("touchmove"===e.type?e.touches[0]:e).clientX,r=("touchmove"===e.type?e.touches[0]:e).clientY;if(this.clientY=r,this.clientX=o,a.globals.capturedSeriesIndex=-1,a.globals.capturedDataPointIndex=-1,r<s.top||r>s.top+s.height)this.handleMouseOut(i);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!a.config.tooltip.shared){var n=parseInt(i.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(n)<0)return void this.handleMouseOut(i)}t=this.getElTooltip(),s=this.getElXCrosshairs(),n=a.globals.xyCharts||"bar"===a.config.chart.type&&!a.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||a.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===e.type||"touchmove"===e.type||"mouseup"===e.type){null!==s&&s.classList.add("apexcharts-active");var l,h,s=this.yaxisTooltips.filter(function(t){return!0===t});if(null!==this.ycrosshairs&&s.length&&this.ycrosshairs.classList.add("apexcharts-active"),n&&!this.showOnIntersect?this.handleStickyTooltip(e,o,r,i):"heatmap"===a.config.chart.type||"treemap"===a.config.chart.type?(l=(o=this.intersect.handleHeatTreeTooltip({e:e,opt:i,x:l,y:h,type:a.config.chart.type})).x,h=o.y,t.style.left=l+"px",t.style.top=h+"px"):(this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:e,opt:i}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:e,opt:i,x:l,y:h})),this.yaxisTooltips.length)for(var c=0;c<a.config.yaxis.length;c++)this.axesTooltip.drawYaxisTooltipText(c,r,this.xyRatios);i.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==e.type&&"touchend"!==e.type||this.handleMouseOut(i)}}},{key:"nonAxisChartsTooltips",value:function(t){var e=t.e,i=t.opt,a=t.tooltipRect,s=this.w,o=i.paths.getAttribute("rel"),r=this.getElTooltip(),t=s.globals.dom.elWrap.getBoundingClientRect();"mousemove"===e.type||"touchmove"===e.type?(r.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:parseInt(o,10)-1,shared:!1}),i=s.globals.clientX-t.left-a.ttWidth/2,a=s.globals.clientY-t.top-a.ttHeight-10,r.style.left=i+"px",r.style.top=a+"px",s.config.legend.tooltipHoverFormatter&&(o=(0,s.config.legend.tooltipHoverFormatter)(this.legendLabels[a=o-1].getAttribute("data:default-text"),{seriesIndex:a,dataPointIndex:a,w:s}),this.legendLabels[a].innerHTML=o)):"mouseout"!==e.type&&"touchend"!==e.type||(r.classList.remove("apexcharts-active"),s.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)}))}},{key:"handleStickyTooltip",value:function(t,e,i,a){var s=this.w,o=this.tooltipUtil.getNearestValues({context:this,hoverArea:a.hoverArea,elGrid:a.elGrid,clientX:e,clientY:i}),e=o.j,i=o.capturedSeries;o.hoverX<0||o.hoverX>s.globals.gridWidth?this.handleMouseOut(a):null!==i?this.handleStickyCapturedSeries(t,i,a,e):(this.tooltipUtil.isXoverlap(e)||s.globals.isBarHorizontal)&&this.create(t,this,0,e,a.ttItems)}},{key:"handleStickyCapturedSeries",value:function(t,e,i,a){var s=this.w;null===s.globals.series[e][a]?this.handleMouseOut(i):void 0!==s.globals.series[e][a]?this.tConfig.shared&&this.tooltipUtil.isXoverlap(a)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(t,this,e,a,i.ttItems):this.create(t,this,e,a,i.ttItems,!1):this.tooltipUtil.isXoverlap(a)&&this.create(t,this,0,a,i.ttItems)}},{key:"deactivateHoverFilter",value:function(){for(var t=this.w,e=new z(this.ctx),i=t.globals.dom.Paper.select(".apexcharts-bar-area"),a=0;a<i.length;a++)e.pathMouseLeave(i[a])}},{key:"handleMouseOut",value:function(t){var e=this.w,i=this.getElXCrosshairs();if(t.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==e.config.chart.type&&this.marker.resetPointsSize(),null!==i&&i.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.blxaxisTooltip&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var a=0;a<this.yaxisTTEls.length;a++)this.yaxisTTEls[a].classList.remove("apexcharts-active")}e.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)})}},{key:"markerClick",value:function(t,e,i){var a=this.w;"function"==typeof a.config.chart.events.markerClick&&a.config.chart.events.markerClick(t,this.ctx,{seriesIndex:e,dataPointIndex:i,w:a}),this.ctx.events.fireEvent("markerClick",[t,this.ctx,{seriesIndex:e,dataPointIndex:i,w:a}])}},{key:"create",value:function(t,e,i,a,s){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,r=this.w,n=e;"mouseup"===t.type&&this.markerClick(t,i,a),null===o&&(o=this.tConfig.shared);e=this.tooltipUtil.hasMarkers(),t=this.tooltipUtil.getElBars();if(r.config.legend.tooltipHoverFormatter){var l=r.config.legend.tooltipHoverFormatter,h=Array.from(this.legendLabels);h.forEach(function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)});for(var c=0;c<h.length;c++){var d=h[c],g=parseInt(d.getAttribute("i"),10),u=decodeURIComponent(d.getAttribute("data:default-text")),p=l(u,{seriesIndex:o?g:i,dataPointIndex:a,w:r});if(o)d.innerHTML=r.globals.collapsedSeriesIndices.indexOf(g)<0?p:u;else if(d.innerHTML=g===i?p:u,i===g)break}}if(o){if(n.tooltipLabels.drawSeriesTexts({ttItems:s,i:i,j:a,shared:!this.showOnIntersect&&this.tConfig.shared}),e&&(0<r.globals.markers.largestSize?n.marker.enlargePoints(a):n.tooltipPosition.moveDynamicPointsOnHover(a)),this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(t),0<this.barSeriesHeight)){var f=new z(this.ctx),x=r.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(a,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(a);for(var b=0;b<x.length;b++)f.pathMouseEnter(x[b])}}else n.tooltipLabels.drawSeriesTexts({shared:!1,ttItems:s,i:i,j:a}),this.tooltipUtil.hasBars()&&n.tooltipPosition.moveStickyTooltipOverBars(a),e&&n.tooltipPosition.moveMarkers(i,a)}}]),Vt),Lt=function(){n(e,B);var t=c(e);function e(){return s(this,e),t.apply(this,arguments)}return o(e,[{key:"draw",value:function(m,v){var y=this,w=this.w;this.graphics=new z(this.ctx),this.bar=new B(this.ctx,this.xyRatios);var t=new P(this.ctx,w);m=t.getLogSeries(m),this.yRatio=t.getLogYRatios(this.yRatio),this.barHelpers.initVariables(m),"100%"===w.config.chart.stackType&&(m=w.globals.seriesPercent.slice()),this.series=m,this.totalItems=0,this.prevY=[],this.prevX=[],this.prevYF=[],this.prevXF=[],this.prevYVal=[],this.prevXVal=[],this.xArrj=[],this.xArrjF=[],this.xArrjVal=[],this.yArrj=[],this.yArrjF=[],this.yArrjVal=[];for(var e=0;e<m.length;e++)0<m[e].length&&(this.totalItems+=m[e].length);for(var k=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),A=0,S=0,i=0,a=0;i<m.length;i++,a++)!function(t,e){var i,a,s,o,r=[],n=[],l=w.globals.comboCharts?v[t]:t;1<y.yRatio.length&&(y.yaxisIndex=l),y.isReversed=w.config.yaxis[y.yaxisIndex]&&w.config.yaxis[y.yaxisIndex].reversed;var h=y.graphics.group({class:"apexcharts-series",seriesName:M.escapeString(w.globals.seriesNames[l]),rel:t+1,"data:realIndex":l});y.ctx.series.addCollapsedClassToSeries(h,l);var c=y.graphics.group({class:"apexcharts-datalabels","data:realIndex":l}),d=0,g=0,u=y.initialPositions(A,S,void 0,void 0,void 0,void 0);S=u.y,d=u.barHeight,a=u.yDivision,o=u.zeroW,A=u.x,g=u.barWidth,i=u.xDivision,s=u.zeroH,y.yArrj=[],y.yArrjF=[],y.yArrjVal=[],y.xArrj=[],y.xArrjF=[],y.xArrjVal=[],1===y.prevY.length&&y.prevY[0].every(function(t){return isNaN(t)})&&(y.prevY[0]=y.prevY[0].map(function(t){return s}),y.prevYF[0]=y.prevYF[0].map(function(t){return 0}));for(var p=0;p<w.globals.dataPoints;p++){var f=y.barHelpers.getStrokeWidth(t,p,l),x={indexes:{i:t,j:p,realIndex:l,bc:e},strokeWidth:f,x:A,y:S,elSeries:h},b=null;y.isHorizontal?(b=y.drawStackedBarPaths(T(T({},x),{},{zeroW:o,barHeight:d,yDivision:a})),g=y.series[t][p]/y.invertedYRatio):(b=y.drawStackedColumnPaths(T(T({},x),{},{xDivision:i,barWidth:g,zeroH:s})),d=y.series[t][p]/y.yRatio[y.yaxisIndex]),S=b.y,A=b.x,r.push(A),n.push(S);x=y.barHelpers.getPathFillColor(m,t,p,l),h=y.renderSeries({realIndex:l,pathFill:x,j:p,i:t,pathFrom:b.pathFrom,pathTo:b.pathTo,strokeWidth:f,elSeries:h,x:A,y:S,series:m,barHeight:d,barWidth:g,elDataLabelsWrap:c,type:"bar",visibleSeries:0})}w.globals.seriesXvalues[l]=r,w.globals.seriesYvalues[l]=n,y.prevY.push(y.yArrj),y.prevYF.push(y.yArrjF),y.prevYVal.push(y.yArrjVal),y.prevX.push(y.xArrj),y.prevXF.push(y.xArrjF),y.prevXVal.push(y.xArrjVal),k.add(h)}(i,a);return k}},{key:"initialPositions",value:function(t,e,i,a,s,o){var r,n,l=this.w;return this.isHorizontal?(r=(r=a=l.globals.gridHeight/l.globals.dataPoints)*parseInt(l.config.plotOptions.bar.barHeight,10)/100,o=this.baseLineInvertedY+l.globals.padHorizontal+(this.isReversed?l.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),e=(a-r)/2):(n=i=l.globals.gridWidth/l.globals.dataPoints,n=l.globals.isXNumeric&&1<l.globals.dataPoints?(i=l.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:n*parseInt(l.config.plotOptions.bar.columnWidth,10)/100,s=this.baseLineY[this.yaxisIndex]+(this.isReversed?l.globals.gridHeight:0)-(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),t=l.globals.padHorizontal+(i-n)/2),{x:t,y:e,yDivision:a,xDivision:i,barHeight:r,barWidth:n,zeroH:s,zeroW:o}}},{key:"drawStackedBarPaths",value:function(t){for(var e=t.indexes,i=t.barHeight,a=t.strokeWidth,s=t.zeroW,o=(t.x,t.y),r=t.yDivision,n=t.elSeries,l=this.w,h=o,c=e.i,d=e.j,g=0,u=0;u<this.prevXF.length;u++)g+=this.prevXF[u][d];var s=0<c?(t=s,this.prevXVal[c-1][d]<0?t=0<=this.series[c][d]?this.prevX[c-1][d]+g-2*(this.isReversed?g:0):this.prevX[c-1][d]:0<=this.prevXVal[c-1][d]&&(t=0<=this.series[c][d]?this.prevX[c-1][d]:this.prevX[c-1][d]-g+2*(this.isReversed?g:0)),t):s,p=null===this.series[c][d]?s:s+this.series[c][d]/this.invertedYRatio-2*(this.isReversed?this.series[c][d]/this.invertedYRatio:0),l=this.barHelpers.getBarpaths({barYPosition:h,barHeight:i,x1:s,x2:p,strokeWidth:a,series:this.series,realIndex:e.realIndex,i:c,j:d,w:l});return this.barHelpers.barBackground({j:d,i:c,y1:h,y2:i,elSeries:n}),{pathTo:l.pathTo,pathFrom:l.pathFrom,x:p,y:o+=r}}},{key:"drawStackedColumnPaths",value:function(t){for(var e,i=t.indexes,a=t.x,s=(t.y,t.xDivision),o=t.barWidth,r=t.zeroH,n=(t.strokeWidth,t.elSeries),l=this.w,h=i.i,c=i.j,d=i.bc,t=a=l.globals.isXNumeric?((l.globals.seriesX[h][c]||0)-l.globals.minX)/this.xRatio-o/2:a,g=0,u=0;u<this.prevYF.length;u++)g+=isNaN(this.prevYF[u][c])?0:this.prevYF[u][c];if(0<h&&!l.globals.isXNumeric||0<h&&l.globals.isXNumeric&&l.globals.seriesX[h-1][c]===l.globals.seriesX[h][c]){var p,f,x=Math.min(this.yRatio.length+1,h+1);if(void 0!==this.prevY[h-1])for(var b=1;b<x;b++)if(!isNaN(this.prevY[h-b][c])){f=this.prevY[h-b][c];break}for(var m=1;m<x;m++){if(this.prevYVal[h-m][c]<0){p=0<=this.series[h][c]?f-g+2*(this.isReversed?g:0):f;break}if(0<=this.prevYVal[h-m][c]){p=0<=this.series[h][c]?f:f+g-2*(this.isReversed?g:0);break}}void 0===p&&(p=l.globals.gridHeight),e=this.prevYF[0].every(function(t){return 0===t})&&this.prevYF.slice(1,h).every(function(t){return t.every(function(t){return isNaN(t)})})?l.globals.gridHeight-r:p}else e=l.globals.gridHeight-r;var v=e-this.series[h][c]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[h][c]/this.yRatio[this.yaxisIndex]:0),i=this.barHelpers.getColumnPaths({barXPosition:t,barWidth:o,y1:e,y2:v,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,realIndex:i.realIndex,i:h,j:c,w:l});return this.barHelpers.barBackground({bc:d,j:c,i:h,x1:t,x2:o,elSeries:n}),a+=s,{pathTo:i.pathTo,pathFrom:i.pathFrom,x:l.globals.isXNumeric?a-s:a,y:v}}}]),e}(),Pt=function(){n(e,B);var t=c(e);function e(){return s(this,e),t.apply(this,arguments)}return o(e,[{key:"draw",value:function(x,s){var b=this,m=this.w,o=new z(this.ctx),v=new F(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot;var t=new P(this.ctx,m);x=t.getLogSeries(x),this.series=x,this.yRatio=t.getLogYRatios(this.yRatio),this.barHelpers.initVariables(x);for(var y=o.group({class:"apexcharts-".concat(m.config.chart.type,"-series apexcharts-plot-series")}),e=0;e<x.length;e++)!function(r){b.isBoxPlot="boxPlot"===m.config.chart.type||"boxPlot"===m.config.series[r].type;var n=void 0,l=void 0,t=[],e=[],h=m.globals.comboCharts?s[r]:r,c=o.group({class:"apexcharts-series",seriesName:M.escapeString(m.globals.seriesNames[h]),rel:r+1,"data:realIndex":h});0<x[r].length&&(b.visibleI=b.visibleI+1),1<b.yRatio.length&&(b.yaxisIndex=h);var i=b.barHelpers.initialPositions(),l=i.y,d=i.barHeight,n=i.x,g=i.barWidth,u=i.xDivision,p=i.zeroH;e.push(n+g/2);for(var f=o.group({class:"apexcharts-datalabels","data:realIndex":h}),a=0;a<m.globals.dataPoints;a++)!function(a){var s=b.barHelpers.getStrokeWidth(r,a,h),o=b.drawBoxPaths({indexes:{i:r,j:a,realIndex:h},x:n,y:l,xDivision:u,barWidth:g,zeroH:p,strokeWidth:s,elSeries:c});l=o.y,n=o.x,0<a&&e.push(n+g/2),t.push(l),o.pathTo.forEach(function(t,e){var i=!b.isBoxPlot&&b.candlestickOptions.wick.useFillColor?o.color[e]:m.globals.stroke.colors[r],e=v.fillPath({seriesNumber:h,dataPointIndex:a,color:o.color[e],value:x[r][a]});b.renderSeries({realIndex:h,pathFill:e,lineFill:i,j:a,i:r,pathFrom:o.pathFrom,pathTo:t,strokeWidth:s,elSeries:c,x:n,y:l,series:x,barHeight:d,barWidth:g,elDataLabelsWrap:f,visibleSeries:b.visibleI,type:m.config.chart.type})})}(a);m.globals.seriesXvalues[h]=e,m.globals.seriesYvalues[h]=t,y.add(c)}(e);return y}},{key:"drawBoxPaths",value:function(t){var e=t.indexes,i=t.x,a=(t.y,t.xDivision),s=t.barWidth,o=t.zeroH,r=t.strokeWidth,n=this.w,l=new z(this.ctx),h=e.i,c=e.j,d=!0,g=n.config.plotOptions.candlestick.colors.upward,u=n.config.plotOptions.candlestick.colors.downward,p="";this.isBoxPlot&&(p=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var f=this.yRatio[this.yaxisIndex],x=e.realIndex,b=this.getOHLCValue(x,c),m=o,v=o;b.o>b.c&&(d=!1);var y=Math.min(b.o,b.c),w=Math.max(b.o,b.c),t=b.m,e=(i=n.globals.isXNumeric?(n.globals.seriesX[x][c]-n.globals.minX)/this.xRatio-s/2:i)+s*this.visibleI;void 0===this.series[h][c]||null===this.series[h][c]?w=y=o:(y=o-y/f,w=o-w/f,m=o-b.h/f,v=o-b.l/f,t=o-b.m/f);l.move(e,o);o=l.move(e+s/2,y);return 0<n.globals.previousPaths.length&&(o=this.getPreviousPath(x,c,!0)),f=this.isBoxPlot?[l.move(e,y)+l.line(e+s/2,y)+l.line(e+s/2,m)+l.line(e+s/4,m)+l.line(e+s-s/4,m)+l.line(e+s/2,m)+l.line(e+s/2,y)+l.line(e+s,y)+l.line(e+s,t)+l.line(e,t)+l.line(e,y+r/2),l.move(e,t)+l.line(e+s,t)+l.line(e+s,w)+l.line(e+s/2,w)+l.line(e+s/2,v)+l.line(e+s-s/4,v)+l.line(e+s/4,v)+l.line(e+s/2,v)+l.line(e+s/2,w)+l.line(e,w)+l.line(e,t)+"z"]:[l.move(e,w)+l.line(e+s/2,w)+l.line(e+s/2,m)+l.line(e+s/2,w)+l.line(e+s,w)+l.line(e+s,y)+l.line(e+s/2,y)+l.line(e+s/2,v)+l.line(e+s/2,y)+l.line(e,y)+l.line(e,w-r/2)],o+=l.move(e,y),n.globals.isXNumeric||(i+=a),{pathTo:f,pathFrom:o,x:i,y:w,barXPosition:e,color:this.isBoxPlot?p:d?[g]:[u]}}},{key:"getOHLCValue",value:function(t,e){var i=this.w;return{o:(this.isBoxPlot?i.globals.seriesCandleH:i.globals.seriesCandleO)[t][e],h:(this.isBoxPlot?i.globals.seriesCandleO:i.globals.seriesCandleH)[t][e],m:i.globals.seriesCandleM[t][e],l:(this.isBoxPlot?i.globals.seriesCandleC:i.globals.seriesCandleL)[t][e],c:(this.isBoxPlot?i.globals.seriesCandleL:i.globals.seriesCandleC)[t][e]}}}]),e}(),Tt=(o(Bt,[{key:"checkColorRange",value:function(){var t=this.w,i=!1,t=t.config.plotOptions[t.config.chart.type];return 0<t.colorScale.ranges.length&&t.colorScale.ranges.map(function(t,e){t.from<=0&&(i=!0)}),i}},{key:"getShadeColor",value:function(t,e,i,a){var s=this.w,o=1,r=s.config.plotOptions[t].shadeIntensity,i=this.determineColor(t,e,i);s.globals.hasNegs||a?o=s.config.plotOptions[t].reverseNegativeShade?i.percent<0?i.percent/100*(1.25*r):(1-i.percent/100)*(1.25*r):i.percent<=0?1-(1+i.percent/100)*r:(1-i.percent/100)*r:(o=1-i.percent/100,"treemap"===t&&(o=(1-i.percent/100)*(1.25*r)));a=i.color,r=new M;return{color:a=s.config.plotOptions[t].enableShades?"dark"===this.w.config.theme.mode?M.hexToRgba(r.shadeColor(-1*o,i.color),s.config.fill.opacity):M.hexToRgba(r.shadeColor(o,i.color),s.config.fill.opacity):a,colorProps:i}}},{key:"determineColor",value:function(t,e,i){var a=this.w,s=a.globals.series[e][i],o=a.config.plotOptions[t],r=o.colorScale.inverse?i:e;a.config.plotOptions[t].distributed&&(r=i);var n=a.globals.colors[r],l=null,h=Math.min.apply(Math,g(a.globals.series[e])),c=Math.max.apply(Math,g(a.globals.series[e]));o.distributed||"heatmap"!==t||(h=a.globals.minY,c=a.globals.maxY),void 0!==o.colorScale.min&&(h=o.colorScale.min<a.globals.minY?o.colorScale.min:a.globals.minY,c=o.colorScale.max>a.globals.maxY?o.colorScale.max:a.globals.maxY);var a=Math.abs(c)+Math.abs(h),d=100*s/(0===a?a-1e-6:a);return 0<o.colorScale.ranges.length&&o.colorScale.ranges.map(function(t,e){s>=t.from&&s<=t.to&&(n=t.color,l=t.foreColor||null,h=t.from,c=t.to,t=Math.abs(c)+Math.abs(h),d=100*s/(0===t?t-1e-6:t))}),{color:n,foreColor:l,percent:d}}},{key:"calculateDataLabels",value:function(t){var e=t.text,i=t.x,a=t.y,s=t.i,o=t.j,r=t.colorProps,n=t.fontSize,l=this.w.config.dataLabels,h=new z(this.ctx),c=new D(this.ctx),d=null;return l.enabled&&(d=h.group({class:"apexcharts-data-labels"}),t=l.offsetX,h=l.offsetY,t=i+t,h=a+parseFloat(l.style.fontSize)/3+h,c.plotDataLabelsText({x:t,y:h,text:e,i:s,j:o,color:r.foreColor,parent:d,fontSize:n,dataLabelsConfig:l})),d}},{key:"addListeners",value:function(t){var e=new z(this.ctx);t.node.addEventListener("mouseenter",e.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",e.pathMouseLeave.bind(this,t)),t.node.addEventListener("mousedown",e.pathMouseDown.bind(this,t))}}]),Bt),Mt=(o(Wt,[{key:"draw",value:function(t){var e=this.w,i=new z(this.ctx),a=i.group({class:"apexcharts-heatmap"});a.attr("clip-path","url(#gridRectMask".concat(e.globals.cuid,")"));var s=e.globals.gridWidth/e.globals.dataPoints,o=e.globals.gridHeight/e.globals.series.length,r=0,n=!1;this.negRange=this.helpers.checkColorRange();var l=t.slice();e.config.yaxis[0].reversed&&(n=!0,l.reverse());for(var h=n?0:l.length-1;n?h<l.length:0<=h;n?h++:h--){var c,d=i.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:M.escapeString(e.globals.seriesNames[h]),rel:h+1,"data:realIndex":h});this.ctx.series.addCollapsedClassToSeries(d,h),e.config.chart.dropShadow.enabled&&(c=e.config.chart.dropShadow,new C(this.ctx).dropShadow(d,c,h));for(var g=0,u=e.config.plotOptions.heatmap.shadeIntensity,p=0;p<l[h].length;p++){var f=this.helpers.getShadeColor(e.config.chart.type,h,p,this.negRange),x=f.color,b=f.colorProps;"image"===e.config.fill.type&&(x=new F(this.ctx).fillPath({seriesNumber:h,dataPointIndex:p,opacity:e.globals.hasNegs?b.percent<0?1-(1+b.percent/100):u+b.percent/100:b.percent/100,patternID:M.randomId(),width:e.config.fill.image.width||s,height:e.config.fill.image.height||o}));var m,f=this.rectRadius,f=i.drawRect(g,r,s,o,f);f.attr({cx:g,cy:r}),f.node.classList.add("apexcharts-heatmap-rect"),d.add(f),f.attr({fill:x,i:h,index:h,j:p,val:l[h][p],"stroke-width":this.strokeWidth,stroke:e.config.plotOptions.heatmap.useFillColorAsStroke?x:e.globals.stroke.colors[0],color:x}),this.helpers.addListeners(f),e.config.chart.animations.enabled&&!e.globals.dataChanged&&(m=1,e.globals.resized||(m=e.config.chart.animations.speed),this.animateHeatMap(f,g,r,s,o,m)),e.globals.dataChanged&&(v=1,this.dynamicAnim.enabled&&e.globals.shouldAnimate&&(v=this.dynamicAnim.speed,m=e.globals.previousPaths[h]&&e.globals.previousPaths[h][p]&&e.globals.previousPaths[h][p].color||"rgba(255, 255, 255, 0)",this.animateHeatColor(f,M.isColorHex(m)?m:M.rgb2hex(m),M.isColorHex(x)?x:M.rgb2hex(x),v)));var v=(0,e.config.dataLabels.formatter)(e.globals.series[h][p],{value:e.globals.series[h][p],seriesIndex:h,dataPointIndex:p,w:e}),b=this.helpers.calculateDataLabels({text:v,x:g+s/2,y:r+o/2,i:h,j:p,colorProps:b,series:l});null!==b&&d.add(b),g+=s}r+=o,a.add(d)}t=e.globals.yAxisScale[0].result.slice();e.config.yaxis[0].reversed?t.unshift(""):t.push(""),e.globals.yAxisScale[0].result=t;t=e.globals.gridHeight/e.globals.series.length;return e.config.yaxis[0].labels.offsetY=-t/2,a}},{key:"animateHeatMap",value:function(t,e,i,a,s,o){var r=new S(this.ctx);r.animateRect(t,{x:e+a/2,y:i+s/2,width:0,height:0},{x:e,y:i,width:a,height:s},o,function(){r.animationCompleted(t)})}},{key:"animateHeatColor",value:function(t,e,i,a){t.attr({fill:e}).animate(a).attr({fill:i})}}]),Wt),zt=(o(Ot,[{key:"drawYAxisTexts",value:function(t,e,i,a){var s=this.w,o=s.config.yaxis[0],s=s.globals.yLabelFormatters[0];return new z(this.ctx).drawText({x:t+o.labels.offsetX,y:e+o.labels.offsetY,text:s(a,i),textAnchor:"middle",fontSize:o.labels.style.fontSize,fontFamily:o.labels.style.fontFamily,foreColor:Array.isArray(o.labels.style.colors)?o.labels.style.colors[i]:o.labels.style.colors})}}]),Ot),It=(o(Nt,[{key:"draw",value:function(t){var e=this,i=this.w,a=new z(this.ctx);if(this.ret=a.group({class:"apexcharts-pie"}),i.globals.noData)return this.ret;for(var s=0,o=0;o<t.length;o++)s+=M.negToZero(t[o]);var r=[],n=a.group();0===s&&(s=1e-5),t.forEach(function(t){e.maxY=Math.max(e.maxY,t)}),i.config.yaxis[0].max&&(this.maxY=i.config.yaxis[0].max),"back"===i.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var l=0;l<t.length;l++){var h=this.fullAngle*M.negToZero(t[l])/s;r.push(h),"polarArea"===this.chartType?(r[l]=this.fullAngle/t.length,this.sliceSizes.push(i.globals.radialSize*t[l]/this.maxY)):this.sliceSizes.push(i.globals.radialSize)}if(i.globals.dataChanged){for(var c,d=0,g=0;g<i.globals.previousPaths.length;g++)d+=M.negToZero(i.globals.previousPaths[g]);for(var u=0;u<i.globals.previousPaths.length;u++)c=this.fullAngle*M.negToZero(i.globals.previousPaths[u])/d,this.prevSectorAngleArr.push(c)}this.donutSize<0&&(this.donutSize=0);var p=i.config.plotOptions.pie.customScale,f=i.globals.gridWidth/2,x=i.globals.gridHeight/2,f=f-i.globals.gridWidth/2*p,x=x-i.globals.gridHeight/2*p;"donut"===this.chartType&&((a=a.drawCircle(this.donutSize)).attr({cx:this.centerX,cy:this.centerY,fill:i.config.plotOptions.pie.donut.background||"transparent"}),n.add(a));var b=this.drawArcs(r,t);return this.sliceLabels.forEach(function(t){b.add(t)}),n.attr({transform:"translate(".concat(f,", ").concat(x,") scale(").concat(p,")")}),n.add(b),this.ret.add(n),this.donutDataLabels.show&&(x=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:f,translateY:x}),this.ret.add(x)),"front"===i.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(t,e){var i,a=this.w,s=new C(this.ctx),o=new z(this.ctx),r=new F(this.ctx),n=o.group({class:"apexcharts-slices"}),l=(this.initialAngle,this.initialAngle,this.initialAngle),h=this.initialAngle;this.strokeWidth=a.config.stroke.show?a.config.stroke.width:0;for(var c=0;c<t.length;c++){var d=o.group({class:"apexcharts-series apexcharts-pie-series",seriesName:M.escapeString(a.globals.seriesNames[c]),rel:c+1,"data:realIndex":c});n.add(d);var g=h,l=(i=l)+t[c],h=g+this.prevSectorAngleArr[c],u=l<i?this.fullAngle+l-i:l-i,p=r.fillPath({seriesNumber:c,size:this.sliceSizes[c],value:e[c]}),f=this.getChangedPath(g,h),f=o.drawPath({d:f,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[c]:this.lineColorArr,strokeWidth:0,fill:p,fillOpacity:a.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(c)});f.attr({index:0,j:c}),s.setSelectionFilter(f,0,c),a.config.chart.dropShadow.enabled&&(x=a.config.chart.dropShadow,s.dropShadow(f,x,c)),this.addListeners(f,this.donutDataLabels),z.setAttrs(f.node,{"data:angle":u,"data:startAngle":i,"data:strokeWidth":this.strokeWidth,"data:value":e[c]});p={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?p=M.polarToCartesian(this.centerX,this.centerY,a.globals.radialSize/1.25+a.config.plotOptions.pie.dataLabels.offset,(i+u/2)%this.fullAngle):"donut"===this.chartType&&(p=M.polarToCartesian(this.centerX,this.centerY,(a.globals.radialSize+this.donutSize)/2+a.config.plotOptions.pie.dataLabels.offset,(i+u/2)%this.fullAngle)),d.add(f);var x=0;!this.initialAnim||a.globals.resized||a.globals.dataChanged?this.animBeginArr.push(0):(0==(x=u/this.fullAngle*a.config.chart.animations.speed)&&(x=1),this.animDur=x+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&a.globals.dataChanged?this.animatePaths(f,{size:this.sliceSizes[c],endAngle:l,startAngle:i,prevStartAngle:g,prevEndAngle:h,animateStartingPos:!0,i:c,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:a.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(f,{size:this.sliceSizes[c],endAngle:l,startAngle:i,i:c,totalItems:t.length-1,animBeginArr:this.animBeginArr,dur:x}),a.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&f.click(this.pieClicked.bind(this,c)),void 0!==a.globals.selectedDataPoints[0]&&-1<a.globals.selectedDataPoints[0].indexOf(c)&&this.pieClicked(c),a.config.dataLabels.enabled&&(d=p.x,x=p.y,f=100*u/this.fullAngle+"%",0!=u&&a.config.plotOptions.pie.dataLabels.minAngleToShowLabel<t[c]&&(void 0!==(p=a.config.dataLabels.formatter)&&(f=p(a.globals.seriesPercent[c][0],{seriesIndex:c,w:a})),u=a.globals.dataLabels.style.colors[c],p=o.group({class:"apexcharts-datalabels"}),f=o.drawText({x:d,y:x,text:f,textAnchor:"middle",fontSize:a.config.dataLabels.style.fontSize,fontFamily:a.config.dataLabels.style.fontFamily,fontWeight:a.config.dataLabels.style.fontWeight,foreColor:u}),p.add(f),a.config.dataLabels.dropShadow.enabled&&(u=a.config.dataLabels.dropShadow,s.dropShadow(f,u)),f.node.classList.add("apexcharts-pie-label"),a.config.chart.animations.animate&&!1===a.globals.resized&&(f.node.classList.add("apexcharts-pie-label-delay"),f.node.style.animationDelay=a.config.chart.animations.speed/940+"s"),this.sliceLabels.push(p)))}return n}},{key:"addListeners",value:function(t,e){var i=new z(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,t)),t.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this,t)),this.donutDataLabels.total.showAlways||(t.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,t.node,e)))}},{key:"animatePaths",value:function(t,e){var i=this.w,a=e.endAngle<e.startAngle?this.fullAngle+e.endAngle-e.startAngle:e.endAngle-e.startAngle,s=a,o=e.startAngle,r=e.startAngle;void 0!==e.prevStartAngle&&void 0!==e.prevEndAngle&&(o=e.prevEndAngle,s=e.prevEndAngle<e.prevStartAngle?this.fullAngle+e.prevEndAngle-e.prevStartAngle:e.prevEndAngle-e.prevStartAngle),e.i===i.config.series.length-1&&(a+r>this.fullAngle?e.endAngle=e.endAngle-(a+r):a+r<this.fullAngle&&(e.endAngle=e.endAngle+(this.fullAngle-(a+r)))),a===this.fullAngle&&(a=this.fullAngle-.01),this.animateArc(t,o,r,a,s,e)}},{key:"animateArc",value:function(e,i,a,s,o,r){var n,l=this,t=this.w,h=new S(this.ctx),c=r.size;(isNaN(i)||isNaN(o))&&(i=a,o=s,r.dur=0);var d=s,g=a,u=i<a?this.fullAngle+i-a:i-a;t.globals.dataChanged&&r.shouldSetPrevPaths&&r.prevEndAngle&&(n=l.getPiePath({me:l,startAngle:r.prevStartAngle,angle:r.prevEndAngle<r.prevStartAngle?this.fullAngle+r.prevEndAngle-r.prevStartAngle:r.prevEndAngle-r.prevStartAngle,size:c}),e.attr({d:n})),0!==r.dur?e.animate(r.dur,t.globals.easing,r.animBeginArr[r.i]).afterAll(function(){"pie"!==l.chartType&&"donut"!==l.chartType&&"polarArea"!==l.chartType||this.animate(t.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":l.strokeWidth}),r.i===t.config.series.length-1&&h.animationCompleted(e)}).during(function(t){d=u+(s-u)*t,r.animateStartingPos&&(d=o+(s-o)*t,g=i-o+(a-(i-o))*t),n=l.getPiePath({me:l,startAngle:g,angle:d,size:c}),e.node.setAttribute("data:pathOrig",n),e.attr({d:n})}):(n=l.getPiePath({me:l,startAngle:g,angle:s,size:c}),r.isTrack||(t.globals.animationEnded=!0),e.node.setAttribute("data:pathOrig",n),e.attr({d:n,"stroke-width":l.strokeWidth}))}},{key:"pieClicked",value:function(t){var e,i=this.w,a=this.sliceSizes[t]+(i.config.plotOptions.pie.expandOnClick?4:0),t=i.globals.dom.Paper.select(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(t)).members[0];"true"!==t.attr("data:pieClicked")?(i=i.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),Array.prototype.forEach.call(i,function(t){t.setAttribute("data:pieClicked","false");var e=t.getAttribute("data:pathOrig");t.setAttribute("d",e)}),t.attr("data:pieClicked","true"),e=parseInt(t.attr("data:startAngle"),10),i=parseInt(t.attr("data:angle"),10),e=this.getPiePath({me:this,startAngle:e,angle:i,size:a}),360!==i&&t.plot(e)):(t.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(t.node,this.donutDataLabels),e=t.attr("data:pathOrig"),t.attr({d:e}))}},{key:"getChangedPath",value:function(t,e){var i="";return i=this.dynamicAnim&&this.w.globals.dataChanged?this.getPiePath({me:this,startAngle:t,angle:e-t,size:this.size}):i}},{key:"getPiePath",value:function(t){var e=t.me,i=t.startAngle,a=t.angle,s=t.size,o=i,r=Math.PI*(o-90)/180,n=a+i;Math.ceil(n)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(n=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(n)>this.fullAngle&&(n-=this.fullAngle);var l=Math.PI*(n-90)/180,t=e.centerX+s*Math.cos(r),i=e.centerY+s*Math.sin(r),r=e.centerX+s*Math.cos(l),l=e.centerY+s*Math.sin(l),n=M.polarToCartesian(e.centerX,e.centerY,e.donutSize,n),o=M.polarToCartesian(e.centerX,e.centerY,e.donutSize,o),a=180<a?1:0,l=["M",t,i,"A",s,s,0,a,1,r,l];return("donut"===e.chartType?[].concat(l,["L",n.x,n.y,"A",e.donutSize,e.donutSize,0,a,0,o.x,o.y,"L",t,i,"z"]):"pie"===e.chartType||"polarArea"===e.chartType?[].concat(l,["L",e.centerX,e.centerY,"L",t,i]):[].concat(l)).join(" ")}},{key:"drawPolarElements",value:function(t){var e=this.w,i=new et(this.ctx),a=new z(this.ctx),s=new zt(this.ctx),o=a.group(),r=a.group(),i=i.niceScale(0,Math.ceil(this.maxY),e.config.yaxis[0].tickAmount,0,!0),n=i.result.reverse(),l=i.result.length;this.maxY=i.niceMax;for(var h=e.globals.radialSize,c=h/(l-1),d=0;d<l-1;d++){var g,u=a.drawCircle(h);u.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":e.config.plotOptions.polarArea.rings.strokeWidth,stroke:e.config.plotOptions.polarArea.rings.strokeColor}),e.config.yaxis[0].show&&(g=s.drawYAxisTexts(this.centerX,this.centerY-h+parseInt(e.config.yaxis[0].labels.style.fontSize,10)/2,d,n[d]),r.add(g)),o.add(u),h-=c}this.drawSpokes(t),t.add(o),t.add(r)}},{key:"renderInnerDataLabels",value:function(t,e){var i=this.w,a=new z(this.ctx),s=a.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(e.translateX||0,", ").concat(e.translateY||0,") scale(").concat(i.config.plotOptions.pie.customScale,")")}),o=t.total.show;s.node.style.opacity=e.opacity;var r,n=e.centerX,l=e.centerY,h=void 0===t.name.color?i.globals.colors[0]:t.name.color,c=t.name.fontSize,d=t.name.fontFamily,g=t.value.fontWeight,u=void 0===t.value.color?i.config.chart.foreColor:t.value.color,p=t.value.formatter,f="",e="";return o?(h=t.total.color,c=t.total.fontSize,d=t.total.fontFamily,g=t.total.fontWeight,e=t.total.label,f=t.total.formatter(i)):1===i.globals.series.length&&(f=p(i.globals.series[0],i),e=i.globals.seriesNames[0]),e=e&&t.name.formatter(e,t.total.show,i),t.name.show&&((r=a.drawText({x:n,y:l+parseFloat(t.name.offsetY),text:e,textAnchor:"middle",foreColor:h,fontSize:c,fontWeight:g,fontFamily:d})).node.classList.add("apexcharts-datalabel-label"),s.add(r)),t.value.show&&(r=t.name.show?parseFloat(t.value.offsetY)+16:t.value.offsetY,(t=a.drawText({x:n,y:l+r,text:f,textAnchor:"middle",foreColor:u,fontWeight:t.value.fontWeight,fontSize:t.value.fontSize,fontFamily:t.value.fontFamily})).node.classList.add("apexcharts-datalabel-value"),s.add(t)),s}},{key:"printInnerLabels",value:function(t,e,i,a){var s,o=this.w;a?s=void 0===t.name.color?o.globals.colors[parseInt(a.parentNode.getAttribute("rel"),10)-1]:t.name.color:1<o.globals.series.length&&t.total.show&&(s=t.total.color);var r=o.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),n=o.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");i=(0,t.value.formatter)(i,o),a||"function"!=typeof t.total.formatter||(i=t.total.formatter(o));a=e===t.total.label;e=t.name.formatter(e,a,o),null!==r&&(r.textContent=e),null!==n&&(n.textContent=i),null!==r&&(r.style.fill=s)}},{key:"printDataLabelsInner",value:function(t,e){var i=this.w,a=t.getAttribute("data:value"),s=i.globals.seriesNames[parseInt(t.parentNode.getAttribute("rel"),10)-1];1<i.globals.series.length&&this.printInnerLabels(e,s,a,t);i=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==i&&(i.style.opacity=1)}},{key:"drawSpokes",value:function(i){var a=this,t=this.w,s=new z(this.ctx),o=t.config.plotOptions.polarArea.spokes;if(0!==o.strokeWidth){for(var e=[],r=360/t.globals.series.length,n=0;n<t.globals.series.length;n++)e.push(M.polarToCartesian(this.centerX,this.centerY,t.globals.radialSize,t.config.plotOptions.pie.startAngle+r*n));e.forEach(function(t,e){e=s.drawLine(t.x,t.y,a.centerX,a.centerY,Array.isArray(o.connectorColors)?o.connectorColors[e]:o.connectorColors);i.add(e)})}}},{key:"revertDataLabelsInner",value:function(t,a,e){var s=this,i=this.w,o=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),r=!1,n=i.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),l=function(t){var e=t.makeSliceOut,i=t.printLabel;Array.prototype.forEach.call(n,function(t){"true"===t.getAttribute("data:pieClicked")&&(e&&(r=!0),i&&s.printDataLabelsInner(t,a))})};l({makeSliceOut:!0,printLabel:!1}),a.total.show&&1<i.globals.series.length?r&&!a.total.showAlways?l({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(a,a.total.label,a.total.formatter(i)):(l({makeSliceOut:!1,printLabel:!0}),r||(i.globals.selectedDataPoints.length&&1<i.globals.series.length?0<i.globals.selectedDataPoints[0].length?(l=i.globals.selectedDataPoints[0],l=i.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(l)),this.printDataLabelsInner(l,a)):o&&i.globals.selectedDataPoints.length&&0===i.globals.selectedDataPoints[0].length&&(o.style.opacity=0):o&&1<i.globals.series.length&&(o.style.opacity=0)))}}]),Nt),Et=(o(Dt,[{key:"draw",value:function(t){var d=this,g=this.w,u=new F(this.ctx),p=[],f=new D(this.ctx);t.length&&(this.dataPointsLen=t[g.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var x,b,e=g.globals.gridWidth/2,i=g.globals.gridHeight/2,e=e+g.config.plotOptions.radar.offsetX,i=i+g.config.plotOptions.radar.offsetY,a=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(e||0,", ").concat(i||0,")")}),m=null;return this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),t.forEach(function(t,s){var e=t.length===g.globals.dataPoints,o=d.graphics.group().attr({class:"apexcharts-series","data:longestSeries":e,seriesName:M.escapeString(g.globals.seriesNames[s]),rel:s+1,"data:realIndex":s});d.dataRadiusOfPercent[s]=[],d.dataRadius[s]=[],d.angleArr[s]=[],t.forEach(function(t,e){var i=Math.abs(d.maxValue-d.minValue);t+=Math.abs(d.minValue),d.isLog&&(t=d.coreUtils.getLogVal(t,0)),d.dataRadiusOfPercent[s][e]=t/i,d.dataRadius[s][e]=d.dataRadiusOfPercent[s][e]*d.size,d.angleArr[s][e]=e*d.disAngle}),x=d.getDataPointsPos(d.dataRadius[s],d.angleArr[s]);var i=d.createPaths(x,{x:0,y:0});m=d.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),b=d.graphics.group({class:"apexcharts-datalabels","data:realIndex":s}),g.globals.delayedElements.push({el:m.node,index:s});var a={i:s,realIndex:s,animationDelay:s,initialSpeed:g.config.chart.animations.speed,dataChangeSpeed:g.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:g.globals.stroke.colors[s],strokeLineCap:g.config.stroke.lineCap},r=null;0<g.globals.previousPaths.length&&(r=d.getPreviousPath(s));for(var n=0;n<i.linePathsTo.length;n++){var l=d.graphics.renderPaths(T(T({},a),{},{pathFrom:null===r?i.linePathsFrom[n]:r,pathTo:i.linePathsTo[n],strokeWidth:Array.isArray(d.strokeWidth)?d.strokeWidth[s]:d.strokeWidth,fill:"none",drawShadow:!1}));o.add(l);var h=u.fillPath({seriesNumber:s}),c=d.graphics.renderPaths(T(T({},a),{},{pathFrom:null===r?i.areaPathsFrom[n]:r,pathTo:i.areaPathsTo[n],strokeWidth:0,fill:h,drawShadow:!1}));g.config.chart.dropShadow.enabled&&(l=new C(d.ctx),h=g.config.chart.dropShadow,l.dropShadow(c,Object.assign({},h,{noUserSpaceOnUse:!0}),s)),o.add(c)}t.forEach(function(t,e){var i=new R(d.ctx).getMarkerConfig("apexcharts-marker",s,e),a=d.graphics.drawMarker(x[e].x,x[e].y,i);a.attr("rel",e),a.attr("j",e),a.attr("index",s),a.node.setAttribute("default-marker-size",i.pSize);i=d.graphics.group({class:"apexcharts-series-markers"});i&&i.add(a),m.add(i),o.add(m);a=g.config.dataLabels;a.enabled&&(i=a.formatter(g.globals.series[s][e],{seriesIndex:s,dataPointIndex:e,w:g}),f.plotDataLabelsText({x:x[e].x,y:x[e].y,text:i,textAnchor:"middle",i:s,j:s,parent:b,offsetCorrection:!1,dataLabelsConfig:T({},a)})),o.add(b)}),p.push(o)}),this.drawPolygons({parent:a}),g.config.xaxis.labels.show&&(t=this.drawXAxisTexts(),a.add(t)),p.forEach(function(t){a.add(t)}),a.add(this.yaxisLabels),a}},{key:"drawPolygons",value:function(t){for(var o=this,s=this.w,r=t.parent,i=new zt(this.ctx),a=s.globals.yAxisScale[0].result.reverse(),e=a.length,n=[],l=this.size/(e-1),h=0;h<e;h++)n[h]=l*h;n.reverse();var c=[],d=[];n.forEach(function(t,a){var t=M.getPolygonPos(t,o.dataPointsLen),s="";t.forEach(function(t,e){var i;0===a&&(i=o.graphics.drawLine(t.x,t.y,0,0,Array.isArray(o.polygons.connectorColors)?o.polygons.connectorColors[e]:o.polygons.connectorColors),d.push(i)),0===e&&o.yaxisLabelsTextsPos.push({x:t.x,y:t.y}),s+=t.x+","+t.y+" "}),c.push(s)}),c.forEach(function(t,e){var i=o.polygons.strokeColors,a=o.polygons.strokeWidth,e=o.graphics.drawPolygon(t,Array.isArray(i)?i[e]:i,Array.isArray(a)?a[e]:a,s.globals.radarPolygons.fill.colors[e]);r.add(e)}),d.forEach(function(t){r.add(t)}),s.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(t,e){e=i.drawYAxisTexts(t.x,t.y,e,a[e]);o.yaxisLabels.add(e)})}},{key:"drawXAxisTexts",value:function(){var o=this,r=this.w,n=r.config.xaxis.labels,l=this.graphics.group({class:"apexcharts-xaxis"}),h=M.getPolygonPos(this.size,this.dataPointsLen);return r.globals.labels.forEach(function(t,e){var i,a=r.config.xaxis.labels.formatter,s=new D(o.ctx);h[e]&&(i=o.getTextPos(h[e],o.size),t=a(t,{seriesIndex:-1,dataPointIndex:e,w:r}),s.plotDataLabelsText({x:i.newX,y:i.newY,text:t,textAnchor:i.textAnchor,i:e,j:e,parent:l,color:Array.isArray(n.style.colors)&&n.style.colors[e]?n.style.colors[e]:"#a8a8a8",dataLabelsConfig:T({textAnchor:i.textAnchor,dropShadow:{enabled:!1}},n),offsetCorrection:!1}))}),l}},{key:"createPaths",value:function(i,t){var a,s,o=this,e=[],r=[],n=[],l=[];return i.length&&(r=[this.graphics.move(t.x,t.y)],l=[this.graphics.move(t.x,t.y)],a=this.graphics.move(i[0].x,i[0].y),s=this.graphics.move(i[0].x,i[0].y),i.forEach(function(t,e){a+=o.graphics.line(t.x,t.y),s+=o.graphics.line(t.x,t.y),e===i.length-1&&(a+="Z",s+="Z")}),e.push(a),n.push(s)),{linePathsFrom:r,linePathsTo:e,areaPathsFrom:l,areaPathsTo:n}}},{key:"getTextPos",value:function(t,e){var i="middle",a=t.x,s=t.y;return 10<=Math.abs(t.x)?0<t.x?(i="start",a+=10):t.x<0&&(i="end",a-=10):i="middle",Math.abs(t.y)>=e-10&&(t.y<0?s-=10:0<t.y&&(s+=10)),{textAnchor:i,newX:a,newY:s}}},{key:"getPreviousPath",value:function(t){for(var e=this.w,i=null,a=0;a<e.globals.previousPaths.length;a++){var s=e.globals.previousPaths[a];0<s.paths.length&&parseInt(s.realIndex,10)===parseInt(t,10)&&void 0!==e.globals.previousPaths[a].paths[0]&&(i=e.globals.previousPaths[a].paths[0].d)}return i}},{key:"getDataPointsPos",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;t=t||[],e=e||[];for(var a=[],s=0;s<i;s++){var o={};o.x=t[s]*Math.sin(e[s]),o.y=-t[s]*Math.cos(e[s]),a.push(o)}return a}}]),Dt),Xt=function(){n(a,It);var i=c(a);function a(t){var e;s(this,a),(e=i.call(this,t)).ctx=t,e.w=t.w,e.animBeginArr=[0],e.animDur=0;t=e.w;return e.startAngle=t.config.plotOptions.radialBar.startAngle,e.endAngle=t.config.plotOptions.radialBar.endAngle,e.totalAngle=Math.abs(t.config.plotOptions.radialBar.endAngle-t.config.plotOptions.radialBar.startAngle),e.trackStartAngle=t.config.plotOptions.radialBar.track.startAngle,e.trackEndAngle=t.config.plotOptions.radialBar.track.endAngle,e.radialDataLabels=t.config.plotOptions.radialBar.dataLabels,e.trackStartAngle||(e.trackStartAngle=e.startAngle),e.trackEndAngle||(e.trackEndAngle=e.endAngle),360===e.endAngle&&(e.endAngle=359.99),e.margin=parseInt(t.config.plotOptions.radialBar.track.margin,10),e}return o(a,[{key:"draw",value:function(t){var e=this.w,i=new z(this.ctx),a=i.group({class:"apexcharts-radialbar"});if(e.globals.noData)return a;var s=i.group(),o=this.defaultSize/2,r=e.globals.gridWidth/2,n=this.defaultSize/2.05;e.config.chart.sparkline.enabled||(n=n-e.config.stroke.width-e.config.chart.dropShadow.blur);var l=e.globals.fill.colors;e.config.plotOptions.radialBar.track.show&&(i=this.drawTracks({size:n,centerX:r,centerY:o,colorArr:l,series:t}),s.add(i));l=this.drawArcs({size:n,centerX:r,centerY:o,colorArr:l,series:t}),t=360,t=(360-(t=e.config.plotOptions.radialBar.startAngle<0?this.totalAngle:t))/360;return e.globals.radialSize=n-n*t,this.radialDataLabels.value.show&&(n=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY),e.globals.radialSize+=n*t),s.add(l.g),"front"===e.config.plotOptions.radialBar.hollow.position&&(l.g.add(l.elHollow),l.dataLabels&&l.g.add(l.dataLabels)),a.add(s),a}},{key:"drawTracks",value:function(t){var e=this.w,i=new z(this.ctx),a=i.group({class:"apexcharts-tracks"}),s=new C(this.ctx),o=new F(this.ctx),r=this.getStrokeWidth(t);t.size=t.size-r/2;for(var n=0;n<t.series.length;n++){var l=i.group({class:"apexcharts-radialbar-track apexcharts-track"});a.add(l),l.attr({rel:n+1}),t.size=t.size-r-this.margin;var h=e.config.plotOptions.radialBar.track,c=o.fillPath({seriesNumber:0,size:t.size,fillColors:Array.isArray(h.background)?h.background[n]:h.background,solid:!0}),d=this.trackStartAngle,g=this.trackEndAngle;360<=Math.abs(g)+Math.abs(d)&&(g=360-Math.abs(this.startAngle)-.1);c=i.drawPath({d:"",stroke:c,strokeWidth:r*parseInt(h.strokeWidth,10)/100,fill:"none",strokeOpacity:h.opacity,classes:"apexcharts-radialbar-area"});h.dropShadow.enabled&&(h=h.dropShadow,s.dropShadow(c,h)),l.add(c),c.attr("id","apexcharts-radialbarTrack-"+n),this.animatePaths(c,{centerX:t.centerX,centerY:t.centerY,endAngle:g,startAngle:d,size:t.size,i:n,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:e.globals.easing})}return a}},{key:"drawArcs",value:function(t){var e=this.w,i=new z(this.ctx),a=new F(this.ctx),s=new C(this.ctx),o=i.group(),r=this.getStrokeWidth(t);t.size=t.size-r/2;var n=e.config.plotOptions.radialBar.hollow.background,l=t.size-r*t.series.length-this.margin*t.series.length-r*parseInt(e.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,h=l-e.config.plotOptions.radialBar.hollow.margin;void 0!==e.config.plotOptions.radialBar.hollow.image&&(n=this.drawHollowImage(t,o,l,n));h=this.drawHollow({size:h,centerX:t.centerX,centerY:t.centerY,fill:n||"transparent"});e.config.plotOptions.radialBar.hollow.dropShadow.enabled&&(c=e.config.plotOptions.radialBar.hollow.dropShadow,s.dropShadow(h,c));n=1;!this.radialDataLabels.total.show&&1<e.globals.series.length&&(n=0);var c=null;this.radialDataLabels.show&&(c=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:l,centerX:t.centerX,centerY:t.centerY,opacity:n})),"back"===e.config.plotOptions.radialBar.hollow.position&&(o.add(h),c&&o.add(c));for(var d=!1,g=(d=e.config.plotOptions.radialBar.inverseOrder?!0:d)?t.series.length-1:0;d?0<=g:g<t.series.length;d?g--:g++){var u=i.group({class:"apexcharts-series apexcharts-radial-series",seriesName:M.escapeString(e.globals.seriesNames[g])});o.add(u),u.attr({rel:g+1,"data:realIndex":g}),this.ctx.series.addCollapsedClassToSeries(u,g),t.size=t.size-r-this.margin;var p=a.fillPath({seriesNumber:g,size:t.size,value:t.series[g]}),f=this.startAngle,x=void 0,b=M.negToZero(100<t.series[g]?100:t.series[g])/100,m=Math.round(this.totalAngle*b)+this.startAngle,v=void 0;e.globals.dataChanged&&(x=this.startAngle,v=Math.round(this.totalAngle*M.negToZero(e.globals.previousPaths[g])/100)+x),360<=Math.abs(m)+Math.abs(f)&&(m-=.01),360<=Math.abs(v)+Math.abs(x)&&(v-=.01);var y=m-f,b=Array.isArray(e.config.stroke.dashArray)?e.config.stroke.dashArray[g]:e.config.stroke.dashArray,b=i.drawPath({d:"",stroke:p,strokeWidth:r,fill:"none",fillOpacity:e.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+g,strokeDashArray:b});z.setAttrs(b.node,{"data:angle":y,"data:value":t.series[g]}),e.config.chart.dropShadow.enabled&&(y=e.config.chart.dropShadow,s.dropShadow(b,y,g)),s.setSelectionFilter(b,0,g),this.addListeners(b,this.radialDataLabels),u.add(b),b.attr({index:0,j:g});u=0;!this.initialAnim||e.globals.resized||e.globals.dataChanged||(u=(m-f)/360*e.config.chart.animations.speed,this.animDur=u/(1.2*t.series.length)+this.animDur,this.animBeginArr.push(this.animDur)),e.globals.dataChanged&&(u=(m-f)/360*e.config.chart.animations.dynamicAnimation.speed,this.animDur=u/(1.2*t.series.length)+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(b,{centerX:t.centerX,centerY:t.centerY,endAngle:m,startAngle:f,prevEndAngle:v,prevStartAngle:x,size:t.size,i:g,totalItems:2,animBeginArr:this.animBeginArr,dur:u,shouldSetPrevPaths:!0,easing:e.globals.easing})}return{g:o,elHollow:h,dataLabels:c}}},{key:"drawHollow",value:function(t){var e=new z(this.ctx).drawCircle(2*t.size);return e.attr({class:"apexcharts-radialbar-hollow",cx:t.centerX,cy:t.centerY,r:t.size,fill:t.fill}),e}},{key:"drawHollowImage",value:function(e,t,i,a){var s,o,r=this.w,n=new F(this.ctx),l=M.randomId(),h=r.config.plotOptions.radialBar.hollow.image;return r.config.plotOptions.radialBar.hollow.imageClipped?(n.clippedImgArea({width:i,height:i,image:h,patternID:"pattern".concat(r.globals.cuid).concat(l)}),a="url(#pattern".concat(r.globals.cuid).concat(l,")")):(s=r.config.plotOptions.radialBar.hollow.imageWidth,o=r.config.plotOptions.radialBar.hollow.imageHeight,void 0===s&&void 0===o?(l=r.globals.dom.Paper.image(h).loaded(function(t){this.move(e.centerX-t.width/2+r.config.plotOptions.radialBar.hollow.imageOffsetX,e.centerY-t.height/2+r.config.plotOptions.radialBar.hollow.imageOffsetY)}),t.add(l)):(h=r.globals.dom.Paper.image(h).loaded(function(t){this.move(e.centerX-s/2+r.config.plotOptions.radialBar.hollow.imageOffsetX,e.centerY-o/2+r.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(s,o)}),t.add(h))),a}},{key:"getStrokeWidth",value:function(t){var e=this.w;return t.size*(100-parseInt(e.config.plotOptions.radialBar.hollow.size,10))/100/(t.series.length+1)-this.margin}}]),a}(),Yt=(o(Ht,[{key:"sameValueSeriesFix",value:function(t,e){var i=this.w;return"line"!==i.config.chart.type||"gradient"!==i.config.fill.type&&"gradient"!==i.config.fill.type[t]||!new P(this.lineCtx.ctx,i).seriesHaveSameValues(t)||((i=e[t].slice())[i.length-1]=i[i.length-1]+1e-6,e[t]=i),e}},{key:"calculatePoints",value:function(t){var e=t.series,i=t.realIndex,a=t.x,s=t.y,o=t.i,r=t.j,n=t.prevY,l=this.w,h=[],c=[];return 0===r&&(t=this.lineCtx.categoryAxisCorrection+l.config.markers.offsetX,l.globals.isXNumeric&&(t=(l.globals.seriesX[i][0]-l.globals.minX)/this.lineCtx.xRatio+l.config.markers.offsetX),h.push(t),c.push(M.isNumber(e[o][0])?n+l.config.markers.offsetY:null)),h.push(a+l.config.markers.offsetX),c.push(M.isNumber(e[o][r+1])?s+l.config.markers.offsetY:null),{x:h,y:c}}},{key:"checkPreviousPaths",value:function(t){for(var e=t.pathFromLine,i=t.pathFromArea,a=t.realIndex,s=this.w,o=0;o<s.globals.previousPaths.length;o++){var r=s.globals.previousPaths[o];("line"===r.type||"area"===r.type)&&0<r.paths.length&&parseInt(r.realIndex,10)===parseInt(a,10)&&("line"===r.type?(this.lineCtx.appendPathFrom=!1,e=s.globals.previousPaths[o].paths[0].d):"area"===r.type&&(this.lineCtx.appendPathFrom=!1,i=s.globals.previousPaths[o].paths[0].d,s.config.stroke.show&&s.globals.previousPaths[o].paths[1]&&(e=s.globals.previousPaths[o].paths[1].d)))}return{pathFromLine:e,pathFromArea:i}}},{key:"determineFirstPrevY",value:function(t){var e=t.i,i=t.series,a=t.prevY,s=t.lineYPosition,t=this.w;if(void 0!==i[e][0])a=(s=t.config.chart.stacked&&0<e?this.lineCtx.prevSeriesY[e-1][0]:this.lineCtx.zeroY)-i[e][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?i[e][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(t.config.chart.stacked&&0<e&&void 0===i[e][0])for(var o=e-1;0<=o;o--)if(null!==i[o][0]&&void 0!==i[o][0]){a=s=this.lineCtx.prevSeriesY[o][0];break}return{prevY:a,lineYPosition:s}}}]),Ht),Ft=(o(Rt,[{key:"draw",value:function(t,e,i){var a=this.w,s=new z(this.ctx),o=a.globals.comboCharts?e:a.config.chart.type,r=s.group({class:"apexcharts-".concat(o,"-series apexcharts-plot-series")}),s=new P(this.ctx,a);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,t=s.getLogSeries(t),this.yRatio=s.getLogYRatios(this.yRatio);for(var n=[],l=0;l<t.length;l++){t=this.lineHelpers.sameValueSeriesFix(l,t);var h=a.globals.comboCharts?i[l]:l;this._initSerieVariables(t,l,h);var c=[],d=[],g=a.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,h),a.globals.isXNumeric&&0<a.globals.seriesX.length&&(g=(a.globals.seriesX[h][0]-a.globals.minX)/this.xRatio),d.push(g);var u=g,p=u,f=this.zeroY,f=this.lineHelpers.determineFirstPrevY({i:l,series:t,prevY:f,lineYPosition:0}).prevY;c.push(f);var x=f,f=this._calculatePathsFrom({series:t,i:l,realIndex:h,prevX:p,prevY:f}),c=this._iterateOverDataPoints({series:t,realIndex:h,i:l,x:g,y:1,pX:u,pY:x,pathsFrom:f,linePaths:[],areaPaths:[],seriesIndex:i,lineYPosition:0,xArrj:d,yArrj:c});this._handlePaths({type:o,realIndex:h,i:l,paths:c}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),n.push(this.elSeries)}if(a.config.chart.stacked)for(var b=n.length;0<b;b--)r.add(n[b-1]);else for(var m=0;m<n.length;m++)r.add(n[m]);return r}},{key:"_initSerieVariables",value:function(t,e,i){var a=this.w,s=new z(this.ctx);this.xDivision=a.globals.gridWidth/(a.globals.dataPoints-("on"===a.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(a.config.stroke.width)?a.config.stroke.width[i]:a.config.stroke.width,1<this.yRatio.length&&(this.yaxisIndex=i),this.isReversed=a.config.yaxis[this.yaxisIndex]&&a.config.yaxis[this.yaxisIndex].reversed,this.zeroY=a.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?a.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>a.globals.gridHeight||"end"===a.config.plotOptions.area.fillTo)&&(this.areaBottomY=a.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=s.group({class:"apexcharts-series",seriesName:M.escapeString(a.globals.seriesNames[i])}),this.elPointsMain=s.group({class:"apexcharts-series-markers-wrap","data:realIndex":i}),this.elDataLabelsWrap=s.group({class:"apexcharts-datalabels","data:realIndex":i});a=t[e].length===a.globals.dataPoints;this.elSeries.attr({"data:longestSeries":a,rel:e+1,"data:realIndex":i}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(t){var e,i,a,s=t.series,o=t.i,r=t.realIndex,n=t.prevX,l=t.prevY,h=this.w,c=new z(this.ctx);if(null===s[o][0]){for(var d=0;d<s[o].length;d++)if(null!==s[o][d]){n=this.xDivision*d,l=this.zeroY-s[o][d]/this.yRatio[this.yaxisIndex],e=c.move(n,l),i=c.move(n,this.areaBottomY);break}}else e=c.move(n,l),i=c.move(n,this.areaBottomY)+c.line(n,l);return a=c.move(-1,this.zeroY)+c.line(-1,this.zeroY),t=c.move(-1,this.zeroY)+c.line(-1,this.zeroY),0<h.globals.previousPaths.length&&(a=(r=this.lineHelpers.checkPreviousPaths({pathFromLine:a,pathFromArea:t,realIndex:r})).pathFromLine,t=r.pathFromArea),{prevX:n,prevY:l,linePath:e,areaPath:i,pathFromLine:a,pathFromArea:t}}},{key:"_handlePaths",value:function(t){var e=t.type,i=t.realIndex,a=t.i,s=t.paths,o=this.w,r=new z(this.ctx),n=new F(this.ctx);this.prevSeriesY.push(s.yArrj),o.globals.seriesXvalues[i]=s.xArrj,o.globals.seriesYvalues[i]=s.yArrj;var l,h=o.config.forecastDataPoints;0<h.count&&(l=o.globals.seriesXvalues[i][o.globals.seriesXvalues[i].length-h.count-1],t=r.drawRect(l,0,o.globals.gridWidth,o.globals.gridHeight,0),o.globals.dom.elForecastMask.appendChild(t.node),l=r.drawRect(0,0,l,o.globals.gridHeight,0),o.globals.dom.elNonForecastMask.appendChild(l.node)),this.pointsChart||o.globals.delayedElements.push({el:this.elPointsMain.node,index:i});var c={i:a,realIndex:i,animationDelay:a,initialSpeed:o.config.chart.animations.speed,dataChangeSpeed:o.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(e)};if("area"===e)for(var d=n.fillPath({seriesNumber:i}),g=0;g<s.areaPaths.length;g++){var u=r.renderPaths(T(T({},c),{},{pathFrom:s.pathFromArea,pathTo:s.areaPaths[g],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:d}));this.elSeries.add(u)}if(o.config.stroke.show&&!this.pointsChart)for(var p="line"===e?n.fillPath({seriesNumber:i,i:a}):o.globals.stroke.colors[i],f=0;f<s.linePaths.length;f++){var x=T(T({},c),{},{pathFrom:s.pathFromLine,pathTo:s.linePaths[f],stroke:p,strokeWidth:this.strokeWidth,strokeLineCap:o.config.stroke.lineCap,fill:"none"}),b=r.renderPaths(x);this.elSeries.add(b),0<h.count&&((x=r.renderPaths(x)).node.setAttribute("stroke-dasharray",h.dashArray),h.strokeWidth&&x.node.setAttribute("stroke-width",h.strokeWidth),this.elSeries.add(x),x.attr("clip-path","url(#forecastMask".concat(o.globals.cuid,")")),b.attr("clip-path","url(#nonForecastMask".concat(o.globals.cuid,")")))}}},{key:"_iterateOverDataPoints",value:function(t){for(var e,i=t.series,a=t.realIndex,s=t.i,o=t.x,r=(t.y,t.pX),n=t.pY,l=t.pathsFrom,h=t.linePaths,c=t.areaPaths,d=t.seriesIndex,g=t.lineYPosition,u=t.xArrj,p=t.yArrj,f=this.w,x=new z(this.ctx),b=this.yRatio,m=l.prevY,v=l.linePath,y=l.areaPath,w=l.pathFromLine,k=l.pathFromArea,A=M.isNumber(f.globals.minYArr[a])?f.globals.minYArr[a]:f.globals.minY,S=1<f.globals.dataPoints?f.globals.dataPoints-1:f.globals.dataPoints,C=0;C<S;C++){var L=void 0===i[s][C+1]||null===i[s][C+1];f.globals.isXNumeric?(P=f.globals.seriesX[a][C+1],o=((P=void 0===f.globals.seriesX[a][C+1]?f.globals.seriesX[a][S-1]:P)-f.globals.minX)/this.xRatio):o+=this.xDivision,g=f.config.chart.stacked&&0<s&&f.globals.collapsedSeries.length<f.config.series.length-1?this.prevSeriesY[function(t){for(var e=t,i=0;i<f.globals.series.length;i++)if(-1<f.globals.collapsedSeriesIndices.indexOf(t)){e--;break}return 0<=e?e:0}(s-1)][C+1]:this.zeroY,e=L?g-A/b[this.yaxisIndex]+2*(this.isReversed?A/b[this.yaxisIndex]:0):g-i[s][C+1]/b[this.yaxisIndex]+2*(this.isReversed?i[s][C+1]/b[this.yaxisIndex]:0),u.push(o),p.push(e);var P=this.lineHelpers.calculatePoints({series:i,x:o,y:e,realIndex:a,i:s,j:C,prevY:m}),L=this._createPaths({series:i,i:s,realIndex:a,j:C,x:o,y:e,pX:r,pY:n,linePath:v,areaPath:y,linePaths:h,areaPaths:c,seriesIndex:d}),c=L.areaPaths,h=L.linePaths,r=L.pX,n=L.pY,y=L.areaPath,v=L.linePath;this.appendPathFrom&&(w+=x.line(o,this.zeroY),k+=x.line(o,this.zeroY)),this.handleNullDataPoints(i,P,s,C,a),this._handleMarkersAndLabels({pointsPos:P,series:i,x:o,y:e,prevY:m,i:s,j:C,realIndex:a})}return{yArrj:p,xArrj:u,pathFromArea:k,areaPaths:c,pathFromLine:w,linePaths:h}}},{key:"_handleMarkersAndLabels",value:function(t){var e=t.pointsPos,i=(t.series,t.x,t.y,t.prevY,t.i),a=t.j,s=t.realIndex,o=this.w,t=new D(this.ctx);this.pointsChart?this.scatter.draw(this.elSeries,a,{realIndex:s,pointsPos:e,zRatio:this.zRatio,elParent:this.elPointsMain}):(1<o.globals.series[i].length&&this.elPointsMain.node.classList.add("apexcharts-element-hidden"),null!==(i=this.markers.plotChartMarkers(e,s,a+1))&&this.elPointsMain.add(i));a=t.drawDataLabel(e,s,a+1,null);null!==a&&this.elDataLabelsWrap.add(a)}},{key:"_createPaths",value:function(t){var e=t.series,i=t.i,a=t.realIndex,s=t.j,o=t.x,r=t.y,n=t.pX,l=t.pY,h=t.linePath,c=t.areaPath,d=t.linePaths,g=t.areaPaths,u=t.seriesIndex,p=this.w,f=new z(this.ctx),x=p.config.stroke.curve,t=this.areaBottomY;return"smooth"===(x=Array.isArray(p.config.stroke.curve)?Array.isArray(u)?p.config.stroke.curve[u[i]]:p.config.stroke.curve[i]:x)?(u=.35*(o-n),p.globals.hasNullValues?(null!==e[i][s]&&(c=null!==e[i][s+1]?(h=f.move(n,l)+f.curve(n+u,l,o-u,r,o+1,r),f.move(n+1,l)+f.curve(n+u,l,o-u,r,o+1,r)+f.line(o,t)+f.line(n,t)+"z"):(h=f.move(n,l),f.move(n,l)+"z")),d.push(h),g.push(c)):(h+=f.curve(n+u,l,o-u,r,o,r),c+=f.curve(n+u,l,o-u,r,o,r)),n=o,l=r,s===e[i].length-2&&(c=c+f.curve(n,l,o,r,o,t)+f.move(o,r)+"z",p.globals.hasNullValues||(d.push(h),g.push(c)))):(null===e[i][s+1]&&(h+=f.move(o,r),p=p.globals.isXNumeric?(p.globals.seriesX[a][s]-p.globals.minX)/this.xRatio:o-this.xDivision,c=c+f.line(p,t)+f.move(o,r)+"z"),null===e[i][s]&&(h+=f.move(o,r),c+=f.move(o,t)),"stepline"===x?(h=h+f.line(o,null,"H")+f.line(null,r,"V"),c=c+f.line(o,null,"H")+f.line(null,r,"V")):"straight"===x&&(h+=f.line(o,r),c+=f.line(o,r)),s===e[i].length-2&&(c=c+f.line(o,t)+f.move(o,r)+"z",d.push(h),g.push(c))),{linePaths:d,areaPaths:g,pX:n,pY:l,linePath:h,areaPath:c}}},{key:"handleNullDataPoints",value:function(t,e,i,a,s){var o=this.w;!(null===t[i][a]&&o.config.markers.showNullDataPoints||1===t[i].length)||null!==(o=this.markers.plotChartMarkers(e,s,a+1,this.strokeWidth-o.config.markers.strokeWidth/2,!0))&&this.elPointsMain.add(o)}}]),Rt);function Rt(t,e,i){s(this,Rt),this.ctx=t,this.w=t.w,this.xyRatios=e,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||i,this.scatter=new H(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Yt(this),this.markers=new R(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}function Ht(t){s(this,Ht),this.w=t.w,this.lineCtx=t}function Dt(t){s(this,Dt),this.ctx=t,this.w=t.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;t=this.w;this.graphics=new z(this.ctx),this.lineColorArr=(void 0!==t.globals.stroke.colors?t.globals.stroke:t.globals).colors,this.defaultSize=t.globals.svgHeight<t.globals.svgWidth?t.globals.gridHeight+1.5*t.globals.goldenPadding:t.globals.gridWidth,this.isLog=t.config.yaxis[0].logarithmic,this.coreUtils=new P(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(t.globals.maxY,0):t.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):t.globals.minY,this.polygons=t.config.plotOptions.radar.polygons,this.strokeWidth=t.config.stroke.show?t.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-t.config.chart.dropShadow.blur,t.config.xaxis.labels.show&&(this.size=this.size-t.globals.xAxisLabelsWidth/1.75),void 0!==t.config.plotOptions.radar.size&&(this.size=t.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}function Nt(t){s(this,Nt),this.ctx=t,this.w=t.w;t=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=(void 0!==t.globals.stroke.colors?t.globals.stroke:t.globals).colors,this.defaultSize=Math.min(t.globals.gridWidth,t.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=t.globals.gridWidth/2,"radialBar"===t.config.chart.type?this.fullAngle=360:this.fullAngle=Math.abs(t.config.plotOptions.pie.endAngle-t.config.plotOptions.pie.startAngle),this.initialAngle=t.config.plotOptions.pie.startAngle%this.fullAngle,t.globals.radialSize=this.defaultSize/2.05-t.config.stroke.width-(t.config.chart.sparkline.enabled?0:t.config.chart.dropShadow.blur),this.donutSize=t.globals.radialSize*parseInt(t.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}function Ot(t){s(this,Ot),this.ctx=t,this.w=t.w}function Wt(t,e){s(this,Wt),this.ctx=t,this.w=t.w,this.xRatio=e.xRatio,this.yRatio=e.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new Tt(t),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}function Bt(t){s(this,Bt),this.ctx=t,this.w=t.w}function Vt(t){s(this,Vt),this.ctx=t,this.w=t.w;t=this.w;this.tConfig=t.config.tooltip,this.tooltipUtil=new vt(this),this.tooltipLabels=new yt(this),this.tooltipPosition=new wt(this),this.marker=new kt(this),this.intersect=new At(this),this.axesTooltip=new St(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!t.globals.isBarHorizontal&&this.tConfig.shared}function Gt(t){s(this,Gt),this.w=t.w,this.ttCtx=t}function _t(t){s(this,_t),this.w=t.w,this.ttCtx=t}function jt(t){s(this,jt),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx,this.tooltipPosition=new wt(t)}function Ut(t){s(this,Ut),this.ttCtx=t,this.ctx=t.ctx,this.w=t.w}function qt(t){s(this,qt),this.w=t.w,this.ctx=t.ctx,this.ttCtx=t,this.tooltipUtil=new vt(t)}function Zt(t){s(this,Zt),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx}function $t(t){s(this,$t),this.ctx=t,this.w=t.w;t=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=t.globals.minX,this.maxX=t.globals.maxX}function Jt(t,e){s(this,Jt),this.ctx=t,this.w=t.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new ft(this)}function Qt(t){s(this,Qt),this.w=t.w,this.lgCtx=t}function Kt(t){s(this,Kt),this.ctx=t,this.w=t.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new ct(this),this.dimYAxis=new gt(this),this.dimXAxis=new dt(this),this.dimGrid=new ut(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}function te(t){s(this,te),this.w=t.w,this.dCtx=t}function ee(t){s(this,ee),this.w=t.w,this.dCtx=t}function ie(t){s(this,ie),this.w=t.w,this.dCtx=t}function ae(t){s(this,ae),this.w=t.w,this.dCtx=t}function se(t){s(this,se),this.ctx=t,this.w=t.w}function oe(t){s(this,oe),this.ctx=t,this.colors=[],this.w=t.w;t=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===t.config.chart.type&&t.config.plotOptions.treemap.distributed||"heatmap"===t.config.chart.type&&t.config.plotOptions.heatmap.distributed,this.isBarDistributed=t.config.plotOptions.bar.distributed&&("bar"===t.config.chart.type||"rangeBar"===t.config.chart.type)}function re(t){s(this,re),this.ctx=t,this.w=t.w}function ne(t){s(this,ne),this.ctx=t,this.w=t.w}function le(t){s(this,le),this.ctx=t,this.w=t.w}function he(t){s(this,he),this.ctx=t,this.w=t.w}function ce(t){s(this,ce),this.ctx=t,this.w=t.w,this.documentEvent=M.bind(this.documentEvent,this)}function de(t){s(this,de),this.ctx=t,this.w=t.w;var e=this.w;this.xaxisFontSize=e.config.xaxis.labels.style.fontSize,this.axisFontFamily=e.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=e.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===e.config.chart.type&&e.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===e.config.xaxis.position&&(this.xAxisoffX=e.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new J(t)}function ge(t){s(this,ge),this.ctx=t,this.w=t.w,this.scales=new et(t)}function ue(t){s(this,ue),this.ctx=t,this.w=t.w}function pe(t){s(this,pe),this.ctx=t,this.w=t.w;var e=this.w;this.xaxisLabels=e.globals.labels.slice(),this.axesUtils=new J(t),this.isTimelineBar="datetime"===e.config.xaxis.type&&e.globals.seriesRangeBarTimeline.length,0<e.globals.timescaleLabels.length&&(this.xaxisLabels=e.globals.timescaleLabels.slice())}function fe(t){s(this,fe),this.ctx=t,this.w=t.w;var e=this.w;this.axesUtils=new J(t),this.xaxisLabels=e.globals.labels.slice(),0<e.globals.timescaleLabels.length&&!e.globals.isBarHorizontal&&(this.xaxisLabels=e.globals.timescaleLabels.slice()),e.config.xaxis.overwriteCategories&&(this.xaxisLabels=e.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],"top"===e.config.xaxis.position?this.offY=0:this.offY=e.globals.gridHeight+1,this.offY=this.offY+e.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===e.config.chart.type&&e.config.plotOptions.bar.horizontal,this.xaxisFontSize=e.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=e.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=e.config.xaxis.labels.style.colors,this.xaxisBorderWidth=e.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=e.config.yaxis[0].axisBorder.width.toString()),-1<this.xaxisBorderWidth.indexOf("%")?this.xaxisBorderWidth=e.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=e.config.xaxis.axisBorder.height,this.yaxis=e.config.yaxis[0]}function xe(t){s(this,xe),this.ctx=t,this.w=t.w}function be(t){s(this,be),this.ctx=t,this.w=t.w}function me(t){s(this,me),this.ctx=t,this.w=t.w,this.tooltipKeyFormat="dd MMM"}function ve(t){s(this,ve),this.ctx=t,this.w=t.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new P(this.ctx)}function ye(t){s(this,ye),this.opts=t}function we(){s(this,we)}function ke(t){s(this,ke),this.opts=t}function Ae(t){s(this,Ae),this.opts=t}function Se(t){s(this,Se),this.ctx=t,this.w=t.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}function Ce(t,e){s(this,Ce),this.ctx=t,this.w=t.w;t=this.w;this.barOptions=t.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=t.config.stroke.width,this.isNullValue=!1,this.isTimelineBar="datetime"===t.config.xaxis.type&&t.globals.seriesRangeBarTimeline.length,this.xyRatios=e,null!==this.xyRatios&&(this.xRatio=e.xRatio,this.initialXRatio=e.initialXRatio,this.yRatio=e.yRatio,this.invertedXRatio=e.invertedXRatio,this.invertedYRatio=e.invertedYRatio,this.baseLineY=e.baseLineY,this.baseLineInvertedY=e.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.barHelpers=new W(this)}function Le(t){s(this,Le),this.w=t.w,this.barCtx=t}function Pe(t){s(this,Pe),this.ctx=t,this.w=t.w,this.legendInactiveClass="legend-mouseover-inactive"}function Te(t){s(this,Te),this.w=t.w,this.barCtx=t}function Me(t){s(this,Me),this.ctx=t,this.w=t.w}function ze(t){s(this,ze),this.ctx=t,this.w=t.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}function Ie(t,e){s(this,Ie),this.ctx=t,this.w=t.w}function Ee(t){s(this,Ee),this.ctx=t,this.w=t.w,this.opts=null,this.seriesIndex=0}function Xe(t){s(this,Xe),this.ctx=t,this.w=t.w,this.graphics=new z(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new e(this),this.xAxisAnnotations=new u(this),this.yAxisAnnotations=new p(this),this.pointsAnnotations=new f(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}function Ye(){s(this,Ye),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,tickAmount:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={x:0,y:null,yAxisIndex:0,seriesIndex:0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}function Fe(t,e,i,a){this.xoffset=t,this.yoffset=e,this.height=a,this.width=i,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(t){var e,i=[],a=this.xoffset,s=this.yoffset,o=Ne(t)/this.height,r=Ne(t)/this.width;if(this.width>=this.height)for(e=0;e<t.length;e++)i.push([a,s,a+o,s+t[e]/o]),s+=t[e]/o;else for(e=0;e<t.length;e++)i.push([a,s,a+t[e]/r,s+r]),a+=t[e]/r;return i},this.cutArea=function(t){var e,i;return this.width>=this.height?(e=t/this.height,i=this.width-e,new Fe(this.xoffset+e,this.yoffset,i,this.height)):(i=t/this.width,t=this.height-i,new Fe(this.xoffset,this.yoffset+i,this.width,t))}}function Re(t,s,o,e,i){return e=void 0===e?0:e,i=void 0===i?0:i,function(t){for(var e,i=[],a=0;a<t.length;a++)for(e=0;e<t[a].length;e++)i.push(t[a][e]);return i}(function t(e,i,a,s){var o,r;if(0!==e.length)return o=a.shortestEdge(),function(t,e,i){var a;if(0===t.length)return 1;(a=t.slice()).push(e);t=He(t,i),i=He(a,i);return i<=t}(i,r=e[0],o)?(i.push(r),t(e.slice(1),i,a,s)):(r=a.cutArea(Ne(i),s),s.push(a.getCoordinates(i)),t(e,[],r,s)),s;s.push(a.getCoordinates(i))}(function(t){for(var e=[],i=s*o/Ne(t),a=0;a<t.length;a++)e[a]=t[a]*i;return e}(t),[],new Fe(e,i,s,o),[]))}function He(t,e){var i=Math.min.apply(Math,t),a=Math.max.apply(Math,t),t=Ne(t);return Math.max(Math.pow(e,2)*a/Math.pow(t,2),Math.pow(t,2)/(Math.pow(e,2)*i))}function De(t){return t&&t.constructor===Array}function Ne(t){for(var e=0,i=0;i<t.length;i++)e+=t[i];return e}window.TreemapSquared={},window.TreemapSquared.generate=function t(e,i,a,s,o){s=void 0===s?0:s,o=void 0===o?0:o;var r,n,l=[],h=[];if(De(e[0])){for(n=0;n<e.length;n++)l[n]=function t(e){var i,a=0;if(De(e[0]))for(i=0;i<e.length;i++)a+=t(e[i]);else a=Ne(e);return a}(e[n]);for(r=Re(l,i,a,s,o),n=0;n<e.length;n++)h.push(t(e[n],r[n][2]-r[n][0],r[n][3]-r[n][1],r[n][0],r[n][1]))}else h=Re(e,i,a,s,o);return h};var Oe,We,Be,Ve,Ge,_e,je=(o(Ke,[{key:"draw",value:function(p){var f=this,x=this.w,b=new z(this.ctx),m=new F(this.ctx),i=b.group({class:"apexcharts-treemap"});if(x.globals.noData)return i;var e=[];return p.forEach(function(t){t=t.map(function(t){return Math.abs(t)});e.push(t)}),this.negRange=this.helpers.checkColorRange(),x.config.series.forEach(function(t,e){t.data.forEach(function(t){Array.isArray(f.labels[e])||(f.labels[e]=[]),f.labels[e].push(t.x)})}),window.TreemapSquared.generate(e,x.globals.gridWidth,x.globals.gridHeight).forEach(function(t,g){var u=b.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:M.escapeString(x.globals.seriesNames[g]),rel:g+1,"data:realIndex":g});x.config.chart.dropShadow.enabled&&(e=x.config.chart.dropShadow,new C(f.ctx).dropShadow(i,e,g));var e=b.group({class:"apexcharts-data-labels"});t.forEach(function(t,e){var i=t[0],a=t[1],s=t[2],o=t[3],r=b.drawRect(i,a,s-i,o-a,0,"#fff",1,f.strokeWidth,x.config.plotOptions.treemap.useFillColorAsStroke?l:x.globals.stroke.colors[g]);r.attr({cx:i,cy:a,index:g,i:g,j:e,width:s-i,height:o-a});var n=f.helpers.getShadeColor(x.config.chart.type,g,e,f.negRange),l=n.color;void 0!==x.config.series[g].data[e]&&x.config.series[g].data[e].fillColor&&(l=x.config.series[g].data[e].fillColor);var h=m.fillPath({color:l,seriesNumber:g,dataPointIndex:e});r.node.classList.add("apexcharts-treemap-rect"),r.attr({fill:h}),f.helpers.addListeners(r);var c={x:i+(s-i)/2,y:a+(o-a)/2,width:0,height:0},l={x:i,y:a,width:s-i,height:o-a};x.config.chart.animations.enabled&&!x.globals.dataChanged&&(h=1,x.globals.resized||(h=x.config.chart.animations.speed),f.animateTreemap(r,c,l,h)),x.globals.dataChanged&&(d=1,f.dynamicAnim.enabled&&x.globals.shouldAnimate&&(d=f.dynamicAnim.speed,x.globals.previousPaths[g]&&x.globals.previousPaths[g][e]&&x.globals.previousPaths[g][e].rect&&(c=x.globals.previousPaths[g][e].rect),f.animateTreemap(r,c,l,d)));var d=f.getFontSize(t),t=x.config.dataLabels.formatter(f.labels[g][e],{value:x.globals.series[g][e],seriesIndex:g,dataPointIndex:e,w:x}),d=f.helpers.calculateDataLabels({text:t,x:(i+s)/2,y:(a+o)/2+f.strokeWidth/2+d/3,i:g,j:e,colorProps:n,fontSize:d,series:p});x.config.dataLabels.enabled&&d&&f.rotateToFitLabel(d,t,i,a,s,o),u.add(r),null!==d&&u.add(d)}),u.add(e),i.add(u)}),i}},{key:"getFontSize",value:function(t){var e=this.w,i=function t(e){var i,a=0;if(Array.isArray(e[0]))for(i=0;i<e.length;i++)a+=t(e[i]);else for(i=0;i<e.length;i++)a+=e[i].length;return a}(this.labels)/function t(e){var i,a=0;if(Array.isArray(e[0]))for(i=0;i<e.length;i++)a+=t(e[i]);else for(i=0;i<e.length;i++)a+=1;return a}(this.labels),a=t[2]-t[0],t=t[3]-t[1],t=Math.pow(a*t,.5);return Math.min(t/i,parseInt(e.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(t,e,i,a,s,o){var r=new z(this.ctx),e=r.getTextRects(e);e.width+5>s-i&&e.width<=o-a&&(r=r.rotateAroundCenter(t.node),t.node.setAttribute("transform","rotate(-90 ".concat(r.x," ").concat(r.y,")")))}},{key:"animateTreemap",value:function(t,e,i,a){var s=new S(this.ctx);s.animateRect(t,{x:e.x,y:e.y,width:e.width,height:e.height},{x:i.x,y:i.y,width:i.width,height:i.height},a,function(){s.animationCompleted(t)})}}]),Ke),Ue=(o(Qe,[{key:"calculateTimeScaleTicks",value:function(t,e){var r=this,n=this.w;if(n.globals.allSeriesCollapsed)return n.globals.labels=[],n.globals.timescaleLabels=[],[];var i=new V(this.ctx),a=(e-t)/864e5;this.determineInterval(a),n.globals.disableZoomIn=!1,n.globals.disableZoomOut=!1,a<.00011574074074074075?n.globals.disableZoomIn=!0:5e4<a&&(n.globals.disableZoomOut=!0);var s=i.getTimeUnitsfromTimestamp(t,e,this.utc),o=n.globals.gridWidth/a,l=o/24,h=l/60,c=h/60,d=Math.floor(24*a),g=Math.floor(1440*a),i=Math.floor(86400*a),t=Math.floor(a),e=Math.floor(a/30),a=Math.floor(a/365),s={minMillisecond:s.minMillisecond,minSecond:s.minSecond,minMinute:s.minMinute,minHour:s.minHour,minDate:s.minDate,minMonth:s.minMonth,minYear:s.minYear},u={firstVal:s,currentMillisecond:s.minMillisecond,currentSecond:s.minSecond,currentMinute:s.minMinute,currentHour:s.minHour,currentMonthDate:s.minDate,currentDate:s.minDate,currentMonth:s.minMonth,currentYear:s.minYear,daysWidthOnXAxis:o,hoursWidthOnXAxis:l,minutesWidthOnXAxis:h,secondsWidthOnXAxis:c,numberOfSeconds:i,numberOfMinutes:g,numberOfHours:d,numberOfDays:t,numberOfMonths:e,numberOfYears:a};switch(this.tickInterval){case"years":this.generateYearScale(u);break;case"months":case"half_year":this.generateMonthScale(u);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(u);break;case"hours":this.generateHourScale(u);break;case"minutes_fives":case"minutes":this.generateMinuteScale(u);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(u)}var p=this.timeScaleArray.map(function(t){var e={position:t.position,unit:t.unit,year:t.year,day:t.day||1,hour:t.hour||0,month:t.month+1};return"month"===t.unit?T(T({},e),{},{day:1,value:t.value+1}):"day"===t.unit||"hour"===t.unit?T(T({},e),{},{value:t.value}):"minute"===t.unit?T(T({},e),{},{value:t.value,minute:t.value}):"second"===t.unit?T(T({},e),{},{value:t.value,minute:t.minute,second:t.second}):t});return p.filter(function(t){var e=1,i=Math.ceil(n.globals.gridWidth/120),a=t.value;void 0!==n.config.xaxis.tickAmount&&(i=n.config.xaxis.tickAmount),p.length>i&&(e=Math.floor(p.length/i));var s=!1,o=!1;switch(r.tickInterval){case"years":"year"===t.unit&&(s=!0);break;case"half_year":e=7,"year"===t.unit&&(s=!0);break;case"months":e=1,"year"===t.unit&&(s=!0);break;case"months_fortnight":e=15,"year"!==t.unit&&"month"!==t.unit||(s=!0),30===a&&(o=!0);break;case"months_days":e=10,"month"===t.unit&&(s=!0),30===a&&(o=!0);break;case"week_days":e=8,"month"===t.unit&&(s=!0);break;case"days":e=1,"month"===t.unit&&(s=!0);break;case"hours":"day"===t.unit&&(s=!0);break;case"minutes_fives":a%5!=0&&(o=!0);break;case"seconds_tens":a%10!=0&&(o=!0);break;case"seconds_fives":a%5!=0&&(o=!0)}if("hours"===r.tickInterval||"minutes_fives"===r.tickInterval||"seconds_tens"===r.tickInterval||"seconds_fives"===r.tickInterval){if(!o)return!0}else if((a%e==0||s)&&!o)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(t,e){var i=this.w,t=this.formatDates(t),t=this.removeOverlappingTS(t);i.globals.timescaleLabels=t.slice(),new pt(this.ctx).plotCoords()}},{key:"determineInterval",value:function(t){var e=24*t,i=60*e;switch(!0){case 5<t/365:this.tickInterval="years";break;case 800<t:this.tickInterval="half_year";break;case 180<t:this.tickInterval="months";break;case 90<t:this.tickInterval="months_fortnight";break;case 60<t:this.tickInterval="months_days";break;case 30<t:this.tickInterval="week_days";break;case 2<t:this.tickInterval="days";break;case 2.4<e:this.tickInterval="hours";break;case 15<i:this.tickInterval="minutes_fives";break;case 5<i:this.tickInterval="minutes";break;case 1<i:this.tickInterval="seconds_tens";break;case 20<60*i:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(t){var e=t.firstVal,i=t.currentMonth,a=t.currentYear,s=t.daysWidthOnXAxis,o=t.numberOfYears,r=e.minYear,n=0,l=new V(this.ctx);1<e.minDate||0<e.minMonth?(t=l.determineRemainingDaysOfYear(e.minYear,e.minMonth,e.minDate),n=(l.determineDaysOfYear(e.minYear)-t+1)*s,r=e.minYear+1,this.timeScaleArray.push({position:n,value:r,unit:"year",year:r,month:M.monthMod(i+1)})):1===e.minDate&&0===e.minMonth&&this.timeScaleArray.push({position:n,value:r,unit:"year",year:a,month:M.monthMod(i+1)});for(var h=r,c=n,d=0;d<o;d++)c=l.determineDaysOfYear(++h-1)*s+c,this.timeScaleArray.push({position:c,value:h,unit:"year",year:h,month:1})}},{key:"generateMonthScale",value:function(t){var e=t.firstVal,i=t.currentMonthDate,a=t.currentMonth,s=t.currentYear,o=t.daysWidthOnXAxis,r=t.numberOfMonths,n=a,l=0,h=new V(this.ctx),c="month",d=0;1<e.minDate?(l=(h.determineDaysOfMonths(a+1,e.minYear)-i+1)*o,n=M.monthMod(a+1),t=s+d,e=M.monthMod(n),0===(i=n)&&(c="year",i=t,t+=d+=e=1),this.timeScaleArray.push({position:l,value:i,unit:c,year:t,month:e})):this.timeScaleArray.push({position:l,value:n,unit:c,year:s,month:M.monthMod(a)});for(var g=n+1,u=l,p=0;p<r;p++,0){0===(g=M.monthMod(g))?(c="year",d+=1):c="month";var f=this._getYear(s,g,d),u=h.determineDaysOfMonths(g,f)*o+u;this.timeScaleArray.push({position:u,value:0===g?f:g,unit:c,year:f,month:0===g?1:g}),g++}}},{key:"generateDayScale",value:function(t){function e(t,e,i){return t>n.determineDaysOfMonths(e+1,i)&&(l="month",d=e+=c=1),e}var i=t.firstVal,a=t.currentMonth,s=t.currentYear,o=t.hoursWidthOnXAxis,r=t.numberOfDays,n=new V(this.ctx),l="day",h=i.minDate+1,c=h,t=(24-i.minHour)*o,d=h,g=e(c,a,s);0===i.minHour&&1===i.minDate?(t=0,d=M.monthMod(i.minMonth),l="month",c=i.minDate,r++):1!==i.minDate&&0===i.minHour&&0===i.minMinute&&(t=0,h=i.minDate,g=e(c=d=h,a,s)),this.timeScaleArray.push({position:t,value:d,unit:l,year:this._getYear(s,g,0),month:M.monthMod(g),day:c});for(var u=t,p=0;p<r;p++){var l="day",g=e(c+=1,g,this._getYear(s,g,0)),f=this._getYear(s,g,0),u=24*o+u,x=1===c?M.monthMod(g):c;this.timeScaleArray.push({position:u,value:x,unit:l,year:f,month:M.monthMod(g),day:x})}}},{key:"generateHourScale",value:function(t){function e(t,e){return t>l.determineDaysOfMonths(e+1,o)?e+1:e}var i=t.firstVal,a=t.currentDate,s=t.currentMonth,o=t.currentYear,r=t.minutesWidthOnXAxis,n=t.numberOfHours,l=new V(this.ctx),h="hour",c=60-(i.minMinute+i.minSecond/60),d=c*r,t=i.minHour+1,g=t+1;60==c&&(d=0,g=(t=i.minHour)+1);var u=a,p=e(u,s);this.timeScaleArray.push({position:d,value:t,unit:h,day:u,hour:g,year:o,month:M.monthMod(p)});for(var f,x,b=d,m=0;m<n;m++){h="hour",24<=g&&(g=0,h="day",f=u+=1,x=p,f>l.determineDaysOfMonths(x+1,o)&&(x+=u=1),p=e(u,p={month:x,date:u}.month));var v=this._getYear(o,p,0),b=0===g&&0===m?c*r:60*r+b,y=0===g?u:g;this.timeScaleArray.push({position:b,value:y,unit:h,hour:g,day:u,year:v,month:M.monthMod(p)}),g++}}},{key:"generateMinuteScale",value:function(t){for(var e=t.currentMillisecond,i=t.currentSecond,a=t.currentMinute,s=t.currentHour,o=t.currentDate,r=t.currentMonth,n=t.currentYear,l=t.minutesWidthOnXAxis,h=t.secondsWidthOnXAxis,c=t.numberOfMinutes,d=a+1,g=o,u=r,p=n,f=s,x=(60-i-e/1e3)*h,b=0;b<c;b++)60<=d&&(d=0,24===(f+=1)&&(f=0)),this.timeScaleArray.push({position:x,value:d,unit:"minute",hour:f,minute:d,day:g,year:this._getYear(p,u,0),month:M.monthMod(u)}),x+=l,d++}},{key:"generateSecondScale",value:function(t){for(var e=t.currentMillisecond,i=t.currentSecond,a=t.currentMinute,s=t.currentHour,o=t.currentDate,r=t.currentMonth,n=t.currentYear,l=t.secondsWidthOnXAxis,h=t.numberOfSeconds,c=i+1,d=a,g=o,u=r,p=n,f=s,x=(1e3-e)/1e3*l,b=0;b<h;b++)60<=c&&(c=0,60<=++d&&(d=0,24==++f&&(f=0))),this.timeScaleArray.push({position:x,value:c,unit:"second",hour:f,minute:d,second:c,day:g,year:this._getYear(p,u,0),month:M.monthMod(u)}),x+=l,c++}},{key:"createRawDateString",value:function(t,e){var i=t.year;return 0===t.month&&(t.month=1),i+="-"+("0"+t.month.toString()).slice(-2),"day"===t.unit?i+="day"===t.unit?"-"+("0"+e).slice(-2):"-01":i+="-"+("0"+(t.day||"1")).slice(-2),"hour"===t.unit?i+="hour"===t.unit?"T"+("0"+e).slice(-2):"T00":i+="T"+("0"+(t.hour||"0")).slice(-2),"minute"===t.unit?i+=":"+("0"+e).slice(-2):i+=":"+(t.minute?("0"+t.minute).slice(-2):"00"),"second"===t.unit?i+=":"+("0"+e).slice(-2):i+=":00",this.utc&&(i+=".000Z"),i}},{key:"formatDates",value:function(t){var n=this,l=this.w;return t.map(function(t){var e,i,a=t.value.toString(),s=new V(n.ctx),o=n.createRawDateString(t,a),r=s.getDate(s.parseDate(o));return n.utc||(r=s.getDate(s.parseDateWithTimezone(o))),a=void 0===l.config.xaxis.labels.format?(e="dd MMM",i=l.config.xaxis.labels.datetimeFormatter,"year"===t.unit&&(e=i.year),"month"===t.unit&&(e=i.month),"day"===t.unit&&(e=i.day),"hour"===t.unit&&(e=i.hour),"minute"===t.unit&&(e=i.minute),"second"===t.unit&&(e=i.second),s.formatDate(r,e)):s.formatDate(r,l.config.xaxis.labels.format),{dateString:o,position:t.position,value:a,unit:t.unit,year:t.year,month:t.month}})}},{key:"removeOverlappingTS",value:function(s){var o,r=this,n=new z(this.ctx),l=!1;0<s.length&&s[0].value&&s.every(function(t){return t.value.length===s[0].value.length})&&(l=!0,o=n.getTextRects(s[0].value).width);var h=0,t=s.map(function(t,e){if(0<e&&r.w.config.xaxis.labels.hideOverlappingLabels){var i=l?o:n.getTextRects(s[h].value).width,a=s[h].position;return t.position>a+i+10?(h=e,t):null}return t});return t.filter(function(t){return null!==t})}},{key:"_getYear",value:function(t,e,i){return t+Math.floor(e/12)+i}}]),Qe),qe=(o(Je,[{key:"setupElements",value:function(){var t=this.w.globals,e=this.w.config,i=e.chart.type;t.axisCharts=-1<["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(i),t.xyCharts=-1<["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble"].indexOf(i),t.isBarHorizontal=("bar"===e.chart.type||"rangeBar"===e.chart.type)&&e.plotOptions.bar.horizontal,t.chartClass=".apexcharts"+t.chartID,t.dom.baseEl=this.el,t.dom.elWrap=document.createElement("div"),z.setAttrs(t.dom.elWrap,{id:t.chartClass.substring(1),class:"apexcharts-canvas "+t.chartClass.substring(1)}),this.el.appendChild(t.dom.elWrap),t.dom.Paper=new window.SVG.Doc(t.dom.elWrap),t.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(e.chart.offsetX,", ").concat(e.chart.offsetY,")")}),t.dom.Paper.node.style.background=e.chart.background,this.setSVGDimensions(),t.dom.elGraphical=t.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),t.dom.elAnnotations=t.dom.Paper.group().attr({class:"apexcharts-annotations"}),t.dom.elDefs=t.dom.Paper.defs(),t.dom.elLegendWrap=document.createElement("div"),t.dom.elLegendWrap.classList.add("apexcharts-legend"),t.dom.elWrap.appendChild(t.dom.elLegendWrap),t.dom.Paper.add(t.dom.elGraphical),t.dom.elGraphical.add(t.dom.elDefs)}},{key:"plotChartType",value:function(a,t){var s=this.w,o=s.config,r=s.globals,n={series:[],i:[]},l={series:[],i:[]},h={series:[],i:[]},c={series:[],i:[]},d={series:[],i:[]},g={series:[],i:[]},u={series:[],i:[]};r.series.map(function(t,e){var i=0;void 0!==a[e].type?("column"===a[e].type||"bar"===a[e].type?(1<r.series.length&&o.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),d.series.push(t),d.i.push(e),i++,s.globals.columnSeries=d.series):"area"===a[e].type?(l.series.push(t),l.i.push(e),i++):"line"===a[e].type?(n.series.push(t),n.i.push(e),i++):"scatter"===a[e].type?(h.series.push(t),h.i.push(e)):"bubble"===a[e].type?(c.series.push(t),c.i.push(e),i++):"candlestick"===a[e].type?(g.series.push(t),g.i.push(e),i++):"boxPlot"===a[e].type?(u.series.push(t),u.i.push(e),i++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble"),1<i&&(r.comboCharts=!0)):(n.series.push(t),n.i.push(e))});var e=new Ft(this.ctx,t),i=new Pt(this.ctx,t);this.ctx.pie=new It(this.ctx);var p=new Xt(this.ctx);this.ctx.rangeBar=new G(this.ctx,t);var f,x,b=new Et(this.ctx),m=[];if(r.comboCharts)0<l.series.length&&m.push(e.draw(l.series,"area",l.i)),0<d.series.length&&(s.config.chart.stacked?(f=new Lt(this.ctx,t),m.push(f.draw(d.series,d.i))):(this.ctx.bar=new B(this.ctx,t),m.push(this.ctx.bar.draw(d.series,d.i)))),0<n.series.length&&m.push(e.draw(n.series,"line",n.i)),0<g.series.length&&m.push(i.draw(g.series,g.i)),0<u.series.length&&m.push(i.draw(u.series,u.i)),0<h.series.length&&(x=new Ft(this.ctx,t,!0),m.push(x.draw(h.series,"scatter",h.i))),0<c.series.length&&(x=new Ft(this.ctx,t,!0),m.push(x.draw(c.series,"bubble",c.i)));else switch(o.chart.type){case"line":m=e.draw(r.series,"line");break;case"area":m=e.draw(r.series,"area");break;case"bar":m=o.chart.stacked?new Lt(this.ctx,t).draw(r.series):(this.ctx.bar=new B(this.ctx,t),this.ctx.bar.draw(r.series));break;case"candlestick":case"boxPlot":m=new Pt(this.ctx,t).draw(r.series);break;case"rangeBar":m=this.ctx.rangeBar.draw(r.series);break;case"heatmap":m=new Mt(this.ctx,t).draw(r.series);break;case"treemap":m=new je(this.ctx,t).draw(r.series);break;case"pie":case"donut":case"polarArea":m=this.ctx.pie.draw(r.series);break;case"radialBar":m=p.draw(r.series);break;case"radar":m=b.draw(r.series);break;default:m=e.draw(r.series)}return m}},{key:"setSVGDimensions",value:function(){var t=this.w.globals,e=this.w.config;t.svgWidth=e.chart.width,t.svgHeight=e.chart.height;var i=M.getDimensions(this.el),a=e.chart.width.toString().split(/[0-9]+/g).pop();"%"===a?M.isNumber(i[0])&&(0===i[0].width&&(i=M.getDimensions(this.el.parentNode)),t.svgWidth=i[0]*parseInt(e.chart.width,10)/100):"px"!==a&&""!==a||(t.svgWidth=parseInt(e.chart.width,10));i=e.chart.height.toString().split(/[0-9]+/g).pop();"auto"!==t.svgHeight&&""!==t.svgHeight?"%"===i?(a=M.getDimensions(this.el.parentNode),t.svgHeight=a[1]*parseInt(e.chart.height,10)/100):t.svgHeight=parseInt(e.chart.height,10):t.axisCharts?t.svgHeight=t.svgWidth/1.61:t.svgHeight=t.svgWidth/1.2,t.svgWidth<0&&(t.svgWidth=0),t.svgHeight<0&&(t.svgHeight=0),z.setAttrs(t.dom.Paper.node,{width:t.svgWidth,height:t.svgHeight}),"%"!==i&&(e=!e.chart.sparkline.enabled&&t.axisCharts?e.chart.parentHeightOffset:0,t.dom.Paper.node.parentNode.parentNode.style.minHeight=t.svgHeight+e+"px"),t.dom.elWrap.style.width=t.svgWidth+"px",t.dom.elWrap.style.height=t.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var t=this.w.globals,e=t.translateY,e={transform:"translate("+t.translateX+", "+e+")"};z.setAttrs(t.dom.elGraphical.node,e)}},{key:"resizeNonAxisCharts",value:function(){var t=this.w,e=t.globals,i=0,a=t.config.chart.sparkline.enabled?1:15;a+=t.config.grid.padding.bottom,"top"!==t.config.legend.position&&"bottom"!==t.config.legend.position||!t.config.legend.show||t.config.legend.floating||(i=new xt(this.ctx).legendHelpers.getLegendBBox().clwh+10);var s=t.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),o=2.05*t.globals.radialSize;s&&!t.config.chart.sparkline.enabled&&(o=(s=M.getBoundingClientRect(s)).bottom,s=s.bottom-s.top,o=Math.max(2.05*t.globals.radialSize,s));a=o+e.translateY+i+a;e.dom.elLegendForeign&&e.dom.elLegendForeign.setAttribute("height",a),e.dom.elWrap.style.height=a+"px",z.setAttrs(e.dom.Paper.node,{height:a}),e.dom.Paper.node.parentNode.parentNode.style.minHeight=a+"px"}},{key:"coreCalculations",value:function(){new it(this.ctx).init()}},{key:"resetGlobals",value:function(){function t(){return e.w.config.series.map(function(t){return[]})}var e=this,i=new U,a=this.w.globals;i.initGlobalVars(a),a.seriesXvalues=t(),a.seriesYvalues=t()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&1<this.w.config.yaxis.length)return this.w.globals.isMultipleYAxis=!0}},{key:"xySettings",value:function(){var t,e=null,i=this.w;return i.globals.axisCharts&&("back"===i.config.xaxis.crosshairs.position&&new rt(this.ctx).drawXCrosshairs(),"back"===i.config.yaxis[0].crosshairs.position&&new rt(this.ctx).drawYCrosshairs(),"datetime"===i.config.xaxis.type&&void 0===i.config.xaxis.labels.formatter&&(this.ctx.timeScale=new Ue(this.ctx),t=[],isFinite(i.globals.minX)&&isFinite(i.globals.maxX)&&!i.globals.isBarHorizontal?t=this.ctx.timeScale.calculateTimeScaleTicks(i.globals.minX,i.globals.maxX):i.globals.isBarHorizontal&&(t=this.ctx.timeScale.calculateTimeScaleTicks(i.globals.minY,i.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(t)),e=new P(this.ctx).getCalculatedRatios()),e}},{key:"updateSourceChart",value:function(t){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:t.w.globals.minX,max:t.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var i,a=this,o=this.w;o.config.chart.brush.enabled&&"function"!=typeof o.config.chart.events.selection&&((i=o.config.chart.brush.targets||[o.config.chart.brush.target]).forEach(function(t){var e=ApexCharts.getChartByID(t);e.w.globals.brushSource=a.ctx,"function"!=typeof e.w.config.chart.events.zoomed&&(e.w.config.chart.events.zoomed=function(){a.updateSourceChart(e)}),"function"!=typeof e.w.config.chart.events.scrolled&&(e.w.config.chart.events.scrolled=function(){a.updateSourceChart(e)})}),o.config.chart.events.selection=function(t,e){i.forEach(function(t){var a=ApexCharts.getChartByID(t),s=M.clone(o.config.yaxis);o.config.chart.brush.autoScaleYaxis&&1===a.w.globals.series.length&&(s=new et(a).autoScaleY(a,s,e));t=a.w.config.yaxis.reduce(function(t,e,i){return[].concat(g(t),[T(T({},a.w.config.yaxis[i]),{},{min:s[0].min,max:s[0].max})])},[]);a.ctx.updateHelpers._updateOptions({xaxis:{min:e.xaxis.min,max:e.xaxis.max},yaxis:t},!1,!1,!1,!1)})})}}]),Je),Ze=(o($e,[{key:"_updateOptions",value:function(i){var a=this,s=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],t=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],r=4<arguments.length&&void 0!==arguments[4]&&arguments[4],e=[this.ctx];t&&(e=this.ctx.getSyncedCharts()),this.ctx.w.globals.isExecCalled&&(e=[this.ctx],this.ctx.w.globals.isExecCalled=!1),e.forEach(function(t){var e=t.w;return e.globals.shouldAnimate=o,s||(e.globals.resized=!0,e.globals.dataChanged=!0,o&&t.series.getPreviousPaths()),i&&"object"===v(i)&&(t.config=new j(i),i=P.extendArrayProps(t.config,i,e),t.w.globals.chartID!==a.ctx.w.globals.chartID&&delete i.series,e.config=M.extend(e.config,i),r&&(e.globals.lastXAxis=i.xaxis?M.clone(i.xaxis):[],e.globals.lastYAxis=i.yaxis?M.clone(i.yaxis):[],e.globals.initialConfig=M.extend({},e.config),e.globals.initialSeries=M.clone(e.config.series))),t.update(i)})}},{key:"_updateSeries",value:function(t,e){var i=this,a=2<arguments.length&&void 0!==arguments[2]&&arguments[2],s=this.w;return s.globals.shouldAnimate=e,s.globals.dataChanged=!0,e&&this.ctx.series.getPreviousPaths(),s.globals.axisCharts?(0===(e=t.map(function(t,e){return i._extendSeries(t,e)})).length&&(e=[{data:[]}]),s.config.series=e):s.config.series=t.slice(),a&&(s.globals.initialSeries=M.clone(s.config.series)),this.ctx.update()}},{key:"_extendSeries",value:function(t,e){var i=this.w,a=i.config.series[e];return T(T({},i.config.series[e]),{},{name:t.name||a&&a.name,color:t.color||a&&a.color,type:t.type||a&&a.type,data:t.data||a&&a.data})}},{key:"toggleDataPointSelection",value:function(t,e){var i=this.w,a=null,s=".apexcharts-series[data\\:realIndex='".concat(t,"']");return i.globals.axisCharts?a=i.globals.dom.Paper.select("".concat(s," path[j='").concat(e,"'], ").concat(s," circle[j='").concat(e,"'], ").concat(s," rect[j='").concat(e,"']")).members[0]:void 0===e&&(a=i.globals.dom.Paper.select("".concat(s," path[j='").concat(t,"']")).members[0],"pie"!==i.config.chart.type&&"polarArea"!==i.config.chart.type&&"donut"!==i.config.chart.type||this.ctx.pie.pieClicked(t)),a?(new z(this.ctx).pathMouseDown(a,null),a.node||null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(e){var t,i=this.w;return["min","max"].forEach(function(t){void 0!==e.xaxis[t]&&(i.config.xaxis[t]=e.xaxis[t],i.globals.lastXAxis[t]=e.xaxis[t])}),e.xaxis.categories&&e.xaxis.categories.length&&(i.config.xaxis.categories=e.xaxis.categories),i.config.xaxis.convertedCatToNumeric&&(t=new _(e),e=t.convertCatToNumericXaxis(e,this.ctx)),e}},{key:"forceYAxisUpdate",value:function(i){var t=this.w;return t.config.chart.stacked&&"100%"===t.config.chart.stackType&&(Array.isArray(i.yaxis)?i.yaxis.forEach(function(t,e){i.yaxis[e].min=0,i.yaxis[e].max=100}):(i.yaxis.min=0,i.yaxis.max=100)),i}},{key:"revertDefaultAxisMinMax",value:function(t){var a=this,s=this.w,e=s.globals.lastXAxis,o=s.globals.lastYAxis;t&&t.xaxis&&(e=t.xaxis),t&&t.yaxis&&(o=t.yaxis),s.config.xaxis.min=e.min,s.config.xaxis.max=e.max;s.config.yaxis.map(function(t,e){var i;s.globals.zoomed||void 0!==o[e]?void 0!==o[i=e]&&(s.config.yaxis[i].min=o[i].min,s.config.yaxis[i].max=o[i].max):void 0!==a.ctx.opts.yaxis[e]&&(t.min=a.ctx.opts.yaxis[e].min,t.max=a.ctx.opts.yaxis[e].max)})}}]),$e);function $e(t){s(this,$e),this.ctx=t,this.w=t.w}function Je(t,e){s(this,Je),this.ctx=e,this.w=e.w,this.el=t}function Qe(t){s(this,Qe),this.ctx=t,this.w=t.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}function Ke(t,e){s(this,Ke),this.ctx=t,this.w=t.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new Tt(t),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}function ti(t){(this.el=t).remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(t,e,i){t="string"!=typeof t?t:e[t];return i?t/2:t},this.pointCoords=function(t,e){var i=this.pointsList[t];return{x:this.pointCoord(i[0],e,"t"===t||"b"===t),y:this.pointCoord(i[1],e,"r"===t||"l"===t)}}}function ei(t){switch(t[0]){case"z":case"Z":t[0]="L",t[1]=this.start[0],t[2]=this.start[1];break;case"H":t[0]="L",t[2]=this.pos[1];break;case"V":t[0]="L",t[2]=t[1],t[1]=this.pos[0];break;case"T":t[0]="Q",t[3]=t[1],t[4]=t[2],t[1]=this.reflection[1],t[2]=this.reflection[0];break;case"S":t[0]="C",t[6]=t[4],t[5]=t[3],t[4]=t[2],t[3]=t[1],t[2]=this.reflection[1],t[1]=this.reflection[0]}return t}function ii(t){var e=t.length;return this.pos=[t[e-2],t[e-1]],-1!="SCQT".indexOf(t[0])&&(this.reflection=[2*this.pos[0]-t[e-4],2*this.pos[1]-t[e-3]]),t}function ai(t){var e=[t];switch(t[0]){case"M":return this.pos=this.start=[t[1],t[2]],e;case"L":t[5]=t[3]=t[1],t[6]=t[4]=t[2],t[1]=this.pos[0],t[2]=this.pos[1];break;case"Q":t[6]=t[4],t[5]=t[3],t[4]=+t[4]/3+2*t[2]/3,t[3]=+t[3]/3+2*t[1]/3,t[2]=+this.pos[1]/3+2*t[2]/3,t[1]=+this.pos[0]/3+2*t[1]/3;break;case"A":t=(e=function(t,e){var i,a,s,o,r,n,l,h,c,d,g,u,p,f,x,b,m,v=Math.abs(e[1]),y=Math.abs(e[2]),w=e[3]%360,k=e[4],A=e[5],S=e[6],C=e[7],L=new SVG.Point(t),P=new SVG.Point(S,C),T=[];if(0===v||0===y||L.x===P.x&&L.y===P.y)return[["C",L.x,L.y,P.x,P.y,P.x,P.y]];for(1<(e=(a=new SVG.Point((L.x-P.x)/2,(L.y-P.y)/2).transform((new SVG.Matrix).rotate(w))).x*a.x/(v*v)+a.y*a.y/(y*y))&&(v*=e=Math.sqrt(e),y*=e),i=(new SVG.Matrix).rotate(w).scale(1/v,1/y).rotate(-w),L=L.transform(i),a=(t=[(P=P.transform(i)).x-L.x,P.y-L.y])[0]*t[0]+t[1]*t[1],e=Math.sqrt(a),t[0]/=e,t[1]/=e,a=a<4?Math.sqrt(1-a/4):0,k===A&&(a*=-1),s=new SVG.Point((P.x+L.x)/2+a*-t[1],(P.y+L.y)/2+a*t[0]),t=new SVG.Point(L.x-s.x,L.y-s.y),L=new SVG.Point(P.x-s.x,P.y-s.y),P=Math.acos(t.x/Math.sqrt(t.x*t.x+t.y*t.y)),t.y<0&&(P*=-1),t=Math.acos(L.x/Math.sqrt(L.x*L.x+L.y*L.y)),L.y<0&&(t*=-1),A&&t<P&&(t+=2*Math.PI),!A&&P<t&&(t-=2*Math.PI),l=[],o=(t-(h=P))/(r=Math.ceil(2*Math.abs(P-t)/Math.PI)),n=4*Math.tan(o/4)/3,u=0;u<=r;u++)d=Math.cos(h),c=Math.sin(h),g=new SVG.Point(s.x+d,s.y+c),l[u]=[new SVG.Point(g.x+n*c,g.y-n*d),g,new SVG.Point(g.x-n*c,g.y+n*d)],h+=o;for(l[0][0]=l[0][1].clone(),l[l.length-1][2]=l[l.length-1][1].clone(),i=(new SVG.Matrix).rotate(w).scale(v,y).rotate(-w),u=0,p=l.length;u<p;u++)l[u][0]=l[u][0].transform(i),l[u][1]=l[u][1].transform(i),l[u][2]=l[u][2].transform(i);for(u=1,p=l.length;u<p;u++)f=(g=l[u-1][2]).x,x=g.y,b=(g=l[u][0]).x,m=g.y,S=(g=l[u][1]).x,C=g.y,T.push(["C",f,x,b,m,S,C]);return T}(this.pos,t))[0]}return t[0]="C",this.pos=[t[5],t[6]],this.reflection=[2*t[5]-t[3],2*t[6]-t[4]],e}function si(t,e){if(!1===e)return!1;for(var i=e,a=t.length;i<a;++i)if("M"==t[i][0])return i;return!1}Oe="undefined"!=typeof window?window:void 0,We=function(s,o){var h=(void 0!==this?this:s).SVG=function(t){if(h.supported)return t=new h.Doc(t),h.parser.draw||h.prepare(),t};if(h.ns="http://www.w3.org/2000/svg",h.xmlns="http://www.w3.org/2000/xmlns/",h.xlink="http://www.w3.org/1999/xlink",h.svgjs="http://svgjs.com/svgjs",h.supported=!0,!h.supported)return!1;h.did=1e3,h.eid=function(t){return"Svgjs"+n(t)+h.did++},h.create=function(t){var e=o.createElementNS(this.ns,t);return e.setAttribute("id",this.eid(t)),e},h.extend=function(){for(var t,e=(t=[].slice.call(arguments)).pop(),i=t.length-1;0<=i;i--)if(t[i])for(var a in e)t[i].prototype[a]=e[a];h.Set&&h.Set.inherit&&h.Set.inherit()},h.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,h.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&h.extend(e,t.extend),t.construct&&h.extend(t.parent||h.Container,t.construct),e},h.adopt=function(t){return t?t.instance||((e="svg"==t.nodeName?new(t.parentNode instanceof s.SVGElement?h.Nested:h.Doc):"linearGradient"==t.nodeName?new h.Gradient("linear"):"radialGradient"==t.nodeName?new h.Gradient("radial"):h[n(t.nodeName)]?new h[n(t.nodeName)]:new h.Element(t)).type=t.nodeName,((e.node=t).instance=e)instanceof h.Doc&&e.namespace().defs(),e.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),e):null;var e},h.prepare=function(){var t=o.getElementsByTagName("body")[0],e=(t?new h.Doc(t):h.adopt(o.documentElement).nested()).size(2,0);h.parser={body:t||o.documentElement,draw:e.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:e.polyline().node,path:e.path().node,native:h.create("svg")}},h.parser={native:h.create("svg")},o.addEventListener("DOMContentLoaded",function(){h.parser.draw||h.prepare()},!1),h.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},h.utils={map:function(t,e){for(var i=t.length,a=[],s=0;s<i;s++)a.push(e(t[s]));return a},filter:function(t,e){for(var i=t.length,a=[],s=0;s<i;s++)e(t[s])&&a.push(t[s]);return a},filterSVGElements:function(t){return this.filter(t,function(t){return t instanceof s.SVGElement})}},h.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},h.Color=function(t){var e,i;this.r=0,this.g=0,this.b=0,t&&("string"==typeof t?h.regex.isRgb.test(t)?(e=h.regex.rgb.exec(t.replace(h.regex.whitespace,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):h.regex.isHex.test(t)&&(e=h.regex.hex.exec(4==(i=t).length?["#",i.substring(1,2),i.substring(1,2),i.substring(2,3),i.substring(2,3),i.substring(3,4),i.substring(3,4)].join(""):i),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"===v(t)&&(this.r=t.r,this.g=t.g,this.b=t.b))},h.extend(h.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+d(this.r)+d(this.g)+d(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new h.Color(t),this},at:function(t){return this.destination?new h.Color({r:~~(this.r+(this.destination.r-this.r)*(t=t<0?0:1<t?1:t)),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)}):this}}),h.Color.test=function(t){return h.regex.isHex.test(t+="")||h.regex.isRgb.test(t)},h.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},h.Color.isColor=function(t){return h.Color.isRgb(t)||h.Color.test(t)},h.Array=function(t,e){0==(t=(t||[]).valueOf()).length&&e&&(t=e.valueOf()),this.value=this.parse(t)},h.extend(h.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)}}),h.PointArray=function(t,e){h.Array.call(this,t,e||[[0,0]])},h.PointArray.prototype=new h.Array,h.PointArray.prototype.constructor=h.PointArray;for(var l={M:function(t,e,i){return e.x=i.x=t[0],e.y=i.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},Z:function(t,e,i){return e.x=i.x,e.y=i.y,["Z"]}},t="mlhvqtcsaz".split(""),e=0,i=t.length;e<i;++e)l[t[e]]=function(o){return function(t,e,i){if("H"==o)t[0]=t[0]+e.x;else if("V"==o)t[0]=t[0]+e.y;else if("A"==o)t[5]=t[5]+e.x,t[6]=t[6]+e.y;else for(var a=0,s=t.length;a<s;++a)t[a]=t[a]+(a%2?e.y:e.x);return l[o](t,e,i)}}(t[e].toUpperCase());h.PathArray=function(t,e){h.Array.call(this,t,e||[["M",0,0]])},h.PathArray.prototype=new h.Array,h.PathArray.prototype.constructor=h.PathArray,h.extend(h.PathArray,{toString:function(){return function(t){for(var e=0,i=t.length,a="";e<i;e++)a+=t[e][0],null!=t[e][1]&&(a+=t[e][1],null!=t[e][2]&&(a+=" ",a+=t[e][2],null!=t[e][3]&&(a+=" ",a+=t[e][3],a+=" ",a+=t[e][4],null!=t[e][5]&&(a+=" ",a+=t[e][5],a+=" ",a+=t[e][6],null!=t[e][7]&&(a+=" ",a+=t[e][7])))));return a+" "}(this.value)},move:function(t,e){var i=this.bbox();return i.x,i.y,this},at:function(t){if(!this.destination)return this;for(var e=this.value,i=this.destination.value,a=[],s=new h.PathArray,o=0,r=e.length;o<r;o++){a[o]=[e[o][0]];for(var n=1,l=e[o].length;n<l;n++)a[o][n]=e[o][n]+(i[o][n]-e[o][n])*t;"A"===a[o][0]&&(a[o][4]=+(0!=a[o][4]),a[o][5]=+(0!=a[o][5]))}return s.value=a,s},parse:function(t){if(t instanceof h.PathArray)return t.valueOf();var e,i={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(h.regex.numbersWithDots,c).replace(h.regex.pathLetters," $& ").replace(h.regex.hyphen,"$1 -").trim().split(h.regex.delimiter):t.reduce(function(t,e){return[].concat.call(t,e)},[]);for(var a=[],s=new h.Point,o=new h.Point,r=0,n=t.length;h.regex.isPathLetter.test(t[r])?(e=t[r],++r):"M"==e?e="L":"m"==e&&(e="l"),a.push(l[e].call(null,t.slice(r,r+=i[e.toUpperCase()]).map(parseFloat),s,o)),r<n;);return a},bbox:function(){return h.parser.draw||h.prepare(),h.parser.path.setAttribute("d",this.toString()),h.parser.path.getBBox()}}),h.Number=h.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(h.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof h.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new h.Number(t),new h.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new h.Number(t),new h.Number(this-t,this.unit||t.unit)},times:function(t){return t=new h.Number(t),new h.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new h.Number(t),new h.Number(this/t,this.unit||t.unit)},to:function(t){var e=new h.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new h.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new h.Number(this.destination).minus(this).times(t).plus(this):this}}}),h.Element=h.invent({create:function(t){this._stroke=h.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=t)&&(this.type=t.nodeName,(this.node.instance=this)._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){e=g(this,t,e);return this.width(new h.Number(e.width)).height(new h.Number(e.height))},clone:function(t){this.writeDataToDom();var e=f(this.node.cloneNode(!0));return t?t.add(e):this.after(e),e},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(h.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){var e;return this.hasClass(t)||((e=this.classes()).push(t),this.attr("class",e.join(" "))),this},removeClass:function(e){return this.hasClass(e)&&this.attr("class",this.classes().filter(function(t){return t!=e}).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return h.get(this.attr(t))},parent:function(t){var e=this;if(!e.node.parentNode)return null;if(e=h.adopt(e.node.parentNode),!t)return e;for(;e&&e.node instanceof s.SVGElement;){if("string"==typeof t?e.matches(t):e instanceof t)return e;if(!e.node.parentNode||"#document"==e.node.parentNode.nodeName)return null;e=h.adopt(e.node.parentNode)}},doc:function(){return this instanceof h.Doc?this:this.parent(h.Doc)},parents:function(t){for(var e=[],i=this;(i=i.parent(t))&&i.node&&(e.push(i),i.parent););return e},matches:function(t){return((e=this.node).matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t);var e},native:function(){return this.node},svg:function(t){var e=o.createElement("svg");if(!(t&&this instanceof h.Parent))return e.appendChild(t=o.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),e.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");e.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var i=0,a=e.firstChild.childNodes.length;i<a;i++)this.node.appendChild(e.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return this instanceof t}}}),h.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},h.morph=function(i){return function(t,e){return new h.MorphObj(t,e).at(i)}},h.Situation=h.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new h.Number(t.duration).valueOf(),this.delay=new h.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),h.FX=h.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,e,i){"object"===v(t)&&(e=t.ease,i=t.delay,t=t.duration);e=new h.Situation({duration:t||1e3,delay:i||0,ease:h.easing[e||"-"]||e});return this.queue(e),this},target:function(t){return t&&t instanceof h.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=s.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){s.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof h.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof h.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e,i=this.situation;if(i.init)return this;for(e in i.animations){t=this.target()[e](),Array.isArray(t)||(t=[t]),Array.isArray(i.animations[e])||(i.animations[e]=[i.animations[e]]);for(var a=t.length;a--;)i.animations[e][a]instanceof h.Number&&(t[a]=new h.Number(t[a])),i.animations[e][a]=t[a].morph(i.animations[e][a])}for(e in i.attrs)i.attrs[e]=new h.MorphObj(this.target().attr(e),i.attrs[e]);for(e in i.styles)i.styles[e]=new h.MorphObj(this.target().style(e),i.styles[e]);return i.initialTransformation=this.target().matrixify(),i.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var i=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(i||this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(i){var a=this.last();return this.target().on("finished.fx",function t(e){e.detail.situation==a&&(i.call(this,a),this.off("finished.fx",t))}),this._callStart()},during:function(e){function t(t){t.detail.situation==i&&e.call(this,t.detail.pos,h.morph(t.detail.pos),t.detail.eased,i)}var i=this.last();return this.target().off("during.fx",t).on("during.fx",t),this.after(function(){this.off("during.fx",t)}),this._callStart()},afterAll:function(e){function i(t){e.call(this),this.off("allfinished.fx",i)}return this.target().off("allfinished.fx",i).on("allfinished.fx",i),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,i){return this.last()[i||"animations"][t]=e,this._callStart()},step:function(t){var e,i;t||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(e=Math.max(this.absPos,0),t=Math.floor(e),!0===this.situation.loops||t<this.situation.loops?(this.pos=e-t,i=this.situation.loop,this.situation.loop=t):(this.absPos=this.situation.loops,this.pos=1,i=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-i)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var a,s=this.situation.ease(this.pos);for(a in this.situation.once)a>this.lastPos&&a<=s&&(this.situation.once[a].call(this.target(),this.pos,s),delete this.situation.once[a]);return this.active&&this.target().fire("during",{pos:this.pos,eased:s,fx:this,situation:this.situation}),this.situation&&(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=s),this},eachAt:function(){var t,e=this,i=this.target(),a=this.situation;for(t in a.animations)r=[].concat(a.animations[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(a.ease(e.pos),e.pos):t}),i[t].apply(i,r);for(t in a.attrs)r=[t].concat(a.attrs[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(a.ease(e.pos),e.pos):t}),i.attr.apply(i,r);for(t in a.styles)r=[t].concat(a.styles[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(a.ease(e.pos),e.pos):t}),i.style.apply(i,r);if(a.transforms.length){r=a.initialTransformation,t=0;for(var s=a.transforms.length;t<s;t++)var o=a.transforms[t],r=o instanceof h.Matrix?o.relative?r.multiply((new h.Matrix).morph(o).at(a.ease(this.pos))):r.morph(o).at(a.ease(this.pos)):(o.relative||o.undo(r.extract()),r.multiply(o.at(a.ease(this.pos))));i.matrix(r)}return this},once:function(t,e,i){var a=this.last();return i||(t=a.ease(t)),a.once[t]=e,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:h.Element,construct:{animate:function(t,e,i){return(this.fx||(this.fx=new h.FX(this))).animate(t,e,i)},delay:function(t){return(this.fx||(this.fx=new h.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),h.MorphObj=h.invent({create:function(t,e){return h.Color.isColor(e)?new h.Color(t).morph(e):h.regex.delimiter.test(t)?new(h.regex.pathLetters.test(t)?h.PathArray:h.Array)(t).morph(e):h.regex.numberAndUnit.test(e)?new h.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),h.extend(h.FX,{attr:function(t,e,i){if("object"===v(t))for(var a in t)this.attr(a,t[a]);else this.add(t,e,"attrs");return this},plot:function(t,e,i,a){return 4==arguments.length?this.plot([t,e,i,a]):this.add("plot",new(this.target().morphArray)(t))}}),h.Box=h.invent({create:function(t,e,i,a){if(!("object"!==v(t)||t instanceof h.Element))return h.Box.call(this,null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height);4==arguments.length&&(this.x=t,this.y=e,this.width=i,this.height=a),null==(a=this).x&&(a.x=0,a.y=0,a.width=0,a.height=0),a.w=a.width,a.h=a.height,a.x2=a.x+a.width,a.y2=a.y+a.height,a.cx=a.x+a.width/2,a.cy=a.y+a.height/2}}),h.BBox=h.invent({create:function(e){if(h.Box.apply(this,[].slice.call(arguments)),e instanceof h.Element){var i,a;try{if(!o.documentElement.contains){for(var t=e.node;t.parentNode;)t=t.parentNode;if(t!=o)throw new Error("Element not in the dom")}a=e.node.getBBox()}catch(t){e instanceof h.Shape?(h.parser.draw||h.prepare(),a=(i=e.clone(h.parser.draw.instance).show()).node.getBBox(),i.remove()):a={x:e.node.clientLeft,y:e.node.clientTop,width:e.node.clientWidth,height:e.node.clientHeight}}h.Box.call(this,a)}},inherit:h.Box,parent:h.Element,construct:{bbox:function(){return new h.BBox(this)}}}),h.BBox.prototype.constructor=h.BBox,h.Matrix=h.invent({create:function(t){var e=p([1,0,0,1,0,0]);t=t instanceof h.Element?t.matrixify():"string"==typeof t?p(t.split(h.regex.delimiter).map(parseFloat)):6==arguments.length?p([].slice.call(arguments)):Array.isArray(t)?p(t):"object"===v(t)?t:e;for(var i=m.length-1;0<=i;--i)this[m[i]]=(null!=t[m[i]]?t:e)[m[i]]},extend:{extract:function(){var t=u(this,0,1),t=(u(this,1,0),180/Math.PI*Math.atan2(t.y,t.x)-90);return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(t*Math.PI/180)+this.f*Math.sin(t*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(t*Math.PI/180)+this.e*Math.sin(-t*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:t,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new h.Matrix(this)}},clone:function(){return new h.Matrix(this)},morph:function(t){return this.destination=new h.Matrix(t),this},multiply:function(t){return new h.Matrix(this.native().multiply((t=(t=t)instanceof h.Matrix?t:new h.Matrix(t)).native()))},inverse:function(){return new h.Matrix(this.native().inverse())},translate:function(t,e){return new h.Matrix(this.native().translate(t||0,e||0))},native:function(){for(var t=h.parser.native.createSVGMatrix(),e=m.length-1;0<=e;e--)t[m[e]]=this[m[e]];return t},toString:function(){return"matrix("+x(this.a)+","+x(this.b)+","+x(this.c)+","+x(this.d)+","+x(this.e)+","+x(this.f)+")"}},parent:h.Element,construct:{ctm:function(){return new h.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof h.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new h.Matrix(e)}return new h.Matrix(this.node.getScreenCTM())}}}),h.Point=h.invent({create:function(t,e){t=Array.isArray(t)?{x:t[0],y:t[1]}:"object"===v(t)?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=e?e:t}:{x:0,y:0};this.x=t.x,this.y=t.y},extend:{clone:function(){return new h.Point(this)},morph:function(t,e){return this.destination=new h.Point(t,e),this}}}),h.extend(h.Element,{point:function(t,e){return new h.Point(t,e).transform(this.screenCTM().inverse())}}),h.extend(h.Element,{attr:function(t,e,i){if(null==t){for(t={},i=(e=this.node.attributes).length-1;0<=i;i--)t[e[i].nodeName]=h.regex.isNumber.test(e[i].nodeValue)?parseFloat(e[i].nodeValue):e[i].nodeValue;return t}if("object"===v(t))for(var a in t)this.attr(a,t[a]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?h.defaults.attrs[t]:h.regex.isNumber.test(e)?parseFloat(e):e;"stroke-width"==t?this.attr("stroke",0<parseFloat(e)?this._stroke:null):"stroke"==t&&(this._stroke=e),"fill"!=t&&"stroke"!=t||(e=h.regex.isImage.test(e)?this.doc().defs().image(e,0,0):e)instanceof h.Image&&(e=this.doc().defs().pattern(0,0,function(){this.add(e)})),"number"==typeof e?e=new h.Number(e):h.Color.isColor(e)?e=new h.Color(e):Array.isArray(e)&&(e=new h.Array(e)),"leading"==t?this.leading&&this.leading(e):"string"==typeof i?this.node.setAttributeNS(i,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this}}),h.extend(h.Element,{transform:function(t,e){var i;return"object"!==v(t)?(i=new h.Matrix(this).extract(),"string"==typeof t?i[t]:i):(i=new h.Matrix(this),e=!!e||!!t.relative,null!=t.a&&(i=e?i.multiply(new h.Matrix(t)):new h.Matrix(t)),this.attr("transform",i))}}),h.extend(h.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(h.regex.transforms).slice(0,-1).map(function(t){t=t.trim().split("(");return[t[0],t[1].split(h.regex.delimiter).map(function(t){return parseFloat(t)})]}).reduce(function(t,e){return"matrix"==e[0]?t.multiply(p(e[1])):t[e[0]].apply(t,e[1])},new h.Matrix)},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),i=t.screenCTM().inverse();return this.addTo(t).untransform().transform(i.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),h.Transformation=h.invent({create:function(t,e){if(1<arguments.length&&"boolean"!=typeof e)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(t))for(var i=0,a=this.arguments.length;i<a;++i)this[this.arguments[i]]=t[i];else if("object"===v(t))for(i=0,a=this.arguments.length;i<a;++i)this[this.arguments[i]]=t[this.arguments[i]];!(this.inversed=!1)===e&&(this.inversed=!0)}}),h.Translate=h.invent({parent:h.Matrix,inherit:h.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),h.extend(h.Element,{style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===v(t))for(var i in t)this.style(i,t[i]);else{if(!h.regex.isCss.test(t))return this.node.style[r(t)];for(t=t.split(/\s*;\s*/).filter(function(t){return!!t}).map(function(t){return t.split(/\s*:\s*/)});e=t.pop();)this.style(e[0],e[1])}else this.node.style[r(t)]=null===e||h.regex.isBlank.test(e)?"":e;return this}}),h.Parent=h.invent({create:function(t){this.constructor.call(this,t)},inherit:h.Element,extend:{children:function(){return h.utils.map(h.utils.filterSVGElements(this.node.childNodes),function(t){return h.adopt(t)})},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return 0<=this.index(t)},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return h.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){for(var i=this.children(),a=0,s=i.length;a<s;a++)i[a]instanceof h.Element&&t.apply(i[a],[a,i]),e&&i[a]instanceof h.Container&&i[a].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),h.extend(h.Parent,{ungroup:function(t,e){return 0===e||this instanceof h.Defs||this.node==h.parser.draw||(t=t||(this instanceof h.Doc?this:this.parent(h.Parent)),e=e||1/0,this.each(function(){return this instanceof h.Defs?this:this instanceof h.Parent?this.ungroup(t,e-1):this.toParent(t)}),this.node.firstChild||this.remove()),this},flatten:function(t,e){return this.ungroup(t,e)}}),h.Container=h.invent({create:function(t){this.constructor.call(this,t)},inherit:h.Parent}),h.ViewBox=h.invent({parent:h.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(e){h.Element.prototype[e]=function(t){return h.on(this.node,e,t),this}}),h.listeners=[],h.handlerMap=[],h.listenerId=0,h.on=function(t,e,i,a,s){var o=i.bind(a||t.instance||t),r=(h.handlerMap.indexOf(t)+1||h.handlerMap.push(t))-1,a=e.split(".")[0],e=e.split(".")[1]||"*";h.listeners[r]=h.listeners[r]||{},h.listeners[r][a]=h.listeners[r][a]||{},h.listeners[r][a][e]=h.listeners[r][a][e]||{},i._svgjsListenerId||(i._svgjsListenerId=++h.listenerId),h.listeners[r][a][e][i._svgjsListenerId]=o,t.addEventListener(a,o,s||{passive:!0})},h.off=function(t,e,i){var a=h.handlerMap.indexOf(t),s=e&&e.split(".")[0],o=e&&e.split(".")[1],r="";if(-1!=a)if(i)!(i="function"==typeof i?i._svgjsListenerId:i)||h.listeners[a][s]&&h.listeners[a][s][o||"*"]&&(t.removeEventListener(s,h.listeners[a][s][o||"*"][i],!1),delete h.listeners[a][s][o||"*"][i]);else if(o&&s){if(h.listeners[a][s]&&h.listeners[a][s][o]){for(var n in h.listeners[a][s][o])h.off(t,[s,o].join("."),n);delete h.listeners[a][s][o]}}else if(o)for(var l in h.listeners[a])for(var r in h.listeners[a][l])o===r&&h.off(t,[l,o].join("."));else if(s){if(h.listeners[a][s]){for(var r in h.listeners[a][s])h.off(t,[s,r].join("."));delete h.listeners[a][s]}}else{for(var l in h.listeners[a])h.off(t,l);delete h.listeners[a],delete h.handlerMap[a]}},h.extend(h.Element,{on:function(t,e,i,a){return h.on(this.node,t,e,i,a),this},off:function(t,e){return h.off(this.node,t,e),this},fire:function(t,e){return t instanceof s.Event?this.node.dispatchEvent(t):this.node.dispatchEvent(t=new h.CustomEvent(t,{detail:e,cancelable:!0})),this._event=t,this},event:function(){return this._event}}),h.Defs=h.invent({create:"defs",inherit:h.Container}),h.G=h.invent({create:"g",inherit:h.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)}},construct:{group:function(){return this.put(new h.G)}}}),h.Doc=h.invent({create:function(t){t&&("svg"==(t="string"==typeof t?o.getElementById(t):t).nodeName?this.constructor.call(this,t):(this.constructor.call(this,h.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:h.Container,extend:{namespace:function(){return this.attr({xmlns:h.ns,version:"1.1"}).attr("xmlns:xlink",h.xlink,h.xmlns).attr("xmlns:svgjs",h.svgjs,h.xmlns)},defs:function(){var t;return this._defs||((t=this.node.getElementsByTagName("defs")[0])?this._defs=h.adopt(t):this._defs=new h.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,h.parser.draw&&!h.parser.draw.parentNode&&this.node.appendChild(h.parser.draw),this},clone:function(t){this.writeDataToDom();var e=this.node,i=f(e.cloneNode(!0));return t?(t.node||t).appendChild(i.node):e.parentNode.insertBefore(i.node,e.nextSibling),i}}}),h.extend(h.Element,{}),h.Gradient=h.invent({create:function(t){this.constructor.call(this,h.create(t+"Gradient")),this.type=t},inherit:h.Container,extend:{at:function(t,e,i){return this.put(new h.Stop).update(t,e,i)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,i){return h.Container.prototype.attr.call(this,t="transform"==t?"gradientTransform":t,e,i)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),h.extend(h.Gradient,h.FX,{from:function(t,e){return"radial"==(this._target||this).type?this.attr({fx:new h.Number(t),fy:new h.Number(e)}):this.attr({x1:new h.Number(t),y1:new h.Number(e)})},to:function(t,e){return"radial"==(this._target||this).type?this.attr({cx:new h.Number(t),cy:new h.Number(e)}):this.attr({x2:new h.Number(t),y2:new h.Number(e)})}}),h.extend(h.Defs,{gradient:function(t,e){return this.put(new h.Gradient(t)).update(e)}}),h.Stop=h.invent({create:"stop",inherit:h.Element,extend:{update:function(t){return null!=(t="number"==typeof t||t instanceof h.Number?{offset:arguments[0],color:arguments[1],opacity:arguments[2]}:t).opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new h.Number(t.offset)),this}}}),h.Pattern=h.invent({create:"pattern",inherit:h.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,i){return h.Container.prototype.attr.call(this,t="transform"==t?"patternTransform":t,e,i)}},construct:{pattern:function(t,e,i){return this.defs().pattern(t,e,i)}}}),h.extend(h.Defs,{pattern:function(t,e,i){return this.put(new h.Pattern).update(i).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),h.Shape=h.invent({create:function(t){this.constructor.call(this,t)},inherit:h.Element}),h.Symbol=h.invent({create:"symbol",inherit:h.Container,construct:{symbol:function(){return this.put(new h.Symbol)}}}),h.Use=h.invent({create:"use",inherit:h.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,h.xlink)}},construct:{use:function(t,e){return this.put(new h.Use).element(t,e)}}}),h.Rect=h.invent({create:"rect",inherit:h.Shape,construct:{rect:function(t,e){return this.put(new h.Rect).size(t,e)}}}),h.Circle=h.invent({create:"circle",inherit:h.Shape,construct:{circle:function(t){return this.put(new h.Circle).rx(new h.Number(t).divide(2)).move(0,0)}}}),h.extend(h.Circle,h.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),h.Ellipse=h.invent({create:"ellipse",inherit:h.Shape,construct:{ellipse:function(t,e){return this.put(new h.Ellipse).size(t,e).move(0,0)}}}),h.extend(h.Ellipse,h.Rect,h.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),h.extend(h.Circle,h.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new h.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new h.Number(t).divide(2))},size:function(t,e){e=g(this,t,e);return this.rx(new h.Number(e.width).divide(2)).ry(new h.Number(e.height).divide(2))}}),h.Line=h.invent({create:"line",inherit:h.Shape,extend:{array:function(){return new h.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,i,a){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:i,y2:a}:new h.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){e=g(this,t,e);return this.attr(this.array().size(e.width,e.height).toLine())}},construct:{line:function(t,e,i,a){return h.Line.prototype.plot.apply(this.put(new h.Line),null!=t?[t,e,i,a]:[0,0,0,0])}}}),h.Polyline=h.invent({create:"polyline",inherit:h.Shape,construct:{polyline:function(t){return this.put(new h.Polyline).plot(t||new h.PointArray)}}}),h.Polygon=h.invent({create:"polygon",inherit:h.Shape,construct:{polygon:function(t){return this.put(new h.Polygon).plot(t||new h.PointArray)}}}),h.extend(h.Polyline,h.Polygon,{array:function(){return this._array||(this._array=new h.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new h.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){e=g(this,t,e);return this.attr("points",this.array().size(e.width,e.height))}}),h.extend(h.Line,h.Polyline,h.Polygon,{morphArray:h.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),h.Path=h.invent({create:"path",inherit:h.Shape,extend:{morphArray:h.PathArray,array:function(){return this._array||(this._array=new h.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new h.PathArray(t))},clear:function(){return delete this._array,this}},construct:{path:function(t){return this.put(new h.Path).plot(t||new h.PathArray)}}}),h.Image=h.invent({create:"image",inherit:h.Shape,extend:{load:function(e){if(!e)return this;var i=this,a=new s.Image;return h.on(a,"load",function(){h.off(a);var t=i.parent(h.Pattern);null!==t&&(0==i.width()&&0==i.height()&&i.size(a.width,a.height),t&&0==t.width()&&0==t.height()&&t.size(i.width(),i.height()),"function"==typeof i._loaded&&i._loaded.call(i,{width:a.width,height:a.height,ratio:a.width/a.height,url:e}))}),h.on(a,"error",function(t){h.off(a),"function"==typeof i._error&&i._error.call(i,t)}),this.attr("href",a.src=this.src=e,h.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,i){return this.put(new h.Image).load(t).size(e||0,i||e||0)}}}),h.Text=h.invent({create:function(){this.constructor.call(this,h.create("text")),this.dom.leading=new h.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",h.defaults.attrs["font-family"])},inherit:h.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},text:function(t){if(void 0===t){t="";for(var e=this.node.childNodes,i=0,a=e.length;i<a;++i)0!=i&&3!=e[i].nodeType&&1==h.adopt(e[i]).dom.newLined&&(t+="\n"),t+=e[i].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else for(var i=0,s=(t=t.split("\n")).length;i<s;i++)this.tspan(t[i]).newLine();return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new h.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,t=h.utils.map(h.utils.filterSVGElements(t.childNodes),function(t){return h.adopt(t)});return new h.Set(t)},rebuild:function(t){var e,i,a;return"boolean"==typeof t&&(this._rebuild=t),this._rebuild&&(i=0,a=(e=this).dom.leading*new h.Number(this.attr("font-size")),this.lines().each(function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?i+=a:(this.attr("dy",a+i),i=0))}),this.fire("rebuild")),this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new h.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new h.Text).text(t)},plain:function(t){return this.put(new h.Text).plain(t)}}}),h.Tspan=h.invent({create:"tspan",inherit:h.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(h.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),h.extend(h.Text,h.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(o.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,i=new h.Tspan;return!1===this._build&&this.clear(),e.appendChild(i.node),i.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),h.TextPath=h.invent({create:"textPath",inherit:h.Parent,parent:h.Text,construct:{morphArray:h.PathArray,array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),i=null;return e&&(i=e.plot(t)),null==t?i:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return h.adopt(this.node.firstChild)}}}),h.Nested=h.invent({create:function(){this.constructor.call(this,h.create("svg")),this.style("overflow","visible")},inherit:h.Container,construct:{nested:function(){return this.put(new h.Nested)}}});var a={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};function c(t,e,i,a){return i+a.replace(h.regex.dots," .")}function r(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function n(t){return t.charAt(0).toUpperCase()+t.slice(1)}function d(t){t=t.toString(16);return 1==t.length?"0"+t:t}function g(t,e,i){return null!=e&&null!=i||(t=t.bbox(),null==e?e=t.width/t.height*i:null==i&&(i=t.height/t.width*e)),{width:e,height:i}}function u(t,e,i){return{x:e*t.a+i*t.c,y:e*t.b+i*t.d}}function p(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function f(t){for(var e=t.childNodes.length-1;0<=e;e--)t.childNodes[e]instanceof s.SVGElement&&f(t.childNodes[e]);return h.adopt(t).id(h.eid(t.nodeName))}function x(t){return 1e-37<Math.abs(t)?t:0}["fill","stroke"].forEach(function(i){var t={};t[i]=function(t){if(void 0===t)return this;if("string"==typeof t||h.Color.isRgb(t)||t&&"function"==typeof t.fill)this.attr(i,t);else for(var e=a[i].length-1;0<=e;e--)null!=t[a[i][e]]&&this.attr(a.prefix(i,a[i][e]),t[a[i][e]]);return this},h.extend(h.Element,h.FX,t)}),h.extend(h.Element,h.FX,{translate:function(t,e){return this.transform({x:t,y:e})},matrix:function(t){return this.attr("transform",new h.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new h.Number(t).plus(this instanceof h.FX?0:this.x()),!0)},dy:function(t){return this.y(new h.Number(t).plus(this instanceof h.FX?0:this.y()),!0)}}),h.extend(h.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),h.Set=h.invent({create:function(t){Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){for(var t=[].slice.call(arguments),e=0,i=t.length;e<i;e++)this.members.push(t[e]);return this},remove:function(t){t=this.index(t);return-1<t&&this.members.splice(t,1),this},each:function(t){for(var e=0,i=this.members.length;e<i;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return 0<=this.index(t)},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(t){return new h.Set(t)}}}),h.FX.Set=h.invent({create:function(t){this.set=t}}),h.Set.inherit=function(){var t,e=[];for(t in h.Shape.prototype)"function"==typeof h.Shape.prototype[t]&&"function"!=typeof h.Set.prototype[t]&&e.push(t);for(t in e.forEach(function(i){h.Set.prototype[i]=function(){for(var t=0,e=this.members.length;t<e;t++)this.members[t]&&"function"==typeof this.members[t][i]&&this.members[t][i].apply(this.members[t],arguments);return"animate"==i?this.fx||(this.fx=new h.FX.Set(this)):this}}),e=[],h.FX.prototype)"function"==typeof h.FX.prototype[t]&&"function"!=typeof h.FX.Set.prototype[t]&&e.push(t);e.forEach(function(i){h.FX.Set.prototype[i]=function(){for(var t=0,e=this.set.members.length;t<e;t++)this.set.members[t].fx[i].apply(this.set.members[t].fx,arguments);return this}})},h.extend(h.Element,{}),h.extend(h.Element,{remember:function(t,e){if("object"===v(t))for(var i in t)this.remember(i,t[i]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;0<=t;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),h.get=function(e){var t=o.getElementById(function(){var t=(e||"").toString().match(h.regex.reference);if(t)return t[1]}()||e);return h.adopt(t)},h.select=function(t,e){return new h.Set(h.utils.map((e||o).querySelectorAll(t),function(t){return h.adopt(t)}))},h.extend(h.Parent,{select:function(t){return h.select(t,this.node)}});var b,m="abcdef".split("");return"function"!=typeof s.CustomEvent?((b=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var i=o.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}).prototype=s.Event.prototype,h.CustomEvent=b):h.CustomEvent=s.CustomEvent,h},"function"==typeof define&&define.amd?define(function(){return We(Oe,Oe.document)}):"object"===("undefined"==typeof exports?"undefined":v(exports))&&"undefined"!=typeof module?module.exports=Oe.document?We(Oe,Oe.document):function(t){return We(t,t.document)}:Oe.SVG=We(Oe,Oe.document),function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(t,e){return this.add(t,e),!t.attr("in")&&this.autoSetIn&&t.attr("in",this.source),t.attr("result")||t.attr("result",t),t},blend:function(t,e,i){return this.put(new SVG.BlendEffect(t,e,i))},colorMatrix:function(t,e){return this.put(new SVG.ColorMatrixEffect(t,e))},convolveMatrix:function(t){return this.put(new SVG.ConvolveMatrixEffect(t))},componentTransfer:function(t){return this.put(new SVG.ComponentTransferEffect(t))},composite:function(t,e,i){return this.put(new SVG.CompositeEffect(t,e,i))},flood:function(t,e){return this.put(new SVG.FloodEffect(t,e))},offset:function(t,e){return this.put(new SVG.OffsetEffect(t,e))},image:function(t){return this.put(new SVG.ImageEffect(t))},merge:function(){var t,e=[void 0];for(t in arguments)e.push(arguments[t]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,e)))},gaussianBlur:function(t,e){return this.put(new SVG.GaussianBlurEffect(t,e))},morphology:function(t,e){return this.put(new SVG.MorphologyEffect(t,e))},diffuseLighting:function(t,e,i){return this.put(new SVG.DiffuseLightingEffect(t,e,i))},displacementMap:function(t,e,i,a,s){return this.put(new SVG.DisplacementMapEffect(t,e,i,a,s))},specularLighting:function(t,e,i,a){return this.put(new SVG.SpecularLightingEffect(t,e,i,a))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(t,e,i,a,s){return this.put(new SVG.TurbulenceEffect(t,e,i,a,s))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(t){var e=this.put(new SVG.Filter);return"function"==typeof t&&t.call(e,e),e}}),SVG.extend(SVG.Container,{filter:function(t){return this.defs().filter(t)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(t){return this.filterer=t instanceof SVG.Element?t:this.doc().filter(t),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(t){return this.filterer&&!0===t&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",t)},result:function(t){return null==t?this.attr("result"):this.attr("result",t)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",t)},result:function(t){return null==t?this.attr("result"):this.attr("result",t)},toString:function(){return this.result()}}});var t={blend:function(t,e){return this.parent()&&this.parent().blend(this,t,e)},colorMatrix:function(t,e){return this.parent()&&this.parent().colorMatrix(t,e).in(this)},convolveMatrix:function(t){return this.parent()&&this.parent().convolveMatrix(t).in(this)},componentTransfer:function(t){return this.parent()&&this.parent().componentTransfer(t).in(this)},composite:function(t,e){return this.parent()&&this.parent().composite(this,t,e)},flood:function(t,e){return this.parent()&&this.parent().flood(t,e)},offset:function(t,e){return this.parent()&&this.parent().offset(t,e).in(this)},image:function(t){return this.parent()&&this.parent().image(t)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(t,e){return this.parent()&&this.parent().gaussianBlur(t,e).in(this)},morphology:function(t,e){return this.parent()&&this.parent().morphology(t,e).in(this)},diffuseLighting:function(t,e,i){return this.parent()&&this.parent().diffuseLighting(t,e,i).in(this)},displacementMap:function(t,e,i,a){return this.parent()&&this.parent().displacementMap(this,t,e,i,a)},specularLighting:function(t,e,i,a){return this.parent()&&this.parent().specularLighting(t,e,i,a).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(t,e,i,a,s){return this.parent()&&this.parent().turbulence(t,e,i,a,s).in(this)}};SVG.extend(SVG.Effect,t),SVG.extend(SVG.ParentEffect,t),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(t){this.attr("in",t)}}});var e={blend:function(t,e,i){this.attr({in:t,in2:e,mode:i||"normal"})},colorMatrix:function(t,e){"matrix"==t&&(e=a(e)),this.attr({type:t,values:void 0===e?null:e})},convolveMatrix:function(t){t=a(t),this.attr({order:Math.sqrt(t.split(" ").length),kernelMatrix:t})},composite:function(t,e,i){this.attr({in:t,in2:e,operator:i})},flood:function(t,e){this.attr("flood-color",t),null!=e&&this.attr("flood-opacity",e)},offset:function(t,e){this.attr({dx:t,dy:e})},image:function(t){this.attr("href",t,SVG.xlink)},displacementMap:function(t,e,i,a,s){this.attr({in:t,in2:e,scale:i,xChannelSelector:a,yChannelSelector:s})},gaussianBlur:function(t,e){null!=t||null!=e?this.attr("stdDeviation",function(t){if(!Array.isArray(t))return t;for(var e=0,i=t.length,a=[];e<i;e++)a.push(t[e]);return a.join(" ")}(Array.prototype.slice.call(arguments))):this.attr("stdDeviation","0 0")},morphology:function(t,e){this.attr({operator:t,radius:e})},tile:function(){},turbulence:function(t,e,i,a,s){this.attr({numOctaves:e,seed:i,stitchTiles:a,baseFrequency:t,type:s})}},t={merge:function(){if(arguments[0]instanceof SVG.Set){var e=this;arguments[0].each(function(t){this instanceof SVG.MergeNode?e.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&e.put(new SVG.MergeNode(this))})}else for(var t=Array.isArray(arguments[0])?arguments[0]:arguments,i=0;i<t.length;i++)t[i]instanceof SVG.MergeNode?this.put(t[i]):this.put(new SVG.MergeNode(t[i]))},componentTransfer:function(e){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(t){this[t]=new SVG["Func"+t.toUpperCase()]("identity"),this.rgb.add(this[t]),this.node.appendChild(this[t].node)}.bind(this)),e)for(var t in e.rgb&&(["r","g","b"].forEach(function(t){this[t].attr(e.rgb)}.bind(this)),delete e.rgb),e)this[t].attr(e[t])},diffuseLighting:function(t,e,i){this.attr({surfaceScale:t,diffuseConstant:e,kernelUnitLength:i})},specularLighting:function(t,e,i,a){this.attr({surfaceScale:t,diffuseConstant:e,specularExponent:i,kernelUnitLength:a})}},i={distantLight:function(t,e){this.attr({azimuth:t,elevation:e})},pointLight:function(t,e,i){this.attr({x:t,y:e,z:i})},spotLight:function(t,e,i,a,s,o){this.attr({x:t,y:e,z:i,pointsAtX:a,pointsAtY:s,pointsAtZ:o})},mergeNode:function(t){this.attr("in",t)}};function a(t){return(t=Array.isArray(t)?new SVG.Array(t):t).toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function s(){var t,e=function(){};for(t in"function"==typeof arguments[arguments.length-1]&&(e=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var i in arguments[t])e(arguments[t][i],i,arguments[t])}["r","g","b","a"].forEach(function(t){i["Func"+t.toUpperCase()]=function(t){switch(this.attr("type",t),t){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),s(e,function(t,e){var i=e.charAt(0).toUpperCase()+e.slice(1);SVG[i+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),t.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),s(t,function(t,e){var i=e.charAt(0).toUpperCase()+e.slice(1);SVG[i+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),t.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),s(i,function(t,e){var i=e.charAt(0).toUpperCase()+e.slice(1);SVG[i]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),t.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(t){return t instanceof SVG.MergeNode?this.add(t,0):this.add(new SVG.MergeNode(t),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",t)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),SVG.extend(SVG.PathArray,{morph:function(t){for(var e=this.value,i=this.parse(t),a=0,s=0;!1!==a||!1!==s;){var o,r=si(e,!1!==a&&a+1),n=si(i,!1!==s&&s+1);!1===a&&(a=0==(o=new SVG.PathArray(l.start).bbox()).height||0==o.width?e.push(e[0])-1:e.push(["M",o.x+o.width/2,o.y+o.height/2])-1),!1===s&&(s=0==(o=new SVG.PathArray(l.dest).bbox()).height||0==o.width?i.push(i[0])-1:i.push(["M",o.x+o.width/2,o.y+o.height/2])-1);var l=function(t,e,i,a,s,o,r){for(var n=t.slice(e,i||r),l=a.slice(s,o||r),h=0,c={pos:[0,0],start:[0,0]},d={pos:[0,0],start:[0,0]};n[h]=ei.call(c,n[h]),l[h]=ei.call(d,l[h]),n[h][0]!=l[h][0]||"M"==n[h][0]||"A"==n[h][0]&&(n[h][4]!=l[h][4]||n[h][5]!=l[h][5])?(Array.prototype.splice.apply(n,[h,1].concat(ai.call(c,n[h]))),Array.prototype.splice.apply(l,[h,1].concat(ai.call(d,l[h])))):(n[h]=ii.call(c,n[h]),l[h]=ii.call(d,l[h])),++h!=n.length||h!=l.length;)h==n.length&&n.push(["C",c.pos[0],c.pos[1],c.pos[0],c.pos[1],c.pos[0],c.pos[1]]),h==l.length&&l.push(["C",d.pos[0],d.pos[1],d.pos[0],d.pos[1],d.pos[0],d.pos[1]]);return{start:n,dest:l}}(e,a,r,i,s,n),e=e.slice(0,a).concat(l.start,!1===r?[]:e.slice(r)),i=i.slice(0,s).concat(l.dest,!1===n?[]:i.slice(n)),a=!1!==r&&a+l.start.length,s=!1!==n&&s+l.dest.length}return this.value=e,this.destination=new SVG.PathArray,this.destination.value=i,this}}),function(){function a(t){t.remember("_draggable",this),this.el=t}a.prototype.init=function(t,e){var i=this;this.constraint=t,this.value=e,this.el.on("mousedown.drag",function(t){i.start(t)}),this.el.on("touchstart.drag",function(t){i.start(t)})},a.prototype.transformPoint=function(t,e){t=(t=t||window.event).changedTouches&&t.changedTouches[0]||t;return this.p.x=t.clientX-(e||0),this.p.y=t.clientY,this.p.matrixTransform(this.m)},a.prototype.getBBox=function(){var t=this.el.bbox();return this.el instanceof SVG.Nested&&(t=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(t.x=this.el.x(),t.y=this.el.y()),t},a.prototype.start=function(t){if("click"!=t.type&&"mousedown"!=t.type&&"mousemove"!=t.type||1==(t.which||t.buttons)){var e=this;if(this.el.fire("beforedrag",{event:t,handler:this}),!this.el.event().defaultPrevented){t.preventDefault(),t.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var i,a=this.getBBox();if(this.el instanceof SVG.Text)switch(i=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":i/=2;break;case"start":i=0}this.startPoints={point:this.transformPoint(t,i),box:a,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(t){e.drag(t)}),SVG.on(window,"touchmove.drag",function(t){e.drag(t)}),SVG.on(window,"mouseup.drag",function(t){e.end(t)}),SVG.on(window,"touchend.drag",function(t){e.end(t)}),this.el.fire("dragstart",{event:t,p:this.startPoints.point,m:this.m,handler:this})}}},a.prototype.drag=function(t){var e=this.getBBox(),i=this.transformPoint(t),a=this.startPoints.box.x+i.x-this.startPoints.point.x,s=this.startPoints.box.y+i.y-this.startPoints.point.y,o=this.constraint,r=i.x-this.startPoints.point.x,n=i.y-this.startPoints.point.y;return this.el.fire("dragmove",{event:t,p:i,m:this.m,handler:this}),this.el.event().defaultPrevented||("function"==typeof o?(!0===(t="boolean"==typeof(t=o.call(this.el,a,s,this.m))?{x:t,y:t}:t).x?this.el.x(a):!1!==t.x&&this.el.x(t.x),!0===t.y?this.el.y(s):!1!==t.y&&this.el.y(t.y)):"object"==typeof o&&(null!=o.minX&&a<o.minX?r=(a=o.minX)-this.startPoints.box.x:null!=o.maxX&&a>o.maxX-e.width&&(r=(a=o.maxX-e.width)-this.startPoints.box.x),null!=o.minY&&s<o.minY?n=(s=o.minY)-this.startPoints.box.y:null!=o.maxY&&s>o.maxY-e.height&&(n=(s=o.maxY-e.height)-this.startPoints.box.y),null!=o.snapToGrid&&(a-=a%o.snapToGrid,s-=s%o.snapToGrid,r-=r%o.snapToGrid,n-=n%o.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:r,y:n},!0):this.el.move(a,s))),i},a.prototype.end=function(t){var e=this.drag(t);this.el.fire("dragend",{event:t,p:e,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(t,e){"function"!=typeof t&&"object"!=typeof t||(e=t,t=!0);var i=this.remember("_draggable")||new a(this);return(t=void 0===t||t)?i.init(e||{},t):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),ti.prototype.init=function(t,e){var i=this.el.bbox();this.options={};var a=this.el.selectize.defaults.points;for(s in this.el.selectize.defaults)this.options[s]=this.el.selectize.defaults[s],void 0!==e[s]&&(this.options[s]=e[s]);var s,o=["points","pointsExclude"];for(s in o){var r=this.options[o[s]];"string"==typeof r?r=0<r.length?r.split(/\s*,\s*/i):[]:"boolean"==typeof r&&"points"===o[s]&&(r=r?a:[]),this.options[o[s]]=r}this.options.points=[a,this.options.points].reduce(function(t,e){return t.filter(function(t){return-1<e.indexOf(t)})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(t,e){return t.filter(function(t){return e.indexOf(t)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(i.x,i.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(t):this.selectRect(t),this.observe(),this.cleanup()},ti.prototype.selectPoints=function(t){return this.pointSelection.isSelected=t,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},ti.prototype.getPointArray=function(){var e=this.el.bbox();return this.el.array().valueOf().map(function(t){return[t[0]-e.x,t[1]-e.y]})},ti.prototype.drawPoints=function(){for(var s=this,t=this.getPointArray(),e=0,i=t.length;e<i;++e){var a=function(a){return function(t){(t=t||window.event).preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation();var e=t.pageX||t.touches[0].pageX,i=t.pageY||t.touches[0].pageY;s.el.fire("point",{x:e,y:i,i:a,event:t})}}(e),a=this.drawPoint(t[e][0],t[e][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",a).on("mousedown",a);this.pointSelection.set.add(a)}},ti.prototype.drawPoint=function(t,e){var i=this.options.pointType;switch(i){case"circle":return this.drawCircle(t,e);case"rect":return this.drawRect(t,e);default:if("function"==typeof i)return i.call(this,t,e);throw new Error("Unknown "+i+" point type!")}},ti.prototype.drawCircle=function(t,e){return this.nested.circle(this.options.pointSize).center(t,e)},ti.prototype.drawRect=function(t,e){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(t,e)},ti.prototype.updatePointSelection=function(){var e=this.getPointArray();this.pointSelection.set.each(function(t){this.cx()===e[t][0]&&this.cy()===e[t][1]||this.center(e[t][0],e[t][1])})},ti.prototype.updateRectSelection=function(){var t,i=this,a=this.el.bbox();this.rectSelection.set.get(0).attr({width:a.width,height:a.height}),this.options.points.length&&this.options.points.map(function(t,e){t=i.pointCoords(t,a);i.rectSelection.set.get(e+1).center(t.x,t.y)}),this.options.rotationPoint&&(t=this.rectSelection.set.length(),this.rectSelection.set.get(t-1).center(a.width/2,20))},ti.prototype.selectRect=function(t){var s=this,a=this.el.bbox();function o(a){return function(t){(t=t||window.event).preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation();var e=t.pageX||t.touches[0].pageX,i=t.pageY||t.touches[0].pageY;s.el.fire(a,{x:e,y:i,event:t})}}this.rectSelection.isSelected=t,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(a.width,a.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(t,e){var i=s.pointCoords(t,a),t=s.drawPoint(i.x,i.y).attr("class",s.options.classPoints+"_"+t).on("mousedown",o(t)).on("touchstart",o(t));s.rectSelection.set.add(t)}),this.rectSelection.set.each(function(){this.addClass(s.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))&&(t=function(t){(t=t||window.event).preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation();var e=t.pageX||t.touches[0].pageX,i=t.pageY||t.touches[0].pageY;s.el.fire("rot",{x:e,y:i,event:t})},t=this.drawPoint(a.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",t).on("mousedown",t),this.rectSelection.set.add(t))},ti.prototype.handler=function(){var t=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(t.x,t.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},ti.prototype.observe=function(){var t=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){t.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch(t){}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){t.handler()})},ti.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(t,e){return"object"==typeof t&&(e=t,t=!0),(this.remember("_selectHandler")||new ti(this)).init(void 0===t||t,e||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"},function(){!function(){function e(t){t.remember("_resizeHandler",this),this.el=t,this.parameters={},this.lastUpdateCall=null,this.p=t.doc().node.createSVGPoint()}e.prototype.transformPoint=function(t,e,i){return this.p.x=t-(this.offset.x-window.pageXOffset),this.p.y=e-(this.offset.y-window.pageYOffset),this.p.matrixTransform(i||this.m)},e.prototype._extractPosition=function(t){return{x:(null!=t.clientX?t:t.touches[0]).clientX,y:(null!=t.clientY?t:t.touches[0]).clientY}},e.prototype.init=function(t){var e=this;if(this.stop(),"stop"!==t){for(var i in this.options={},this.el.resize.defaults)this.options[i]=this.el.resize.defaults[i],void 0!==t[i]&&(this.options[i]=t[i]);this.el.on("lt.resize",function(t){e.resize(t||window.event)}),this.el.on("rt.resize",function(t){e.resize(t||window.event)}),this.el.on("rb.resize",function(t){e.resize(t||window.event)}),this.el.on("lb.resize",function(t){e.resize(t||window.event)}),this.el.on("t.resize",function(t){e.resize(t||window.event)}),this.el.on("r.resize",function(t){e.resize(t||window.event)}),this.el.on("b.resize",function(t){e.resize(t||window.event)}),this.el.on("l.resize",function(t){e.resize(t||window.event)}),this.el.on("rot.resize",function(t){e.resize(t||window.event)}),this.el.on("point.resize",function(t){e.resize(t||window.event)}),this.update()}},e.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},e.prototype.resize=function(t){var e=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var i=this._extractPosition(t.detail.event);switch(this.parameters={type:this.el.type,p:this.transformPoint(i.x,i.y),x:t.detail.x,y:t.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==t.detail.i&&(i=this.el.array().valueOf(),this.parameters.i=t.detail.i,this.parameters.pointCoords=[i[t.detail.i][0],i[t.detail.i][1]]),t.type){case"lt":this.calc=function(t,e){e=this.snapToGrid(t,e);if(0<this.parameters.box.width-e[0]&&0<this.parameters.box.height-e[1]){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+e[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-e[0]);e=this.checkAspectRatio(e),this.el.move(this.parameters.box.x+e[0],this.parameters.box.y+e[1]).size(this.parameters.box.width-e[0],this.parameters.box.height-e[1])}};break;case"rt":this.calc=function(t,e){e=this.snapToGrid(t,e,2);if(0<this.parameters.box.width+e[0]&&0<this.parameters.box.height-e[1]){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-e[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+e[0]);e=this.checkAspectRatio(e,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+e[1]).size(this.parameters.box.width+e[0],this.parameters.box.height-e[1])}};break;case"rb":this.calc=function(t,e){e=this.snapToGrid(t,e,0);if(0<this.parameters.box.width+e[0]&&0<this.parameters.box.height+e[1]){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-e[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+e[0]);e=this.checkAspectRatio(e),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+e[0],this.parameters.box.height+e[1])}};break;case"lb":this.calc=function(t,e){e=this.snapToGrid(t,e,1);if(0<this.parameters.box.width-e[0]&&0<this.parameters.box.height+e[1]){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+e[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-e[0]);e=this.checkAspectRatio(e,!0),this.el.move(this.parameters.box.x+e[0],this.parameters.box.y).size(this.parameters.box.width-e[0],this.parameters.box.height+e[1])}};break;case"t":this.calc=function(t,e){e=this.snapToGrid(t,e,2);0<this.parameters.box.height-e[1]&&"text"!==this.parameters.type&&this.el.move(this.parameters.box.x,this.parameters.box.y+e[1]).height(this.parameters.box.height-e[1])};break;case"r":this.calc=function(t,e){e=this.snapToGrid(t,e,0);0<this.parameters.box.width+e[0]&&"text"!==this.parameters.type&&this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+e[0])};break;case"b":this.calc=function(t,e){e=this.snapToGrid(t,e,0);0<this.parameters.box.height+e[1]&&"text"!==this.parameters.type&&this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+e[1])};break;case"l":this.calc=function(t,e){e=this.snapToGrid(t,e,1);0<this.parameters.box.width-e[0]&&"text"!==this.parameters.type&&this.el.move(this.parameters.box.x+e[0],this.parameters.box.y).width(this.parameters.box.width-e[0])};break;case"rot":this.calc=function(t,e){var i=t+this.parameters.p.x,t=e+this.parameters.p.y,e=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),i=Math.atan2(t-this.parameters.box.y-this.parameters.box.height/2,i-this.parameters.box.x-this.parameters.box.width/2),e=this.parameters.rotation+180*(i-e)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(e-e%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(t,e){t=this.snapToGrid(t,e,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),e=this.el.array().valueOf();e[this.parameters.i][0]=this.parameters.pointCoords[0]+t[0],e[this.parameters.i][1]=this.parameters.pointCoords[1]+t[1],this.el.plot(e)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:t}),SVG.on(window,"touchmove.resize",function(t){e.update(t||window.event)}),SVG.on(window,"touchend.resize",function(){e.done()}),SVG.on(window,"mousemove.resize",function(t){e.update(t||window.event)}),SVG.on(window,"mouseup.resize",function(){e.done()})},e.prototype.update=function(t){var e,i;t?(e=this._extractPosition(t),e=(i=this.transformPoint(e.x,e.y)).x-this.parameters.p.x,i=i.y-this.parameters.p.y,this.lastUpdateCall=[e,i],this.calc(e,i),this.el.fire("resizing",{dx:e,dy:i,event:t})):this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},e.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},e.prototype.snapToGrid=function(t,e,i,a){var s=void 0!==a?[(i+t)%this.options.snapToGrid,(a+e)%this.options.snapToGrid]:[(this.parameters.box.x+t+(1&(i=null==i?3:i)?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+e+(2&i?0:this.parameters.box.height))%this.options.snapToGrid];return t<0&&(s[0]-=this.options.snapToGrid),e<0&&(s[1]-=this.options.snapToGrid),t-=Math.abs(s[0])<this.options.snapToGrid/2?s[0]:s[0]-(t<0?-this.options.snapToGrid:this.options.snapToGrid),e-=Math.abs(s[1])<this.options.snapToGrid/2?s[1]:s[1]-(e<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(t,e,i,a)},e.prototype.constraintToBox=function(t,e,i,a){var s,o=this.options.constraint||{},i=void 0!==a?(s=i,a):(s=this.parameters.box.x+(1&i?0:this.parameters.box.width),this.parameters.box.y+(2&i?0:this.parameters.box.height));return void 0!==o.minX&&s+t<o.minX&&(t=o.minX-s),void 0!==o.maxX&&s+t>o.maxX&&(t=o.maxX-s),void 0!==o.minY&&i+e<o.minY&&(e=o.minY-i),[t,e=void 0!==o.maxY&&i+e>o.maxY?o.maxY-i:e]},e.prototype.checkAspectRatio=function(t,e){if(!this.options.saveAspectRatio)return t;var i=t.slice(),a=this.parameters.box.width/this.parameters.box.height,s=this.parameters.box.width+t[0],o=this.parameters.box.height-t[1],t=s/o;return t<a?(i[1]=s/a-this.parameters.box.height,e&&(i[1]=-i[1])):a<t&&(i[0]=this.parameters.box.width-o*a,e&&(i[0]=-i[0])),i},SVG.extend(SVG.Element,{resize:function(t){return(this.remember("_resizeHandler")||new e(this)).init(t||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}.call(this)}(),Be='.apexcharts-canvas {\n  position: relative;\n  user-select: none;\n  /* cannot give overflow: hidden as it will crop tooltips which overflow outside chart area */\n}\n\n\n/* scrollbar is not visible by default for legend, hence forcing the visibility */\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px;\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, .5);\n  box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n}\n\n\n.apexcharts-inner {\n  position: relative;\n}\n\n.apexcharts-text tspan {\n  font-family: inherit;\n}\n\n.legend-mouseover-inactive {\n  transition: 0.15s ease all;\n  opacity: 0.20;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0;\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255, 255, 255, 0.96);\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30, 30, 30, 0.8);\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit;\n}\n\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #ECEFF1;\n  border-bottom: 1px solid #ddd;\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0, 0, 0, 0.7);\n  border-bottom: 1px solid #333;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  font-weight: 600;\n  margin-left: 5px;\n}\n\n.apexcharts-tooltip-text-y-label:empty,\n.apexcharts-tooltip-text-y-value:empty,\n.apexcharts-tooltip-text-goals-label:empty,\n.apexcharts-tooltip-text-goals-value:empty,\n.apexcharts-tooltip-text-z-value:empty {\n  display: none;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  font-weight: 600;\n}\n\n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-goals-group, \n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  display: flex;\n}\n.apexcharts-tooltip-text-goals-label:not(:empty),\n.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px;\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0px;\n  margin-right: 10px;\n  border-radius: 50%;\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,\n.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px;\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0 !important;\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-box, .apexcharts-custom-tooltip {\n  padding: 4px 8px;\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse;\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0;\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: bold;\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px;\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777;\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: bold;\n  display: block;\n  margin-bottom: 5px;\n}\n\n.apexcharts-xaxistooltip {\n  opacity: 0;\n  padding: 9px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-xaxistooltip:after,\n.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-left: -6px;\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-left: -7px;\n}\n\n.apexcharts-xaxistooltip-bottom:after,\n.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%;\n}\n\n.apexcharts-xaxistooltip-top:after,\n.apexcharts-xaxistooltip-top:before {\n  top: 100%;\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #ECEFF1;\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #ECEFF1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-yaxistooltip {\n  opacity: 0;\n  padding: 4px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-yaxistooltip:after,\n.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-top: -6px;\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-top: -7px;\n}\n\n.apexcharts-yaxistooltip-left:after,\n.apexcharts-yaxistooltip-left:before {\n  left: 100%;\n}\n\n.apexcharts-yaxistooltip-right:after,\n.apexcharts-yaxistooltip-right:before {\n  right: 100%;\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1;\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none;\n}\n\n.apexcharts-xcrosshairs,\n.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,\n.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0;\n}\n\n.apexcharts-selection-rect {\n  cursor: move;\n}\n\n.svg_select_boundingRect, .svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n}\n.apexcharts-selection-rect + g .svg_select_boundingRect,\n.apexcharts-selection-rect + g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden;\n}\n\n.apexcharts-selection-rect + g .svg_select_points_l,\n.apexcharts-selection-rect + g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible;\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2;\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon,\n.apexcharts-reset-icon,\n.apexcharts-pan-icon,\n.apexcharts-selection-icon,\n.apexcharts-menu-icon,\n.apexcharts-toolbar-custom-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6E8192;\n  text-align: center;\n}\n\n.apexcharts-zoom-icon svg,\n.apexcharts-zoomin-icon svg,\n.apexcharts-zoomout-icon svg,\n.apexcharts-reset-icon svg,\n.apexcharts-menu-icon svg {\n  fill: #6E8192;\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(0.76)\n}\n\n.apexcharts-theme-dark .apexcharts-zoom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomin-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomout-icon svg,\n.apexcharts-theme-dark .apexcharts-reset-icon svg,\n.apexcharts-theme-dark .apexcharts-pan-icon svg,\n.apexcharts-theme-dark .apexcharts-selection-icon svg,\n.apexcharts-theme-dark .apexcharts-menu-icon svg,\n.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg {\n  fill: #f3f4f5;\n}\n\n.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg {\n  fill: #008FFB;\n}\n\n.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,\n.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg,\n.apexcharts-theme-light .apexcharts-reset-icon:hover svg,\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg {\n  fill: #333;\n}\n\n.apexcharts-selection-icon,\n.apexcharts-menu-icon {\n  position: relative;\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px;\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-reset-icon,\n.apexcharts-menu-icon {\n  transform: scale(0.85);\n}\n\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  transform: scale(0.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px;\n}\n\n.apexcharts-pan-icon {\n  transform: scale(0.62);\n  position: relative;\n  left: 1px;\n  top: 0px;\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6E8192;\n  stroke-width: 2;\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008FFB;\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333;\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0px 6px 2px 6px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: 0.15s ease all;\n  pointer-events: none;\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee;\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n}\n\n@media screen and (min-width: 768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n    opacity: 1;\n  }\n}\n\n.apexcharts-datalabel.apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-pie-label,\n.apexcharts-datalabels,\n.apexcharts-datalabel,\n.apexcharts-datalabel-label,\n.apexcharts-datalabel-value {\n  cursor: default;\n  pointer-events: none;\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: 0.3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease;\n}\n\n.apexcharts-canvas .apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-hide .apexcharts-series-points {\n  opacity: 0;\n}\n\n.apexcharts-gridline,\n.apexcharts-annotation-rect,\n.apexcharts-tooltip .apexcharts-marker,\n.apexcharts-area-series .apexcharts-area,\n.apexcharts-line,\n.apexcharts-zoom-rect,\n.apexcharts-toolbar svg,\n.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-radar-series path,\n.apexcharts-radar-series polygon {\n  pointer-events: none;\n}\n\n\n/* markers */\n\n.apexcharts-marker {\n  transition: 0.15s ease all;\n}\n\n@keyframes opaque {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n\n/* Resize generated styles */\n\n@keyframes resizeanim {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n}\n\n.resize-triggers,\n.resize-triggers>div,\n.contract-trigger:before {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n\n.resize-triggers>div {\n  background: #eee;\n  overflow: auto;\n}\n\n.contract-trigger:before {\n  width: 200%;\n  height: 200%;\n}',_e=(Ve=void 0===Ve?{}:Ve).insertAt,"undefined"!=typeof document&&(Ge=document.head||document.getElementsByTagName("head")[0],(Ve=document.createElement("style")).type="text/css","top"===_e&&Ge.firstChild?Ge.insertBefore(Ve,Ge.firstChild):Ge.appendChild(Ve),Ve.styleSheet?Ve.styleSheet.cssText=Be:Ve.appendChild(document.createTextNode(Be))),function(){function i(t){var e=t.__resizeTriggers__,i=e.firstElementChild,t=e.lastElementChild,e=i?i.firstElementChild:null;t&&(t.scrollLeft=t.scrollWidth,t.scrollTop=t.scrollHeight),e&&(e.style.width=i.offsetWidth+1+"px",e.style.height=i.offsetHeight+1+"px"),i&&(i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight)}function a(e){var t=this;i(this),this.__resizeRAF__&&r(this.__resizeRAF__),this.__resizeRAF__=o(function(){t.offsetWidth==t.__resizeLast__.width&&t.offsetHeight==t.__resizeLast__.height||(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(t){t.call(e)}))})}var e,s,o=(e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)},function(t){return e(t)}),r=(s=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(t){return s(t)}),t=!1,n="animationstart",l="Webkit Moz O ms".split(" "),h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),c=document.createElement("fakeelement");if(!1===(t=void 0!==c.style.animationName?!0:t))for(var d=0;d<l.length;d++)if(void 0!==c.style[l[d]+"AnimationName"]){n=h[d];break}window.addResizeListener=function(e,t){e.__resizeTriggers__||("static"==getComputedStyle(e).position&&(e.style.position="relative"),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=document.createElement("div")).className="resize-triggers",e.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',e.appendChild(e.__resizeTriggers__),i(e),e.addEventListener("scroll",a,!0),n&&e.__resizeTriggers__.addEventListener(n,function(t){"resizeanim"==t.animationName&&i(e)})),e.__resizeListeners__.push(t)},window.removeResizeListener=function(t,e){t&&(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||(t.removeEventListener("scroll",a),t.__resizeTriggers__.parentNode&&(t.__resizeTriggers__=!t.removeChild(t.__resizeTriggers__))))}}(),void 0===window.Apex&&(window.Apex={});var oi=(o(li,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new S(this.ctx),this.ctx.axes=new ot(this.ctx),this.ctx.core=new qe(this.ctx.el,this.ctx),this.ctx.config=new j({}),this.ctx.data=new Z(this.ctx),this.ctx.grid=new tt(this.ctx),this.ctx.graphics=new z(this.ctx),this.ctx.coreUtils=new P(this.ctx),this.ctx.crosshairs=new rt(this.ctx),this.ctx.events=new t(this.ctx),this.ctx.exports=new Q(this.ctx),this.ctx.localization=new st(this.ctx),this.ctx.options=new X,this.ctx.responsive=new nt(this.ctx),this.ctx.series=new O(this.ctx),this.ctx.theme=new lt(this.ctx),this.ctx.formatters=new $(this.ctx),this.ctx.titleSubtitle=new ht(this.ctx),this.ctx.legend=new xt(this.ctx),this.ctx.toolbar=new bt(this.ctx),this.ctx.dimensions=new pt(this.ctx),this.ctx.updateHelpers=new Ze(this.ctx),this.ctx.zoomPanSelection=new mt(this.ctx),this.ctx.w.globals.tooltip=new Ct(this.ctx)}}]),li),ri=(o(ni,[{key:"clear",value:function(t){t=t.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:t})}},{key:"killSVG",value:function(t){t.each(function(t,e){this.removeClass("*"),this.off(),this.stop()},!0),t.ungroup(),t.clear()}},{key:"clearDomElements",value:function(t){var e=this,i=t.isUpdating,t=this.w.globals.dom.Paper.node;t.parentNode&&t.parentNode.parentNode&&!i&&(t.parentNode.parentNode.style.minHeight="unset");var a=this.w.globals.dom.baseEl;a&&this.ctx.eventList.forEach(function(t){a.removeEventListener(t,e.ctx.events.documentEvent)});t=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(t.Paper),t.Paper.remove(),t.elWrap=null,t.elGraphical=null,t.elAnnotations=null,t.elLegendWrap=null,t.baseEl=null,t.elGridRect=null,t.elGridRectMask=null,t.elGridRectMarkerMask=null,t.elForecastMask=null,t.elNonForecastMask=null,t.elDefs=null}}]),ni);function ni(t){s(this,ni),this.ctx=t,this.w=t.w}function li(t){s(this,li),this.ctx=t,this.w=t.w}return o(hi,[{key:"render",value:function(){var s=this;return new Promise(function(t,e){if(null!==s.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),s.w.config.chart.id&&Apex._chartInstances.push({id:s.w.globals.chartID,group:s.w.config.chart.group,chart:s}),s.setLocale(s.w.config.chart.defaultLocale);var i=s.w.config.chart.events.beforeMount;"function"==typeof i&&i(s,s.w),s.events.fireEvent("beforeMount",[s,s.w]),window.addEventListener("resize",s.windowResizeHandler),window.addResizeListener(s.el.parentNode,s.parentResizeHandler);var a=s.create(s.w.config.series,{});if(!a)return t(s);s.mount(a).then(function(){"function"==typeof s.w.config.chart.events.mounted&&s.w.config.chart.events.mounted(s,s.w),s.events.fireEvent("mounted",[s,s.w]),t(a)}).catch(function(t){e(t)})}else e(new Error("Element not found"))})}},{key:"create",value:function(t,e){var i=this.w;new oi(this).initModules();var a=this.w.globals;if(a.noData=!1,a.animationEnded=!1,this.responsive.checkResponsiveConfig(e),i.config.xaxis.convertedCatToNumeric&&new _(i.config).convertCatToNumericXaxis(i.config,this.ctx),null===this.el)return a.animationEnded=!0,null;if(this.core.setupElements(),"treemap"===i.config.chart.type&&(i.config.grid.show=!1,i.config.yaxis[0].show=!1),0===a.svgWidth)return a.animationEnded=!0,null;e=P.checkComboSeries(t);a.comboCharts=e.comboCharts,a.comboBarCount=e.comboBarCount;e=t.every(function(t){return t.data&&0===t.data.length});0!==t.length&&!e||this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(t),this.theme.init(),new R(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),a.noData&&a.collapsedSeries.length!==a.series.length&&!i.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),a.axisCharts&&(this.core.coreCalculations(),"category"!==i.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=i.globals.minX,this.ctx.toolbar.maxX=i.globals.maxX),this.formatters.heatmapLabelFormatters(),this.dimensions.plotCoords();e=this.core.xySettings();this.grid.createGridMask();a=this.core.plotChartType(t,e),t=new D(this);t.bringForward(),i.config.dataLabels.background.enabled&&t.dataLabelsBackground(),this.core.shiftGraphPosition();t={plot:{left:i.globals.translateX,top:i.globals.translateY,width:i.globals.gridWidth,height:i.globals.gridHeight}};return{elGraph:a,xyRatios:e,elInner:i.globals.dom.elGraphical,dimensions:t}}},{key:"mount",value:function(){var r=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,l=this,h=l.w;return new Promise(function(t,e){if(null===l.el)return e(new Error("Not enough data to display or target element not found"));null!==n&&!h.globals.allSeriesCollapsed||l.series.handleNoData(),"treemap"!==h.config.chart.type&&l.axes.drawAxis(h.config.chart.type,n.xyRatios),l.grid=new tt(l);var i=l.grid.drawGrid();l.annotations=new Y(l),l.annotations.drawImageAnnos(),l.annotations.drawTextAnnos(),"back"===h.config.grid.position&&i&&h.globals.dom.elGraphical.add(i.el);var a,e=new K(r.ctx),s=new at(r.ctx);if(null!==i&&(e.xAxisLabelCorrections(i.xAxisTickWidth),s.setYAxisTextAlignments(),h.config.yaxis.map(function(t,e){-1===h.globals.ignoreYAxisIndexes.indexOf(e)&&s.yAxisTitleRotate(e,t.opposite)})),"back"===h.config.annotations.position&&(h.globals.dom.Paper.add(h.globals.dom.elAnnotations),l.annotations.drawAxesAnnotations()),Array.isArray(n.elGraph))for(var o=0;o<n.elGraph.length;o++)h.globals.dom.elGraphical.add(n.elGraph[o]);else h.globals.dom.elGraphical.add(n.elGraph);"front"===h.config.grid.position&&i&&h.globals.dom.elGraphical.add(i.el),"front"===h.config.xaxis.crosshairs.position&&l.crosshairs.drawXCrosshairs(),"front"===h.config.yaxis[0].crosshairs.position&&l.crosshairs.drawYCrosshairs(),"front"===h.config.annotations.position&&(h.globals.dom.Paper.add(h.globals.dom.elAnnotations),l.annotations.drawAxesAnnotations()),h.globals.noData||(h.config.tooltip.enabled&&!h.globals.noData&&l.w.globals.tooltip.drawTooltip(n.xyRatios),h.globals.axisCharts&&(h.globals.isXNumeric||h.config.xaxis.convertedCatToNumeric||h.globals.isTimelineBar)?(h.config.chart.zoom.enabled||h.config.chart.selection&&h.config.chart.selection.enabled||h.config.chart.pan&&h.config.chart.pan.enabled)&&l.zoomPanSelection.init({xyRatios:n.xyRatios}):(a=h.config.chart.toolbar.tools,["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(t){a[t]=!1})),h.config.chart.toolbar.show&&!h.globals.allSeriesCollapsed&&l.toolbar.createToolbar()),0<h.globals.memory.methodsToExec.length&&h.globals.memory.methodsToExec.forEach(function(t){t.method(t.params,!1,t.context)}),h.globals.axisCharts||h.globals.noData||l.core.resizeNonAxisCharts(),t(l)})}},{key:"destroy",value:function(){window.removeEventListener("resize",this.windowResizeHandler),window.removeResizeListener(this.el.parentNode,this.parentResizeHandler);var i=this.w.config.chart.id;i&&Apex._chartInstances.forEach(function(t,e){t.id===M.escapeString(i)&&Apex._chartInstances.splice(e,1)}),new ri(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(t){var i=this,e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],s=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],o=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],r=this.w;return r.globals.selection=void 0,t.series&&(this.series.resetSeries(!1,!0,!1),t.series.length&&t.series[0].data&&(t.series=t.series.map(function(t,e){return i.updateHelpers._extendSeries(t,e)})),this.updateHelpers.revertDefaultAxisMinMax()),(t=t.xaxis?this.updateHelpers.forceXAxisUpdate(t):t).yaxis&&(t=this.updateHelpers.forceYAxisUpdate(t)),0<r.globals.collapsedSeriesIndices.length&&this.series.clearPreviousPaths(),t.theme&&(t=this.theme.updateThemeOptions(t)),this.updateHelpers._updateOptions(t,e,a,s,o)}},{key:"updateSeries",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(t,e,i)}},{key:"appendSeries",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],a=this.w.config.series.slice();return a.push(t),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(a,e,i)}},{key:"appendData",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.w.globals.dataChanged=!0,this.series.getPreviousPaths();for(var i=this.w.config.series.slice(),a=0;a<i.length;a++)if(null!==t[a]&&void 0!==t[a])for(var s=0;s<t[a].data.length;s++)i[a].data.push(t[a].data[s]);return this.w.config.series=i,e&&(this.w.globals.initialSeries=M.clone(this.w.config.series)),this.update()}},{key:"update",value:function(a){var s=this;return new Promise(function(t,e){new ri(s.ctx).clear({isUpdating:!0});var i=s.create(s.w.config.series,a);if(!i)return t(s);s.mount(i).then(function(){"function"==typeof s.w.config.chart.events.updated&&s.w.config.chart.events.updated(s,s.w),s.events.fireEvent("updated",[s,s.w]),s.w.globals.isDirty=!0,t(s)}).catch(function(t){e(t)})})}},{key:"getSyncedCharts",value:function(){var t=this.getGroupedCharts(),e=[this];return t.length&&(e=[],t.forEach(function(t){e.push(t)})),e}},{key:"getGroupedCharts",value:function(){var e=this;return Apex._chartInstances.filter(function(t){if(t.group)return!0}).map(function(t){return e.w.config.chart.group===t.group?t.chart:e})}},{key:"toggleSeries",value:function(t){return this.series.toggleSeries(t)}},{key:"showSeries",value:function(t){this.series.showSeries(t)}},{key:"hideSeries",value:function(t){this.series.hideSeries(t)}},{key:"resetSeries",value:function(){this.series.resetSeries(!(0<arguments.length&&void 0!==arguments[0])||arguments[0],!(1<arguments.length&&void 0!==arguments[1])||arguments[1])}},{key:"addEventListener",value:function(t,e){this.events.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){this.events.removeEventListener(t,e)}},{key:"addXaxisAnnotation",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,i=i?i:this;i.annotations.addXaxisAnnotationExternal(t,e,i)}},{key:"addYaxisAnnotation",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,i=i?i:this;i.annotations.addYaxisAnnotationExternal(t,e,i)}},{key:"addPointAnnotation",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,i=i?i:this;i.annotations.addPointAnnotationExternal(t,e,i)}},{key:"clearAnnotations",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0,t=t?t:this;t.annotations.clearAnnotations(t)}},{key:"removeAnnotation",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,e=e?e:this;e.annotations.removeAnnotation(e,t)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(t,e){return this.coreUtils.getSeriesTotalsXRange(t,e)}},{key:"getHighestValueInSeries",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return new it(this.ctx).getMinYMaxY(t).highestY}},{key:"getLowestValueInSeries",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return new it(this.ctx).getMinYMaxY(t).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(t,e){return this.updateHelpers.toggleDataPointSelection(t,e)}},{key:"zoomX",value:function(t,e){this.ctx.toolbar.zoomUpdateOptions(t,e)}},{key:"setLocale",value:function(t){this.localization.setCurrentLocaleValues(t)}},{key:"dataURI",value:function(t){return new Q(this.ctx).dataURI(t)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var t=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){t.w.globals.resized=!0,t.w.globals.dataChanged=!1,t.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var t=this.w.config.chart.redrawOnWindowResize;(t="function"==typeof t?t():t)&&this._windowResize()}}],[{key:"getChartByID",value:function(t){var e=M.escapeString(t),t=Apex._chartInstances.filter(function(t){return t.id===e})[0];return t&&t.chart}},{key:"initOnLoad",value:function(){for(var t=document.querySelectorAll("[data-apexcharts]"),e=0;e<t.length;e++)new hi(t[e],JSON.parse(t[e].getAttribute("data-options"))).render()}},{key:"exec",value:function(t,e){var i=this.getChartByID(t);if(i){i.w.globals.isExecCalled=!0;t=null;if(-1!==i.publicMethods.indexOf(e)){for(var a=arguments.length,s=new Array(2<a?a-2:0),o=2;o<a;o++)s[o-2]=arguments[o];t=i[e].apply(i,s)}return t}}},{key:"merge",value:function(t,e){return M.extend(t,e)}}]),hi;function hi(t,e){s(this,hi),this.opts=e,(this.ctx=this).w=new q(e).init(),this.el=t,this.w.globals.cuid=M.randomId(),this.w.globals.chartID=this.w.config.chart.id?M.escapeString(this.w.config.chart.id):this.w.globals.cuid,new oi(this).initModules(),this.create=M.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}});
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).bootstrap=e()}(this,function(){"use strict";const d={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(t=>t.matches(e))},parents(t,e){const i=[];let n=t.parentNode;for(;n&&n.nodeType===Node.ELEMENT_NODE&&3!==n.nodeType;)n.matches(e)&&i.push(n),n=n.parentNode;return i},prev(t,e){let i=t.previousElementSibling;for(;i;){if(i.matches(e))return[i];i=i.previousElementSibling}return[]},next(t,e){let i=t.nextElementSibling;for(;i;){if(i.matches(e))return[i];i=i.nextElementSibling}return[]}},o="transitionend",r=t=>{for(;t+=Math.floor(1e6*Math.random()),document.getElementById(t););return t},e=e=>{let i=e.getAttribute("data-bs-target");if(!i||"#"===i){let t=e.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),i=t&&"#"!==t?t.trim():null}return i},a=t=>{t=e(t);return t&&document.querySelector(t)?t:null},s=t=>{t=e(t);return t?document.querySelector(t):null},l=t=>{t.dispatchEvent(new Event(o))},c=t=>!(!t||"object"!=typeof t)&&void 0!==(t=void 0!==t.jquery?t[0]:t).nodeType,h=t=>c(t)?t.jquery?t[0]:t:"string"==typeof t&&0<t.length?d.findOne(t):null,i=(s,o,r)=>{Object.keys(r).forEach(t=>{var e,i=r[t],n=o[t],e=n&&c(n)?"element":null==(e=n)?`${e}`:{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(i).test(e))throw new TypeError(`${s.toUpperCase()}: Option "${t}" provided type "${e}" but expected type "${i}".`)})},n=t=>!(!c(t)||0===t.getClientRects().length)&&"visible"===getComputedStyle(t).getPropertyValue("visibility"),u=t=>!t||t.nodeType!==Node.ELEMENT_NODE||(!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled"))),f=t=>{if(!document.documentElement.attachShadow)return null;if("function"!=typeof t.getRootNode)return t instanceof ShadowRoot?t:t.parentNode?f(t.parentNode):null;t=t.getRootNode();return t instanceof ShadowRoot?t:null},p=()=>{},m=t=>t.offsetHeight,g=()=>{var{jQuery:t}=window;return t&&!document.body.hasAttribute("data-bs-no-jquery")?t:null},_=[],v=()=>"rtl"===document.documentElement.dir;var t=n=>{var t;t=()=>{const t=g();if(t){const e=n.NAME,i=t.fn[e];t.fn[e]=n.jQueryInterface,t.fn[e].Constructor=n,t.fn[e].noConflict=()=>(t.fn[e]=i,n.jQueryInterface)}},"loading"===document.readyState?(_.length||document.addEventListener("DOMContentLoaded",()=>{_.forEach(t=>t())}),_.push(t)):t()};const b=t=>{"function"==typeof t&&t()},y=(i,n,t=!0)=>{if(t){t=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:i}=window.getComputedStyle(t);var n=Number.parseFloat(e),t=Number.parseFloat(i);return n||t?(e=e.split(",")[0],i=i.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(i))):0})(n)+5;let e=!1;const s=({target:t})=>{t===n&&(e=!0,n.removeEventListener(o,s),b(i))};n.addEventListener(o,s),setTimeout(()=>{e||l(n)},t)}else b(i)},w=(t,e,i,n)=>{let s=t.indexOf(e);if(-1===s)return t[!i&&n?t.length-1:0];e=t.length;return s+=i?1:-1,n&&(s=(s+e)%e),t[Math.max(0,Math.min(s,e-1))]},E=/[^.]*(?=\..*)\.|.*/,A=/\..*/,T=/::\d+$/,O={};let C=1;const L={mouseenter:"mouseover",mouseleave:"mouseout"},k=/^(mouseenter|mouseleave)/i,x=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function D(t,e){return e&&`${e}::${C++}`||t.uidEvent||C++}function S(t){var e=D(t);return t.uidEvent=e,O[e]=O[e]||{},O[e]}function I(i,n,s=null){var o=Object.keys(i);for(let t=0,e=o.length;t<e;t++){var r=i[o[t]];if(r.originalHandler===n&&r.delegationSelector===s)return r}return null}function N(t,e,i){var n="string"==typeof e,e=n?i:e;let s=M(t);return x.has(s)||(s=t),[n,e,s]}function $(t,e,i,n,s){if("string"==typeof e&&t){i||(i=n,n=null),k.test(e)&&(a=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)},n?n=a(n):i=a(i));var[o,r,a]=N(e,i,n);const f=S(t),p=f[a]||(f[a]={}),m=I(p,r,o?i:null);if(m)m.oneOff=m.oneOff&&s;else{var l,c,h,d,u,e=D(r,e.replace(E,""));const g=o?(h=t,d=i,u=n,function i(n){var s=h.querySelectorAll(d);for(let{target:e}=n;e&&e!==this;e=e.parentNode)for(let t=s.length;t--;)if(s[t]===e)return n.delegateTarget=e,i.oneOff&&P.off(h,n.type,d,u),u.apply(e,[n]);return null}):(l=t,c=i,function t(e){return e.delegateTarget=l,t.oneOff&&P.off(l,e.type,c),c.apply(l,[e])});g.delegationSelector=o?i:null,g.originalHandler=r,g.oneOff=s,g.uidEvent=e,p[e]=g,t.addEventListener(a,g,o)}}}function j(t,e,i,n,s){n=I(e[i],n,s);n&&(t.removeEventListener(i,n,Boolean(s)),delete e[i][n.uidEvent])}function M(t){return t=t.replace(A,""),L[t]||t}const P={on(t,e,i,n){$(t,e,i,n,!1)},one(t,e,i,n){$(t,e,i,n,!0)},off(i,n,t,e){if("string"==typeof n&&i){const[s,o,r]=N(n,t,e),a=r!==n,l=S(i);e=n.startsWith(".");if(void 0!==o)return l&&l[r]?void j(i,l,r,o,s?t:null):void 0;e&&Object.keys(l).forEach(t=>{!function(e,i,n,s){const o=i[n]||{};Object.keys(o).forEach(t=>{t.includes(s)&&(t=o[t],j(e,i,n,t.originalHandler,t.delegationSelector))})}(i,l,t,n.slice(1))});const c=l[r]||{};Object.keys(c).forEach(t=>{var e=t.replace(T,"");a&&!n.includes(e)||(t=c[t],j(i,l,r,t.originalHandler,t.delegationSelector))})}},trigger(t,e,i){if("string"!=typeof e||!t)return null;const n=g();var s=M(e),o=e!==s,r=x.has(s);let a,l=!0,c=!0,h=!1,d=null;return o&&n&&(a=n.Event(e,i),n(t).trigger(a),l=!a.isPropagationStopped(),c=!a.isImmediatePropagationStopped(),h=a.isDefaultPrevented()),r?(d=document.createEvent("HTMLEvents"),d.initEvent(s,l,!0)):d=new CustomEvent(e,{bubbles:l,cancelable:!0}),void 0!==i&&Object.keys(i).forEach(t=>{Object.defineProperty(d,t,{get(){return i[t]}})}),h&&d.preventDefault(),c&&t.dispatchEvent(d),d.defaultPrevented&&void 0!==a&&a.preventDefault(),d}},H=new Map;var R=function(t,e,i){H.has(t)||H.set(t,new Map);const n=H.get(t);n.has(e)||0===n.size?n.set(e,i):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`)},B=function(t,e){return H.has(t)&&H.get(t).get(e)||null},W=function(t,e){if(H.has(t)){const i=H.get(t);i.delete(e),0===i.size&&H.delete(t)}};class q{constructor(t){(t=h(t))&&(this._element=t,R(this._element,this.constructor.DATA_KEY,this))}dispose(){W(this._element,this.constructor.DATA_KEY),P.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(t=>{this[t]=null})}_queueCallback(t,e,i=!0){y(t,e,i)}static getInstance(t){return B(t,this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.0.2"}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}class z extends q{static get NAME(){return"alert"}close(t){var e=t?this._getRootElement(t):this._element,t=this._triggerCloseEvent(e);null===t||t.defaultPrevented||this._removeElement(e)}_getRootElement(t){return s(t)||t.closest(".alert")}_triggerCloseEvent(t){return P.trigger(t,"close.bs.alert")}_removeElement(t){t.classList.remove("show");var e=t.classList.contains("fade");this._queueCallback(()=>this._destroyElement(t),t,e)}_destroyElement(t){t.remove(),P.trigger(t,"closed.bs.alert")}static jQueryInterface(e){return this.each(function(){const t=z.getOrCreateInstance(this);"close"===e&&t[e](this)})}static handleDismiss(e){return function(t){t&&t.preventDefault(),e.close(this)}}}P.on(document,"click.bs.alert.data-api",'[data-bs-dismiss="alert"]',z.handleDismiss(new z)),t(z);const F='[data-bs-toggle="button"]';class U extends q{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each(function(){const t=U.getOrCreateInstance(this);"toggle"===e&&t[e]()})}}function V(t){return"true"===t||"false"!==t&&(t===Number(t).toString()?Number(t):""===t||"null"===t?null:t)}function K(t){return t.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}P.on(document,"click.bs.button.data-api",F,t=>{t.preventDefault();t=t.target.closest(F);const e=U.getOrCreateInstance(t);e.toggle()}),t(U);const X={setDataAttribute(t,e,i){t.setAttribute(`data-bs-${K(e)}`,i)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${K(e)}`)},getDataAttributes(i){if(!i)return{};const n={};return Object.keys(i.dataset).filter(t=>t.startsWith("bs")).forEach(t=>{let e=t.replace(/^bs/,"");e=e.charAt(0).toLowerCase()+e.slice(1,e.length),n[e]=V(i.dataset[t])}),n},getDataAttribute(t,e){return V(t.getAttribute(`data-bs-${K(e)}`))},offset(t){t=t.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},position(t){return{top:t.offsetTop,left:t.offsetLeft}}},Y="carousel";var Q=".bs.carousel";const G={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},Z={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},J="next",tt="prev",et="left",it="right",nt={ArrowLeft:it,ArrowRight:et},st=`slid${Q}`;const ot="active",rt=".active.carousel-item";class at extends q{constructor(t,e){super(t),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._indicatorsElement=d.findOne(".carousel-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return G}static get NAME(){return Y}next(){this._slide(J)}nextWhenVisible(){!document.hidden&&n(this._element)&&this.next()}prev(){this._slide(tt)}pause(t){t||(this._isPaused=!0),d.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(l(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(t){this._activeElement=d.findOne(rt,this._element);var e=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)P.one(this._element,st,()=>this.to(t));else{if(e===t)return this.pause(),void this.cycle();e=e<t?J:tt;this._slide(e,this._items[t])}}_getConfig(t){return t={...G,...X.getDataAttributes(this._element),..."object"==typeof t?t:{}},i(Y,t,Z),t}_handleSwipe(){var t=Math.abs(this.touchDeltaX);t<=40||(t=t/this.touchDeltaX,this.touchDeltaX=0,t&&this._slide(0<t?it:et))}_addEventListeners(){this._config.keyboard&&P.on(this._element,"keydown.bs.carousel",t=>this._keydown(t)),"hover"===this._config.pause&&(P.on(this._element,"mouseenter.bs.carousel",t=>this.pause(t)),P.on(this._element,"mouseleave.bs.carousel",t=>this.cycle(t))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const e=t=>{!this._pointerEvent||"pen"!==t.pointerType&&"touch"!==t.pointerType?this._pointerEvent||(this.touchStartX=t.touches[0].clientX):this.touchStartX=t.clientX},i=t=>{this.touchDeltaX=t.touches&&1<t.touches.length?0:t.touches[0].clientX-this.touchStartX},n=t=>{!this._pointerEvent||"pen"!==t.pointerType&&"touch"!==t.pointerType||(this.touchDeltaX=t.clientX-this.touchStartX),this._handleSwipe(),"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(t=>this.cycle(t),500+this._config.interval))};d.find(".carousel-item img",this._element).forEach(t=>{P.on(t,"dragstart.bs.carousel",t=>t.preventDefault())}),this._pointerEvent?(P.on(this._element,"pointerdown.bs.carousel",t=>e(t)),P.on(this._element,"pointerup.bs.carousel",t=>n(t)),this._element.classList.add("pointer-event")):(P.on(this._element,"touchstart.bs.carousel",t=>e(t)),P.on(this._element,"touchmove.bs.carousel",t=>i(t)),P.on(this._element,"touchend.bs.carousel",t=>n(t)))}_keydown(t){var e;/input|textarea/i.test(t.target.tagName)||(e=nt[t.key])&&(t.preventDefault(),this._slide(e))}_getItemIndex(t){return this._items=t&&t.parentNode?d.find(".carousel-item",t.parentNode):[],this._items.indexOf(t)}_getItemByOrder(t,e){t=t===J;return w(this._items,e,t,this._config.wrap)}_triggerSlideEvent(t,e){var i=this._getItemIndex(t),n=this._getItemIndex(d.findOne(rt,this._element));return P.trigger(this._element,"slide.bs.carousel",{relatedTarget:t,direction:e,from:n,to:i})}_setActiveIndicatorElement(e){if(this._indicatorsElement){const t=d.findOne(".active",this._indicatorsElement);t.classList.remove(ot),t.removeAttribute("aria-current");const i=d.find("[data-bs-target]",this._indicatorsElement);for(let t=0;t<i.length;t++)if(Number.parseInt(i[t].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(e)){i[t].classList.add(ot),i[t].setAttribute("aria-current","true");break}}}_updateInterval(){const t=this._activeElement||d.findOne(rt,this._element);var e;t&&((e=Number.parseInt(t.getAttribute("data-bs-interval"),10))?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=e):this._config.interval=this._config.defaultInterval||this._config.interval)}_slide(t,e){var i=this._directionToOrder(t);const n=d.findOne(rt,this._element),s=this._getItemIndex(n),o=e||this._getItemByOrder(i,n),r=this._getItemIndex(o);t=Boolean(this._interval),e=i===J;const a=e?"carousel-item-start":"carousel-item-end",l=e?"carousel-item-next":"carousel-item-prev",c=this._orderToDirection(i);if(o&&o.classList.contains(ot))this._isSliding=!1;else if(!this._isSliding){i=this._triggerSlideEvent(o,c);if(!i.defaultPrevented&&n&&o){this._isSliding=!0,t&&this.pause(),this._setActiveIndicatorElement(o),this._activeElement=o;const h=()=>{P.trigger(this._element,st,{relatedTarget:o,direction:c,from:s,to:r})};this._element.classList.contains("slide")?(o.classList.add(l),m(o),n.classList.add(a),o.classList.add(a),this._queueCallback(()=>{o.classList.remove(a,l),o.classList.add(ot),n.classList.remove(ot,l,a),this._isSliding=!1,setTimeout(h,0)},n,!0)):(n.classList.remove(ot),o.classList.add(ot),this._isSliding=!1,h()),t&&this.cycle()}}}_directionToOrder(t){return[it,et].includes(t)?v()?t===et?tt:J:t===et?J:tt:t}_orderToDirection(t){return[J,tt].includes(t)?v()?t===tt?et:it:t===tt?it:et:t}static carouselInterface(t,e){const i=at.getOrCreateInstance(t,e);let{_config:n}=i;"object"==typeof e&&(n={...n,...e});t="string"==typeof e?e:n.slide;if("number"==typeof e)i.to(e);else if("string"==typeof t){if(void 0===i[t])throw new TypeError(`No method named "${t}"`);i[t]()}else n.interval&&n.ride&&(i.pause(),i.cycle())}static jQueryInterface(t){return this.each(function(){at.carouselInterface(this,t)})}static dataApiClickHandler(t){const e=s(this);if(e&&e.classList.contains("carousel")){const n={...X.getDataAttributes(e),...X.getDataAttributes(this)};var i=this.getAttribute("data-bs-slide-to");i&&(n.interval=!1),at.carouselInterface(e,n),i&&at.getInstance(e).to(i),t.preventDefault()}}}P.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",at.dataApiClickHandler),P.on(window,"load.bs.carousel.data-api",()=>{var i=d.find('[data-bs-ride="carousel"]');for(let t=0,e=i.length;t<e;t++)at.carouselInterface(i[t],at.getInstance(i[t]))}),t(at);const lt="collapse",ct="bs.collapse";ct;const ht={toggle:!0,parent:""},dt={toggle:"boolean",parent:"(string|element)"};const ut="show",ft="collapse",pt="collapsing",mt="collapsed",gt='[data-bs-toggle="collapse"]';class _t extends q{constructor(t,e){super(t),this._isTransitioning=!1,this._config=this._getConfig(e),this._triggerArray=d.find(`${gt}[href="#${this._element.id}"],`+`${gt}[data-bs-target="#${this._element.id}"]`);var i=d.find(gt);for(let t=0,e=i.length;t<e;t++){var n=i[t],s=a(n),o=d.find(s).filter(t=>t===this._element);null!==s&&o.length&&(this._selector=s,this._triggerArray.push(n))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}static get Default(){return ht}static get NAME(){return lt}toggle(){this._element.classList.contains(ut)?this.hide():this.show()}show(){if(!this._isTransitioning&&!this._element.classList.contains(ut)){let t,e;this._parent&&(t=d.find(".show, .collapsing",this._parent).filter(t=>"string"==typeof this._config.parent?t.getAttribute("data-bs-parent")===this._config.parent:t.classList.contains(ft)),0===t.length&&(t=null));const n=d.findOne(this._selector);if(t){var i=t.find(t=>n!==t);if(e=i?_t.getInstance(i):null,e&&e._isTransitioning)return}if(!P.trigger(this._element,"show.bs.collapse").defaultPrevented){t&&t.forEach(t=>{n!==t&&_t.collapseInterface(t,"hide"),e||R(t,ct,null)});const s=this._getDimension();this._element.classList.remove(ft),this._element.classList.add(pt),this._element.style[s]=0,this._triggerArray.length&&this._triggerArray.forEach(t=>{t.classList.remove(mt),t.setAttribute("aria-expanded",!0)}),this.setTransitioning(!0);i=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(()=>{this._element.classList.remove(pt),this._element.classList.add(ft,ut),this._element.style[s]="",this.setTransitioning(!1),P.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[s]=`${this._element[i]}px`}}}hide(){if(!this._isTransitioning&&this._element.classList.contains(ut)&&!P.trigger(this._element,"hide.bs.collapse").defaultPrevented){var t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,m(this._element),this._element.classList.add(pt),this._element.classList.remove(ft,ut);var e=this._triggerArray.length;if(0<e)for(let t=0;t<e;t++){const i=this._triggerArray[t],n=s(i);n&&!n.classList.contains(ut)&&(i.classList.add(mt),i.setAttribute("aria-expanded",!1))}this.setTransitioning(!0);this._element.style[t]="",this._queueCallback(()=>{this.setTransitioning(!1),this._element.classList.remove(pt),this._element.classList.add(ft),P.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}}setTransitioning(t){this._isTransitioning=t}_getConfig(t){return(t={...ht,...t}).toggle=Boolean(t.toggle),i(lt,t,dt),t}_getDimension(){return this._element.classList.contains("width")?"width":"height"}_getParent(){var{parent:t}=this._config,t=h(t),e=`${gt}[data-bs-parent="${t}"]`;return d.find(e,t).forEach(t=>{var e=s(t);this._addAriaAndCollapsedClass(e,[t])}),t}_addAriaAndCollapsedClass(t,e){if(t&&e.length){const i=t.classList.contains(ut);e.forEach(t=>{i?t.classList.remove(mt):t.classList.add(mt),t.setAttribute("aria-expanded",i)})}}static collapseInterface(t,e){let i=_t.getInstance(t);const n={...ht,...X.getDataAttributes(t),..."object"==typeof e&&e?e:{}};if(!i&&n.toggle&&"string"==typeof e&&/show|hide/.test(e)&&(n.toggle=!1),i=i||new _t(t,n),"string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e]()}}static jQueryInterface(t){return this.each(function(){_t.collapseInterface(this,t)})}}P.on(document,"click.bs.collapse.data-api",gt,function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();const n=X.getDataAttributes(this);t=a(this);const e=d.find(t);e.forEach(t=>{const e=_t.getInstance(t);let i;i=e?(null===e._parent&&"string"==typeof n.parent&&(e._config.parent=n.parent,e._parent=e._getParent()),"toggle"):n,_t.collapseInterface(t,i)})}),t(_t);var vt="top",bt="bottom",yt="right",wt="left",Et="auto",At=[vt,bt,yt,wt],Tt="start",Ot="end",Ct="clippingParents",Lt="viewport",kt="popper",xt="reference",Dt=At.reduce(function(t,e){return t.concat([e+"-"+Tt,e+"-"+Ot])},[]),St=[].concat(At,[Et]).reduce(function(t,e){return t.concat([e,e+"-"+Tt,e+"-"+Ot])},[]),It="beforeRead",Nt="afterRead",$t="beforeMain",jt="afterMain",Mt="beforeWrite",Pt="afterWrite",Ht=[It,"read",Nt,$t,"main",jt,Mt,"write",Pt];function Rt(t){return t?(t.nodeName||"").toLowerCase():null}function Bt(t){if(null==t)return window;if("[object Window]"===t.toString())return t;t=t.ownerDocument;return t&&t.defaultView||window}function Wt(t){return t instanceof Bt(t).Element||t instanceof Element}function qt(t){return t instanceof Bt(t).HTMLElement||t instanceof HTMLElement}function zt(t){return"undefined"!=typeof ShadowRoot&&(t instanceof Bt(t).ShadowRoot||t instanceof ShadowRoot)}var Ft={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var s=t.state;Object.keys(s.elements).forEach(function(t){var e=s.styles[t]||{},i=s.attributes[t]||{},n=s.elements[t];qt(n)&&Rt(n)&&(Object.assign(n.style,e),Object.keys(i).forEach(function(t){var e=i[t];!1===e?n.removeAttribute(t):n.setAttribute(t,!0===e?"":e)}))})},effect:function(t){var n=t.state,s={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,s.popper),n.styles=s,n.elements.arrow&&Object.assign(n.elements.arrow.style,s.arrow),function(){Object.keys(n.elements).forEach(function(t){var e=n.elements[t],i=n.attributes[t]||{},t=Object.keys((n.styles.hasOwnProperty(t)?n.styles:s)[t]).reduce(function(t,e){return t[e]="",t},{});qt(e)&&Rt(e)&&(Object.assign(e.style,t),Object.keys(i).forEach(function(t){e.removeAttribute(t)}))})}},requires:["computeStyles"]};function Ut(t){return t.split("-")[0]}function Vt(t){t=t.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function Kt(t){var e=Vt(t),i=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:n}}function Xt(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&zt(i)){var n=e;do{if(n&&t.isSameNode(n))return!0}while(n=n.parentNode||n.host)}return!1}function Yt(t){return Bt(t).getComputedStyle(t)}function Qt(t){return((Wt(t)?t.ownerDocument:t.document)||window.document).documentElement}function Gt(t){return"html"===Rt(t)?t:t.assignedSlot||t.parentNode||(zt(t)?t.host:null)||Qt(t)}function Zt(t){return qt(t)&&"fixed"!==Yt(t).position?t.offsetParent:null}function Jt(t){for(var e,i=Bt(t),n=Zt(t);n&&(e=n,0<=["table","td","th"].indexOf(Rt(e)))&&"static"===Yt(n).position;)n=Zt(n);return(!n||"html"!==Rt(n)&&("body"!==Rt(n)||"static"!==Yt(n).position))&&(n||function(t){var e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"),i=-1!==navigator.userAgent.indexOf("Trident");if(i&&qt(t)&&"fixed"===Yt(t).position)return null;for(var n=Gt(t);qt(n)&&["html","body"].indexOf(Rt(n))<0;){var s=Yt(n);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||e&&"filter"===s.willChange||e&&s.filter&&"none"!==s.filter)return n;n=n.parentNode}return null}(t))||i}function te(t){return 0<=["top","bottom"].indexOf(t)?"x":"y"}var ee=Math.max,ie=Math.min,ne=Math.round;function se(t,e,i){return ee(t,ie(e,i))}function oe(){return{top:0,right:0,bottom:0,left:0}}function re(t){return Object.assign({},oe(),t)}function ae(i,t){return t.reduce(function(t,e){return t[e]=i,t},{})}var le={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,i,n=t.state,s=t.name,o=t.options,r=n.elements.arrow,a=n.modifiersData.popperOffsets,l=Ut(n.placement),c=te(l),h=0<=[wt,yt].indexOf(l)?"height":"width";r&&a&&(e=o.padding,i=n,t=re("number"!=typeof(e="function"==typeof e?e(Object.assign({},i.rects,{placement:i.placement})):e)?e:ae(e,At)),l=Kt(r),o="y"===c?vt:wt,i="y"===c?bt:yt,e=n.rects.reference[h]+n.rects.reference[c]-a[c]-n.rects.popper[h],a=a[c]-n.rects.reference[c],r=(r=Jt(r))?"y"===c?r.clientHeight||0:r.clientWidth||0:0,o=t[o],i=r-l[h]-t[i],i=se(o,a=r/2-l[h]/2+(e/2-a/2),i),n.modifiersData[s]=((s={})[c]=i,s.centerOffset=i-a,s))},effect:function(t){var e=t.state;null!=(t=void 0===(t=t.options.element)?"[data-popper-arrow]":t)&&("string"!=typeof t||(t=e.elements.popper.querySelector(t)))&&Xt(e.elements.popper,t)&&(e.elements.arrow=t)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},ce={top:"auto",right:"auto",bottom:"auto",left:"auto"};function he(t){var e=t.popper,i=t.popperRect,n=t.placement,s=t.offsets,o=t.position,r=t.gpuAcceleration,a=t.adaptive,l=t.roundOffsets,c=!0===l?(f=(m=s).x,p=m.y,m=window.devicePixelRatio||1,{x:ne(ne(f*m)/m)||0,y:ne(ne(p*m)/m)||0}):"function"==typeof l?l(s):s,h=c.x,d=void 0===h?0:h,u=c.y,t=void 0===u?0:u,f=s.hasOwnProperty("x"),p=s.hasOwnProperty("y"),m=wt,l=vt,h=window;a&&(c="clientHeight",u="clientWidth",(s=Jt(e))===Bt(e)&&"static"!==Yt(s=Qt(e)).position&&(c="scrollHeight",u="scrollWidth"),n===vt&&(l=bt,t-=s[c]-i.height,t*=r?1:-1),n===wt&&(m=yt,d-=s[u]-i.width,d*=r?1:-1));var a=Object.assign({position:o},a&&ce);return r?Object.assign({},a,((r={})[l]=p?"0":"",r[m]=f?"0":"",r.transform=(h.devicePixelRatio||1)<2?"translate("+d+"px, "+t+"px)":"translate3d("+d+"px, "+t+"px, 0)",r)):Object.assign({},a,((a={})[l]=p?t+"px":"",a[m]=f?d+"px":"",a.transform="",a))}var de={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,i=t.options,t=void 0===(n=i.gpuAcceleration)||n,n=void 0===(n=i.adaptive)||n,i=void 0===(i=i.roundOffsets)||i,t={placement:Ut(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:t};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,he(Object.assign({},t,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:n,roundOffsets:i})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,he(Object.assign({},t,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:i})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},ue={passive:!0};var fe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,i=t.instance,n=t.options,s=void 0===(t=n.scroll)||t,o=void 0===(n=n.resize)||n,r=Bt(e.elements.popper),a=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&a.forEach(function(t){t.addEventListener("scroll",i.update,ue)}),o&&r.addEventListener("resize",i.update,ue),function(){s&&a.forEach(function(t){t.removeEventListener("scroll",i.update,ue)}),o&&r.removeEventListener("resize",i.update,ue)}},data:{}},pe={left:"right",right:"left",bottom:"top",top:"bottom"};function me(t){return t.replace(/left|right|bottom|top/g,function(t){return pe[t]})}var ge={start:"end",end:"start"};function _e(t){return t.replace(/start|end/g,function(t){return ge[t]})}function ve(t){t=Bt(t);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function be(t){return Vt(Qt(t)).left+ve(t).scrollLeft}function ye(t){var e=Yt(t),i=e.overflow,t=e.overflowX,e=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+e+t)}function we(t,e){void 0===e&&(e=[]);var i=function t(e){return 0<=["html","body","#document"].indexOf(Rt(e))?e.ownerDocument.body:qt(e)&&ye(e)?e:t(Gt(e))}(t),t=i===(null==(n=t.ownerDocument)?void 0:n.body),n=Bt(i),i=t?[n].concat(n.visualViewport||[],ye(i)?i:[]):i,e=e.concat(i);return t?e:e.concat(we(Gt(i)))}function Ee(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Ae(t,e){return e===Lt?Ee((o=Bt(s=t),r=Qt(s),a=o.visualViewport,l=r.clientWidth,c=r.clientHeight,r=o=0,a&&(l=a.width,c=a.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=a.offsetLeft,r=a.offsetTop)),{width:l,height:c,x:o+be(s),y:r})):qt(e)?((n=Vt(i=e)).top=n.top+i.clientTop,n.left=n.left+i.clientLeft,n.bottom=n.top+i.clientHeight,n.right=n.left+i.clientWidth,n.width=i.clientWidth,n.height=i.clientHeight,n.x=n.left,n.y=n.top,n):Ee((s=Qt(t),r=Qt(s),e=ve(s),n=null==(i=s.ownerDocument)?void 0:i.body,t=ee(r.scrollWidth,r.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),i=ee(r.scrollHeight,r.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),s=-e.scrollLeft+be(s),e=-e.scrollTop,"rtl"===Yt(n||r).direction&&(s+=ee(r.clientWidth,n?n.clientWidth:0)-t),{width:t,height:i,x:s,y:e}));var i,n,s,o,r,a,l,c}function Te(i,t,e){var n,s,o,t="clippingParents"===t?(s=we(Gt(n=i)),Wt(o=0<=["absolute","fixed"].indexOf(Yt(n).position)&&qt(n)?Jt(n):n)?s.filter(function(t){return Wt(t)&&Xt(t,o)&&"body"!==Rt(t)}):[]):[].concat(t),t=[].concat(t,[e]),e=t[0],e=t.reduce(function(t,e){e=Ae(i,e);return t.top=ee(e.top,t.top),t.right=ie(e.right,t.right),t.bottom=ie(e.bottom,t.bottom),t.left=ee(e.left,t.left),t},Ae(i,e));return e.width=e.right-e.left,e.height=e.bottom-e.top,e.x=e.left,e.y=e.top,e}function Oe(t){return t.split("-")[1]}function Ce(t){var e,i=t.reference,n=t.element,s=t.placement,t=s?Ut(s):null,s=s?Oe(s):null,o=i.x+i.width/2-n.width/2,r=i.y+i.height/2-n.height/2;switch(t){case vt:e={x:o,y:i.y-n.height};break;case bt:e={x:o,y:i.y+i.height};break;case yt:e={x:i.x+i.width,y:r};break;case wt:e={x:i.x-n.width,y:r};break;default:e={x:i.x,y:i.y}}var a=t?te(t):null;if(null!=a){var l="y"===a?"height":"width";switch(s){case Tt:e[a]=e[a]-(i[l]/2-n[l]/2);break;case Ot:e[a]=e[a]+(i[l]/2-n[l]/2)}}return e}function Le(t,e){var n,i=e=void 0===e?{}:e,s=i.placement,o=void 0===s?t.placement:s,r=i.boundary,a=void 0===r?Ct:r,l=i.rootBoundary,c=void 0===l?Lt:l,e=i.elementContext,s=void 0===e?kt:e,r=i.altBoundary,l=void 0!==r&&r,e=i.padding,r=void 0===e?0:e,i=re("number"!=typeof r?r:ae(r,At)),e=t.elements.reference,r=t.rects.popper,l=t.elements[l?s===kt?xt:kt:s],a=Te(Wt(l)?l:l.contextElement||Qt(t.elements.popper),a,c),c=Vt(e),e=Ce({reference:c,element:r,strategy:"absolute",placement:o}),e=Ee(Object.assign({},r,e)),c=s===kt?e:c,h={top:a.top-c.top+i.top,bottom:c.bottom-a.bottom+i.bottom,left:a.left-c.left+i.left,right:c.right-a.right+i.right},t=t.modifiersData.offset;return s===kt&&t&&(n=t[o],Object.keys(h).forEach(function(t){var e=0<=[yt,bt].indexOf(t)?1:-1,i=0<=[vt,bt].indexOf(t)?"y":"x";h[t]+=n[i]*e})),h}var ke={name:"flip",enabled:!0,phase:"main",fn:function(t){var d=t.state,e=t.options,i=t.name;if(!d.modifiersData[i]._skip){for(var n=e.mainAxis,s=void 0===n||n,t=e.altAxis,o=void 0===t||t,n=e.fallbackPlacements,u=e.padding,f=e.boundary,p=e.rootBoundary,r=e.altBoundary,t=e.flipVariations,m=void 0===t||t,g=e.allowedAutoPlacements,t=d.options.placement,e=Ut(t),e=n||(e===t||!m?[me(t)]:function(t){if(Ut(t)===Et)return[];var e=me(t);return[_e(t),e,_e(e)]}(t)),a=[t].concat(e).reduce(function(t,e){return t.concat(Ut(e)===Et?(i=d,s=n=void 0===(n={placement:e,boundary:f,rootBoundary:p,padding:u,flipVariations:m,allowedAutoPlacements:g})?{}:n,t=s.placement,o=s.boundary,r=s.rootBoundary,a=s.padding,n=s.flipVariations,l=void 0===(s=s.allowedAutoPlacements)?St:s,c=Oe(t),t=c?n?Dt:Dt.filter(function(t){return Oe(t)===c}):At,h=(n=0===(n=t.filter(function(t){return 0<=l.indexOf(t)})).length?t:n).reduce(function(t,e){return t[e]=Le(i,{placement:e,boundary:o,rootBoundary:r,padding:a})[Ut(e)],t},{}),Object.keys(h).sort(function(t,e){return h[t]-h[e]})):e);var i,n,s,o,r,a,l,c,h},[]),l=d.rects.reference,c=d.rects.popper,h=new Map,_=!0,v=a[0],b=0;b<a.length;b++){var y=a[b],w=Ut(y),E=Oe(y)===Tt,A=0<=[vt,bt].indexOf(w),T=A?"width":"height",O=Le(d,{placement:y,boundary:f,rootBoundary:p,altBoundary:r,padding:u}),A=A?E?yt:wt:E?bt:vt;l[T]>c[T]&&(A=me(A));E=me(A),T=[];if(s&&T.push(O[w]<=0),o&&T.push(O[A]<=0,O[E]<=0),T.every(function(t){return t})){v=y,_=!1;break}h.set(y,T)}if(_)for(var C=m?3:1;0<C;C--)if("break"===function(e){var t=a.find(function(t){t=h.get(t);if(t)return t.slice(0,e).every(function(t){return t})});if(t)return v=t,"break"}(C))break;d.placement!==v&&(d.modifiersData[i]._skip=!0,d.placement=v,d.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function xe(t,e,i){return{top:t.top-e.height-(i=void 0===i?{x:0,y:0}:i).y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function De(e){return[vt,yt,bt,wt].some(function(t){return 0<=e[t]})}var Se={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,i=t.name,n=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,r=Le(e,{elementContext:"reference"}),t=Le(e,{altBoundary:!0}),n=xe(r,n),t=xe(t,s,o),s=De(n),o=De(t);e.modifiersData[i]={referenceClippingOffsets:n,popperEscapeOffsets:t,isReferenceHidden:s,hasPopperEscaped:o},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":s,"data-popper-escaped":o})}};Q={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var r=t.state,e=t.options,i=t.name,a=void 0===(n=e.offset)?[0,0]:n,t=St.reduce(function(t,e){var i,n,s,o;return t[e]=(i=e,n=r.rects,s=a,o=Ut(i),e=0<=[wt,vt].indexOf(o)?-1:1,s=(s=(i="function"==typeof s?s(Object.assign({},n,{placement:i})):s)[0])||0,i=((i=i[1])||0)*e,0<=[wt,yt].indexOf(o)?{x:i,y:s}:{x:s,y:i}),t},{}),n=(e=t[r.placement]).x,e=e.y;null!=r.modifiersData.popperOffsets&&(r.modifiersData.popperOffsets.x+=n,r.modifiersData.popperOffsets.y+=e),r.modifiersData[i]=t}};var Ie={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,t=t.name;e.modifiersData[t]=Ce({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};var Ne={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,n=t.name,s=void 0===(E=i.mainAxis)||E,o=void 0!==(A=i.altAxis)&&A,r=i.boundary,a=i.rootBoundary,l=i.altBoundary,c=i.padding,h=i.tether,d=void 0===h||h,u=i.tetherOffset,f=void 0===u?0:u,p=Le(e,{boundary:r,rootBoundary:a,padding:c,altBoundary:l}),m=Ut(e.placement),g=Oe(e.placement),_=!g,v=te(m),b="x"===v?"y":"x",y=e.modifiersData.popperOffsets,w=e.rects.reference,t=e.rects.popper,E="function"==typeof f?f(Object.assign({},e.rects,{placement:e.placement})):f,A={x:0,y:0};y&&((s||o)&&(h="y"===v?"height":"width",i=y[v],r=y[v]+p[u="y"===v?vt:wt],c=y[v]-p[a="y"===v?bt:yt],l=d?-t[h]/2:0,m=(g===Tt?w:t)[h],f=g===Tt?-t[h]:-w[h],g=e.elements.arrow,t=d&&g?Kt(g):{width:0,height:0},u=(g=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:oe())[u],a=g[a],t=se(0,w[h],t[h]),u=_?w[h]/2-l-t-u-E:m-t-u-E,t=_?-w[h]/2+l+t+a+E:f+t+a+E,E=(a=e.elements.arrow&&Jt(e.elements.arrow))?"y"===v?a.clientTop||0:a.clientLeft||0:0,a=e.modifiersData.offset?e.modifiersData.offset[e.placement][v]:0,E=y[v]+u-a-E,a=y[v]+t-a,s&&(c=se(d?ie(r,E):r,i,d?ee(c,a):c),y[v]=c,A[v]=c-i),o&&(o=(i=y[b])+p["x"===v?vt:wt],v=i-p["x"===v?bt:yt],v=se(d?ie(o,E):o,i,d?ee(v,a):v),y[b]=v,A[b]=v-i)),e.modifiersData[n]=A)},requiresIfExists:["offset"]};function $e(t,e,i){void 0===i&&(i=!1);var n=Qt(e),s=Vt(t),o=qt(e),r={scrollLeft:0,scrollTop:0},t={x:0,y:0};return!o&&(o||i)||("body"===Rt(e)&&!ye(n)||(r=(i=e)!==Bt(i)&&qt(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:ve(i)),qt(e)?((t=Vt(e)).x+=e.clientLeft,t.y+=e.clientTop):n&&(t.x=be(n))),{x:s.left+r.scrollLeft-t.x,y:s.top+r.scrollTop-t.y,width:s.width,height:s.height}}function je(t){var i=new Map,n=new Set,s=[];return t.forEach(function(t){i.set(t.name,t)}),t.forEach(function(t){n.has(t.name)||!function e(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach(function(t){n.has(t)||(t=i.get(t))&&e(t)}),s.push(t)}(t)}),s}var Me={placement:"bottom",modifiers:[],strategy:"absolute"};function Pe(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some(function(t){return!(t&&"function"==typeof t.getBoundingClientRect)})}function He(t){var e=t=void 0===t?{}:t,t=e.defaultModifiers,d=void 0===t?[]:t,e=e.defaultOptions,u=void 0===e?Me:e;return function(n,s,e){void 0===e&&(e=u);var i,o,r={placement:"bottom",orderedModifiers:[],options:Object.assign({},Me,u),modifiersData:{},elements:{reference:n,popper:s},attributes:{},styles:{}},a=[],l=!1,c={state:r,setOptions:function(t){h(),r.options=Object.assign({},u,r.options,t),r.scrollParents={reference:Wt(n)?we(n):n.contextElement?we(n.contextElement):[],popper:we(s)};var i,e,t=(t=[].concat(d,r.options.modifiers),e=t.reduce(function(t,e){var i=t[e.name];return t[e.name]=i?Object.assign({},i,e,{options:Object.assign({},i.options,e.options),data:Object.assign({},i.data,e.data)}):e,t},{}),t=Object.keys(e).map(function(t){return e[t]}),i=je(t),Ht.reduce(function(t,e){return t.concat(i.filter(function(t){return t.phase===e}))},[]));return r.orderedModifiers=t.filter(function(t){return t.enabled}),r.orderedModifiers.forEach(function(t){var e=t.name,i=t.options,t=t.effect;"function"==typeof t&&(i=t({state:r,name:e,instance:c,options:void 0===i?{}:i}),a.push(i||function(){}))}),c.update()},forceUpdate:function(){if(!l){var t=r.elements,e=t.reference,t=t.popper;if(Pe(e,t)){r.rects={reference:$e(e,Jt(t),"fixed"===r.options.strategy),popper:Kt(t)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach(function(t){return r.modifiersData[t.name]=Object.assign({},t.data)});for(var i,n,s,o=0;o<r.orderedModifiers.length;o++)!0!==r.reset?(i=(s=r.orderedModifiers[o]).fn,n=s.options,s=s.name,"function"==typeof i&&(r=i({state:r,options:void 0===n?{}:n,name:s,instance:c})||r)):(r.reset=!1,o=-1)}}},update:(i=function(){return new Promise(function(t){c.forceUpdate(),t(r)})},function(){return o=o||new Promise(function(t){Promise.resolve().then(function(){o=void 0,t(i())})})}),destroy:function(){h(),l=!0}};return Pe(n,s)&&c.setOptions(e).then(function(t){!l&&e.onFirstUpdate&&e.onFirstUpdate(t)}),c;function h(){a.forEach(function(t){return t()}),a=[]}}}var Re=He({defaultModifiers:[fe,Ie,de,Ft,Q,ke,Ne,le,Se]}),Be=Object.freeze({__proto__:null,popperGenerator:He,detectOverflow:Le,createPopperBase:He(),createPopper:Re,createPopperLite:He({defaultModifiers:[fe,Ie,de,Ft]}),top:vt,bottom:bt,right:yt,left:wt,auto:Et,basePlacements:At,start:Tt,end:Ot,clippingParents:Ct,viewport:Lt,popper:kt,reference:xt,variationPlacements:Dt,placements:St,beforeRead:It,read:"read",afterRead:Nt,beforeMain:$t,main:"main",afterMain:jt,beforeWrite:Mt,write:"write",afterWrite:Pt,modifierPhases:Ht,applyStyles:Ft,arrow:le,computeStyles:de,eventListeners:fe,flip:ke,hide:Se,offset:Q,popperOffsets:Ie,preventOverflow:Ne});const We="dropdown";Se=".bs.dropdown",Q=".data-api";const qe="Escape",ze="ArrowUp",Fe="ArrowDown",Ue=new RegExp(`${ze}|${Fe}|${qe}`);Ie=`click${Se}${Q}`,Ne=`keydown${Se}${Q}`;const Ve="show",Ke='[data-bs-toggle="dropdown"]',Xe=".dropdown-menu",Ye=v()?"top-end":"top-start",Qe=v()?"top-start":"top-end",Ge=v()?"bottom-end":"bottom-start",Ze=v()?"bottom-start":"bottom-end",Je=v()?"left-start":"right-start",ti=v()?"right-start":"left-start",ei={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},ii={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class ni extends q{constructor(t,e){super(t),this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}static get Default(){return ei}static get DefaultType(){return ii}static get NAME(){return We}toggle(){u(this._element)||(this._element.classList.contains(Ve)?this.hide():this.show())}show(){if(!u(this._element)&&!this._menu.classList.contains(Ve)){const i=ni.getParentFromElement(this._element);var t={relatedTarget:this._element};if(!P.trigger(this._element,"show.bs.dropdown",t).defaultPrevented){if(this._inNavbar)X.setDataAttribute(this._menu,"popper","none");else{if(void 0===Be)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=i:c(this._config.reference)?t=h(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);const n=this._getPopperConfig();var e=n.modifiers.find(t=>"applyStyles"===t.name&&!1===t.enabled);this._popper=Re(t,this._menu,n),e&&X.setDataAttribute(this._menu,"popper","static")}"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav")&&[].concat(...document.body.children).forEach(t=>P.on(t,"mouseover",p)),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.toggle(Ve),this._element.classList.toggle(Ve),P.trigger(this._element,"shown.bs.dropdown",t)}}}hide(){var t;!u(this._element)&&this._menu.classList.contains(Ve)&&(t={relatedTarget:this._element},this._completeHide(t))}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_addEventListeners(){P.on(this._element,"click.bs.dropdown",t=>{t.preventDefault(),this.toggle()})}_completeHide(t){P.trigger(this._element,"hide.bs.dropdown",t).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(t=>P.off(t,"mouseover",p)),this._popper&&this._popper.destroy(),this._menu.classList.remove(Ve),this._element.classList.remove(Ve),this._element.setAttribute("aria-expanded","false"),X.removeDataAttribute(this._menu,"popper"),P.trigger(this._element,"hidden.bs.dropdown",t))}_getConfig(t){if(t={...this.constructor.Default,...X.getDataAttributes(this._element),...t},i(We,t,this.constructor.DefaultType),"object"==typeof t.reference&&!c(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${We.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_getMenuElement(){return d.next(this._element,Xe)[0]}_getPlacement(){const t=this._element.parentNode;if(t.classList.contains("dropend"))return Je;if(t.classList.contains("dropstart"))return ti;var e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?Qe:Ye:e?Ze:Ge}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(t=>Number.parseInt(t,10)):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return"static"===this._config.display&&(t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,..."function"==typeof this._config.popperConfig?this._config.popperConfig(t):this._config.popperConfig}}_selectMenuItem({key:t,target:e}){const i=d.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(n);i.length&&w(i,e,t===Fe,!i.includes(e)).focus()}static dropdownInterface(t,e){const i=ni.getOrCreateInstance(t,e);if("string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e]()}}static jQueryInterface(t){return this.each(function(){ni.dropdownInterface(this,t)})}static clearMenus(i){if(!i||2!==i.button&&("keyup"!==i.type||"Tab"===i.key)){var n=d.find(Ke);for(let t=0,e=n.length;t<e;t++){const o=ni.getInstance(n[t]);if(o&&!1!==o._config.autoClose&&o._element.classList.contains(Ve)){const r={relatedTarget:o._element};if(i){const a=i.composedPath();var s=a.includes(o._menu);if(a.includes(o._element)||"inside"===o._config.autoClose&&!s||"outside"===o._config.autoClose&&s)continue;if(o._menu.contains(i.target)&&("keyup"===i.type&&"Tab"===i.key||/input|select|option|textarea|form/i.test(i.target.tagName)))continue;"click"===i.type&&(r.clickEvent=i)}o._completeHide(r)}}}}static getParentFromElement(t){return s(t)||t.parentNode}static dataApiKeydownHandler(t){if(/input|textarea/i.test(t.target.tagName)?!("Space"===t.key||t.key!==qe&&(t.key!==Fe&&t.key!==ze||t.target.closest(Xe))):Ue.test(t.key)){var e=this.classList.contains(Ve);if((e||t.key!==qe)&&(t.preventDefault(),t.stopPropagation(),!u(this))){var i=()=>this.matches(Ke)?this:d.prev(this,Ke)[0];return t.key===qe?(i().focus(),void ni.clearMenus()):t.key===ze||t.key===Fe?(e||i().click(),void ni.getInstance(i())._selectMenuItem(t)):void(e&&"Space"!==t.key||ni.clearMenus())}}}}P.on(document,Ne,Ke,ni.dataApiKeydownHandler),P.on(document,Ne,Xe,ni.dataApiKeydownHandler),P.on(document,Ie,ni.clearMenus),P.on(document,"keyup.bs.dropdown.data-api",ni.clearMenus),P.on(document,Ie,Ke,function(t){t.preventDefault(),ni.dropdownInterface(this)}),t(ni);const si=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",oi=".sticky-top";class ri{constructor(){this._element=document.body}getWidth(){var t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",t=>t+e),this._setElementAttributes(si,"paddingRight",t=>t+e),this._setElementAttributes(oi,"marginRight",t=>t-e)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,i,n){const s=this.getWidth();this._applyManipulationCallback(t,t=>{var e;t!==this._element&&window.innerWidth>t.clientWidth+s||(this._saveInitialAttribute(t,i),e=window.getComputedStyle(t)[i],t.style[i]=`${n(Number.parseFloat(e))}px`)})}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(si,"paddingRight"),this._resetElementAttributes(oi,"marginRight")}_saveInitialAttribute(t,e){var i=t.style[e];i&&X.setDataAttribute(t,e,i)}_resetElementAttributes(t,i){this._applyManipulationCallback(t,t=>{var e=X.getDataAttribute(t,i);void 0===e?t.style.removeProperty(i):(X.removeDataAttribute(t,i),t.style[i]=e)})}_applyManipulationCallback(t,e){c(t)?e(t):d.find(t,this._element).forEach(e)}isOverflowing(){return 0<this.getWidth()}}const ai={isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},li={isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},ci="backdrop",hi=`mousedown.bs.${ci}`;class di{constructor(t){this._config=this._getConfig(t),this._isAppended=!1,this._element=null}show(t){this._config.isVisible?(this._append(),this._config.isAnimated&&m(this._getElement()),this._getElement().classList.add("show"),this._emulateAnimation(()=>{b(t)})):b(t)}hide(t){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),b(t)})):b(t)}_getElement(){if(!this._element){const t=document.createElement("div");t.className="modal-backdrop",this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_getConfig(t){return(t={...ai,..."object"==typeof t?t:{}}).rootElement=h(t.rootElement),i(ci,t,li),t}_append(){this._isAppended||(this._config.rootElement.appendChild(this._getElement()),P.on(this._getElement(),hi,()=>{b(this._config.clickCallback)}),this._isAppended=!0)}dispose(){this._isAppended&&(P.off(this._element,hi),this._element.remove(),this._isAppended=!1)}_emulateAnimation(t){y(t,this._getElement(),this._config.isAnimated)}}const ui=".bs.modal";const fi={backdrop:!0,keyboard:!0,focus:!0},pi={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},mi=(ui,ui,`hidden${ui}`),gi=`show${ui}`,_i=(ui,`focusin${ui}`),vi=`resize${ui}`,bi=`click.dismiss${ui}`,yi=`keydown.dismiss${ui}`,wi=(ui,`mousedown.dismiss${ui}`);ui;const Ei="modal-open",Ai="modal-static";class Ti extends q{constructor(t,e){super(t),this._config=this._getConfig(e),this._dialog=d.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new ri}static get Default(){return fi}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||P.trigger(this._element,gi,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(Ei),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),P.on(this._element,bi,'[data-bs-dismiss="modal"]',t=>this.hide(t)),P.on(this._dialog,wi,()=>{P.one(this._element,"mouseup.dismiss.bs.modal",t=>{t.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(t)))}hide(t){t&&["A","AREA"].includes(t.target.tagName)&&t.preventDefault(),this._isShown&&!this._isTransitioning&&(P.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,(t=this._isAnimated())&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),P.off(document,_i),this._element.classList.remove("show"),P.off(this._element,bi),P.off(this._dialog,wi),this._queueCallback(()=>this._hideModal(),this._element,t)))}dispose(){[window,this._dialog].forEach(t=>P.off(t,ui)),this._backdrop.dispose(),super.dispose(),P.off(document,_i)}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new di({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_getConfig(t){return t={...fi,...X.getDataAttributes(this._element),..."object"==typeof t?t:{}},i("modal",t,pi),t}_showElement(t){var e=this._isAnimated();const i=d.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,i&&(i.scrollTop=0),e&&m(this._element),this._element.classList.add("show"),this._config.focus&&this._enforceFocus();this._queueCallback(()=>{this._config.focus&&this._element.focus(),this._isTransitioning=!1,P.trigger(this._element,"shown.bs.modal",{relatedTarget:t})},this._dialog,e)}_enforceFocus(){P.off(document,_i),P.on(document,_i,t=>{document===t.target||this._element===t.target||this._element.contains(t.target)||this._element.focus()})}_setEscapeEvent(){this._isShown?P.on(this._element,yi,t=>{this._config.keyboard&&"Escape"===t.key?(t.preventDefault(),this.hide()):this._config.keyboard||"Escape"!==t.key||this._triggerBackdropTransition()}):P.off(this._element,yi)}_setResizeEvent(){this._isShown?P.on(window,vi,()=>this._adjustDialog()):P.off(window,vi)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ei),this._resetAdjustments(),this._scrollBar.reset(),P.trigger(this._element,mi)})}_showBackdrop(t){P.on(this._element,bi,t=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:t.target===t.currentTarget&&(!0===this._config.backdrop?this.hide():"static"===this._config.backdrop&&this._triggerBackdropTransition())}),this._backdrop.show(t)}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(!P.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented){const{classList:t,scrollHeight:e,style:i}=this._element,n=e>document.documentElement.clientHeight;!n&&"hidden"===i.overflowY||t.contains(Ai)||(n||(i.overflowY="hidden"),t.add(Ai),this._queueCallback(()=>{t.remove(Ai),n||this._queueCallback(()=>{i.overflowY=""},this._dialog)},this._dialog),this._element.focus())}}_adjustDialog(){var t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),i=0<e;(!i&&t&&!v()||i&&!t&&v())&&(this._element.style.paddingLeft=`${e}px`),(i&&!t&&!v()||!i&&t&&v())&&(this._element.style.paddingRight=`${e}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,i){return this.each(function(){const t=Ti.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e](i)}})}}P.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(t){const e=s(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),P.one(e,gi,t=>{t.defaultPrevented||P.one(e,mi,()=>{n(this)&&this.focus()})});const i=Ti.getOrCreateInstance(e);i.toggle(this)}),t(Ti);const Oi="offcanvas";Ne=".bs.offcanvas";const Ci={backdrop:!0,keyboard:!0,scroll:!1},Li={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},ki=".offcanvas.show",xi=`hidden${Ne}`,Di=`focusin${Ne}`;class Si extends q{constructor(t,e){super(t),this._config=this._getConfig(e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._addEventListeners()}static get NAME(){return Oi}static get Default(){return Ci}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||P.trigger(this._element,"show.bs.offcanvas",{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||((new ri).hide(),this._enforceFocusOnElement(this._element)),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add("show"),this._queueCallback(()=>{P.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:t})},this._element,!0))}hide(){this._isShown&&(P.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(P.off(document,Di),this._element.blur(),this._isShown=!1,this._element.classList.remove("show"),this._backdrop.hide(),this._queueCallback(()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||(new ri).reset(),P.trigger(this._element,xi)},this._element,!0)))}dispose(){this._backdrop.dispose(),super.dispose(),P.off(document,Di)}_getConfig(t){return t={...Ci,...X.getDataAttributes(this._element),..."object"==typeof t?t:{}},i(Oi,t,Li),t}_initializeBackDrop(){return new di({isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_enforceFocusOnElement(e){P.off(document,Di),P.on(document,Di,t=>{document===t.target||e===t.target||e.contains(t.target)||e.focus()}),e.focus()}_addEventListeners(){P.on(this._element,"click.dismiss.bs.offcanvas",'[data-bs-dismiss="offcanvas"]',()=>this.hide()),P.on(this._element,"keydown.dismiss.bs.offcanvas",t=>{this._config.keyboard&&"Escape"===t.key&&this.hide()})}static jQueryInterface(e){return this.each(function(){const t=Si.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}P.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(t){var e=s(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),!u(this)){P.one(e,xi,()=>{n(this)&&this.focus()});t=d.findOne(ki);t&&t!==e&&Si.getInstance(t).hide();const i=Si.getOrCreateInstance(e);i.toggle(this)}}),P.on(window,"load.bs.offcanvas.data-api",()=>d.find(ki).forEach(t=>Si.getOrCreateInstance(t).show())),t(Si);const Ii=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]);const Ni=/^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/i,$i=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;Ie={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function ji(t,i,e){if(!t.length)return t;if(e&&"function"==typeof e)return e(t);const n=new window.DOMParser,s=n.parseFromString(t,"text/html"),o=Object.keys(i);var r=[].concat(...s.body.querySelectorAll("*"));for(let t=0,e=r.length;t<e;t++){const l=r[t];var a=l.nodeName.toLowerCase();if(o.includes(a)){const c=[].concat(...l.attributes),h=[].concat(i["*"]||[],i[a]||[]);c.forEach(t=>{((t,e)=>{var i=t.nodeName.toLowerCase();if(e.includes(i))return!Ii.has(i)||Boolean(Ni.test(t.nodeValue)||$i.test(t.nodeValue));const n=e.filter(t=>t instanceof RegExp);for(let t=0,e=n.length;t<e;t++)if(n[t].test(i))return!0;return!1})(t,h)||l.removeAttribute(t.nodeName)})}else l.remove()}return s.body.innerHTML}const Mi="tooltip";Ne=".bs.tooltip";const Pi="bs-tooltip",Hi=new RegExp(`(^|\\s)${Pi}\\S+`,"g"),Ri=new Set(["sanitize","allowList","sanitizeFn"]),Bi={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},Wi={AUTO:"auto",TOP:"top",RIGHT:v()?"left":"right",BOTTOM:"bottom",LEFT:v()?"right":"left"},qi={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:Ie,popperConfig:null},zi={HIDE:`hide${Ne}`,HIDDEN:`hidden${Ne}`,SHOW:`show${Ne}`,SHOWN:`shown${Ne}`,INSERTED:`inserted${Ne}`,CLICK:`click${Ne}`,FOCUSIN:`focusin${Ne}`,FOCUSOUT:`focusout${Ne}`,MOUSEENTER:`mouseenter${Ne}`,MOUSELEAVE:`mouseleave${Ne}`},Fi="fade",Ui="show",Vi="show",Ki="hover",Xi="focus";class Yi extends q{constructor(t,e){if(void 0===Be)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(e),this.tip=null,this._setListeners()}static get Default(){return qi}static get NAME(){return Mi}static get Event(){return zi}static get DefaultType(){return Bi}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(t){if(this._isEnabled)if(t){const e=this._initializeOnDelegatedTarget(t);e._activeTrigger.click=!e._activeTrigger.click,e._isWithActiveTrigger()?e._enter(null,e):e._leave(null,e)}else this.getTipElement().classList.contains(Ui)?this._leave(null,this):this._enter(null,this)}dispose(){clearTimeout(this._timeout),P.off(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler),this.tip&&this.tip.remove(),this._popper&&this._popper.destroy(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(this.isWithContent()&&this._isEnabled){var t=P.trigger(this._element,this.constructor.Event.SHOW);const i=f(this._element);var e=(null===i?this._element.ownerDocument.documentElement:i).contains(this._element);if(!t.defaultPrevented&&e){const n=this.getTipElement();e=r(this.constructor.NAME);n.setAttribute("id",e),this._element.setAttribute("aria-describedby",e),this.setContent(),this._config.animation&&n.classList.add(Fi);e="function"==typeof this._config.placement?this._config.placement.call(this,n,this._element):this._config.placement,e=this._getAttachment(e);this._addAttachmentClass(e);const{container:s}=this._config;R(n,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(s.appendChild(n),P.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=Re(this._element,n,this._getPopperConfig(e)),n.classList.add(Ui);const o="function"==typeof this._config.customClass?this._config.customClass():this._config.customClass;o&&n.classList.add(...o.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(t=>{P.on(t,"mouseover",p)});e=this.tip.classList.contains(Fi);this._queueCallback(()=>{var t=this._hoverState;this._hoverState=null,P.trigger(this._element,this.constructor.Event.SHOWN),"out"===t&&this._leave(null,this)},this.tip,e)}}}hide(){if(this._popper){const e=this.getTipElement();var t;P.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented||(e.classList.remove(Ui),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(t=>P.off(t,"mouseover",p)),this._activeTrigger.click=!1,this._activeTrigger[Xi]=!1,this._activeTrigger[Ki]=!1,t=this.tip.classList.contains(Fi),this._queueCallback(()=>{this._isWithActiveTrigger()||(this._hoverState!==Vi&&e.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),P.trigger(this._element,this.constructor.Event.HIDDEN),this._popper&&(this._popper.destroy(),this._popper=null))},this.tip,t),this._hoverState="")}}update(){null!==this._popper&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const t=document.createElement("div");return t.innerHTML=this._config.template,this.tip=t.children[0],this.tip}setContent(){const t=this.getTipElement();this.setElementContent(d.findOne(".tooltip-inner",t),this.getTitle()),t.classList.remove(Fi,Ui)}setElementContent(t,e){if(null!==t)return c(e)?(e=h(e),void(this._config.html?e.parentNode!==t&&(t.innerHTML="",t.appendChild(e)):t.textContent=e.textContent)):void(this._config.html?(this._config.sanitize&&(e=ji(e,this._config.allowList,this._config.sanitizeFn)),t.innerHTML=e):t.textContent=e)}getTitle(){let t=this._element.getAttribute("data-bs-original-title");return t=t||("function"==typeof this._config.title?this._config.title.call(this._element):this._config.title),t}updateAttachment(t){return"right"===t?"end":"left"===t?"start":t}_initializeOnDelegatedTarget(t,e){var i=this.constructor.DATA_KEY;return(e=e||B(t.delegateTarget,i))||(e=new this.constructor(t.delegateTarget,this._getDelegateConfig()),R(t.delegateTarget,i,e)),e}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(t=>Number.parseInt(t,10)):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(t){t={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:t=>this._handlePopperPlacementChange(t)}],onFirstUpdate:t=>{t.options.placement!==t.placement&&this._handlePopperPlacementChange(t)}};return{...t,..."function"==typeof this._config.popperConfig?this._config.popperConfig(t):this._config.popperConfig}}_addAttachmentClass(t){this.getTipElement().classList.add(`${Pi}-${this.updateAttachment(t)}`)}_getAttachment(t){return Wi[t.toUpperCase()]}_setListeners(){const t=this._config.trigger.split(" ");t.forEach(t=>{var e;"click"===t?P.on(this._element,this.constructor.Event.CLICK,this._config.selector,t=>this.toggle(t)):"manual"!==t&&(e=t===Ki?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,t=t===Ki?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT,P.on(this._element,e,this._config.selector,t=>this._enter(t)),P.on(this._element,t,this._config.selector,t=>this._leave(t)))}),this._hideModalHandler=()=>{this._element&&this.hide()},P.on(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){var t=this._element.getAttribute("title"),e=typeof this._element.getAttribute("data-bs-original-title");!t&&"string"==e||(this._element.setAttribute("data-bs-original-title",t||""),!t||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",t),this._element.setAttribute("title",""))}_enter(t,e){e=this._initializeOnDelegatedTarget(t,e),t&&(e._activeTrigger["focusin"===t.type?Xi:Ki]=!0),e.getTipElement().classList.contains(Ui)||e._hoverState===Vi?e._hoverState=Vi:(clearTimeout(e._timeout),e._hoverState=Vi,e._config.delay&&e._config.delay.show?e._timeout=setTimeout(()=>{e._hoverState===Vi&&e.show()},e._config.delay.show):e.show())}_leave(t,e){e=this._initializeOnDelegatedTarget(t,e),t&&(e._activeTrigger["focusout"===t.type?Xi:Ki]=e._element.contains(t.relatedTarget)),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState="out",e._config.delay&&e._config.delay.hide?e._timeout=setTimeout(()=>{"out"===e._hoverState&&e.hide()},e._config.delay.hide):e.hide())}_isWithActiveTrigger(){for(const t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1}_getConfig(t){const e=X.getDataAttributes(this._element);return Object.keys(e).forEach(t=>{Ri.has(t)&&delete e[t]}),(t={...this.constructor.Default,...e,..."object"==typeof t&&t?t:{}}).container=!1===t.container?document.body:h(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),i(Mi,t,this.constructor.DefaultType),t.sanitize&&(t.template=ji(t.template,t.allowList,t.sanitizeFn)),t}_getDelegateConfig(){const t={};if(this._config)for(const e in this._config)this.constructor.Default[e]!==this._config[e]&&(t[e]=this._config[e]);return t}_cleanTipClass(){const e=this.getTipElement(),t=e.getAttribute("class").match(Hi);null!==t&&0<t.length&&t.map(t=>t.trim()).forEach(t=>e.classList.remove(t))}_handlePopperPlacementChange(t){var{state:t}=t;t&&(this.tip=t.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(t.placement)))}static jQueryInterface(e){return this.each(function(){const t=Yi.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}t(Yi);Ne=".bs.popover";const Qi="bs-popover",Gi=new RegExp(`(^|\\s)${Qi}\\S+`,"g"),Zi={...Yi.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'},Ji={...Yi.DefaultType,content:"(string|element|function)"},tn={HIDE:`hide${Ne}`,HIDDEN:`hidden${Ne}`,SHOW:`show${Ne}`,SHOWN:`shown${Ne}`,INSERTED:`inserted${Ne}`,CLICK:`click${Ne}`,FOCUSIN:`focusin${Ne}`,FOCUSOUT:`focusout${Ne}`,MOUSEENTER:`mouseenter${Ne}`,MOUSELEAVE:`mouseleave${Ne}`},en=".popover-header",nn=".popover-body";class sn extends Yi{static get Default(){return Zi}static get NAME(){return"popover"}static get Event(){return tn}static get DefaultType(){return Ji}isWithContent(){return this.getTitle()||this._getContent()}getTipElement(){return this.tip||(this.tip=super.getTipElement(),this.getTitle()||d.findOne(en,this.tip).remove(),this._getContent()||d.findOne(nn,this.tip).remove(),this.tip)}setContent(){const t=this.getTipElement();this.setElementContent(d.findOne(en,t),this.getTitle());let e=this._getContent();"function"==typeof e&&(e=e.call(this._element)),this.setElementContent(d.findOne(nn,t),e),t.classList.remove("fade","show")}_addAttachmentClass(t){this.getTipElement().classList.add(`${Qi}-${this.updateAttachment(t)}`)}_getContent(){return this._element.getAttribute("data-bs-content")||this._config.content}_cleanTipClass(){const e=this.getTipElement(),t=e.getAttribute("class").match(Gi);null!==t&&0<t.length&&t.map(t=>t.trim()).forEach(t=>e.classList.remove(t))}static jQueryInterface(e){return this.each(function(){const t=sn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}t(sn);const on="scrollspy";const rn=".bs.scrollspy";const an={offset:10,method:"auto",target:""},ln={offset:"number",method:"string",target:"(string|element)"};rn,rn;rn;const cn="dropdown-item",hn="active",dn=".nav-link",un=".list-group-item",fn="position";class pn extends q{constructor(t,e){super(t),this._scrollElement="BODY"===this._element.tagName?window:this._element,this._config=this._getConfig(e),this._selector=`${this._config.target} ${dn}, ${this._config.target} ${un}, ${this._config.target} .${cn}`,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,P.on(this._scrollElement,"scroll.bs.scrollspy",()=>this._process()),this.refresh(),this._process()}static get Default(){return an}static get NAME(){return on}refresh(){var t=this._scrollElement===this._scrollElement.window?"offset":fn;const n="auto"===this._config.method?t:this._config.method,s=n===fn?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight();const e=d.find(this._selector);e.map(t=>{var e=a(t);const i=e?d.findOne(e):null;if(i){t=i.getBoundingClientRect();if(t.width||t.height)return[X[n](i).top+s,e]}return null}).filter(t=>t).sort((t,e)=>t[0]-e[0]).forEach(t=>{this._offsets.push(t[0]),this._targets.push(t[1])})}dispose(){P.off(this._scrollElement,rn),super.dispose()}_getConfig(e){if("string"!=typeof(e={...an,...X.getDataAttributes(this._element),..."object"==typeof e&&e?e:{}}).target&&c(e.target)){let{id:t}=e.target;t||(t=r(on),e.target.id=t),e.target=`#${t}`}return i(on,e,ln),e}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){var e=this._getScrollTop()+this._config.offset,t=this._getScrollHeight(),i=this._config.offset+t-this._getOffsetHeight();if(this._scrollHeight!==t&&this.refresh(),i<=e){i=this._targets[this._targets.length-1];this._activeTarget!==i&&this._activate(i)}else{if(this._activeTarget&&e<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(let t=this._offsets.length;t--;)this._activeTarget!==this._targets[t]&&e>=this._offsets[t]&&(void 0===this._offsets[t+1]||e<this._offsets[t+1])&&this._activate(this._targets[t])}}_activate(e){this._activeTarget=e,this._clear();const t=this._selector.split(",").map(t=>`${t}[data-bs-target="${e}"],${t}[href="${e}"]`),i=d.findOne(t.join(","));i.classList.contains(cn)?(d.findOne(".dropdown-toggle",i.closest(".dropdown")).classList.add(hn),i.classList.add(hn)):(i.classList.add(hn),d.parents(i,".nav, .list-group").forEach(t=>{d.prev(t,`${dn}, ${un}`).forEach(t=>t.classList.add(hn)),d.prev(t,".nav-item").forEach(t=>{d.children(t,dn).forEach(t=>t.classList.add(hn))})})),P.trigger(this._scrollElement,"activate.bs.scrollspy",{relatedTarget:e})}_clear(){d.find(this._selector).filter(t=>t.classList.contains(hn)).forEach(t=>t.classList.remove(hn))}static jQueryInterface(e){return this.each(function(){const t=pn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}P.on(window,"load.bs.scrollspy.data-api",()=>{d.find('[data-bs-spy="scroll"]').forEach(t=>new pn(t))}),t(pn);const mn="active",gn=".active",_n=":scope > li > .active";class vn extends q{static get NAME(){return"tab"}show(){if(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE||!this._element.classList.contains(mn)){let t;var e=s(this._element),i=this._element.closest(".nav, .list-group");i&&(n="UL"===i.nodeName||"OL"===i.nodeName?_n:gn,t=d.find(n,i),t=t[t.length-1]);var n=t?P.trigger(t,"hide.bs.tab",{relatedTarget:this._element}):null;P.trigger(this._element,"show.bs.tab",{relatedTarget:t}).defaultPrevented||null!==n&&n.defaultPrevented||(this._activate(this._element,i),i=()=>{P.trigger(t,"hidden.bs.tab",{relatedTarget:this._element}),P.trigger(this._element,"shown.bs.tab",{relatedTarget:t})},e?this._activate(e,e.parentNode,i):i())}}_activate(t,e,i){const n=(!e||"UL"!==e.nodeName&&"OL"!==e.nodeName?d.children(e,gn):d.find(_n,e))[0];var s=i&&n&&n.classList.contains("fade"),e=()=>this._transitionComplete(t,n,i);n&&s?(n.classList.remove("show"),this._queueCallback(e,t,!0)):e()}_transitionComplete(t,e,i){if(e){e.classList.remove(mn);const s=d.findOne(":scope > .dropdown-menu .active",e.parentNode);s&&s.classList.remove(mn),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}t.classList.add(mn),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),m(t),t.classList.contains("fade")&&t.classList.add("show");let n=t.parentNode;n&&"LI"===n.nodeName&&(n=n.parentNode),n&&n.classList.contains("dropdown-menu")&&((e=t.closest(".dropdown"))&&d.find(".dropdown-toggle",e).forEach(t=>t.classList.add(mn)),t.setAttribute("aria-expanded",!0)),i&&i()}static jQueryInterface(e){return this.each(function(){const t=vn.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}P.on(document,"click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',function(t){if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),!u(this)){const e=vn.getOrCreateInstance(this);e.show()}}),t(vn);const bn="show",yn="showing",wn={animation:"boolean",autohide:"boolean",delay:"number"},En={animation:!0,autohide:!0,delay:5e3};class An extends q{constructor(t,e){super(t),this._config=this._getConfig(e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return wn}static get Default(){return En}static get NAME(){return"toast"}show(){P.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),m(this._element),this._element.classList.add(yn),this._queueCallback(()=>{this._element.classList.remove(yn),this._element.classList.add(bn),P.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this._element.classList.contains(bn)&&(P.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.remove(bn),this._queueCallback(()=>{this._element.classList.add("hide"),P.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this._element.classList.contains(bn)&&this._element.classList.remove(bn),super.dispose()}_getConfig(t){return t={...En,...X.getDataAttributes(this._element),..."object"==typeof t&&t?t:{}},i("toast",t,this.constructor.DefaultType),t}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}e?this._clearTimeout():(t=t.relatedTarget,this._element===t||this._element.contains(t)||this._maybeScheduleHide())}_setListeners(){P.on(this._element,"click.dismiss.bs.toast",'[data-bs-dismiss="toast"]',()=>this.hide()),P.on(this._element,"mouseover.bs.toast",t=>this._onInteraction(t,!0)),P.on(this._element,"mouseout.bs.toast",t=>this._onInteraction(t,!1)),P.on(this._element,"focusin.bs.toast",t=>this._onInteraction(t,!0)),P.on(this._element,"focusout.bs.toast",t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=An.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}})}}return t(An),{Alert:z,Button:U,Carousel:at,Collapse:_t,Dropdown:ni,Modal:Ti,Offcanvas:Si,Popover:sn,ScrollSpy:pn,Tab:vn,Toast:An,Tooltip:Yi}});
!function(e){const t=e.en=e.en||{};t.dictionary=Object.assign(t.dictionary||{},{"%0 of %1":"%0 of %1",Aquamarine:"Aquamarine",Black:"Black","Block quote":"Block quote",Blue:"Blue",Bold:"Bold","Break text":"Break text","Bulleted List":"Bulleted List",Cancel:"Cancel","Cannot upload file:":"Cannot upload file:","Centered image":"Centered image","Change image text alternative":"Change image text alternative","Choose heading":"Choose heading",Column:"Column","Could not insert image at the current position.":"Could not insert image at the current position.","Could not obtain resized image URL.":"Could not obtain resized image URL.","Decrease indent":"Decrease indent","Delete column":"Delete column","Delete row":"Delete row","Dim grey":"Dim grey",Downloadable:"Downloadable","Dropdown toolbar":"Dropdown toolbar","Edit block":"Edit block","Edit link":"Edit link","Editor toolbar":"Editor toolbar","Enter image caption":"Enter image caption","Full size image":"Full size image",Green:"Green",Grey:"Grey","Header column":"Header column","Header row":"Header row",Heading:"Heading","Heading 1":"Heading 1","Heading 2":"Heading 2","Heading 3":"Heading 3","Heading 4":"Heading 4","Heading 5":"Heading 5","Heading 6":"Heading 6","Image toolbar":"Image toolbar","image widget":"image widget","In line":"In line","Increase indent":"Increase indent","Insert column left":"Insert column left","Insert column right":"Insert column right","Insert image":"Insert image","Insert image or file":"Insert image or file","Insert media":"Insert media","Insert paragraph after block":"Insert paragraph after block","Insert paragraph before block":"Insert paragraph before block","Insert row above":"Insert row above","Insert row below":"Insert row below","Insert table":"Insert table","Inserting image failed":"Inserting image failed",Italic:"Italic","Left aligned image":"Left aligned image","Light blue":"Light blue","Light green":"Light green","Light grey":"Light grey",Link:"Link","Link URL":"Link URL","Media URL":"Media URL","media widget":"media widget","Merge cell down":"Merge cell down","Merge cell left":"Merge cell left","Merge cell right":"Merge cell right","Merge cell up":"Merge cell up","Merge cells":"Merge cells",Next:"Next","Numbered List":"Numbered List","Open in a new tab":"Open in a new tab","Open link in new tab":"Open link in new tab",Orange:"Orange",Paragraph:"Paragraph","Paste the media URL in the input.":"Paste the media URL in the input.",Previous:"Previous",Purple:"Purple",Red:"Red",Redo:"Redo","Rich Text Editor":"Rich Text Editor","Rich Text Editor, %0":"Rich Text Editor, %0","Right aligned image":"Right aligned image",Row:"Row",Save:"Save","Select all":"Select all","Select column":"Select column","Select row":"Select row","Selecting resized image failed":"Selecting resized image failed","Show more items":"Show more items","Side image":"Side image","Split cell horizontally":"Split cell horizontally","Split cell vertically":"Split cell vertically","Table toolbar":"Table toolbar","Text alternative":"Text alternative","The URL must not be empty.":"The URL must not be empty.","This link has no URL":"This link has no URL","This media URL is not supported.":"This media URL is not supported.","Tip: Paste the URL into the content to embed faster.":"Tip: Paste the URL into the content to embed faster.","Toggle caption off":"Toggle caption off","Toggle caption on":"Toggle caption on",Turquoise:"Turquoise",Undo:"Undo",Unlink:"Unlink","Upload failed":"Upload failed","Upload in progress":"Upload in progress",White:"White","Widget toolbar":"Widget toolbar","Wrap text":"Wrap text",Yellow:"Yellow"})}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ClassicEditor=t():e.ClassicEditor=t()}(window,function(){return i=[function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"b",function(){return o});class n extends Error{constructor(e,t,i){super(`${e}${i?" "+JSON.stringify(i):""}${r(e)}`),this.name="CKEditorError",this.context=t,this.data=i}is(e){return"CKEditorError"===e}static rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;const i=new n(e.message,t);throw i.stack=e.stack,i}}function o(e,t){var i;console.warn(...(e=r(i=e),t?[i,t,e]:[i,e]))}function r(e){return"\nRead more: https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html#error-"+e}},function(e,t,o){"use strict";var i,n,r=(n={},function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}),c=[];function d(e){for(var t=-1,i=0;i<c.length;i++)if(c[i].identifier===e){t=i;break}return t}function a(e,t){for(var i={},n=[],o=0;o<e.length;o++){var r=e[o],s=t.base?r[0]+t.base:r[0],a=i[s]||0,l="".concat(s," ").concat(a);i[s]=a+1,a=d(l),r={css:r[1],media:r[2],sourceMap:r[3]},-1!==a?(c[a].references++,c[a].updater(r)):c.push({identifier:l,updater:function(t,e){var i,n,o,r=e.singleton?(o=m++,i=g=g||h(e),n=u.bind(null,i,o,!1),u.bind(null,i,o,!0)):(i=h(e),n=function(e,t,i){var n=i.css,o=i.media,i=i.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,i,e),function(){var e;null!==(e=i).parentNode&&e.parentNode.removeChild(e)});return n(t),function(e){e?e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap||n(t=e):r()}}(r,t),references:1}),n.push(l)}return n}function h(e){var t,i=document.createElement("style"),n=e.attributes||{};if(void 0!==n.nonce||(t=o.nc)&&(n.nonce=t),Object.keys(n).forEach(function(e){i.setAttribute(e,n[e])}),"function"==typeof e.insert)e.insert(i);else{if(!(e=r(e.insert||"head")))throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");e.appendChild(i)}return i}var s,l=(s=[],function(e,t){return s[e]=t,s.filter(Boolean).join("\n")});function u(e,t,i,n){i=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css,e.styleSheet?e.styleSheet.cssText=l(t,i):(n=document.createTextNode(i),(i=e.childNodes)[t]&&e.removeChild(i[t]),i.length?e.insertBefore(n,i[t]):e.appendChild(n))}var g=null,m=0;e.exports=function(e,r){(r=r||{}).singleton||"boolean"==typeof r.singleton||(r.singleton=i=void 0===i?Boolean(window&&document&&document.all&&!window.atob):i);var s=a(e=e||[],r);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var t=0;t<s.length;t++){var i=d(s[t]);c[i].references--}for(var e=a(e,r),n=0;n<s.length;n++){var o=d(s[n]);0===c[o].references&&(c[o].updater(),c.splice(o,1))}s=e}}}},,function(e,t,i){"use strict";var n=i(8),i="object"==typeof self&&self&&self.Object===Object&&self,i=n.a||i||Function("return this")();t.a=i},function(e,o,r){"use strict";!function(e){var t=r(3),i=r(14),n="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=((t=(e=n&&"object"==typeof e&&e&&!e.nodeType&&e)&&e.exports===n?t.a.Buffer:void 0)?t.isBuffer:void 0)||i.a;o.a=i}.call(this,r(10)(e))},function(e,r,s){"use strict";!function(e){var t=s(8),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,n=i&&"object"==typeof e&&e&&!e.nodeType&&e,o=n&&n.exports===i&&t.a.process,t=function(){try{return n&&n.require&&n.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();r.a=t}.call(this,s(10)(e))},function(e,t,n){"use strict";!function(e){var t=n(0);const i="object"==typeof window?window:e;if(i.CKEDITOR_VERSION)throw new t.a("ckeditor-duplicated-modules",null);i.CKEDITOR_VERSION="29.1.0"}.call(this,n(12))},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(76)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t,i){"use strict";!function(e){e="object"==typeof e&&e&&e.Object===Object&&e,t.a=e}.call(this,i(12))},function(e,o,r){"use strict";!function(e){var t=r(3),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,n=(t=(e=i&&"object"==typeof e&&e&&!e.nodeType&&e)&&e.exports===i?t.a.Buffer:void 0)?t.allocUnsafe:void 0;o.a=function(e,t){return t?e.slice():(t=e.length,t=n?n(t):new e.constructor(t),e.copy(t),t)}}.call(this,r(10)(e))},function(e,t){e.exports=function(e){var t;return e.webpackPolyfill||((t=Object.create(e)).children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1),t}},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(77)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){var i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(71)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t,i){"use strict";t.a=function(){return!1}},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(16)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999)}.ck-transitions-disabled,.ck-transitions-disabled *{transition:none!important}:root{--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-base-error:#db3700;--ck-color-focus-border-coordinates:208,79%,51%;--ck-color-focus-border:hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow:#bcdefb;--ck-color-focus-disabled-shadow:rgba(119,186,248,0.3);--ck-color-focus-error-shadow:rgba(255,64,31,0.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,0.15);--ck-color-shadow-drop-active:rgba(0,0,0,0.2);--ck-color-shadow-inner:rgba(0,0,0,0.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-hover-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#b0b0b0;--ck-color-switch-button-off-hover-background:#a3a3a3;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#579e3d;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,0.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#757575;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-base-active);--ck-color-list-button-on-background-focus:var(--ck-color-base-active-focus);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,177,255,0.1);--ck-color-link-fake-selection:rgba(31,177,255,0.3);--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(18)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon :not([fill]){fill:currentColor}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(20)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports='.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%;top:0;transition:opacity .2s ease-in-out .2s}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s;border-style:solid;left:50%}.ck.ck-tooltip.ck-tooltip_s,.ck.ck-tooltip.ck-tooltip_se,.ck.ck-tooltip.ck-tooltip_sw{bottom:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after,.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text:after,.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text:after{top:calc(var(--ck-tooltip-arrow-size)*-1 + 1px);transform:translateX(-50%);border-left-color:transparent;border-bottom-color:var(--ck-color-tooltip-background);border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:0}.ck.ck-tooltip.ck-tooltip_sw{right:50%;left:auto}.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text{left:auto;right:calc(var(--ck-tooltip-arrow-size)*-2)}.ck.ck-tooltip.ck-tooltip_sw .ck-tooltip__text:after{left:auto;right:0}.ck.ck-tooltip.ck-tooltip_se{left:50%;right:auto}.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text{right:auto;left:calc(var(--ck-tooltip-arrow-size)*-2)}.ck.ck-tooltip.ck-tooltip_se .ck-tooltip__text:after{right:auto;left:0;transform:translateX(50%)}.ck.ck-tooltip.ck-tooltip_n{top:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(var(--ck-tooltip-arrow-size)*-1);transform:translateX(-50%);border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;border-top-color:var(--ck-color-tooltip-background);border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:0;border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_e{left:calc(100% + var(--ck-tooltip-arrow-size));top:50%}.ck.ck-tooltip.ck-tooltip_e .ck-tooltip__text{left:0;transform:translateY(-50%)}.ck.ck-tooltip.ck-tooltip_e .ck-tooltip__text:after{left:calc(var(--ck-tooltip-arrow-size)*-1);top:calc(50% - var(--ck-tooltip-arrow-size)*1);border-left-color:transparent;border-bottom-color:transparent;border-right-color:var(--ck-color-tooltip-background);border-top-color:transparent;border-left-width:0;border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_w{right:calc(100% + var(--ck-tooltip-arrow-size));left:auto;top:50%}.ck.ck-tooltip.ck-tooltip_w .ck-tooltip__text{left:0;transform:translateY(-50%)}.ck.ck-tooltip.ck-tooltip_w .ck-tooltip__text:after{left:100%;top:calc(50% - var(--ck-tooltip-arrow-size)*1);border-left-color:var(--ck-color-tooltip-background);border-bottom-color:transparent;border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:0;border-top-width:var(--ck-tooltip-arrow-size)}'},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(22)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}@media (hover:none){.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:none}}.ck.ck-button,a.ck.ck-button{position:relative;display:inline-flex;align-items:center;justify-content:left}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(var(--ck-spacing-small)*-1);margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:calc(var(--ck-spacing-small)*-1);margin-left:var(--ck-spacing-small)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(24)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:1.0769230769em;--ck-switch-button-toggle-spacing:1px;--ck-switch-button-translation:calc(var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - var(--ck-switch-button-toggle-spacing)*2)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(var(--ck-spacing-large)*2)}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(var(--ck-spacing-large)*2)}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{transition:background .4s ease;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(var(--ck-border-radius)*0.5)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{margin:var(--ck-switch-button-toggle-spacing);width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var(--ck-switch-button-translation))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(var(--ck-switch-button-translation)*-1))}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(26)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-color-grid{display:grid}:root{--ck-color-grid-tile-size:24px;--ck-color-color-grid-check-icon:#000}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{width:var(--ck-color-grid-tile-size);height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);padding:0;transition:box-shadow .2s ease;border:0}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile.ck-color-table__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile .ck.ck-icon{display:none;color:var(--ck-color-color-grid-check-icon)}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(28)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports='.ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button .ck-tooltip{display:none}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-top-right-radius:unset;border-bottom-right-radius:unset}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-top-left-radius:unset;border-bottom-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-left-radius:unset;border-bottom-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-right-radius:unset;border-bottom-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{content:"";position:absolute;width:1px;height:100%;background-color:var(--ck-color-split-button-hover-border)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{left:-1px}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{right:-1px}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}'},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(30)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-dropdown-max-width:75vw}.ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);max-width:var(--ck-dropdown-max-width);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{top:100%;bottom:auto}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s{left:50%;transform:translateX(-50%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw{left:75%;transform:translateX(-75%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme{left:25%;transform:translateX(-25%)}.ck.ck-toolbar .ck-dropdown__panel{z-index:calc(var(--ck-z-modal) + 1)}:root{--ck-dropdown-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active{box-shadow:none}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active:focus,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active:focus{box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-dropdown__panel{border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(32)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row nowrap;align-items:center}.ck.ck-toolbar>.ck-toolbar__items{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar .ck-toolbar__line-break{flex-basis:100%}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;width:1px;min-width:1px;background:var(--ck-color-toolbar-border);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar .ck-toolbar__line-break{height:0}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break){margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break),.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-right:var(--ck-spacing-small)}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(34)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{min-height:unset;width:100%;text-align:left;border-radius:0;padding:calc(var(--ck-line-height-base)*0.2*var(--ck-font-size-base)) calc(var(--ck-line-height-base)*0.4*var(--ck-font-size-base))}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(var(--ck-line-height-base)*1.2*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border)}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(36)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-toolbar-dropdown-max-width:60vw}.ck.ck-toolbar-dropdown>.ck-dropdown__panel{width:max-content;max-width:var(--ck-toolbar-dropdown-max-width)}.ck.ck-toolbar-dropdown>.ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(38)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(40)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-color-editable-blur-selection:#d9d9d9}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(42)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(44)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-form__header{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:space-between}:root{--ck-form-header-height:38px}.ck.ck-form__header{padding:var(--ck-spacing-small) var(--ck-spacing-large);height:var(--ck-form-header-height);line-height:var(--ck-form-header-height);border-bottom:1px solid var(--ck-color-base-border)}.ck.ck-form__header .ck-form__header__label{font-weight:700}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(46)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners .ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-text{background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-text-width);min-height:var(--ck-ui-component-min-height);transition:box-shadow .1s ease-in-out,border .1s ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-input-text[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input-text[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-input-text.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-text-input-shake .3s ease both}.ck.ck-input-text.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),0 0}@keyframes ck-text-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(48)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{display:flex;position:relative}.ck.ck-labeled-field-view .ck.ck-label{display:block;position:absolute}:root{--ck-labeled-field-view-transition:.1s cubic-bezier(0,0,0.24,0.95);--ck-labeled-field-empty-unfocused-max-width:100% - 2 * var(--ck-spacing-medium);--ck-color-labeled-field-label-background:var(--ck-color-base-background)}.ck.ck-labeled-field-view{border-radius:0}.ck-rounded-corners .ck.ck-labeled-field-view,.ck.ck-labeled-field-view.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{width:100%}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{top:0}[dir=ltr] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{left:0}[dir=rtl] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{right:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{pointer-events:none;transform-origin:0 0;transform:translate(var(--ck-spacing-medium),-6px) scale(.75);background:var(--ck-color-labeled-field-label-background);padding:0 calc(var(--ck-font-size-tiny)*0.5);line-height:normal;font-weight:400;text-overflow:ellipsis;overflow:hidden;max-width:100%;transition:transform var(--ck-labeled-field-view-transition),padding var(--ck-labeled-field-view-transition),background var(--ck-labeled-field-view-transition)}.ck.ck-labeled-field-view.ck-error .ck-input:not([readonly])+.ck.ck-label,.ck.ck-labeled-field-view.ck-error>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status.ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-input-disabled-text)}[dir=ltr] .ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=ltr] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(var(--ck-spacing-medium),calc(var(--ck-font-size-base)*0.6)) scale(1)}[dir=rtl] .ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=rtl] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(calc(var(--ck-spacing-medium)*-1),calc(var(--ck-font-size-base)*0.6)) scale(1)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width));background:transparent;padding:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck.ck-button{background:transparent}.ck.ck-labeled-field-view.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck-button>.ck-button__label{opacity:0}.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown+.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard))}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(50)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px;--ck-balloon-arrow-drop-shadow:0 2px 2px var(--ck-color-shadow-drop)}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:var(--ck-balloon-arrow-height);border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:0}.ck.ck-balloon-panel[class*=arrow_n]:before{border-bottom-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.ck.ck-balloon-panel[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background);margin-top:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:0;border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-top-color:var(--ck-color-panel-border);filter:drop-shadow(var(--ck-balloon-arrow-drop-shadow))}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent}.ck.ck-balloon-panel[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background);margin-bottom:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{right:25%;margin-right:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);bottom:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{right:25%;margin-right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}'},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(52)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(54)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(56)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-sticky-panel .ck-sticky-panel__content_sticky{z-index:var(--ck-z-modal);position:fixed;top:0}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{top:auto;position:absolute}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{box-shadow:var(--ck-drop-shadow),0 0;border-width:0 1px 1px;border-top-left-radius:0;border-top-right-radius:0}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(58)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-block-toolbar-button{position:absolute;z-index:var(--ck-z-default)}:root{--ck-color-block-toolbar-button:var(--ck-color-text);--ck-block-toolbar-button-size:var(--ck-font-size-normal)}.ck.ck-block-toolbar-button{color:var(--ck-color-block-toolbar-button);font-size:var(--ck-block-toolbar-size)}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(60)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-placeholder,.ck .ck-placeholder{position:relative}.ck.ck-placeholder:before,.ck .ck-placeholder:before{position:absolute;left:0;right:0;content:attr(data-placeholder);pointer-events:none}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-placeholder:before,.ck .ck-placeholder:before{cursor:text;color:var(--ck-color-engine-placeholder-text)}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(62)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-modal)}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(64)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports='.ck .ck-widget .ck-widget__type-around__button{display:block;position:absolute;overflow:hidden;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{position:absolute;top:50%;left:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{top:calc(var(--ck-widget-outline-thickness)*-0.5);left:min(10%,30px);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(var(--ck-widget-outline-thickness)*-0.5);right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:"";display:block;position:absolute;top:1px;left:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;position:absolute;left:0;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(var(--ck-widget-outline-thickness)*-1);right:calc(var(--ck-widget-outline-thickness)*-1)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{top:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}:root{--ck-widget-type-around-button-size:20px;--ck-color-widget-type-around-button-active:var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover:var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable:var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha:0;--ck-color-widget-type-around-button-radar-end-alpha:.3;--ck-color-widget-type-around-button-icon:var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{width:var(--ck-widget-type-around-button-size);height:var(--ck-widget-type-around-button-size);background:var(--ck-color-widget-type-around-button);border-radius:100px;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);opacity:0;pointer-events:none}.ck .ck-widget .ck-widget__type-around__button svg{width:10px;height:8px;transform:translate(-50%,-50%);transition:transform .5s ease;margin-top:1px}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{width:calc(var(--ck-widget-type-around-button-size) - 2px);height:calc(var(--ck-widget-type-around-button-size) - 2px);border-radius:100px;background:linear-gradient(135deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.3))}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{pointer-events:none;height:1px;animation:ck-widget-type-around-fake-caret-pulse 1s linear infinite normal forwards;outline:1px solid hsla(0,0%,100%,.5);background:var(--ck-color-base-text)}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before{outline-color:transparent}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:0}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer{opacity:0}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:0;margin-right:20px}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}'},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(66)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2;--ck-resizer-border-radius:var(--ck-border-radius);--ck-resizer-tooltip-offset:10px;--ck-resizer-tooltip-height:calc(var(--ck-spacing-small)*2 + 10px)}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:0 var(--ck-spacing-small);height:var(--ck-resizer-tooltip-height);line-height:var(--ck-resizer-tooltip-height)}.ck .ck-size-view.ck-orientation-above-center,.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-above-center{top:calc(var(--ck-resizer-tooltip-height)*-1);left:50%;transform:translate(-50%)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;background-color:var(--ck-color-widget-editable-focus-background)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness));top:0}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness:0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(68)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports='.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position{display:inline;position:relative;pointer-events:none}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{position:absolute;width:0}.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__selection-handle,.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__type-around{display:none}:root{--ck-clipboard-drop-target-dot-width:12px;--ck-clipboard-drop-target-dot-height:8px;--ck-clipboard-drop-target-color:var(--ck-color-focus-border)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{bottom:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);top:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);border:1px solid var(--ck-clipboard-drop-target-color);background:var(--ck-clipboard-drop-target-color);margin-left:-1px}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span:after{content:"";width:0;height:0;display:block;position:absolute;left:50%;top:calc(var(--ck-clipboard-drop-target-dot-height)*-0.5);transform:translateX(-50%);border-left:calc(var(--ck-clipboard-drop-target-dot-width)*0.5) solid transparent;border-bottom:0 solid transparent;border-right:calc(var(--ck-clipboard-drop-target-dot-width)*0.5) solid transparent;border-top:calc(var(--ck-clipboard-drop-target-dot-height)) solid var(--ck-clipboard-drop-target-color)}.ck.ck-editor__editable .ck-widget.ck-clipboard-drop-target-range{outline:var(--ck-widget-outline-thickness) solid var(--ck-clipboard-drop-target-color)!important}.ck.ck-editor__editable .ck-widget:-webkit-drag{zoom:.6;outline:none!important}'},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(70)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;margin-right:0;font-style:italic;border-left:5px solid #ccc}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}"},function(e,t){e.exports=".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(73)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;position:absolute;pointer-events:none;left:0;top:0}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{position:absolute;pointer-events:all}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{cursor:nesw-resize}:root{--ck-resizer-size:10px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-border-width:1px}.ck .ck-widget__resizer{outline:1px solid var(--ck-color-resizer)}.ck .ck-widget__resizer__handle{width:var(--ck-resizer-size);height:var(--ck-resizer-size);background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid #fff;border-radius:var(--ck-resizer-border-radius)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{top:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{top:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(75)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-field-view{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}"},function(e,t){e.exports='.ck-vertical-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:var(--ck-spacing-small);bottom:var(--ck-spacing-small);z-index:1}@media screen and (max-width:600px){.ck.ck-responsive-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:var(--ck-spacing-small);bottom:var(--ck-spacing-small);z-index:1}}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-responsive-form{padding:0;width:calc(var(--ck-input-text-width)*0.8)}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:last-child,.ck.ck-responsive-form>.ck-button:nth-last-child(2){padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-large);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:last-child,[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2),[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after,[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child:last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}'},function(e,t){e.exports=".ck-content .image{display:table;clear:both;text-align:center;margin:.9em auto;min-width:50px}.ck-content .image img{display:block;margin:0 auto;max-width:100%;min-width:100%}.ck-content .image-inline{display:inline-flex;max-width:100%;align-items:flex-start}.ck-content .image-inline picture{display:flex}.ck-content .image-inline img,.ck-content .image-inline picture{flex-grow:1;flex-shrink:1;max-width:100%}.ck.ck-editor__editable .image>figcaption.ck-placeholder:before{padding-left:inherit;padding-right:inherit;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ck.ck-editor__editable .image-inline.ck-widget_selected,.ck.ck-editor__editable .image.ck-widget_selected{z-index:1}.ck.ck-editor__editable .image-inline.ck-widget_selected ::selection{display:none}.ck.ck-editor__editable td .image-inline img,.ck.ck-editor__editable th .image-inline img{max-width:none}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(79)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-color-image-caption-background:#f7f7f7;--ck-color-image-caption-text:#333;--ck-color-image-caption-highligted-background:#fd0}.ck-content .image>figcaption{display:table-caption;caption-side:bottom;word-break:break-word;color:var(--ck-color-image-caption-text);background-color:var(--ck-color-image-caption-background);padding:.6em;font-size:.75em;outline-offset:-1px}.ck.ck-editor__editable .image>figcaption.image__caption_highlighted{animation:ck-image-caption-highlight .6s ease-out}@keyframes ck-image-caption-highlight{0%{background-color:var(--ck-color-image-caption-highligted-background)}to{background-color:var(--ck-color-image-caption-background)}}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(81)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-image-style-spacing:1.5em;--ck-inline-image-style-spacing:calc(var(--ck-image-style-spacing)/2)}.ck-content .image-style-block-align-left,.ck-content .image-style-block-align-right{max-width:calc(100% - var(--ck-image-style-spacing))}.ck-content .image-style-align-left,.ck-content .image-style-align-right{clear:none}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing);max-width:50%}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content .image-style-block-align-right{margin-right:0;margin-left:auto}.ck-content .image-style-block-align-left{margin-left:0;margin-right:auto}.ck-content p+.image-style-align-left,.ck-content p+.image-style-align-right,.ck-content p+.image-style-side{margin-top:0}.ck-content .image-inline.image-style-align-left,.ck-content .image-inline.image-style-align-right{margin-top:var(--ck-inline-image-style-spacing);margin-bottom:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-left{margin-right:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-right{margin-left:var(--ck-inline-image-style-spacing)}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-background)}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after{display:none}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-hover-background)}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(83)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-editor__editable .image,.ck.ck-editor__editable .image-inline{position:relative}.ck.ck-editor__editable .image-inline .ck-progress-bar,.ck.ck-editor__editable .image .ck-progress-bar{position:absolute;top:0;left:0}.ck.ck-editor__editable .image-inline.ck-appear,.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image-inline .ck-progress-bar,.ck.ck-editor__editable .image .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(85)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports='.ck-image-upload-complete-icon{display:block;position:absolute;top:min(var(--ck-spacing-medium),6%);right:min(var(--ck-spacing-medium),6%);border-radius:50%;z-index:1}.ck-image-upload-complete-icon:after{content:"";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20;--ck-image-upload-icon-width:2px;--ck-image-upload-icon-is-visible:clamp(0px,100% - 50px,1px)}.ck-image-upload-complete-icon{opacity:0;background:var(--ck-color-image-upload-icon-background);animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;animation-fill-mode:forwards,forwards;animation-duration:.5s,.5s;font-size:calc(1px*var(--ck-image-upload-icon-size));animation-delay:0ms,3s;overflow:hidden;width:calc(var(--ck-image-upload-icon-is-visible)*var(--ck-image-upload-icon-size));height:calc(var(--ck-image-upload-icon-is-visible)*var(--ck-image-upload-icon-size))}.ck-image-upload-complete-icon:after{left:25%;top:50%;opacity:0;height:0;width:0;transform:scaleX(-1) rotate(135deg);transform-origin:left top;border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);animation-name:ck-upload-complete-icon-check;animation-duration:.5s;animation-delay:.5s;animation-fill-mode:forwards;box-sizing:border-box}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{opacity:1;width:0;height:0}33%{width:.3em;height:0}to{opacity:1;width:.3em;height:.45em}}'},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(87)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports='.ck .ck-upload-placeholder-loader{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px}.ck .ck-image-upload-placeholder{width:100%;margin:0}.ck .ck-upload-placeholder-loader{width:100%;height:100%}.ck .ck-upload-placeholder-loader:before{width:var(--ck-upload-placeholder-loader-size);height:var(--ck-upload-placeholder-loader-size);border-radius:50%;border-top:3px solid var(--ck-color-upload-placeholder-loader);border-right:2px solid transparent;animation:ck-upload-placeholder-loader 1s linear infinite}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}'},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(89)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck .ck-link_selected{background:var(--ck-color-link-selected-background)}.ck .ck-link_selected span.image-inline{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-link-selected-background)}.ck .ck-fake-link-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-link-selection_collapsed{height:100%;border-right:1px solid var(--ck-color-base-text);margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(91)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-link-form{display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form_layout-vertical .ck-button.ck-button-cancel,.ck.ck-link-form_layout-vertical .ck-button.ck-button-save{margin-top:var(--ck-spacing-medium)}.ck.ck-link-form_layout-vertical{padding:0;min-width:var(--ck-input-text-width)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical .ck-button{padding:var(--ck-spacing-standard);margin:0;border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border);width:50%}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button,[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin:var(--ck-spacing-standard) var(--ck-spacing-large)}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{border:0;padding:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(93)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{padding:0 var(--ck-spacing-medium);color:var(--ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(--ck-input-text-width);min-width:3em;text-align:center}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child),[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{min-width:0;max-width:100%}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview),[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(95)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports='.ck-media__wrapper .ck-media__placeholder{display:flex;flex-direction:column;align-items:center}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:block}@media (hover:none){.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:none}}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url:hover .ck-tooltip{visibility:visible;opacity:1}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{overflow:hidden;display:block}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder),.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{padding:calc(var(--ck-spacing-standard)*3);background:var(--ck-color-base-foreground)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{min-width:var(--ck-media-embed-placeholder-icon-size);height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);background-position:50%;background-size:cover}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{width:100%;height:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);white-space:nowrap;text-align:center;font-style:italic;text-overflow:ellipsis}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*="open.spotify.com"]{max-width:300px;max-height:380px}.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMDAzLjc4IDEuNjFoNDkuNjIxYzEuNjk0IDAgMy4xOS0uNzk4IDQuMTQ2LTIuMDM3eiIgZmlsbD0iIzVjODhjNSIvPjxwYXRoIGQ9Ik0yMjYuNzQyIDIyMi45ODhjLTkuMjY2IDAtMTYuNzc3IDcuMTctMTYuNzc3IDE2LjAxNC4wMDcgMi43NjIuNjYzIDUuNDc0IDIuMDkzIDcuODc1LjQzLjcwMy44MyAxLjQwOCAxLjE5IDIuMTA3LjMzMy41MDIuNjUgMS4wMDUuOTUgMS41MDguMzQzLjQ3Ny42NzMuOTU3Ljk4OCAxLjQ0IDEuMzEgMS43NjkgMi41IDMuNTAyIDMuNjM3IDUuMTY4Ljc5MyAxLjI3NSAxLjY4MyAyLjY0IDIuNDY2IDMuOTkgMi4zNjMgNC4wOTQgNC4wMDcgOC4wOTIgNC42IDEzLjkxNHYuMDEyYy4xODIuNDEyLjUxNi42NjYuODc5LjY2Ny40MDMtLjAwMS43NjgtLjMxNC45My0uNzk5LjYwMy01Ljc1NiAyLjIzOC05LjcyOSA0LjU4NS0xMy43OTQuNzgyLTEuMzUgMS42NzMtMi43MTUgMi40NjUtMy45OSAxLjEzNy0xLjY2NiAyLjMyOC0zLjQgMy42MzgtNS4xNjkuMzE1LS40ODIuNjQ1LS45NjIuOTg4LTEuNDM5LjMtLjUwMy42MTctMS4wMDYuOTUtMS41MDguMzU5LS43Ljc2LTEuNDA0IDEuMTktMi4xMDcgMS40MjYtMi40MDIgMi01LjExNCAyLjAwNC03Ljg3NSAwLTguODQ0LTcuNTExLTE2LjAxNC0xNi43NzYtMTYuMDE0eiIgZmlsbD0iI2RkNGIzZSIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48ZWxsaXBzZSByeT0iNS41NjQiIHJ4PSI1LjgyOCIgY3k9IjIzOS4wMDIiIGN4PSIyMjYuNzQyIiBmaWxsPSIjODAyZDI3IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0xOTAuMzAxIDIzNy4yODNjLTQuNjcgMC04LjQ1NyAzLjg1My04LjQ1NyA4LjYwNnMzLjc4NiA4LjYwNyA4LjQ1NyA4LjYwN2MzLjA0MyAwIDQuODA2LS45NTggNi4zMzctMi41MTYgMS41My0xLjU1NyAyLjA4Ny0zLjkxMyAyLjA4Ny02LjI5IDAtLjM2Mi0uMDIzLS43MjItLjA2NC0xLjA3OWgtOC4yNTd2My4wNDNoNC44NWMtLjE5Ny43NTktLjUzMSAxLjQ1LTEuMDU4IDEuOTg2LS45NDIuOTU4LTIuMDI4IDEuNTQ4LTMuOTAxIDEuNTQ4LTIuODc2IDAtNS4yMDgtMi4zNzItNS4yMDgtNS4yOTkgMC0yLjkyNiAyLjMzMi01LjI5OSA1LjIwOC01LjI5OSAxLjM5OSAwIDIuNjE4LjQwNyAzLjU4NCAxLjI5M2wyLjM4MS0yLjM4YzAtLjAwMi0uMDAzLS4wMDQtLjAwNC0uMDA1LTEuNTg4LTEuNTI0LTMuNjItMi4yMTUtNS45NTUtMi4yMTV6bTQuNDMgNS42NmwuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxNS4xODQgMjUxLjkyOWwtNy45OCA3Ljk3OSAyOC40NzcgMjguNDc1YTUuMjMzIDUuMjMzIDAgMDAuNDQ5LTIuMTIzdi0zMS4xNjVjLS40NjkuNjc1LS45MzQgMS4zNDktMS4zODIgMi4wMDUtLjc5MiAxLjI3NS0xLjY4MiAyLjY0LTIuNDY1IDMuOTktMi4zNDcgNC4wNjUtMy45ODIgOC4wMzgtNC41ODUgMTMuNzk0LS4xNjIuNDg1LS41MjcuNzk4LS45My43OTktLjM2My0uMDAxLS42OTctLjI1NS0uODc5LS42Njd2LS4wMTJjLS41OTMtNS44MjItMi4yMzctOS44Mi00LjYtMTMuOTE0LS43ODMtMS4zNS0xLjY3My0yLjcxNS0yLjQ2Ni0zLjk5LTEuMTM3LTEuNjY2LTIuMzI3LTMuNC0zLjYzNy01LjE2OWwtLjAwMi0uMDAzeiIgZmlsbD0iI2MzYzNjMyIvPjxwYXRoIGQ9Ik0yMTIuOTgzIDI0OC40OTVsLTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAwNS4yMzggNS4yMzhoMS4wMTVsMzUuNjY2LTM1LjY2NmExMzYuMjc1IDEzNi4yNzUgMCAwMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAwLS45ODktMS40NCAzNS4xMjcgMzUuMTI3IDAgMDAtLjk1LTEuNTA4Yy0uMDgzLS4xNjItLjE3Ni0uMzI2LS4yNjQtLjQ4OXoiIGZpbGw9IiNmZGRjNGYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxMS45OTggMjYxLjA4M2wtNi4xNTIgNi4xNTEgMjQuMjY0IDI0LjI2NGguNzgxYTUuMjI3IDUuMjI3IDAgMDA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c7,#b800b1,#f50000)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OXptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OXoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzN6bTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1ek00MTYuNjI3IDExNy42MDRjMCAxNi42OTYtMTMuNTM1IDMwLjIzLTMwLjIzMSAzMC4yMy0xNi42OTUgMC0zMC4yMy0xMy41MzQtMzAuMjMtMzAuMjMgMC0xNi42OTYgMTMuNTM1LTMwLjIzMSAzMC4yMy0zMC4yMzEgMTYuNjk2IDAgMzAuMjMxIDEzLjUzNSAzMC4yMzEgMzAuMjMxIiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg==)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIGZpbGw9IiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}'},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(97)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck.ck-media-form{display:flex;align-items:flex-start;flex-direction:row;flex-wrap:nowrap}.ck.ck-media-form .ck-labeled-field-view{display:inline-block}.ck.ck-media-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(99)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck-content .media{clear:both;margin:.9em 0;display:block;min-width:15em}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(101)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=":root{--ck-color-table-focused-cell-background:rgba(158,207,250,0.3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(103)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2);padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0}.ck .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{width:var(--ck-insert-table-dropdown-box-width);height:var(--ck-insert-table-dropdown-box-height);margin:var(--ck-insert-table-dropdown-box-margin);border:1px solid var(--ck-color-base-border);border-radius:1px}.ck .ck-insert-table-dropdown-grid-box.ck-on{border-color:var(--ck-color-focus-border);background:var(--ck-color-focus-outer-shadow)}"},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(105)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=':root{--ck-table-selected-cell-background:rgba(158,207,250,0.3)}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{position:relative;caret-color:transparent;outline:unset;box-shadow:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:after{content:"";pointer-events:none;background-color:var(--ck-table-selected-cell-background);position:absolute;top:0;left:0;right:0;bottom:0}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget_selected{outline:unset}'},function(e,t,i){i(1)(i="string"==typeof(i=(i=i(107)).__esModule?i.default:i)?[[e.i,i,""]]:i,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),e.exports=i.locals||{}},function(e,t){e.exports=".ck-content .table{margin:.9em auto;display:table}.ck-content .table table{border-collapse:collapse;border-spacing:0;width:100%;height:100%;border:1px double #b3b3b3}.ck-content .table table td,.ck-content .table table th{min-width:2em;padding:.4em;border:1px solid #bfbfbf}.ck-content .table table th{font-weight:700;background:hsla(0,0%,0%,5%)}.ck-content[dir=rtl] .table th{text-align:right}.ck-content[dir=ltr] .table th{text-align:left}.ck-editor__editable .ck-table-bogus-paragraph{display:inline-block;width:100%}"},function(e,t,i){"use strict";function n(){return function e(){e.called=!0}}i.r(t),i.d(t,"default",function(){return bp});class l{constructor(e,t){this.source=e,this.name=t,this.path=[],this.stop=n(),this.off=n()}}const o=new Array(256).fill().map((e,t)=>("0"+t.toString(16)).slice(-2));function c(){var e=4294967296*Math.random()>>>0,t=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0;return"e"+o[e>>0&255]+o[e>>8&255]+o[e>>16&255]+o[e>>24&255]+o[t>>0&255]+o[t>>8&255]+o[t>>16&255]+o[t>>24&255]+o[i>>0&255]+o[i>>8&255]+o[i>>16&255]+o[i>>24&255]+o[n>>0&255]+o[n>>8&255]+o[n>>16&255]+o[n>>24&255]}var a={get(e){return"number"!=typeof e?this[e]||this.normal:e},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5},p=(i(6),i(0));const d=Symbol("listeningTo"),r=Symbol("emitterId");var s={on(e,t,i={}){this.listenTo(this,e,t,i)},once(e,i,t){let n=!1;this.listenTo(this,e,function(e,...t){n||(n=!0,e.off(),i.call(this,e,...t))},t)},off(e,t){this.stopListening(this,e,t)},listenTo(e,t,i,n={}){let o,r;this[d]||(this[d]={});const s=this[d];u(e)||h(e);var a=u(e);(o=s[a])||(o=s[a]={emitter:e,callbacks:{}}),(r=o.callbacks[t])||(r=o.callbacks[t]=[]),r.push(i),a=this,e._addEventListener?e._addEventListener(t,i,n):a._addEventListener.call(e,t,i,n)},stopListening(e,t,i){const n=this[d];let o=e&&u(e);const r=n&&o&&n[o],s=r&&t&&r.callbacks[t];if(!(!n||e&&!r||t&&!s))if(i)b(this,e,t,i),-1!==s.indexOf(i)&&(1===s.length?delete r.callbacks[t]:b(this,e,t,i));else if(s){for(;i=s.pop();)b(this,e,t,i);delete r.callbacks[t]}else if(r){for(t in r.callbacks)this.stopListening(e,t);delete n[o]}else{for(o in n)this.stopListening(n[o].emitter);delete this[d]}},fire(i,...e){try{const n=i instanceof l?i:new l(this,i),o=n.name;let t=function e(t,i){let n;return t._events&&(n=t._events[i])&&n.callbacks.length?n.callbacks:-1<i.indexOf(":")?e(t,i.substr(0,i.lastIndexOf(":"))):null}(this,o);if(n.path.push(this),t){const i=[n,...e];t=Array.from(t);for(let e=0;e<t.length&&(t[e].callback.apply(this,i),n.off.called&&(delete n.off.called,this._removeEventListener(o,t[e].callback)),!n.stop.called);e++);}if(this._delegations){const i=this._delegations.get(o),l=this._delegations.get("*");i&&f(i,n,e),l&&f(l,n,e)}return n.return}catch(i){p.a.rethrowUnexpectedError(i,this)}},delegate(...e){return{to:(i,n)=>{this._delegations||(this._delegations=new Map),e.forEach(e=>{const t=this._delegations.get(e);t?t.set(i,n):this._delegations.set(e,new Map([[i,n]]))})}}},stopDelegating(e,t){if(this._delegations)if(e)if(t){const i=this._delegations.get(e);i&&i.delete(t)}else this._delegations.delete(e);else this._delegations.clear()},_addEventListener(e,t,i){!function(i,n){const o=g(i);if(!o[n]){let e=n,t=null;const r=[];for(;""!==e&&!o[e];)o[e]={callbacks:[],childEvents:[]},r.push(o[e]),t&&o[e].childEvents.push(t),t=e,e=e.substr(0,e.lastIndexOf(":"));if(""!==e){for(const i of r)i.callbacks=o[e].callbacks.slice();o[e].childEvents.push(t)}}}(this,e);var e=m(this,e),n=a.get(i.priority),o={callback:t,priority:n};for(const r of e){let t=!1;for(let e=0;e<r.length;e++)if(r[e].priority<n){r.splice(e,0,o),t=!0;break}t||r.push(o)}},_removeEventListener(e,t){for(const i of e=m(this,e))for(let e=0;e<i.length;e++)i[e].callback==t&&(i.splice(e,1),e--)}};function h(e,t){e[r]||(e[r]=t||c())}function u(e){return e[r]}function g(e){return e._events||Object.defineProperty(e,"_events",{value:{}}),e._events}function m(t,e){var i=g(t)[e];if(!i)return[];let n=[i.callbacks];for(let e=0;e<i.childEvents.length;e++){var o=m(t,i.childEvents[e]);n=n.concat(o)}return n}function f(e,t,i){for(var[n,o]of e){o?"function"==typeof o&&(o=o(t.name)):o=t.name;const e=new l(t.source,o);e.path=[...t.path],n.fire(e,...i)}}function b(e,t,i,n){t._removeEventListener?t._removeEventListener(i,n):e._removeEventListener.call(t,i,n)}function _(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function w(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":F&&F in Object(e)?function(e){var t=L.call(e,j),i=e[j];try{var n=!(e[j]=void 0)}catch(e){}var o=V.call(e);return n&&(t?e[j]=i:delete e[j]),o}(e):B.call(e)}function v(e){return _(e)&&("[object Function]"==(e=w(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function k(e){if(null!=e){try{return W.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function y(e,t){return t=null==e?void 0:e[t],!_(e=t)||U&&U in e||!(v(e)?Q:q).test(k(e))?void 0:t}function x(e,t,i){"__proto__"==t&&J?J(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function A(e,t){return e===t||e!=e&&t!=t}function C(e,t,i){var n=e[t];Z.call(e,t)&&A(n,i)&&(void 0!==i||t in e)||x(e,t,i)}function T(e,t,i,n){var o=!i;i=i||{};for(var r=-1,s=t.length;++r<s;){var a=t[r],l=n?n(i[a],e[a],a,i,e):void 0;(o?x:C)(i,a,l=void 0===l?e[a]:l)}return i}function E(e){return e}function I(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991}function S(e){return null!=e&&I(e.length)&&!v(e)}function P(e,t){var i=typeof e;return(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&ie.test(e))&&-1<e&&e%1==0&&e<t}function M(e){return null!=e&&"object"==typeof e}var N,R,O,z=i(3),D=z.a.Symbol,L=(ne=Object.prototype).hasOwnProperty,V=ne.toString,j=D?D.toStringTag:void 0,B=Object.prototype.toString,F=D?D.toStringTag:void 0,H=z.a["__core-js_shared__"],U=(ue=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||""))?"Symbol(src)_1."+ue:"",W=Function.prototype.toString,q=/^\[object .+?Constructor\]$/,$=Function.prototype,Y=Object.prototype,G=$.toString,K=Y.hasOwnProperty,Q=RegExp("^"+G.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=function(){try{var e=y(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Z=Object.prototype.hasOwnProperty,X=Math.max,ee=Date.now,te=(N=J?function(e,t){return J(e,"toString",{configurable:!0,enumerable:!1,value:(i=t,function(){return i}),writable:!0});var i}:E,O=R=0,function(){var e=ee(),t=16-(e-O);if(O=e,0<t){if(800<=++R)return arguments[0]}else R=0;return N.apply(void 0,arguments)}),ie=/^(?:0|[1-9]\d*)$/,t=function(a){return te((r=e=function(e,t){var i=-1,n=t.length,o=1<n?t[n-1]:void 0,r=2<n?t[2]:void 0,o=3<a.length&&"function"==typeof o?(n--,o):void 0;for(r&&function(e,t,i){if(_(i)){var n=typeof t;return("number"==n?S(i)&&P(t,i.length):"string"==n&&t in i)&&A(i[t],e)}}(t[0],t[1],r)&&(o=n<3?void 0:o,n=1),e=Object(e);++i<n;){var s=t[i];s&&a(e,s,i,o)}return e},l=E,s=X(void 0===(s=t)?r.length-1:s,0),function(){for(var e=arguments,t=-1,i=X(e.length-s,0),n=Array(i);++t<i;)n[t]=e[s+t];for(var t=-1,o=Array(s+1);++t<s;)o[t]=e[t];return o[s]=l(n),function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}(r,this,o)}),e+"");var e,t,r,s,l},ne=function(e){return M(e)&&"[object Arguments]"==w(e)},oe=(H=Object.prototype).hasOwnProperty,re=H.propertyIsEnumerable,se=ne(function(){return arguments}())?ne:function(e){return M(e)&&oe.call(e,"callee")&&!re.call(e,"callee")},ae=Array.isArray,le=i(4),ce={};function de(e,t){var i,n=ae(e),o=!n&&se(e),r=!n&&!o&&Object(le.a)(e),s=!n&&!o&&!r&&ge(e),a=n||o||r||s,l=a?function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}(e.length,String):[],c=l.length;for(i in e)!t&&!me.call(e,i)||a&&("length"==i||r&&("offset"==i||"parent"==i)||s&&("buffer"==i||"byteLength"==i||"byteOffset"==i)||P(i,c))||l.push(i);return l}function he(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||pe)}ce["[object Float32Array]"]=ce["[object Float64Array]"]=ce["[object Int8Array]"]=ce["[object Int16Array]"]=ce["[object Int32Array]"]=ce["[object Uint8Array]"]=ce["[object Uint8ClampedArray]"]=ce["[object Uint16Array]"]=ce["[object Uint32Array]"]=!0,ce["[object Arguments]"]=ce["[object Array]"]=ce["[object ArrayBuffer]"]=ce["[object Boolean]"]=ce["[object DataView]"]=ce["[object Date]"]=ce["[object Error]"]=ce["[object Function]"]=ce["[object Map]"]=ce["[object Number]"]=ce["[object Object]"]=ce["[object RegExp]"]=ce["[object Set]"]=ce["[object String]"]=ce["[object WeakMap]"]=!1;var ue=function(t){return function(e){return t(e)}},ge=(Y=($=i(5)).a&&$.a.isTypedArray)?ue(Y):function(e){return M(e)&&I(e.length)&&!!ce[w(e)]},me=Object.prototype.hasOwnProperty,pe=Object.prototype,fe=Object.prototype.hasOwnProperty,be=function(e){return S(e)?de(e,!0):function(i){if(!_(i))return function(){var e=[];if(null!=i)for(var t in Object(i))e.push(t);return e}();var e,t=he(i),n=[];for(e in i)("constructor"!=e||!t&&fe.call(i,e))&&n.push(e);return n}(e)},we=t(function(e,t){T(t,be(t),e)});const ke=Symbol("observableProperties"),_e=Symbol("boundObservables"),ve=Symbol("boundProperties"),ye=Symbol("decoratedMethods"),xe=Symbol("decoratedOriginal"),Ae={set(n,e){if(_(n))Object.keys(n).forEach(e=>{this.set(e,n[e])},this);else{Te(this);const o=this[ke];if(n in this&&!o.has(n))throw new p.a("observable-set-cannot-override",this);Object.defineProperty(this,n,{enumerable:!0,configurable:!0,get:()=>o.get(n),set(e){var t=o.get(n);let i=this.fire("set:"+n,n,e,t);void 0===i&&(i=e),t===i&&o.has(n)||(o.set(n,i),this.fire("change:"+n,n,i,t))}}),this[n]=e}},bind(...e){if(!e.length||!Se(e))throw new p.a("observable-bind-wrong-properties",this);if(new Set(e).size!==e.length)throw new p.a("observable-bind-duplicate-properties",this);Te(this);const i=this[ve];e.forEach(e=>{if(i.has(e))throw new p.a("observable-bind-rebind",this)});const n=new Map;return e.forEach(e=>{var t={property:e,to:[]};i.set(e,t),n.set(e,t)}),{to:Ee,toMany:Ie,_observable:this,_bindProperties:e,_to:[],_bindings:n}},unbind(...e){if(this[ke]){const s=this[ve],a=this[_e];if(e.length){if(!Se(e))throw new p.a("observable-unbind-wrong-properties",this);e.forEach(e=>{const r=s.get(e);if(r){let t,i,n,o;r.to.forEach(e=>{t=e[0],i=e[1],n=a.get(t),o=n[i],o.delete(r),o.size||delete n[i],Object.keys(n).length||(a.delete(t),this.stopListening(t,"change"))}),s.delete(e)}})}else a.forEach((e,t)=>{this.stopListening(t,"change")}),a.clear(),s.clear()}},decorate(t){const i=this[t];if(!i)throw new p.a("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:t});this.on(t,(e,t)=>{e.return=i.apply(this,t)}),this[t]=function(...e){return this.fire(t,e)},this[t][xe]=i,this[ye]||(this[ye]=[]),this[ye].push(t)}};we(Ae,s),Ae.stopListening=function(e,t,i){if(!e&&this[ye]){for(const e of this[ye])this[e]=this[e][xe];delete this[ye]}s.stopListening.call(this,e,t,i)};var Ce=Ae;function Te(e){e[ke]||(Object.defineProperty(e,ke,{value:new Map}),Object.defineProperty(e,_e,{value:new Map}),Object.defineProperty(e,ve,{value:new Map}))}function Ee(...e){const t=function(...e){if(!e.length)throw new p.a("observable-bind-to-parse-error",null);const t={to:[]};let i;return"function"==typeof e[e.length-1]&&(t.callback=e.pop()),e.forEach(e=>{if("string"==typeof e)i.properties.push(e);else{if("object"!=typeof e)throw new p.a("observable-bind-to-parse-error",null);i={observable:e,properties:[]},t.to.push(i)}}),t}(...e),i=Array.from(this._bindings.keys()),n=i.length;if(!t.callback&&1<t.to.length)throw new p.a("observable-bind-to-no-callback",this);if(1<n&&t.callback)throw new p.a("observable-bind-to-extra-callback",this);var r;t.to.forEach(e=>{if(e.properties.length&&e.properties.length!==n)throw new p.a("observable-bind-to-properties-length",this);e.properties.length||(e.properties=this._bindProperties)}),this._to=t.to,t.callback&&(this._bindings.get(i[0]).callback=t.callback),r=this._observable,this._to.forEach(i=>{const n=r[_e];let o;n.get(i.observable)||r.listenTo(i.observable,"change",(e,t)=>{o=n.get(i.observable)[t],o&&o.forEach(e=>{Pe(r,e.property)})})}),function(n){let o;n._bindings.forEach((t,i)=>{n._to.forEach(e=>{o=e.properties[t.callback?0:n._bindProperties.indexOf(i)],t.to.push([e.observable,o]),function(e,t,i,n){const o=e[_e],r=o.get(i),s=r||{};s[n]||(s[n]=new Set),s[n].add(t),r||o.set(i,s)}(n._observable,t,e.observable,o)})})}(this),this._bindProperties.forEach(e=>{Pe(this._observable,e)})}function Ie(e,t,i){if(1<this._bindings.size)throw new p.a("observable-bind-to-many-not-one-binding",this);var n;this.to(...(n=t,e=e.map(e=>[e,n]),Array.prototype.concat.apply([],e)),i)}function Se(e){return e.every(e=>"string"==typeof e)}function Pe(e,t){const i=e[ve].get(t);let n;n=i.callback?i.callback.apply(e,i.to.map(e=>e[0][e[1]])):(n=i.to[0],n[0][n[1]]),Object.prototype.hasOwnProperty.call(e,t)?e[t]=n:e.set(t,n)}function Me(n,...e){e.forEach(i=>{Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i)).forEach(e=>{if(!(e in n.prototype)){const t=Object.getOwnPropertyDescriptor(i,e);t.enumerable=!1,Object.defineProperty(n.prototype,e,t)}})})}class Ne{constructor(e){this.editor=e,this.set("isEnabled",!0),this._disableStack=new Set}forceDisabled(e){this._disableStack.add(e),1==this._disableStack.size&&(this.on("set:isEnabled",Re,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),0==this._disableStack.size&&(this.off("set:isEnabled",Re),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}function Re(e){e.return=!1,e.stop()}Me(Ne,Ce);class Oe{constructor(e){this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.on("execute",e=>{this.isEnabled||e.stop()},{priority:"high"}),this.listenTo(e,"change:isReadOnly",(e,t,i)=>{i?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")})}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),1==this._disableStack.size&&(this.on("set:isEnabled",ze,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),0==this._disableStack.size&&(this.off("set:isEnabled",ze),this.refresh())}execute(){}destroy(){this.stopListening()}}function ze(e){e.return=!1,e.stop()}Me(Oe,Ce);class De extends Oe{constructor(e){super(e),this._childCommands=[]}refresh(){}execute(...e){const t=this._getFirstEnabledCommand();return null!=t&&t.execute(e)}registerChildCommand(e){this._childCommands.push(e),e.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){return this._childCommands.find(e=>e.isEnabled)}}function Le(e,t){for(var i=e.length;i--;)if(A(e[i][0],t))return i;return-1}var Ve=(G=function(t,i){return function(e){return t(i(e))}})(Object.getPrototypeOf,Object),K=Function.prototype,H=Object.prototype,je=K.toString,Be=H.hasOwnProperty,Fe=je.call(Object),He=function(e){return!(!M(e)||"[object Object]"!=w(e))&&(null===(e=Ve(e))||"function"==typeof(e=Be.call(e,"constructor")&&e.constructor)&&e instanceof e&&je.call(e)==Fe)},Ue=Array.prototype.splice;function We(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}We.prototype.clear=function(){this.__data__=[],this.size=0},We.prototype.delete=function(e){var t=this.__data__;return!((e=Le(t,e))<0||(e==t.length-1?t.pop():Ue.call(t,e,1),--this.size,0))},We.prototype.get=function(e){var t=this.__data__;return(e=Le(t,e))<0?void 0:t[e][1]},We.prototype.has=function(e){return-1<Le(this.__data__,e)},We.prototype.set=function(e,t){var i=this.__data__,n=Le(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this};var qe=We,$e=y(z.a,"Map"),Ye=y(Object,"create"),Ge=Object.prototype.hasOwnProperty,Ke=Object.prototype.hasOwnProperty;function Qe(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Je(e,t){var i=e.__data__;return("string"==(e=typeof t)||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t)?i["string"==typeof t?"string":"hash"]:i.map}Qe.prototype.clear=function(){this.__data__=Ye?Ye(null):{},this.size=0},Qe.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},Qe.prototype.get=function(e){var t=this.__data__;if(Ye){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return Ge.call(t,e)?t[e]:void 0},Qe.prototype.has=function(e){var t=this.__data__;return Ye?void 0!==t[e]:Ke.call(t,e)},Qe.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Ye&&void 0===t?"__lodash_hash_undefined__":t,this};var Ze=Qe;function Xe(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}Xe.prototype.clear=function(){this.size=0,this.__data__={hash:new Ze,map:new($e||qe),string:new Ze}},Xe.prototype.delete=function(e){return e=Je(this,e).delete(e),this.size-=e?1:0,e},Xe.prototype.get=function(e){return Je(this,e).get(e)},Xe.prototype.has=function(e){return Je(this,e).has(e)},Xe.prototype.set=function(e,t){var i=Je(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this};var et=Xe;function tt(e){e=this.__data__=new qe(e),this.size=e.size}function it(e,t){var i=-1,n=e.length;for(t=t||Array(n);++i<n;)t[i]=e[i];return t}function nt(e,t){for(var i=-1,n=t.length,o=e.length;++i<n;)e[o+i]=t[i];return e}function ot(e,t,i){return t=t(e),ae(e)?t:nt(t,i(e))}function rt(e){var t=new e.constructor(e.byteLength);return new At(t).set(new At(e)),t}function st(e,t){return t=t?rt(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.length)}tt.prototype.clear=function(){this.__data__=new qe,this.size=0},tt.prototype.delete=function(e){var t=this.__data__,e=t.delete(e);return this.size=t.size,e},tt.prototype.get=function(e){return this.__data__.get(e)},tt.prototype.has=function(e){return this.__data__.has(e)},tt.prototype.set=function(e,t){var i=this.__data__;if(i instanceof qe){var n=i.__data__;if(!$e||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new et(n)}return i.set(e,t),this.size=i.size,this};var at=tt,lt=G(Object.keys,Object),ct=Object.prototype.hasOwnProperty,dt=function(e){return(S(e)?de:function(e){if(!he(e))return lt(e);var t,i=[];for(t in Object(e))ct.call(e,t)&&"constructor"!=t&&i.push(t);return i})(e)},ht=i(9),ne=function(){return[]},ut=Object.prototype.propertyIsEnumerable,gt=Object.getOwnPropertySymbols,mt=gt?function(s){return null==s?[]:(s=Object(s),function(e){for(var t=-1,i=null==e?0:e.length,n=0,o=[];++t<i;){var r=e[t];ut.call(s,r)&&(o[n++]=r)}return o}(gt(s)))}:ne,pt=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)nt(t,mt(e)),e=Ve(e);return t}:ne,ft=function(e){return ot(e,dt,mt)},Y=y(z.a,"DataView"),K=y(z.a,"Promise"),H=y(z.a,"Set"),G=y(z.a,"WeakMap"),bt=k(Y),wt=k($e),kt=k(K),_t=k(H),vt=k(G),ne=w,yt=ne=Y&&"[object DataView]"!=ne(new Y(new ArrayBuffer(1)))||$e&&"[object Map]"!=ne(new $e)||K&&"[object Promise]"!=ne(K.resolve())||H&&"[object Set]"!=ne(new H)||G&&"[object WeakMap]"!=ne(new G)?function(e){var t=w(e);if(e=(e="[object Object]"==t?e.constructor:void 0)?k(e):"")switch(e){case bt:return"[object DataView]";case wt:return"[object Map]";case kt:return"[object Promise]";case _t:return"[object Set]";case vt:return"[object WeakMap]"}return t}:ne,xt=Object.prototype.hasOwnProperty,At=z.a.Uint8Array,Ct=/\w*$/,Tt=(G=D?D.prototype:void 0)?G.valueOf:void 0,Et=Object.create,It=function(e){return _(e)?Et?Et(e):(St.prototype=e,e=new St,St.prototype=void 0,e):{}};function St(){}function Pt(e){return"function"!=typeof e.constructor||he(e)?{}:It(Ve(e))}var Mt=(ne=$.a&&$.a.isMap)?ue(ne):function(e){return M(e)&&"[object Map]"==yt(e)},Nt=(G=$.a&&$.a.isSet)?ue(G):function(e){return M(e)&&"[object Set]"==yt(e)},Rt={};function Ot(r,s,a,e,t,l){var c,i=1&s,n=2&s,o=4&s;if(void 0!==(c=a?t?a(r,e,t,l):a(r):c))return c;if(!_(r))return r;var d,h,u,g=ae(r);if(g){if(e=(m=r).length,p=new m.constructor(e),e&&"string"==typeof m[0]&&xt.call(m,"index")&&(p.index=m.index,p.input=m.input),c=p,!i)return it(r,c)}else{var m=yt(r),p="[object Function]"==m||"[object GeneratorFunction]"==m;if(Object(le.a)(r))return Object(ht.a)(r,i);if("[object Object]"==m||"[object Arguments]"==m||p&&!t){if(c=n||p?{}:Pt(r),!i)return n?(u=d=r,u=(h=c)&&T(u,be(u),h),T(d,pt(d),u)):(d=h=r,u=(u=c)&&T(d,dt(d),u),T(h,mt(h),u))}else{if(!Rt[m])return t?r:{};c=function(e,t,i){var n,o,r,s=e.constructor;switch(t){case"[object ArrayBuffer]":return rt(e);case"[object Boolean]":case"[object Date]":return new s(+e);case"[object DataView]":return o=e,r=i?rt(o.buffer):o.buffer,new o.constructor(r,o.byteOffset,o.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return st(e,i);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(e);case"[object RegExp]":return(n=new(o=e).constructor(o.source,Ct.exec(o))).lastIndex=o.lastIndex,n;case"[object Set]":return new s;case"[object Symbol]":return n=e,Tt?Object(Tt.call(n)):{}}}(r,m,i)}}if(i=(l=l||new at).get(r))return i;l.set(r,c),Nt(r)?r.forEach(function(e){c.add(Ot(e,s,a,e,r,l))}):Mt(r)&&r.forEach(function(e,t){c.set(t,Ot(e,s,a,t,r,l))});var f=g?void 0:(o?n?function(e){return ot(e,be,pt)}:ft:n?be:dt)(r);return function(e){for(var t,i,n=-1,o=null==e?0:e.length;++n<o&&!1!==(t=e[n],i=n,f&&(t=r[i=t]),void C(c,i,Ot(t,s,a,i,r,l))););}(f||r),c}function zt(e,t){return Ot(e,5,t="function"==typeof t?t:void 0)}Rt["[object Arguments]"]=Rt["[object Array]"]=Rt["[object ArrayBuffer]"]=Rt["[object DataView]"]=Rt["[object Boolean]"]=Rt["[object Date]"]=Rt["[object Float32Array]"]=Rt["[object Float64Array]"]=Rt["[object Int8Array]"]=Rt["[object Int16Array]"]=Rt["[object Int32Array]"]=Rt["[object Map]"]=Rt["[object Number]"]=Rt["[object Object]"]=Rt["[object RegExp]"]=Rt["[object Set]"]=Rt["[object String]"]=Rt["[object Symbol]"]=Rt["[object Uint8Array]"]=Rt["[object Uint8ClampedArray]"]=Rt["[object Uint16Array]"]=Rt["[object Uint32Array]"]=!0,Rt["[object Error]"]=Rt["[object Function]"]=Rt["[object WeakMap]"]=!1;var Dt=function(e){return M(e)&&1===e.nodeType&&!He(e)};class Lt{constructor(e,t){this._config={},t&&this.define(Vt(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(const e of Object.keys(this._config))yield e}_setToTarget(e,t,i,n=!1){if(He(t))this._setObjectToTarget(e,t,n);else{const o=t.split(".");t=o.pop();for(const t of o)He(e[t])||(e[t]={}),e=e[t];if(He(i))return He(e[t])||(e[t]={}),e=e[t],void this._setObjectToTarget(e,i,n);n&&void 0!==e[t]||(e[t]=i)}}_getFromSource(e,t){const i=t.split(".");t=i.pop();for(const t of i){if(!He(e[t])){e=null;break}e=e[t]}return e?Vt(e[t]):void 0}_setObjectToTarget(t,i,n){Object.keys(i).forEach(e=>{this._setToTarget(t,e,i[e],n)})}}function Vt(e){return zt(e,jt)}function jt(e){return Dt(e)?e:void 0}function Bt(e){return!(!e||!e[Symbol.iterator])}class Ft{constructor(e={},t={}){var i=Bt(e);if(i||(t=e),this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],i)for(const t of e)this._items.push(t),this._itemMap.set(this._getItemIdBeforeAdding(t),t)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,t){return this.addMany([e],t)}addMany(t,i){if(void 0===i)i=this._items.length;else if(i>this._items.length||i<0)throw new p.a("collection-add-item-invalid-index",this);for(let e=0;e<t.length;e++){var n=t[e],o=this._getItemIdBeforeAdding(n),r=i+e;this._items.splice(r,0,n),this._itemMap.set(o,n),this.fire("add",n,r)}return this.fire("change",{added:t,removed:[],index:i}),this}get(e){let t;if("string"==typeof e)t=this._itemMap.get(e);else{if("number"!=typeof e)throw new p.a("collection-get-invalid-arg",this);t=this._items[e]}return t||null}has(e){return"string"==typeof e||(e=e[this._idProperty]),this._itemMap.has(e)}getIndex(e){return e="string"==typeof e?this._itemMap.get(e):e,this._items.indexOf(e)}remove(e){var[t,e]=this._remove(e);return this.fire("change",{added:[],removed:[t],index:e}),t}map(e,t){return this._items.map(e,t)}find(e,t){return this._items.find(e,t)}filter(e,t){return this._items.filter(e,t)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);for(var e=Array.from(this._items);this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new p.a("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:t=>{this._setUpBindToBinding(e=>new t(e))},using:t=>{"function"==typeof t?this._setUpBindToBinding(e=>t(e)):this._setUpBindToBinding(e=>e[t])}}}_setUpBindToBinding(r){const s=this._bindToCollection,e=(e,i,n)=>{var t=s._bindToCollection==this,o=s._bindToInternalToExternalMap.get(i);if(t&&o)this._bindToExternalToInternalMap.set(i,o),this._bindToInternalToExternalMap.set(o,i);else{const e=r(i);if(e){let t=n;for(const r of this._skippedIndexesFromExternal)n>r&&t--;for(const r of s._skippedIndexesFromExternal)t>=r&&t++;this._bindToExternalToInternalMap.set(i,e),this._bindToInternalToExternalMap.set(e,i),this.add(e,t);for(let e=0;e<s._skippedIndexesFromExternal.length;e++)t<=s._skippedIndexesFromExternal[e]&&s._skippedIndexesFromExternal[e]++}else this._skippedIndexesFromExternal.push(n)}};for(const r of s)e(0,r,s.getIndex(r));this.listenTo(s,"add",e),this.listenTo(s,"remove",(e,t,i)=>{(t=this._bindToExternalToInternalMap.get(t))&&this.remove(t),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((e,t)=>(i<t&&e.push(t-1),t<i&&e.push(t),e),[])})}_getItemIdBeforeAdding(e){var t=this._idProperty;let i;if(t in e){if(i=e[t],"string"!=typeof i)throw new p.a("collection-add-invalid-id",this);if(this.get(i))throw new p.a("collection-add-item-already-exists",this)}else e[t]=i=c();return i}_remove(e){let t,i,n,o=!1;var r=this._idProperty;if("string"==typeof e?(i=e,n=this._itemMap.get(i),o=!n,n&&(t=this._items.indexOf(n))):"number"==typeof e?(t=e,n=this._items[t],o=!n,n&&(i=n[r])):(n=e,i=n[r],t=this._items.indexOf(n),o=-1==t||!this._itemMap.get(i)),o)throw new p.a("collection-remove-404",this);return this._items.splice(t,1),this._itemMap.delete(i),r=this._bindToInternalToExternalMap.get(n),this._bindToInternalToExternalMap.delete(n),this._bindToExternalToInternalMap.delete(r),this.fire("remove",n,t),[n,t]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}Me(Ft,s);class Ht{constructor(e,t=[],i=[]){this._context=e,this._plugins=new Map,this._availablePlugins=new Map;for(const e of t)e.pluginName&&this._availablePlugins.set(e.pluginName,e);this._contextPlugins=new Map;for(const[e,t]of i)this._contextPlugins.set(e,t),this._contextPlugins.set(t,e),e.pluginName&&this._availablePlugins.set(e.pluginName,e)}*[Symbol.iterator](){for(const e of this._plugins)"function"==typeof e[0]&&(yield e)}get(t){var e=this._plugins.get(t);if(e)return e;{let e=t;throw"function"==typeof t&&(e=t.pluginName||t.name),new p.a("plugincollection-plugin-not-loaded",this._context,{plugin:e})}}has(e){return this._plugins.has(e)}init(e,i=[],t=[]){const r=this,n=this._context;!function t(e,i=new Set){e.forEach(e=>{s(e)&&(i.has(e)||(i.add(e),e.pluginName&&!r._availablePlugins.has(e.pluginName)&&r._availablePlugins.set(e.pluginName,e),e.requires&&t(e.requires,i)))})}(e),d(e),function(e,t){for(const o of t){if("function"!=typeof o)throw new p.a("plugincollection-replace-plugin-invalid-type",null,{pluginItem:o});const t=o.pluginName;if(!t)throw new p.a("plugincollection-replace-plugin-missing-name",null,{pluginItem:o});if(o.requires&&o.requires.length)throw new p.a("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:t});var i=r._availablePlugins.get(t);if(!i)throw new p.a("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:t});var n=e.indexOf(i);if(-1===n){if(r._contextPlugins.has(i))return;throw new p.a("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:t})}if(i.requires&&i.requires.length)throw new p.a("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:t});e.splice(n,1,o),r._availablePlugins.set(t,o)}}(e=[...function i(e,n=new Set){return e.map(e=>s(e)?e:r._availablePlugins.get(e)).reduce((t,e)=>n.has(e)?t:(n.add(e),e.requires&&(d(e.requires,e),i(e.requires,n).forEach(e=>t.add(e))),t.add(e)),new Set)}(e.filter(e=>!l(e,i)))],t);const o=e.map(e=>{var t=r._contextPlugins.get(e)||new e(n);return r._add(e,t),t});return h(o,"init").then(()=>h(o,"afterInit")).then(()=>o);function s(e){return"function"==typeof e}function a(e){return s(e)&&e.isContextPlugin}function l(t,e){return e.some(e=>e===t||c(t)===e||c(e)===t)}function c(e){return s(e)?e.pluginName||e.name:e}function d(e,t=null){e.map(e=>!s(e)&&r._availablePlugins.get(e)||e).forEach(e=>{!function(e,t){if(!s(e)){if(t)throw new p.a("plugincollection-soft-required",n,{missingPlugin:e,requiredBy:c(t)});throw new p.a("plugincollection-plugin-not-found",n,{plugin:e})}}(e,t),function(e,t){if(a(t)&&!a(e))throw new p.a("plugincollection-context-required",n,{plugin:c(e),requiredBy:c(t)})}(e,t),function(e,t){if(t&&l(e,i))throw new p.a("plugincollection-required",n,{plugin:c(e),requiredBy:c(t)})}(e,t)})}function h(e,i){return e.reduce((e,t)=>!t[i]||r._contextPlugins.has(t)?e:e.then(t[i].bind(t)),Promise.resolve())}}destroy(){const e=[];for(var[,t]of this)"function"!=typeof t.destroy||this._contextPlugins.has(t)||e.push(t.destroy());return Promise.all(e)}_add(e,t){this._plugins.set(e,t);var i=e.pluginName;if(i){if(this._plugins.has(i))throw new p.a("plugincollection-plugin-name-conflict",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:e});this._plugins.set(i,t)}}}function Ut(e){return Array.isArray(e)?e:[e]}Me(Ht,s),window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={});const Wt=["ar","ara","fa","per","fas","he","heb","ku","kur","ug","uig"];function qt(e){return Wt.includes(e)?"rtl":"ltr"}class $t{constructor(e={}){this.uiLanguage=e.uiLanguage||"en",this.contentLanguage=e.contentLanguage||this.uiLanguage,this.uiLanguageDirection=qt(this.uiLanguage),this.contentLanguageDirection=qt(this.contentLanguage),this.t=(e,t)=>this._t(e,t)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,t=[]){t=Ut(t);var i=(e="string"==typeof e?{string:e}:e).plural?t[0]:1,i=function(e,t,i=1){if("number"!=typeof i)throw new p.a("translation-service-quantity-not-a-number",null,{quantity:i});var n;1===(n=Object.keys(window.CKEDITOR_TRANSLATIONS).length)&&(e=Object.keys(window.CKEDITOR_TRANSLATIONS)[0]);var o=t.id||t.string;if(0===n||(n=e,!window.CKEDITOR_TRANSLATIONS[n]||!window.CKEDITOR_TRANSLATIONS[n].dictionary[o]))return 1!==i?t.plural:t.string;const r=window.CKEDITOR_TRANSLATIONS[e].dictionary,s=window.CKEDITOR_TRANSLATIONS[e].getPluralForm||(e=>1===e?0:1);return"string"==typeof r[o]?r[o]:(i=Number(s(i)),r[o][i])}(this.uiLanguage,e,i),n=t;return i.replace(/%(\d+)/g,(e,t)=>t<n.length?n[t]:e)}}class Yt{constructor(e){this.config=new Lt(e,this.constructor.defaultConfig),e=this.constructor.builtinPlugins,this.config.define("plugins",e),this.plugins=new Ht(this,e),e=this.config.get("language")||{},this.locale=new $t({uiLanguage:"string"==typeof e?e:e.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.editors=new Ft,this._contextOwner=null}initPlugins(){const e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const i of e.concat(t)){if("function"!=typeof i)throw new p.a("context-initplugins-constructor-only",null,{Plugin:i});if(!0!==i.isContextPlugin)throw new p.a("context-initplugins-invalid-plugin",null,{Plugin:i})}return this.plugins.init(e,[],t)}destroy(){return Promise.all(Array.from(this.editors,e=>e.destroy())).then(()=>this.plugins.destroy())}_addEditor(e,t){if(this._contextOwner)throw new p.a("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){const e={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(e[t]=this.config.get(t));return e}static create(i){return new Promise(e=>{const t=new this(i);e(t.initPlugins().then(()=>t))})}}class Gt{constructor(e){this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}}function Kt(t,i){var n=Math.min(t.length,i.length);for(let e=0;e<n;e++)if(t[e]!=i[e])return e;return t.length==i.length?"same":t.length<i.length?"prefix":"extension"}function Qt(e){return Ot(e,4)}Me(Gt,Ce);class Jt{constructor(e){this.document=e,this.parent=null}get index(){var e;if(!this.parent)return null;if(-1==(e=this.parent.getChildIndex(this)))throw new p.a("view-node-not-found-in-parent",this);return e}get nextSibling(){var e=this.index;return null!==e&&this.parent.getChild(e+1)||null}get previousSibling(){var e=this.index;return null!==e&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){var i=this.getAncestors(t),n=e.getAncestors(t);let o=0;for(;i[o]==n[o]&&i[o];)o++;return 0===o?null:i[o-1]}isBefore(e){if(this==e)return!1;if(this.root!==e.root)return!1;var t=this.getPath(),i=e.getPath(),n=Kt(t,i);switch(n){case"prefix":return!0;case"extension":return!1;default:return t[n]<i[n]}}isAfter(e){return this!=e&&this.root===e.root&&!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire("change:"+e,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){const e=Qt(this);return delete e.parent,e}is(e){return"node"===e||"view:node"===e}}Me(Jt,s);class Zt extends Jt{constructor(e,t){super(e),this._textData=t}is(e){return"$text"===e||"view:$text"===e||"text"===e||"view:text"===e||"node"===e||"view:node"===e}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof Zt&&(this===e||this.data===e.data)}_clone(){return new Zt(this.document,this.data)}}class Xt{constructor(e,t,i){if(this.textNode=e,t<0||t>e.data.length)throw new p.a("view-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.data.length)throw new p.a("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}is(e){return"$textProxy"===e||"view:$textProxy"===e||"textProxy"===e||"view:textProxy"===e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];let i=e.includeSelf?this.textNode:this.parent;for(;null!==i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}}function ei(e){return Bt(e)?new Map(e):function(e){const t=new Map;for(const i in e)t.set(i,e[i]);return t}(e)}class ti{constructor(...e){this._patterns=[],this.add(...e)}add(...e){for(var t of e)("string"==typeof t||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(const i of e)for(const e of this._patterns){var t=ii(i,e);if(t)return{element:i,pattern:e,match:t}}return null}matchAll(...e){const t=[];for(const n of e)for(const e of this._patterns){var i=ii(n,e);i&&t.push({element:n,pattern:e,match:i})}return 0<t.length?t:null}getElementName(){if(1!==this._patterns.length)return null;var e=this._patterns[0],t=e.name;return"function"==typeof e||!t||t instanceof RegExp?null:t}}function ii(e,t){if("function"==typeof t)return t(e);const i={};return t.name&&(i.name=(o=t.name,r=e.name,o instanceof RegExp?o.test(r):o===r),!i.name)||t.attributes&&(i.attributes=function(e,t){const i=new Set(t.getAttributeKeys());return He(e)?(void 0!==e.style&&Object(p.b)("matcher-pattern-deprecated-attributes-style-key",e),void 0!==e.class&&Object(p.b)("matcher-pattern-deprecated-attributes-class-key",e)):(i.delete("style"),i.delete("class")),ni(e,i,e=>t.getAttribute(e))}(t.attributes,e),!i.attributes)?null:!(t.classes&&(i.classes=ni(t.classes,e.getClassNames()),!i.classes))&&!(t.styles&&(i.styles=ni(t.styles,(n=e).getStyleNames(!0),e=>n.getStyle(e)),!i.styles))&&i;var n,o,r}function ni(e,t,n){const i=Array.isArray(e)?e.map(e=>He(e)?(void 0!==e.key&&void 0!==e.value||Object(p.b)("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0]):He(e)?Object.entries(e):[[e,!0]],o=Array.from(t),r=[];return i.forEach(([e,t])=>{o.forEach(i=>{(!0===e||e===i||e instanceof RegExp&&e.test(i))&&function(e){if(!0===e)return 1;var t=n(i);return e===t||e instanceof RegExp&&e.test(t)}(t)&&r.push(i)})}),!i.length||r.length<i.length?null:r}function oi(e){return"symbol"==typeof e||M(e)&&"[object Symbol]"==w(e)}var ri=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,si=/^\w*$/;function ai(n,o){if("function"!=typeof n||null!=o&&"function"!=typeof o)throw new TypeError("Expected a function");var r=function(){var e=arguments,t=o?o.apply(this,e):e[0],i=r.cache;return i.has(t)?i.get(t):(e=n.apply(this,e),r.cache=i.set(t,e)||i,e)};return r.cache=new(ai.Cache||et),r}function li(e){if("string"==typeof e)return e;if(ae(e))return function(e,t){for(var i=-1,n=null==e?0:e.length,o=Array(n);++i<n;)o[i]=t(e[i],i,e);return o}(e,li)+"";if(oi(e))return yi?yi.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ci(e){return null==e?"":li(e)}function di(e,t){return ae(e)?e:function(e,t){if(!ae(e)){var i=typeof e;return"number"==i||"symbol"==i||"boolean"==i||null==e||oi(e)||si.test(e)||!ri.test(e)||null!=t&&e in Object(t)}}(e,t)?[e]:vi(ci(e))}function hi(e){if("string"==typeof e||oi(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ui(e,t){for(var i=0,n=(t=di(t,e)).length;null!=e&&i<n;)e=e[hi(t[i++])];return i&&i==n?e:void 0}function gi(e,t,i){var n=-1,o=e.length;(i=o<i?o:i)<0&&(i+=o),o=i<(t=t<0?o<-t?0:o+t:t)?0:i-t>>>0,t>>>=0;for(var r=Array(o);++n<o;)r[n]=e[n+t];return r}function mi(e,t,i){return void 0===(t=null==e?void 0:ui(e,t))?i:t}function pi(e,t,i){(void 0===i||A(e[t],i))&&(void 0!==i||t in e)||x(e,t,i)}function fi(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function bi(p,f,b,w,k){p!==f&&xi(f,function(e,t){var i,n,o,r,s,a,l,c,d,h,u,g,m;k=k||new at,_(e)?(n=f,r=b,s=bi,a=w,l=k,u=fi(i=p,o=t),g=fi(n,o),(m=l.get(g))?pi(i,o,m):((c=void 0===(d=a?a(u,g,o+"",i,n,l):void 0))&&(m=!(h=ae(g))&&Object(le.a)(g),n=!h&&!m&&ge(g),d=g,h||m||n?d=ae(u)?u:M(h=u)&&S(h)?it(u):m?(c=!1,Object(ht.a)(g,!0)):n?st(g,!(c=!1)):[]:He(g)||se(g)?se(d=u)?d=T(u,be(u)):_(u)&&!v(u)||(d=Pt(g)):c=!1),c&&(l.set(g,d),s(d,g,r,a,l),l.delete(g)),pi(i,o,d))):(d=w?w(fi(p,t),e,t+"",p,f,k):void 0,pi(p,t,d=void 0===d?e:d))},be)}ai.Cache=et;var wi,ki=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_i=/\\(\\)?/g,vi=(wi=(ne=ai(function(e){var o=[];return 46===e.charCodeAt(0)&&o.push(""),e.replace(ki,function(e,t,i,n){o.push(i?n.replace(_i,"$1"):t||e)}),o},function(e){return 500===wi.size&&wi.clear(),e})).cache,ne),yi=($=D?D.prototype:void 0)?$.toString:void 0,xi=function(e,t,i){for(var n=-1,o=Object(e),r=i(e),s=r.length;s--;){var a=r[++n];if(!1===t(o[a],a,o))break}return e},Ai=t(function(e,t,i){bi(e,t,i)});class Ci{constructor(e){this._styles={},this._styleProcessor=e}get isEmpty(){var e=Object.entries(this._styles);return!Array.from(e).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();for(var[t,i]of e=Array.from(function(t){let i=null,n=0,o=0,r=null;const s=new Map;if(""===t)return s;";"!=t.charAt(t.length-1)&&(t+=";");for(let e=0;e<t.length;e++){var a=t.charAt(e);if(null===i)switch(a){case":":r||(r=t.substr(n,e-n),o=e+1);break;case'"':case"'":i=a;break;case";":{const i=t.substr(o,e-o);r&&s.set(r.trim(),i.trim()),r=null,n=e+1;break}}else a===i&&(i=null)}return s}(e).entries()))this._styleProcessor.toNormalizedForm(t,i,this._styles)}has(t){if(this.isEmpty)return!1;var e=this._styleProcessor.getReducedForm(t,this._styles).find(([e])=>e===t);return Array.isArray(e)}set(e,t){if(_(e))for(const[t,i]of Object.entries(e))this._styleProcessor.toNormalizedForm(t,i,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){var t,i,n=Ei(e),o=this._styles;null==o||(null==(t=(i=di(i=n,o=t=o)).length<2?o:ui(o,gi(i,0,-1)))||delete t[hi((i=null==(t=i)?0:t.length)?t[i-1]:void 0)]),delete this._styles[e],this._cleanEmptyObjectsOnPath(n)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this._getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(t){if(!this.isEmpty){if(this._styles[t]&&!_(this._styles[t]))return this._styles[t];var e=this._styleProcessor.getReducedForm(t,this._styles).find(([e])=>e===t);return Array.isArray(e)?e[1]:void 0}}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this._getStylesEntries().map(([e])=>e)}clear(){this._styles={}}_getStylesEntries(){const e=[],t=Object.keys(this._styles);for(const i of t)e.push(...this._styleProcessor.getReducedForm(i,this._styles));return e}_cleanEmptyObjectsOnPath(e){const t=e.split(".");var i;1<t.length&&(i=t.splice(0,t.length-1).join("."),(e=mi(this._styles,i))&&(Array.from(Object.keys(e)).length||this.remove(i)))}}class Ti{constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,i){if(_(t))Ii(i,Ei(e),t);else if(this._normalizers.has(e)){const n=this._normalizers.get(e),{path:o,value:r}=n(t);Ii(i,o,r)}else Ii(i,e,t)}getNormalized(e,t){if(!e)return Ai({},t);if(void 0!==t[e])return t[e];if(this._extractors.has(e)){const n=this._extractors.get(e);if("string"==typeof n)return mi(t,n);var i=n(e,t);if(i)return i}return mi(t,Ei(e))}getReducedForm(e,t){return void 0===(t=this.getNormalized(e,t))?[]:this._reducers.has(e)?this._reducers.get(e)(t):[[e,t]]}getStyleNames(t){const e=Array.from(this._consumables.keys()).filter(e=>(e=this.getNormalized(e,t))&&"object"==typeof e?Object.keys(e).length:e),i=new Set([...e,...Object.keys(t)]);return Array.from(i.values())}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(const i of t)this._mapStyleNames(i,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}}function Ei(e){return e.replace("-",".")}function Ii(e,t,i){let n=i;var d;_(i)&&(n=Ai({},mi(e,t),i)),e=e,d=t,t=n,null==e||function(e,t,i){if(!_(e))return;for(var n=-1,o=(t=di(d,e)).length,r=o-1,s=e;null!=s&&++n<o;){var a,l=hi(t[n]),c=i;if("__proto__"===l||"constructor"===l||"prototype"===l)return;n!=r&&(c=void 0,c=_(a=s[l])?a:P(t[n+1])?[]:{}),C(s,l,c),s=s[l]}}(e,0,t)}class Si extends Jt{constructor(e,t,i,n){if(super(e),this.name=t,this._attrs=function(e){for(var[t,i]of e=ei(e))null===i?e.delete(t):"string"!=typeof i&&e.set(t,String(i));return e}(i),this._children=[],n&&this._insertChild(0,n),this._classes=new Set,this._attrs.has("class")){const e=this._attrs.get("class");Pi(this._classes,e),this._attrs.delete("class")}this._styles=new Ci(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style")),this._customProperties=new Map,this._isAllowedInsideAttributeElement=!1}get childCount(){return this._children.length}get isEmpty(){return 0===this._children.length}get isAllowedInsideAttributeElement(){return this._isAllowedInsideAttributeElement}is(e,t=null){return t?t===this.name&&("element"===e||"view:element"===e):"element"===e||"view:element"===e||"node"===e||"view:node"===e}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){0<this._classes.size&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),0<this._classes.size&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if("class"==e)return 0<this._classes.size?[...this._classes].join(" "):void 0;if("style"!=e)return this._attrs.get(e);{const e=this._styles.toString();return""==e?void 0:e}}hasAttribute(e){return"class"==e?0<this._classes.size:"style"==e?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof Si))return!1;if(this===e)return!0;if(this.name!=e.name)return!1;if(this.isAllowedInsideAttributeElement!=e.isAllowedInsideAttributeElement)return!1;if(this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(var[t,i]of this._attrs)if(!e._attrs.has(t)||e._attrs.get(t)!==i)return!1;for(const n of this._classes)if(!e._classes.has(n))return!1;for(const o of this._styles.getStyleNames())if(!e._styles.has(o)||e._styles.getAsString(o)!==this._styles.getAsString(o))return!1;return!0}hasClass(...e){for(const t of e)if(!this._classes.has(t))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e=!1){return this._styles.getStyleNames(e)}hasStyle(...e){for(const t of e)if(!this._styles.has(t))return!1;return!0}findAncestor(...e){const t=new ti(...e);let i=this.parent;for(;i;){if(t.match(i))return i;i=i.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){var e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),i=Array.from(this._attrs).map(e=>`${e[0]}="${e[1]}"`).sort().join(" ");return this.name+(""==e?"":` class="${e}"`)+(t?` style="${t}"`:"")+(""==i?"":" "+i)}_clone(e=!1){const t=[];if(e)for(const i of this.getChildren())t.push(i._clone(e));const i=new this.constructor(this.document,this.name,this._attrs,t);return i._classes=new Set(this._classes),i._styles.set(this._styles.getNormalized()),i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._isAllowedInsideAttributeElement=this.isAllowedInsideAttributeElement,i}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this);let i=0;var n;for(const o of t=(n=this.document,"string"==typeof t?[new Zt(n,t)]:(Bt(t)||(t=[t]),Array.from(t).map(e=>"string"==typeof e?new Zt(n,e):e instanceof Xt?new Zt(n,e.data):e))))null!==o.parent&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,i++;return i}_removeChildren(t,i=1){this._fireChange("children",this);for(let e=t;e<t+i;e++)this._children[e].parent=null;return this._children.splice(t,i)}_setAttribute(e,t){t=String(t),this._fireChange("attributes",this),"class"==e?Pi(this._classes,t):"style"==e?this._styles.setTo(t):this._attrs.set(e,t)}_removeAttribute(e){return this._fireChange("attributes",this),"class"==e?0<this._classes.size&&(this._classes.clear(),!0):"style"==e?!this._styles.isEmpty&&(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(const t of Ut(e))this._classes.add(t)}_removeClass(e){this._fireChange("attributes",this);for(const t of Ut(e))this._classes.delete(t)}_setStyle(e,t){this._fireChange("attributes",this),this._styles.set(e,t)}_removeStyle(e){this._fireChange("attributes",this);for(const t of Ut(e))this._styles.remove(t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}}function Pi(t,e){const i=e.split(/\s+/);t.clear(),i.forEach(e=>t.add(e))}class Mi extends Si{constructor(e,t,i,n){super(e,t,i,n),this.getFillerOffset=Ni}is(e,t=null){return t?t===this.name&&("containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}}function Ni(){const e=[...this.getChildren()],t=e[this.childCount-1];if(t&&t.is("element","br"))return this.childCount;for(const t of e)if(!t.is("uiElement"))return null;return this.childCount}class Ri extends Mi{constructor(t,e,i,n){super(t,e,i,n),this.set("isReadOnly",!1),this.set("isFocused",!1),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",e=>e&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}is(e,t=null){return t?t===this.name&&("editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}destroy(){this.stopListening()}}Me(Ri,Ce);const Oi=Symbol("rootName");class zi extends Ri{constructor(e,t){super(e,t),this.rootName="main"}is(e,t=null){return t?t===this.name&&("rootElement"===e||"view:rootElement"===e||"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"rootElement"===e||"view:rootElement"===e||"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}get rootName(){return this.getCustomProperty(Oi)}set rootName(e){this._setCustomProperty(Oi,e)}set _name(e){this.name=e}}class Di{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new p.a("view-tree-walker-no-start-position",null);if(e.direction&&"forward"!=e.direction&&"backward"!=e.direction)throw new p.a("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this.position=Li._createAt(e.startPosition):this.position=Li._createAt(e.boundaries["backward"==e.direction?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}skip(e){let t,i,n;for(;n=this.position,{done:t,value:i}=this.next(),!t&&e(i););t||(this.position=n)}next(){return"forward"==this.direction?this._next():this._previous()}_next(){let i=this.position.clone();const n=this.position,e=i.parent;if(null===e.parent&&i.offset===e.childCount)return{done:!0};if(e===this._boundaryEndParent&&i.offset==this.boundaries.end.offset)return{done:!0};let o;if(e instanceof Zt){if(i.isAtEnd)return this.position=Li._createAfter(e),this._next();o=e.data[i.offset]}else o=e.getChild(i.offset);if(o instanceof Si)return this.shallow?i.offset++:i=new Li(o,0),this.position=i,this._formatReturnValue("elementStart",o,n,i,1);if(o instanceof Zt){if(this.singleCharacters)return i=new Li(o,0),this.position=i,this._next();{let e,t=o.data.length;return o==this._boundaryEndParent?(t=this.boundaries.end.offset,e=new Xt(o,0,t),i=Li._createAfter(e)):(e=new Xt(o,0,o.data.length),i.offset++),this.position=i,this._formatReturnValue("text",e,n,i,t)}}if("string"!=typeof o)return i=Li._createAfter(e),this.position=i,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",e,n,i);var t=this.singleCharacters?1:(e===this._boundaryEndParent?this.boundaries.end.offset:e.data.length)-i.offset,r=new Xt(e,i.offset,t);return i.offset+=t,this.position=i,this._formatReturnValue("text",r,n,i,t)}_previous(){let i=this.position.clone();const n=this.position,t=i.parent;if(null===t.parent&&0===i.offset)return{done:!0};if(t==this._boundaryStartParent&&i.offset==this.boundaries.start.offset)return{done:!0};let o;if(t instanceof Zt){if(i.isAtStart)return this.position=Li._createBefore(t),this._previous();o=t.data[i.offset-1]}else o=t.getChild(i.offset-1);if(o instanceof Si)return this.shallow?(i.offset--,this.position=i,this._formatReturnValue("elementStart",o,n,i,1)):(i=new Li(o,o.childCount),this.position=i,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",o,n,i));if(o instanceof Zt){if(this.singleCharacters)return i=new Li(o,o.data.length),this.position=i,this._previous();{let e,t=o.data.length;if(o==this._boundaryStartParent){const n=this.boundaries.start.offset;e=new Xt(o,n,o.data.length-n),t=e.data.length,i=Li._createBefore(e)}else e=new Xt(o,0,o.data.length),i.offset--;return this.position=i,this._formatReturnValue("text",e,n,i,t)}}if("string"!=typeof o)return i=Li._createBefore(t),this.position=i,this._formatReturnValue("elementStart",t,n,i,1);{let e;if(this.singleCharacters)e=1;else{const n=t===this._boundaryStartParent?this.boundaries.start.offset:0;e=i.offset-n}i.offset-=e;var r=new Xt(t,i.offset,e);return this.position=i,this._formatReturnValue("text",r,n,i,e)}}_formatReturnValue(e,t,i,n,o){return t instanceof Xt&&(t.offsetInText+t.data.length==t.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?i=Li._createAfter(t.textNode):(n=Li._createAfter(t.textNode),this.position=n)),0===t.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?i=Li._createBefore(t.textNode):(n=Li._createBefore(t.textNode),this.position=n))),{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:n,length:o}}}}class Li{constructor(e,t){this.parent=e,this.offset=t}get nodeAfter(){return!this.parent.is("$text")&&this.parent.getChild(this.offset)||null}get nodeBefore(){return!this.parent.is("$text")&&this.parent.getChild(this.offset-1)||null}get isAtStart(){return 0===this.offset}get isAtEnd(){var e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof Ri);){if(!e.parent)return null;e=e.parent}return e}getShiftedBy(e){const t=Li._createAt(this),i=t.offset+e;return t.offset=i<0?0:i,t}getLastMatchingPosition(e,t={}){t.startPosition=this;const i=new Di(t);return i.skip(e),i.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){var t=this.getAncestors(),i=e.getAncestors();let n=0;for(;t[n]==i[n]&&t[n];)n++;return 0===n?null:t[n-1]}is(e){return"position"===e||"view:position"===e}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return"before"==this.compareWith(e)}isAfter(e){return"after"==this.compareWith(e)}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const t=this.parent.is("node")?this.parent.getPath():[],i=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),i.push(e.offset);var n=Kt(t,i);switch(n){case"prefix":return"before";case"extension":return"after";default:return t[n]<i[n]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new Di(e)}clone(){return new Li(this.parent,this.offset)}static _createAt(e,t){if(e instanceof Li)return new this(e.parent,e.offset);{const i=e;if("end"==t)t=i.is("$text")?i.data.length:i.childCount;else{if("before"==t)return this._createBefore(i);if("after"==t)return this._createAfter(i);if(0!==t&&!t)throw new p.a("view-createpositionat-offset-required",i)}return new Li(i,t)}}static _createAfter(e){if(e.is("$textProxy"))return new Li(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new p.a("view-position-after-root",e,{root:e});return new Li(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new Li(e.textNode,e.offsetInText);if(!e.parent)throw new p.a("view-position-before-root",e,{root:e});return new Li(e.parent,e.index)}}class Vi{constructor(e,t=null){this.start=e.clone(),this.end=(t||e).clone()}*[Symbol.iterator](){yield*new Di({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(ji,{direction:"backward"}),t=this.end.getLastMatchingPosition(ji);return e.parent.is("$text")&&e.isAtStart&&(e=Li._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=Li._createAfter(t.parent)),new Vi(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(ji);if(e.isAfter(this.end)||e.isEqual(this.end))return new Vi(e,e);let t=this.end.getLastMatchingPosition(ji,{direction:"backward"});const i=e.nodeAfter,n=t.nodeBefore;return i&&i.is("$text")&&(e=new Li(i,0)),n&&n.is("$text")&&(t=new Li(n,n.data.length)),new Vi(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);var i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),e=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&e}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new Vi(this.start,e.start)),this.containsPosition(e.end)&&t.push(new Vi(e.end,this.end))):t.push(this.clone()),t}getIntersection(i){if(this.isIntersecting(i)){let e=this.start,t=this.end;return this.containsPosition(i.start)&&(e=i.start),this.containsPosition(i.end)&&(t=i.end),new Vi(e,t)}return null}getWalker(e={}){return e.boundaries=this,new Di(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new Vi(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;for(const t of e=new Di(e))yield t.item}*getPositions(e={}){e.boundaries=this,yield(e=new Di(e)).position;for(const t of e)yield t.nextPosition}is(e){return"range"===e||"view:range"===e}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,t,i,n){return new this(new Li(e,t),new Li(i,n))}static _createFromPositionAndShift(e,t){var i=e,e=e.getShiftedBy(t);return 0<t?new this(i,e):new this(e,i)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){var t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(Li._createBefore(e),t)}}function ji(e){return!(!e.item.is("attributeElement")&&!e.item.is("uiElement"))}function Bi(e){let t=0;for(const i of e)t++;return t}class Fi{constructor(e=null,t,i){this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",this.setTo(e,t,i)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const t of this._ranges)e&&!t.start.isBefore(e.start)||(e=t);return e?e.clone():null}getLastRange(){let e=null;for(const t of this._ranges)e&&!t.end.isAfter(e.end)||(e=t);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(t){if(this.isFake!=t.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel)return!1;if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const i of this._ranges){let e=!1;for(const n of t._ranges)if(i.isEqual(n)){e=!0;break}if(!e)return!1}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;var i,e=Bi(this.getRanges());if(e!=Bi(t.getRanges()))return!1;if(0==e)return!0;for(i of this.getRanges()){i=i.getTrimmed();let e=!1;for(var n of t.getRanges())if(n=n.getTrimmed(),i.start.isEqual(n.start)&&i.end.isEqual(n.end)){e=!0;break}if(!e)return!1}return!0}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}setTo(e,t,i){if(null===e)this._setRanges([]),this._setFakeOptions(t);else if(e instanceof Fi||e instanceof Hi)this._setRanges(e.getRanges(),e.isBackward),this._setFakeOptions({fake:e.isFake,label:e.fakeSelectionLabel});else if(e instanceof Vi)this._setRanges([e],t&&t.backward),this._setFakeOptions(t);else if(e instanceof Li)this._setRanges([new Vi(e)]),this._setFakeOptions(t);else if(e instanceof Jt){var n,o=!!i&&!!i.backward;if(void 0===t)throw new p.a("view-selection-setto-required-second-parameter",this);n="in"==t?Vi._createIn(e):"on"==t?Vi._createOn(e):new Vi(Li._createAt(e,t)),this._setRanges([n],o),this._setFakeOptions(i)}else{if(!Bt(e))throw new p.a("view-selection-setto-not-selectable",this);this._setRanges(e,t&&t.backward),this._setFakeOptions(t)}this.fire("change")}setFocus(e,t){if(null===this.anchor)throw new p.a("view-selection-setfocus-no-ranges",this);const i=Li._createAt(e,t);"same"!=i.compareWith(this.focus)&&(t=this.anchor,this._ranges.pop(),"before"==i.compareWith(t)?this._addRange(new Vi(i,t),!0):this._addRange(new Vi(t,i)),this.fire("change"))}is(e){return"selection"===e||"view:selection"===e}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(const t of e)this._addRange(t);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof Vi))throw new p.a("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(const t of this._ranges)if(e.isIntersecting(t))throw new p.a("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new Vi(e.start,e.end))}}Me(Fi,s);class Hi{constructor(e=null,t,i){this._selection=new Fi,this._selection.delegate("change").to(this),this._selection.setTo(e,t,i)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}is(e){return"selection"===e||"documentSelection"==e||"view:selection"==e||"view:documentSelection"==e}_setTo(e,t,i){this._selection.setTo(e,t,i)}_setFocus(e,t){this._selection.setFocus(e,t)}}Me(Hi,s);class Ui extends l{constructor(e,t,i){super(e,t),this.startRange=i,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const Wi=Symbol("bubbling contexts");function qi(e,t,i){e instanceof Ui&&(e._eventPhase=t,e._currentTarget=i)}function $i(e,t,i,...n){const o="string"==typeof t?e.get(t):Yi(e,t);return o&&(o.fire(i,...n),i.stop.called)}function Yi(e,t){for(var[i,n]of e)if("function"==typeof i&&i(t))return n;return null}function Gi(e){return e[Wi]||(e[Wi]=new Map),e[Wi]}class Ki{constructor(e){this.selection=new Hi,this.roots=new Ft({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isComposing",!1),this._postFixers=new Set}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.map(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let t=!1;do{for(const i of this._postFixers)if(t=i(e),t)break}while(t)}}Me(Ki,{fire(t,...i){try{var n=t instanceof l?t:new l(this,t),o=Gi(this);if(!o.size)return;if(qi(n,"capturing",this),$i(o,"$capture",n,...i))return n.return;const r=n.startRange||this.selection.getFirstRange(),s=r?r.getContainedElement():null,a=!!s&&Boolean(Yi(o,s));let e=s||function(e){if(!e)return null;const t=e.start.parent,i=e.end.parent,n=t.getPath(),o=i.getPath();return n.length>o.length?t:i}(r);if(qi(n,"atTarget",e),!a){if($i(o,"$text",n,...i))return n.return;qi(n,"bubbling",e)}for(;e;){if(e.is("rootElement")){if($i(o,"$root",n,...i))return n.return}else if(e.is("element")&&$i(o,e.name,n,...i))return n.return;if($i(o,e,n,...i))return n.return;e=e.parent,qi(n,"bubbling",e)}return qi(n,"bubbling",this),$i(o,"$document",n,...i),n.return}catch(t){p.a.rethrowUnexpectedError(t,this)}},_addEventListener(t,i,n){const e=Ut(n.context||"$document"),o=Gi(this);for(const r of e){let e=o.get(r);e||(e=Object.create(s),o.set(r,e)),this.listenTo(e,t,i,n)}},_removeEventListener(e,t){const i=Gi(this);for(const n of i.values())this.stopListening(n,e,t)}}),Me(Ki,Ce);class Qi extends Si{constructor(e,t,i,n){super(e,t,i,n),this.getFillerOffset=Ji,this._priority=10,this._id=null,this._clonesGroup=null}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(null===this.id)throw new p.a("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}is(e,t=null){return t?t===this.name&&("attributeElement"===e||"view:attributeElement"===e||"element"===e||"view:element"===e):"attributeElement"===e||"view:attributeElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}isSimilar(e){return null!==this.id||null!==e.id?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e){const t=super._clone(e);return t._priority=this._priority,t._id=this._id,t}}function Ji(){if(Zi(this))return null;let e=this.parent;for(;e&&e.is("attributeElement");){if(1<Zi(e))return null;e=e.parent}return!e||1<Zi(e)?null:this.childCount}function Zi(e){return Array.from(e.getChildren()).filter(e=>!e.is("uiElement")).length}Qi.DEFAULT_PRIORITY=10;class Xi extends Si{constructor(e,t,i,n){super(e,t,i,n),this._isAllowedInsideAttributeElement=!0,this.getFillerOffset=en}is(e,t=null){return t?t===this.name&&("emptyElement"===e||"view:emptyElement"===e||"element"===e||"view:element"===e):"emptyElement"===e||"view:emptyElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}_insertChild(e,t){if(t&&(t instanceof Jt||0<Array.from(t).length))throw new p.a("view-emptyelement-cannot-add",[this,t])}}function en(){return null}var tn={isMac:-1<(ue=navigator.userAgent.toLowerCase()).indexOf("macintosh"),isGecko:!!ue.match(/gecko\/\d+/),isSafari:-1<(G=ue).indexOf(" applewebkit/")&&-1===G.indexOf("chrome"),isAndroid:-1<ue.indexOf("android"),isBlink:-1<(ne=ue).indexOf("chrome/")&&ne.indexOf("edge/")<0,features:{isRegExpUnicodePropertySupported:function(){let e=!1;try{e=0==="ć".search(new RegExp("[\\p{L}]","u"))}catch(e){}return e}()}};const nn={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},on={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},rn=function(){const t={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){const i=String.fromCharCode(e);t[i.toLowerCase()]=e}for(let e=48;e<=57;e++)t[e-48]=e;for(let e=112;e<=123;e++)t["f"+(e-111)]=e;return t}(),sn=Object.fromEntries(Object.entries(rn).map(([e,t])=>[t,e.charAt(0).toUpperCase()+e.slice(1)]));function an(e){let t;if("string"==typeof e){if(t=rn[e.toLowerCase()],!t)throw new p.a("keyboard-unknown-key",null,{key:e})}else t=e.keyCode+(e.altKey?rn.alt:0)+(e.ctrlKey?rn.ctrl:0)+(e.shiftKey?rn.shift:0)+(e.metaKey?rn.cmd:0);return t}function ln(e){return(e="string"==typeof e?e.split("+").map(e=>e.trim()):e).map(e=>"string"==typeof e?function(e){return e.endsWith("!")?an(e.slice(0,-1)):(e=an(e),tn.isMac&&e==rn.ctrl?rn.cmd:e)}(e):e).reduce((e,t)=>t+e,0)}function cn(e){let n=ln(e);return Object.entries(tn.isMac?nn:on).reduce((e,[t,i])=>(0!=(n&rn[t])&&(n&=~rn[t],e+=i),e),"")+(n?sn[n]:"")}function dn(e,t){var i="ltr"===t;switch(e){case rn.arrowleft:return i?"left":"right";case rn.arrowright:return i?"right":"left";case rn.arrowup:return"up";case rn.arrowdown:return"down"}}function hn(e,t){return"down"===(t=dn(e,t))||"right"===t}class un extends Si{constructor(e,t,i,n){super(e,t,i,n),this._isAllowedInsideAttributeElement=!0,this.getFillerOffset=gn}is(e,t=null){return t?t===this.name&&("uiElement"===e||"view:uiElement"===e||"element"===e||"view:element"===e):"uiElement"===e||"view:uiElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}_insertChild(e,t){if(t&&(t instanceof Jt||0<Array.from(t).length))throw new p.a("view-uielement-cannot-add",this)}render(e){return this.toDomElement(e)}toDomElement(e){const t=e.createElement(this.name);for(const e of this.getAttributeKeys())t.setAttribute(e,this.getAttribute(e));return t}}function gn(){return null}class mn extends Si{constructor(e,t,i,n){super(e,t,i,n),this._isAllowedInsideAttributeElement=!0,this.getFillerOffset=pn}is(e,t=null){return t?t===this.name&&("rawElement"===e||"view:rawElement"===e||"element"===e||"view:element"===e):"rawElement"===e||"view:rawElement"===e||e===this.name||e==="view:"+this.name||"element"===e||"view:element"===e||"node"===e||"view:node"===e}_insertChild(e,t){if(t&&(t instanceof Jt||0<Array.from(t).length))throw new p.a("view-rawelement-cannot-add",[this,t])}}function pn(){return null}class fn{constructor(e,t){this.document=e,this._children=[],t&&this._insertChild(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}is(e){return"documentFragment"===e||"view:documentFragment"===e}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this);let i=0;var n;for(const o of t=(n=this.document,"string"==typeof t?[new Zt(n,t)]:(Bt(t)||(t=[t]),Array.from(t).map(e=>"string"==typeof e?new Zt(n,e):e instanceof Xt?new Zt(n,e.data):e))))null!==o.parent&&o._remove(),o.parent=this,this._children.splice(e,0,o),e++,i++;return i}_removeChildren(t,i=1){this._fireChange("children",this);for(let e=t;e<t+i;e++)this._children[e].parent=null;return this._children.splice(t,i)}_fireChange(e,t){this.fire("change:"+e,t)}}Me(fn,s);class bn{constructor(e){this.document=e,this._cloneGroups=new Map}setSelection(e,t,i){this.document.selection._setTo(e,t,i)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new fn(this.document,e)}createText(e){return new Zt(this.document,e)}createAttributeElement(e,t,i={}){const n=new Qi(this.document,e,t);return"number"==typeof i.priority&&(n._priority=i.priority),i.id&&(n._id=i.id),n}createContainerElement(e,t,i={}){const n=new Mi(this.document,e,t);return void 0!==i.isAllowedInsideAttributeElement&&(n._isAllowedInsideAttributeElement=i.isAllowedInsideAttributeElement),n}createEditableElement(e,t){const i=new Ri(this.document,e,t);return i._document=this.document,i}createEmptyElement(e,t,i={}){const n=new Xi(this.document,e,t);return void 0!==i.isAllowedInsideAttributeElement&&(n._isAllowedInsideAttributeElement=i.isAllowedInsideAttributeElement),n}createUIElement(e,t,i,n={}){const o=new un(this.document,e,t);return i&&(o.render=i),void 0!==n.isAllowedInsideAttributeElement&&(o._isAllowedInsideAttributeElement=n.isAllowedInsideAttributeElement),o}createRawElement(e,t,i,n={}){const o=new mn(this.document,e,t);return o.render=i||(()=>{}),void 0!==n.isAllowedInsideAttributeElement&&(o._isAllowedInsideAttributeElement=n.isAllowedInsideAttributeElement),o}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){(i=He(e)&&void 0===i?t:i)._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof Li?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const t=e.parent;if(!t.is("containerElement"))throw new p.a("view-writer-break-non-container-element",this.document);if(!t.parent)throw new p.a("view-writer-break-root",this.document);return e.isAtStart?Li._createBefore(t):(e.isAtEnd||(i=t._clone(!1),this.insert(Li._createAfter(t),i),e=new Vi(e,Li._createAt(t,"end")),i=new Li(i,0),this.move(e,i)),Li._createAfter(t));var i}mergeAttributes(e){const t=e.offset,i=e.parent;if(i.is("$text"))return e;if(i.is("attributeElement")&&0===i.childCount){const e=i.parent,t=i.index;return i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new Li(e,t))}const n=i.getChild(t-1),o=i.getChild(t);if(!n||!o)return e;if(n.is("$text")&&o.is("$text"))return vn(n,o);if(n.is("attributeElement")&&o.is("attributeElement")&&n.isSimilar(o)){const e=n.childCount;return n._appendChild(o.getChildren()),o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new Li(n,e))}return e}mergeContainers(e){const t=e.nodeBefore,i=e.nodeAfter;if(!(t&&i&&t.is("containerElement")&&i.is("containerElement")))throw new p.a("view-writer-merge-containers-invalid-position",this.document);return e=(e=t.getChild(t.childCount-1))instanceof Zt?Li._createAt(e,"end"):Li._createAt(t,"end"),this.move(Vi._createIn(i),Li._createAt(t,"end")),this.remove(Vi._createOn(i)),e}insert(e,t){!function e(t,i){for(const n of t){if(!yn.some(e=>n instanceof e))throw new p.a("view-writer-insert-invalid-node-type",i);n.is("$text")||e(n.getChildren(),i)}}(t=Bt(t)?[...t]:[t],this.document);const i=t.reduce((e,t)=>{const i=e[e.length-1],n=!(t.is("uiElement")&&t.isAllowedInsideAttributeElement);return i&&i.breakAttributes==n?i.nodes.push(t):e.push({breakAttributes:n,nodes:[t]}),e},[]);let n=null,o=e;for(const{nodes:e,breakAttributes:t}of i){const i=this._insertNodes(o,e,t);n=n||i.start,o=i.end}return n?new Vi(n,o):new Vi(e)}remove(e){const t=e instanceof Vi?e:Vi._createOn(e);if(An(t,this.document),t.isCollapsed)return new fn(this.document);const{start:i,end:n}=this._breakAttributesRange(t,!0),o=i.parent,r=n.offset-i.offset,s=o._removeChildren(i.offset,r);for(const e of s)this._removeFromClonedElementsGroup(e);const a=this.mergeAttributes(i);return t.start=a,t.end=a.clone(),new fn(this.document,s)}clear(t,i){An(t,this.document);const n=t.getWalker({direction:"backward",ignoreElementEnd:!0});for(const o of n){const n=o.item;let e;if(n.is("element")&&i.isSimilar(n))e=Vi._createOn(n);else if(!o.nextPosition.isAfter(t.start)&&n.is("$textProxy")){const t=n.getAncestors().find(e=>e.is("element")&&i.isSimilar(e));t&&(e=Vi._createIn(t))}e&&(e.end.isAfter(t.end)&&(e.end=t.end),e.start.isBefore(t.start)&&(e.start=t.start),this.remove(e))}}move(e,t){let i;var n,o;return t.isAfter(e.end)?(o=(n=(t=this._breakAttributes(t,!0)).parent).childCount,e=this._breakAttributesRange(e,!0),i=this.remove(e),t.offset+=n.childCount-o):i=this.remove(e),this.insert(t,i)}wrap(t,i){if(!(i instanceof Qi))throw new p.a("view-writer-wrap-invalid-attribute",this.document);if(An(t,this.document),t.isCollapsed){let e=t.start;e.parent.is("element")&&(n=e.parent,!Array.from(n.getChildren()).some(e=>!e.is("uiElement")))&&(e=e.getLastMatchingPosition(e=>e.item.is("uiElement"))),e=this._wrapPosition(e,i);const o=this.document.selection;return o.isCollapsed&&o.getFirstPosition().isEqual(t.start)&&this.setSelection(e),new Vi(e)}return this._wrapRange(t,i);var n}unwrap(e,t){if(!(t instanceof Qi))throw new p.a("view-writer-unwrap-invalid-attribute",this.document);if(An(e,this.document),e.isCollapsed)return e;const{start:i,end:n}=this._breakAttributesRange(e,!0),o=i.parent,r=this._unwrapChildren(o,i.offset,n.offset,t),s=this.mergeAttributes(r.start);return s.isEqual(r.start)||r.end.offset--,t=this.mergeAttributes(r.end),new Vi(s,t)}rename(e,t){return e=new Mi(this.document,e,t.getAttributes()),this.insert(Li._createAfter(t),e),this.move(Vi._createIn(t),Li._createAt(e,0)),this.remove(Vi._createOn(t)),e}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return Li._createAt(e,t)}createPositionAfter(e){return Li._createAfter(e)}createPositionBefore(e){return Li._createBefore(e)}createRange(e,t){return new Vi(e,t)}createRangeOn(e){return Vi._createOn(e)}createRangeIn(e){return Vi._createIn(e)}createSelection(e,t,i){return new Fi(e,t,i)}_insertNodes(e,t,i){let n,o;if(n=i?wn(e):(e.parent.is("$text")?e.parent:e).parent,!n)throw new p.a("view-writer-invalid-position-container",this.document);o=i?this._breakAttributes(e,!0):e.parent.is("$text")?_n(e):e,e=n._insertChild(o.offset,t);for(const a of t)this._addToClonedElementsGroup(a);const r=o.getShiftedBy(e),s=this.mergeAttributes(o);return s.isEqual(o)||r.offset--,e=this.mergeAttributes(r),new Vi(s,e)}_wrapChildren(e,t,i,n){let o=t;const r=[];for(;o<i;){const t=e.getChild(o),i=t.is("$text"),a=t.is("attributeElement"),l=t.isAllowedInsideAttributeElement;if(a&&this._wrapAttributeElement(n,t))r.push(new Li(e,o));else if(i||l||a&&(s=t,n.priority<s.priority||!(n.priority>s.priority)&&n.getIdentity()<s.getIdentity())){const i=n._clone();t._remove(),i._appendChild(t),e._insertChild(o,i),this._addToClonedElementsGroup(i),r.push(new Li(e,o))}else a&&this._wrapChildren(t,0,t.childCount,n);o++}var s;let a=0;for(const e of r)e.offset-=a,e.offset!=t&&(this.mergeAttributes(e).isEqual(e)||(a++,i--));return Vi._createFromParentsAndOffsets(e,t,e,i)}_unwrapChildren(e,t,i,n){let o=t;const r=[];for(;o<i;){const t=e.getChild(o);if(t.is("attributeElement"))if(t.isSimilar(n)){const n=t.getChildren(),s=t.childCount;t._remove(),e._insertChild(o,n),this._removeFromClonedElementsGroup(t),r.push(new Li(e,o),new Li(e,o+s)),o+=s,i+=s-1}else this._unwrapAttributeElement(n,t)?r.push(new Li(e,o),new Li(e,o+1)):this._unwrapChildren(t,0,t.childCount,n),o++;else o++}let s=0;for(const e of r)e.offset-=s,e.offset!=t&&e.offset!=i&&(this.mergeAttributes(e).isEqual(e)||(s++,i--));return Vi._createFromParentsAndOffsets(e,t,e,i)}_wrapRange(e,t){const{start:i,end:n}=this._breakAttributesRange(e,!0),o=i.parent,r=this._wrapChildren(o,i.offset,n.offset,t),s=this.mergeAttributes(r.start);return s.isEqual(r.start)||r.end.offset--,t=this.mergeAttributes(r.end),new Vi(s,t)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return kn(e.clone());e.parent.is("$text")&&(e=_n(e));const i=this.createAttributeElement();i._priority=Number.POSITIVE_INFINITY,i.isSimilar=()=>!1,e.parent._insertChild(e.offset,i);var n=new Vi(e,e.getShiftedBy(1));return this.wrap(n,t),e=new Li(i.parent,i.index),i._remove(),n=e.nodeBefore,t=e.nodeAfter,n instanceof Zt&&t instanceof Zt?vn(n,t):kn(e)}_wrapAttributeElement(e,t){if(!Cn(e,t))return!1;if(e.name!==t.name||e.priority!==t.priority)return!1;for(const i of e.getAttributeKeys())if("class"!==i&&"style"!==i&&t.hasAttribute(i)&&t.getAttribute(i)!==e.getAttribute(i))return!1;for(const n of e.getStyleNames())if(t.hasStyle(n)&&t.getStyle(n)!==e.getStyle(n))return!1;for(const o of e.getAttributeKeys())"class"!==o&&"style"!==o&&(t.hasAttribute(o)||this.setAttribute(o,e.getAttribute(o),t));for(const r of e.getStyleNames())t.hasStyle(r)||this.setStyle(r,e.getStyle(r),t);for(const s of e.getClassNames())t.hasClass(s)||this.addClass(s,t);return!0}_unwrapAttributeElement(e,t){if(!Cn(e,t))return!1;if(e.name!==t.name||e.priority!==t.priority)return!1;for(const i of e.getAttributeKeys())if("class"!==i&&"style"!==i&&(!t.hasAttribute(i)||t.getAttribute(i)!==e.getAttribute(i)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(const n of e.getStyleNames())if(!t.hasStyle(n)||t.getStyle(n)!==e.getStyle(n))return!1;for(const o of e.getAttributeKeys())"class"!==o&&"style"!==o&&this.removeAttribute(o,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){const i=e.start,n=e.end;if(An(e,this.document),e.isCollapsed){const i=this._breakAttributes(e.start,t);return new Vi(i,i)}const o=this._breakAttributes(n,t),r=o.parent.childCount,s=this._breakAttributes(i,t);return o.offset+=o.parent.childCount-r,new Vi(s,o)}_breakAttributes(e,t=!1){const i=e.offset,n=e.parent;if(e.parent.is("emptyElement"))throw new p.a("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new p.a("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new p.a("view-writer-cannot-break-raw-element",this.document);if(!t&&n.is("$text")&&xn(n.parent))return e.clone();if(xn(n))return e.clone();if(n.is("$text"))return this._breakAttributes(_n(e),t);if(i==n.childCount){var o=new Li(n.parent,n.index+1);return this._breakAttributes(o,t)}if(0===i){o=new Li(n.parent,n.index);return this._breakAttributes(o,t)}{const r=n.index+1,s=n._clone();return n.parent._insertChild(r,s),this._addToClonedElementsGroup(s),e=n.childCount-i,e=n._removeChildren(i,e),s._appendChild(e),e=new Li(n.parent,r),this._breakAttributes(e,t)}}_addToClonedElementsGroup(t){if(t.root.is("rootElement")){if(t.is("element"))for(const e of t.getChildren())this._addToClonedElementsGroup(e);var i=t.id;if(i){let e=this._cloneGroups.get(i);e||(e=new Set,this._cloneGroups.set(i,e)),e.add(t),t._clonesGroup=e}}}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const t of e.getChildren())this._removeFromClonedElementsGroup(t);const t=e.id;if(t){const i=this._cloneGroups.get(t);i&&i.delete(e)}}}function wn(e){let t=e.parent;for(;!xn(t);){if(!t)return;t=t.parent}return t}function kn(e){const t=e.nodeBefore;if(t&&t.is("$text"))return new Li(t,t.data.length);const i=e.nodeAfter;return i&&i.is("$text")?new Li(i,0):e}function _n(e){if(e.offset==e.parent.data.length)return new Li(e.parent.parent,e.parent.index+1);if(0===e.offset)return new Li(e.parent.parent,e.parent.index);var t=e.parent.data.slice(e.offset);return e.parent._data=e.parent.data.slice(0,e.offset),e.parent.parent._insertChild(e.parent.index+1,new Zt(e.root.document,t)),new Li(e.parent.parent,e.parent.index+1)}function vn(e,t){var i=e.data.length;return e._data+=t.data,t._remove(),new Li(e,i)}const yn=[Zt,Qi,Mi,Xi,mn,un];function xn(e){return e&&(e.is("containerElement")||e.is("documentFragment"))}function An(e,t){var i=wn(e.start),e=wn(e.end);if(!i||!e||i!==e)throw new p.a("view-writer-invalid-range-container",t)}function Cn(e,t){return null===e.id&&null===t.id}function Tn(e){return"[object Text]"==Object.prototype.toString.call(e)}const En=e=>e.createTextNode(" "),In=e=>{const t=e.createElement("span");return t.dataset.ckeFiller=!0,t.innerHTML=" ",t},Sn=e=>{const t=e.createElement("br");return t.dataset.ckeFiller=!0,t},Pn="⁠".repeat(7);function Mn(e){return Tn(e)&&e.data.substr(0,7)===Pn}function Nn(e){return 7==e.data.length&&Mn(e)}function Rn(e){return Mn(e)?e.data.slice(7):e.data}function On(e,t){if(t.keyCode==rn.arrowleft){const e=t.domTarget.ownerDocument.defaultView.getSelection();if(1==e.rangeCount&&e.getRangeAt(0).collapsed){const t=e.getRangeAt(0).startContainer,i=e.getRangeAt(0).startOffset;Mn(t)&&i<=7&&e.collapse(t,0)}}}function zn(e,t,i,n=!1){i=i||function(e,t){return e===t};var o,r,s=(o=e=Array.isArray(e)?e:Array.prototype.slice.call(e),r=t=Array.isArray(t)?t:Array.prototype.slice.call(t),-1===(i=Dn(o,r,e=i))?{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1}:(e=Dn(Ln(o,i),Ln(r,i),e),{firstIndex:i,lastIndexOld:o.length-e,lastIndexNew:r.length-e}));return n?function(e){var{firstIndex:t,lastIndexOld:i,lastIndexNew:n}=s;if(-1===t)return Array(e).fill("equal");let o=[];return 0<t&&(o=o.concat(Array(t).fill("equal"))),0<n-t&&(o=o.concat(Array(n-t).fill("insert"))),0<i-t&&(o=o.concat(Array(i-t).fill("delete"))),n<e&&(o=o.concat(Array(e-n).fill("equal"))),o}(t.length):function(e){const t=[],{firstIndex:i,lastIndexOld:n,lastIndexNew:o}=s;return 0<o-i&&t.push({index:i,type:"insert",values:e.slice(i,o)}),0<n-i&&t.push({index:i+(o-i),type:"delete",howMany:n-i}),t}(t)}function Dn(t,i,n){for(let e=0;e<Math.max(t.length,i.length);e++)if(void 0===t[e]||void 0===i[e]||!n(t[e],i[e]))return e;return-1}function Ln(e,t){return e.slice(t).reverse()}function Vn(s,a,l){l=l||function(e,t){return e===t};var e=s.length,t=a.length;if(200<e||200<t||300<e+t)return Vn.fastDiff(s,a,l,!0);let c,d;if(t<e){const l=s;s=a,a=l,c="delete",d="insert"}else c="insert",d="delete";const h=s.length,u=a.length,i=u-h,g={},m={};function n(e){var t=(void 0!==m[e-1]?m[e-1]:-1)+1,i=void 0!==m[e+1]?m[e+1]:-1,n=i<t?-1:1;g[e+n]&&(g[e]=g[e+n].slice(0)),g[e]||(g[e]=[]),g[e].push(i<t?c:d);let o=Math.max(t,i),r=o-e;for(;r<h&&o<u&&l(s[r],a[o]);)r++,o++,g[e].push("equal");return o}let o,r=0;do{for(o=-r;o<i;o++)m[o]=n(o);for(o=i+r;o>i;o--)m[o]=n(o)}while(m[i]=n(i),r++,m[i]!==u);return g[i].slice(1)}function jn(e,t,i){e.insertBefore(i,e.childNodes[t]||null)}function Bn(e){const t=e.parentNode;t&&t.removeChild(e)}function Fn(e){if(e){if(e.defaultView)return e instanceof e.defaultView.Document;if(e.ownerDocument&&e.ownerDocument.defaultView)return e instanceof e.ownerDocument.defaultView.Node}return!1}Vn.fastDiff=zn;class Hn{constructor(e,t){this.domDocuments=new Set,this.domConverter=e,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this.selection=t,this.isFocused=!1,this._inlineFiller=null,this._fakeSelectionContainer=null}markToSync(e,t){if("text"===e)this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else if(this.domConverter.mapViewToDom(t))if("attributes"===e)this.markedAttributes.add(t);else{if("children"!==e)throw new p.a("view-renderer-unknown-type",this);this.markedChildren.add(t)}}render(){let e;for(const e of this.markedChildren)this._updateChildrenMappings(e);this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent));for(const e of this.markedAttributes)this._updateAttrs(e);for(const n of this.markedChildren)this._updateChildren(n,{inlineFillerPosition:e});for(const o of this.markedTexts)!this.markedChildren.has(o.parent)&&this.domConverter.mapViewToDom(o.parent)&&this._updateText(o,{inlineFillerPosition:e});var t,i;e?(i=(t=this.domConverter.viewPositionToDom(e)).parent.ownerDocument,Mn(t.parent)?this._inlineFiller=t.parent:this._inlineFiller=Un(i,t.parent,t.offset)):this._inlineFiller=null,this._updateFocus(),this._updateSelection(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const t=this.domConverter.mapViewToDom(e);if(t){const i=Array.from(this.domConverter.mapViewToDom(e).childNodes),n=Array.from(this.domConverter.viewChildrenToDom(e,t.ownerDocument,{withChildren:!1})),o=this._diffNodeLists(i,n),r=this._findReplaceActions(o,i,n);if(-1!==r.indexOf("replace")){const t={equal:0,insert:0,delete:0};for(const s of r)if("replace"===s){const a=t.equal+t.insert,l=t.equal+t.delete,c=e.getChild(a);!c||c.is("uiElement")||c.is("rawElement")||this._updateElementMappings(c,i[l]),Bn(n[a]),t.equal++}else t[s]++}}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?Li._createBefore(this.selection.getFirstPosition().parent):e}_isSelectionInInlineFiller(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var e=this.selection.getFirstPosition();return!!((e=this.domConverter.viewPositionToDom(e))&&Tn(e.parent)&&Mn(e.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!Mn(e))throw new p.a("view-renderer-filler-was-lost",this);Nn(e)?e.parentNode.removeChild(e):e.data=e.data.substr(7),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=e.parent,i=e.offset;if(!this.domConverter.mapViewToDom(t.root))return!1;if(!t.is("element"))return!1;if(!function(e){if("false"!=e.getAttribute("contenteditable")){const t=e.findAncestor(e=>e.hasAttribute("contenteditable"));return!t||"true"==t.getAttribute("contenteditable")}}(t))return!1;if(i===t.getFillerOffset())return!1;var n=e.nodeBefore,o=e.nodeAfter;return!(n instanceof Zt||o instanceof Zt)}_updateText(e,t){const i=this.domConverter.findCorrespondingDomText(e),n=this.domConverter.viewToDom(e,i.ownerDocument),o=i.data;let r=n.data;if((t=t.inlineFillerPosition)&&t.parent==e.parent&&t.offset==e.index&&(r=Pn+r),o!=r){const e=zn(o,r);for(const s of e)"insert"===s.type?i.insertData(s.index,s.values.join("")):i.deleteData(s.index,s.howMany)}}_updateAttrs(e){const t=this.domConverter.mapViewToDom(e);if(t){var i=Array.from(t.attributes).map(e=>e.name);for(const n of e.getAttributeKeys())t.setAttribute(n,e.getAttribute(n));for(const o of i)e.hasAttribute(o)||t.removeAttribute(o)}}_updateChildren(t,i){var n=this.domConverter.mapViewToDom(t);if(n){var i=i.inlineFillerPosition,o=this.domConverter.mapViewToDom(t).childNodes,r=Array.from(this.domConverter.viewChildrenToDom(t,n.ownerDocument,{bind:!0,inlineFillerPosition:i}));i&&i.parent===t&&Un(n.ownerDocument,r,i.offset),i=this._diffNodeLists(o,r);let e=0;const s=new Set;for(const t of i)"delete"===t?(s.add(o[e]),Bn(o[e])):"equal"===t&&e++;e=0;for(const t of i)"insert"===t?(jn(n,e,r[e]),e++):"equal"===t&&(this._markDescendantTextToSync(this.domConverter.domToView(r[e])),e++);for(const t of s)t.parentNode||this.domConverter.unbindDomElement(t)}}_diffNodeLists(e,t){return Vn(e=function(e,t){const i=Array.from(e);return 0!=i.length&&t&&i[i.length-1]==t&&i.pop(),i}(e,this._fakeSelectionContainer),t,function(e,t,i){return t===i||(Tn(t)&&Tn(i)?t.data===i.data:!(!e.isBlockFiller(t)||!e.isBlockFiller(i)))}.bind(null,this.domConverter))}_findReplaceActions(e,t,i){if(-1===e.indexOf("insert")||-1===e.indexOf("delete"))return e;let n=[],o=[],r=[];const s={equal:0,insert:0,delete:0};for(const a of e)"insert"===a?r.push(i[s.equal+s.insert]):"delete"===a?o.push(t[s.equal+s.delete]):(n=n.concat(Vn(o,r,Wn).map(e=>"equal"===e?"replace":e)),n.push("equal"),o=[],r=[]),s[a]++;return n.concat(Vn(o,r,Wn).map(e=>"equal"===e?"replace":e))}_markDescendantTextToSync(e){if(e)if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const t of e.getChildren())this._markDescendantTextToSync(t)}_updateSelection(){if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();var e=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&e&&(this.selection.isFake?this._updateFakeSelection(e):(this._removeFakeSelection(),this._updateDomSelection(e)))}_updateFakeSelection(e){const t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=function(){const e=t.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent=" ",e}());const i=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(i,this.selection),this._fakeSelectionNeedsUpdate(e)){i.parentElement&&i.parentElement==e||e.appendChild(i),i.textContent=this.selection.fakeSelectionLabel||" ";const n=t.getSelection(),o=t.createRange();n.removeAllRanges(),o.selectNodeContents(i),n.addRange(o)}}_updateDomSelection(e){const t=e.ownerDocument.defaultView.getSelection();var i,n;this._domSelectionNeedsUpdate(t)&&(i=this.domConverter.viewPositionToDom(this.selection.anchor),n=this.domConverter.viewPositionToDom(this.selection.focus),t.collapse(i.parent,i.offset),t.extend(n.parent,n.offset),tn.isGecko&&(e=n,i=t,(n=e.parent).nodeType!=Node.ELEMENT_NODE||e.offset!=n.childNodes.length-1||(e=n.childNodes[e.offset])&&"BR"==e.tagName&&i.addRange(i.getRangeAt(0))))}_domSelectionNeedsUpdate(e){return!this.domConverter.isDomSelectionCorrect(e)||!((e=e&&this.domConverter.domSelectionToView(e))&&this.selection.isEqual(e)||!this.selection.isCollapsed&&this.selection.isSimilar(e))}_fakeSelectionNeedsUpdate(e){const t=this._fakeSelectionContainer,i=e.ownerDocument.getSelection();return!t||t.parentElement!==e||i.anchorNode!==t&&!t.contains(i.anchorNode)||t.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const i of this.domDocuments){var e,t;i.getSelection().rangeCount&&(e=i.activeElement,t=this.domConverter.mapDomToView(e),e&&t&&i.getSelection().removeAllRanges())}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){var e;!this.isFocused||(e=this.selection.editableElement)&&this.domConverter.focus(e)}}function Un(e,t,i){const n=t instanceof Array?t:t.childNodes,o=n[i];if(Tn(o))return o.data=Pn+o.data,o;{const o=e.createTextNode(Pn);return Array.isArray(t)?n.splice(i,0,o):jn(t,i,o),o}}function Wn(e,t){return Fn(e)&&Fn(t)&&!Tn(e)&&!Tn(t)&&e.nodeType!==Node.COMMENT_NODE&&t.nodeType!==Node.COMMENT_NODE&&e.tagName.toLowerCase()===t.tagName.toLowerCase()}Me(Hn,Ce);var qn={window:window,document:document};function $n(e){let t=0;for(;e.previousSibling;)e=e.previousSibling,t++;return t}function Yn(e){const t=[];for(;e&&e.nodeType!=Node.DOCUMENT_NODE;)t.unshift(e),e=e.parentNode;return t}const Gn=Sn(document),Kn=En(document),Qn=In(document);class Jn{constructor(e,t={}){this.document=e,this.blockFillerMode=t.blockFillerMode||"br",this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new ti,this._encounteredRawContentDomNodes=new WeakSet}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new Fi(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){const t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const t of e.childNodes)this.unbindDomElement(t)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}viewToDom(t,i,n={}){if(t.is("$text")){const n=this._processDataFromViewText(t);return i.createTextNode(n)}{if(this.mapViewToDom(t))return this.mapViewToDom(t);let e;if(t.is("documentFragment"))e=i.createDocumentFragment(),n.bind&&this.bindDocumentFragments(e,t);else{if(t.is("uiElement"))return e="$comment"===t.name?i.createComment(t.getCustomProperty("$rawContent")):t.render(i),n.bind&&this.bindElements(e,t),e;e=t.hasAttribute("xmlns")?i.createElementNS(t.getAttribute("xmlns"),t.name):i.createElement(t.name),t.is("rawElement")&&t.render(e),n.bind&&this.bindElements(e,t);for(const i of t.getAttributeKeys())e.setAttribute(i,t.getAttribute(i))}if(!1!==n.withChildren)for(const o of this.viewChildrenToDom(t,i,n))e.appendChild(o);return e}}*viewChildrenToDom(e,t,i={}){var n=e.getFillerOffset&&e.getFillerOffset();let o=0;for(const r of e.getChildren())n===o&&(yield this._getBlockFiller(t)),yield this.viewToDom(r,t,i),o++;n===o&&(yield this._getBlockFiller(t))}viewRangeToDom(e){const t=this.viewPositionToDom(e.start),i=this.viewPositionToDom(e.end),n=document.createRange();return n.setStart(t.parent,t.offset),n.setEnd(i.parent,i.offset),n}viewPositionToDom(n){const o=n.parent;if(o.is("$text")){var t=this.findCorrespondingDomText(o);if(!t)return null;let e=n.offset;return Mn(t)&&(e+=7),{parent:t,offset:e}}{let e,t,i;if(0===n.offset){if(e=this.mapViewToDom(o),!e)return null;i=e.childNodes[0]}else{const o=n.nodeBefore;if(t=o.is("$text")?this.findCorrespondingDomText(o):this.mapViewToDom(n.nodeBefore),!t)return null;e=t.parentNode,i=t.nextSibling}return Tn(i)&&Mn(i)?{parent:i,offset:7}:{parent:e,offset:t?$n(t)+1:0}}}domToView(e,i={}){if(this.isBlockFiller(e))return null;var t=this.getHostViewElement(e);if(t)return t;if(this.isComment(e)&&i.skipComments)return null;if(Tn(e)){if(Nn(e))return null;{const i=this._processDataFromDomText(e);return""===i?null:new Zt(this.document,i)}}{if(this.mapDomToView(e))return this.mapDomToView(e);let t;if(this.isDocumentFragment(e))t=new fn(this.document),i.bind&&this.bindDocumentFragments(e,t);else{t=this._createViewElement(e,i),i.bind&&this.bindElements(e,t);var n=e.attributes;if(n)for(let e=n.length-1;0<=e;e--)t._setAttribute(n[e].name,n[e].value);if(this._isViewElementWithRawContent(t,i)||this.isComment(e)){const i=this.isComment(e)?e.data:e.innerHTML;return t._setCustomProperty("$rawContent",i),this._encounteredRawContentDomNodes.add(e),t}}if(!1!==i.withChildren)for(const o of this.domChildrenToView(e,i))t._appendChild(o);return t}}*domChildrenToView(t,i={}){for(let e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];null!==(n=this.domToView(n,i))&&(yield n)}}domSelectionToView(t){if(1===t.rangeCount){let e=t.getRangeAt(0).startContainer;Tn(e)&&(e=e.parentNode);const i=this.fakeSelectionToView(e);if(i)return i}const e=this.isDomSelectionBackward(t),i=[];for(let e=0;e<t.rangeCount;e++){var n=t.getRangeAt(e);(n=this.domRangeToView(n))&&i.push(n)}return new Fi(i,{backward:e})}domRangeToView(e){var t=this.domPositionToView(e.startContainer,e.startOffset),e=this.domPositionToView(e.endContainer,e.endOffset);return t&&e?new Vi(t,e):null}domPositionToView(t,i){if(this.isBlockFiller(t))return this.domPositionToView(t.parentNode,$n(t));const n=this.mapDomToView(t);if(n&&(n.is("uiElement")||n.is("rawElement")))return Li._createBefore(n);if(Tn(t)){if(Nn(t))return this.domPositionToView(t.parentNode,$n(t));const n=this.findCorrespondingViewText(t);let e=i;return n?(Mn(t)&&(e-=7,e=e<0?0:e),new Li(n,e)):null}if(0===i){const i=this.mapDomToView(t);if(i)return new Li(i,0)}else{const n=t.childNodes[i-1],e=Tn(n)?this.findCorrespondingViewText(n):this.mapDomToView(n);if(e&&e.parent)return new Li(e.parent,e.index+1)}return null}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(Nn(e))return null;const t=this.getHostViewElement(e);if(t)return t;var i=e.previousSibling;if(i){if(!this.isElement(i))return null;const e=this.mapDomToView(i);if(e)return e.nextSibling instanceof Zt?e.nextSibling:null}else{const t=this.mapDomToView(e.parentNode);if(t){const e=t.getChild(0);return e instanceof Zt?e:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){var t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){const{scrollX:e,scrollY:i}=qn.window,n=[];Zn(t,e=>{var{scrollLeft:t,scrollTop:e}=e;n.push([t,e])}),t.focus(),Zn(t,e=>{var[t,i]=n.shift();e.scrollLeft=t,e.scrollTop=i}),qn.window.scrollTo(e,i)}}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isComment(e){return e&&e.nodeType==Node.COMMENT_NODE}isBlockFiller(e){return"br"==this.blockFillerMode?e.isEqualNode(Gn):!("BR"!==e.tagName||!Xn(e,this.blockElements)||1!==e.parentNode.childNodes.length)||e.isEqualNode(Qn)||(t=e,e=this.blockElements,t.isEqualNode(Kn)&&Xn(t,e)&&1===t.parentNode.childNodes.length);var t}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const t=document.createRange();return t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset),e=t.collapsed,t.detach(),e}getHostViewElement(e){const t=Yn(e);for(t.pop();t.length;){const e=t.pop(),i=this._domToViewMapping.get(e);if(i&&(i.is("uiElement")||i.is("rawElement")))return i}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}_getBlockFiller(e){switch(this.blockFillerMode){case"nbsp":return En(e);case"markedNbsp":return In(e);case"br":return Sn(e)}}_isDomSelectionPositionCorrect(e,t){if(Tn(e)&&Mn(e)&&t<7)return!1;if(this.isElement(e)&&Mn(e.childNodes[t]))return!1;const i=this.mapDomToView(e);return!i||!i.is("uiElement")&&!i.is("rawElement")}_processDataFromViewText(e){let t=e.data;if(e.getAncestors().some(e=>this.preElements.includes(e.name)))return t;if(" "==t.charAt(0)){const i=this._getTouchingInlineViewNode(e,!1);!(i&&i.is("$textProxy")&&this._nodeEndsWithSpace(i))&&i||(t=" "+t.substr(1))}if(" "==t.charAt(t.length-1)){const n=this._getTouchingInlineViewNode(e,!0),o=n&&n.is("$textProxy")&&" "==n.data.charAt(0);" "!=t.charAt(t.length-2)&&n&&!o||(t=t.substr(0,t.length-1)+" ")}return t.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(e){if(e.getAncestors().some(e=>this.preElements.includes(e.name)))return!1;const t=this._processDataFromViewText(e);return" "==t.charAt(t.length-1)}_processDataFromDomText(e){let t=e.data;if(i=this.preElements,Yn(e).some(e=>e.tagName&&i.includes(e.tagName.toLowerCase())))return Rn(e);var i;t=t.replace(/[ \n\t\r]{1,}/g," ");const n=this._getTouchingInlineDomNode(e,!1),o=this._getTouchingInlineDomNode(e,!0),r=this._checkShouldLeftTrimDomText(e,n),s=this._checkShouldRightTrimDomText(e,o);r&&(t=t.replace(/^ /,"")),s&&(t=t.replace(/ $/,"")),t=Rn(new Text(t)),t=t.replace(/ \u00A0/g,"  ");var a=o&&this.isElement(o)&&"BR"!=o.tagName,e=o&&Tn(o)&&" "==o.data.charAt(0);return(/( |\u00A0)\u00A0$/.test(t)||!o||a||e)&&(t=t.replace(/\u00A0$/," ")),(r||n&&this.isElement(n)&&"BR"!=n.tagName)&&(t=t.replace(/^\u00A0/," ")),t}_checkShouldLeftTrimDomText(e,t){return!t||(this.isElement(t)?"BR"===t.tagName:!this._encounteredRawContentDomNodes.has(e.previousSibling)&&/[^\S\u00A0]/.test(t.data.charAt(t.data.length-1)))}_checkShouldRightTrimDomText(e,t){return!t&&!Mn(e)}_getTouchingInlineViewNode(e,t){t=new Di({startPosition:t?Li._createAfter(e):Li._createBefore(e),direction:t?"forward":"backward"});for(const e of t){if(e.item.is("element")&&this.inlineObjectElements.includes(e.item.name))return e.item;if(e.item.is("containerElement"))return null;if(e.item.is("element","br"))return null;if(e.item.is("$textProxy"))return e.item}return null}_getTouchingInlineDomNode(e,t){if(!e.parentNode)return null;var i=t?"firstChild":"lastChild",n=t?"nextSibling":"previousSibling";let o=!0;do{if(!o&&e[i]?e=e[i]:o=e[n]?(e=e[n],!1):(e=e.parentNode,!0),!e||this._isBlockElement(e))return null}while(!Tn(e)&&"BR"!=e.tagName&&!this._isInlineObjectElement(e));return e}_isBlockElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isInlineObjectElement(e){return this.isElement(e)&&this.inlineObjectElements.includes(e.tagName.toLowerCase())}_createViewElement(e,t){return this.isComment(e)?new un(this.document,"$comment"):(e=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase(),new Si(this.document,e))}_isViewElementWithRawContent(e,t){return!1!==t.withChildren&&this._rawContentElementMatcher.match(e)}}function Zn(e,t){for(;e&&e!=qn.document;)t(e),e=e.parentNode}function Xn(e,t){const i=e.parentNode;return i&&i.tagName&&t.includes(i.tagName.toLowerCase())}function eo(e){return"[object Window]"==(e=Object.prototype.toString.apply(e))||"[object global]"==e}var to=we({},s,{listenTo(e,...t){if(Fn(e)||eo(e)){const i=this._getProxyEmitter(e)||new io(e);i.attach(...t),e=i}s.listenTo.call(this,e,...t)},stopListening(e,t,i){if(Fn(e)||eo(e)){const t=this._getProxyEmitter(e);if(!t)return;e=t}s.stopListening.call(this,e,t,i),e instanceof io&&e.detach(t)},_getProxyEmitter(e){return e=no(e),this[d]&&this[d][e]?this[d][e].emitter:null}});class io{constructor(e){h(this,no(e)),this._domNode=e}}function no(e){return e["data-ck-expando"]||(e["data-ck-expando"]=c())}we(io.prototype,s,{attach(e,t,i={}){var n;this._domListeners&&this._domListeners[e]||(n={capture:!!i.useCapture,passive:!!i.usePassive},i=this._createDomListener(e,n),this._domNode.addEventListener(e,i,n),this._domListeners||(this._domListeners={}),this._domListeners[e]=i)},detach(e){var t;!this._domListeners[e]||(t=this._events[e])&&t.callbacks.length||this._domListeners[e].removeListener()},_createDomListener(t,e){const i=e=>{this.fire(t,e)};return i.removeListener=()=>{this._domNode.removeEventListener(t,i,e),delete this._domListeners[t]},i}});class oo{constructor(e){this.view=e,this.document=e.document,this.isEnabled=!1}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return!(!(e=e&&3===e.nodeType?e.parentNode:e)||1!==e.nodeType)&&e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}function ro(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new et;++t<i;)this.add(e[t])}function so(e,t,r,s,a,l){var i=1&r,n=e.length;if(n!=(c=t.length)&&!(i&&n<c))return!1;var o=l.get(e),c=l.get(t);if(o&&c)return o==t&&c==e;var d=-1,h=!0,u=2&r?new ho:void 0;for(l.set(e,t),l.set(t,e);++d<n;){var g,m=e[d],p=t[d];if(void 0!==(g=s?i?s(p,m,d,t,e,l):s(m,p,d,e,t,l):g)){if(g)continue;h=!1;break}if(u){if(!function(e){for(var t,i,n=-1,o=null==e?0:e.length;++n<o;)if(t=e[n],i=n,!u.has(i)&&(m===t||a(m,t,r,s,l))&&u.push(i))return 1}(t)){h=!1;break}}else if(m!==p&&!a(m,p,r,s,l)){h=!1;break}}return l.delete(e),l.delete(t),h}function ao(e){var i=-1,n=Array(e.size);return e.forEach(function(e,t){n[++i]=[t,e]}),n}function lo(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}function co(e,t,i,n,o){return e===t||(null==e||null==t||!M(e)&&!M(t)?e!=e&&t!=t:function(e,t,i,n,o,r){var s=ae(e),a=ae(t),l=s?"[object Array]":yt(e),c=a?"[object Array]":yt(t),d="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),a="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c);if((c=l==c)&&Object(le.a)(e)){if(!Object(le.a)(t))return!1;d=!(s=!0)}return c&&!d?(r=r||new at,(s||ge(e)?so:function(e,t,i,n,o,r){switch(l){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new At(e),new At(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return A(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=ao;case"[object Set]":if(s=s||lo,e.size!=t.size&&!(1&i))return!1;var a=r.get(e);return a?a==t:(i|=2,r.set(e,t),s=so(s(e),s(t),i,n,o,r),r.delete(e),s);case"[object Symbol]":if(uo)return uo.call(e)==uo.call(t)}return!1})(e,t,i,n,o,r)):1&i||(d=d&&mo.call(e,"__wrapped__"),a=a&&mo.call(t,"__wrapped__"),!d&&!a)?!!c&&function(e,t,i,n,o,r){var s=1&i,a=ft(e),l=a.length;if(l!=ft(t).length&&!s)return!1;for(var c=l;c--;){var d=a[c];if(!(s?d in t:go.call(t,d)))return!1}var h=r.get(e),u=r.get(t);if(h&&u)return h==t&&u==e;var g=!0;r.set(e,t),r.set(t,e);for(var m=s;++c<l;){var p,f=e[d=a[c]],b=t[d];if(!(void 0===(p=n?s?n(b,f,d,t,e,r):n(f,b,d,e,t,r):p)?f===b||o(f,b,i,n,r):p)){g=!1;break}m=m||"constructor"==d}return!g||m||(h=e.constructor)!=(u=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof h&&h instanceof h&&"function"==typeof u&&u instanceof u)&&(g=!1),r.delete(e),r.delete(t),g}(e,t,i,n,o,r=r||new at):o(d?e.value():e,a?t.value():t,i,n,r=r||new at)}(e,t,i,n,co,o))}Me(oo,to),ro.prototype.add=ro.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ro.prototype.has=function(e){return this.__data__.has(e)};var ho=ro,uo=($=D?D.prototype:void 0)?$.valueOf:void 0,go=Object.prototype.hasOwnProperty,mo=Object.prototype.hasOwnProperty;class po extends oo{constructor(e){super(e),this._config={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},this.domConverter=e.domConverter,this.renderer=e._renderer,this._domElements=[],this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.push(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(t){if(0!==t.length){const c=this.domConverter,d=new Map,h=new Set;for(const g of t)if("childList"===g.type){const m=c.mapDomToView(g.target);if(m&&(m.is("uiElement")||m.is("rawElement")))continue;m&&!this._isBogusBrMutation(g)&&h.add(m)}for(const p of t){const m=c.mapDomToView(p.target);if((!m||!m.is("uiElement")&&!m.is("rawElement"))&&"characterData"===p.type){const m=c.findCorrespondingViewText(p.target);m&&!h.has(m.parent)?d.set(m,{type:"text",oldText:m.data,newText:Rn(p.target),node:m}):!m&&Mn(p.target)&&h.add(c.mapDomToView(p.target.parentNode))}}const u=[];for(const m of d.values())this.renderer.markToSync("text",m.node),u.push(m);for(const m of h){var i=c.mapViewToDom(m),n=Array.from(m.getChildren()),o=Array.from(c.domChildrenToView(i,{withChildren:!1})),r=n,s=o;(void 0===(a=(i="function"==typeof(i=l)?i:void 0)?i(r,s):void 0)?co(r,s,void 0,i):a)||(this.renderer.markToSync("children",m),u.push({type:"children",oldChildren:n,newChildren:o,node:m}))}var r,s,a,t=t[0].target.ownerDocument.getSelection();let e=null;if(t&&t.anchorNode){const m=c.domPositionToView(t.anchorNode,t.anchorOffset),f=c.domPositionToView(t.focusNode,t.focusOffset);m&&f&&(e=new Fi(m),e.setFocus(f))}function l(e,t){if(!Array.isArray(e))return e===t||!(!e.is("$text")||!t.is("$text"))&&e.data===t.data}u.length&&(this.document.fire("mutations",u,e),this.view.forceRender())}}_isBogusBrMutation(e){let t=null;return null===e.nextSibling&&0===e.removedNodes.length&&1==e.addedNodes.length&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}}class fo{constructor(e,t,i){this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,we(this,i)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class bo extends oo{constructor(e){super(e),this.useCapture=!1}observe(t){("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach(e=>{this.listenTo(t,e,(e,t)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(t.target)&&this.onDomEvent(t)},{useCapture:this.useCapture})})}fire(e,t,i){this.isEnabled&&this.document.fire(e,new fo(this.view,t,i))}}class wo extends bo{constructor(e){super(e),this.domEventType=["keydown","keyup"]}onDomEvent(e){this.fire(e.type,e,{keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return an(this)}})}}function ko(){return z.a.Date.now()}function _o(e){if("number"==typeof e)return e;if(oi(e))return NaN;if("string"!=typeof(e=_(e)?_(i="function"==typeof e.valueOf?e.valueOf():e)?i+"":i:e))return 0===e?e:+e;var t;e=(t=e)&&t.slice(0,function(e){for(var t=e.length;t--&&yo.test(e.charAt(t)););return t}(t)+1).replace(xo,"");var i=Co.test(e);return i||To.test(e)?Eo(e.slice(2),i?2:8):Ao.test(e)?NaN:+e}function vo(n,i,e){var o,r,s,a,l,c,d=0,h=!1,u=!1,t=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function g(e){var t=o,i=r;return o=r=void 0,d=e,a=n.apply(i,t)}function m(e){var t=e-c;return void 0===c||i<=t||t<0||u&&s<=e-d}function p(){var e,t=ko();if(m(t))return f(t);l=setTimeout(p,(e=i-(t-c),u?So(e,s-(t-d)):e))}function f(e){return l=void 0,t&&o?g(e):(o=r=void 0,a)}function b(){var e=ko(),t=m(e);if(o=arguments,r=this,c=e,t){if(void 0===l)return d=t=c,l=setTimeout(p,i),h?g(t):a;if(u)return clearTimeout(l),l=setTimeout(p,i),g(c)}return void 0===l&&(l=setTimeout(p,i)),a}return i=_o(i)||0,_(e)&&(h=!!e.leading,s=(u="maxWait"in e)?Io(_o(e.maxWait)||0,i):s,t="trailing"in e?!!e.trailing:t),b.cancel=function(){void 0!==l&&clearTimeout(l),o=c=r=l=void(d=0)},b.flush=function(){return void 0===l?a:f(ko())},b}var yo=/\s/,xo=/^\s+/,Ao=/^[-+]0x[0-9a-f]+$/i,Co=/^0b[01]+$/i,To=/^0o[0-7]+$/i,Eo=parseInt,Io=Math.max,So=Math.min;class Po extends oo{constructor(e){super(e),this._fireSelectionChangeDoneDebounced=vo(e=>this.document.fire("selectionChangeDone",e),200)}observe(){const i=this.document;i.on("arrowKey",(e,t)=>{i.selection.isFake&&this.isEnabled&&t.preventDefault()},{context:"$capture"}),i.on("arrowKey",(e,t)=>{i.selection.isFake&&this.isEnabled&&this._handleSelectionMove(t.keyCode)},{priority:"lowest"})}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const t=this.document.selection,i=new Fi(t.getRanges(),{backward:t.isBackward,fake:!1});e!=rn.arrowleft&&e!=rn.arrowup||i.setTo(i.getFirstPosition()),e!=rn.arrowright&&e!=rn.arrowdown||i.setTo(i.getLastPosition()),e={oldSelection:t,newSelection:i,domSelection:null},this.document.fire("selectionChange",e),this._fireSelectionChangeDoneDebounced(e)}}class Mo extends oo{constructor(e){super(e),this.mutationObserver=e.getObserver(po),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=vo(e=>this.document.fire("selectionChangeDone",e),200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._loopbackCounter=0}observe(e){const i=e.ownerDocument;this._documents.has(i)||(this.listenTo(i,"selectionchange",(e,t)=>{this._handleSelectionChange(t,i)}),this._documents.add(i))}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionChange(e,t){if(this.isEnabled){var i=t.defaultView.getSelection();if(!this.checkShouldIgnoreEventFromTarget(i.anchorNode))if(this.mutationObserver.flush(),0!=(t=this.domConverter.domSelectionToView(i)).rangeCount){if(this.view.hasDomSelection=!0,!(this.selection.isEqual(t)&&this.domConverter.isDomSelectionCorrect(i)||60<++this._loopbackCounter))if(this.selection.isSimilar(t))this.view.forceRender();else{const e={oldSelection:this.selection,newSelection:t,domSelection:i};this.document.fire("selectionChange",e),this._fireSelectionChangeDoneDebounced(e)}}else this.view.hasDomSelection=!1}}_clearInfiniteLoop(){this._loopbackCounter=0}}class No extends bo{constructor(n){super(n),this.domEventType=["focus","blur"],this.useCapture=!0;const o=this.document;o.on("focus",()=>{o.isFocused=!0,this._renderTimeoutId=setTimeout(()=>n.change(()=>{}),50)}),o.on("blur",(e,t)=>{var i=o.selection.editableElement;null!==i&&i!==t.target||(o.isFocused=!1,n.change(()=>{}))})}onDomEvent(e){this.fire(e.type,e)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}class Ro extends bo{constructor(e){super(e),this.domEventType=["compositionstart","compositionupdate","compositionend"];const t=this.document;t.on("compositionstart",()=>{t.isComposing=!0}),t.on("compositionend",()=>{t.isComposing=!1})}onDomEvent(e){this.fire(e.type,e)}}class Oo extends bo{constructor(e){super(e),this.domEventType=["beforeinput"]}onDomEvent(e){this.fire(e.type,e)}}class zo{constructor(){this._replacedElements=[]}replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}restore(){this._replacedElements.forEach(({element:e,newElement:t})=>{e.style.display="",t&&t.remove()}),this._replacedElements=[]}}function Do(e){return"string"==typeof e||!ae(e)&&M(e)&&"[object String]"==w(e)}function Lo(e){return"[object Range]"==Object.prototype.toString.apply(e)}function Vo(e){return e=e.ownerDocument.defaultView.getComputedStyle(e),{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}const jo=["top","right","bottom","left","width","height"];class Bo{constructor(e){const t=Lo(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),Dt(e)||t)if(t){const t=Bo.getDomRangeRects(e);Fo(this,Bo.getBoundingRect(t))}else Fo(this,e.getBoundingClientRect());else if(eo(e)){const{innerWidth:t,innerHeight:i}=e;Fo(this,{top:0,right:t,bottom:i,left:0,width:t,height:i})}else Fo(this,e)}clone(){return new Bo(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){const t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left)};return t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0?null:new Bo(t)}getIntersectionArea(e){const t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const t=this._source;let i=this.clone();if(!Ho(t)){let e=t.parentNode||t.commonAncestorContainer;for(;e&&!Ho(e);){const t=new Bo(e),n=i.getIntersection(t);if(!n)return null;n.getArea()<i.getArea()&&(i=n),e=e.parentNode}}return i}isEqual(e){for(const t of jo)if(this[t]!==e[t])return!1;return!0}contains(e){const t=this.getIntersection(e);return!(!t||!t.isEqual(e))}excludeScrollbarsAndBorders(){const e=this._source;let t,i,n;var o;return eo(e)?(t=e.innerWidth-e.document.documentElement.clientWidth,i=e.innerHeight-e.document.documentElement.clientHeight,n=e.getComputedStyle(e.document.documentElement).direction):(o=Vo(this._source),t=e.offsetWidth-e.clientWidth-o.left-o.right,i=e.offsetHeight-e.clientHeight-o.top-o.bottom,n=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=o.left,this.top+=o.top,this.right-=o.right,this.bottom-=o.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top),this.width-=t,"ltr"===n?this.right-=t:this.left+=t,this.height-=i,this.bottom-=i,this}static getDomRangeRects(t){const i=[],e=Array.from(t.getClientRects());if(e.length)for(const t of e)i.push(new Bo(t));else{let e=t.startContainer;Tn(e)&&(e=e.parentNode);const n=new Bo(e.getBoundingClientRect());n.right=n.left,n.width=0,i.push(n)}return i}static getBoundingRect(e){const t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY};let i=0;for(const n of e)i++,t.left=Math.min(t.left,n.left),t.top=Math.min(t.top,n.top),t.right=Math.max(t.right,n.right),t.bottom=Math.max(t.bottom,n.bottom);return 0==i?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new Bo(t))}}function Fo(e,t){for(const i of jo)e[i]=t[i]}function Ho(e){return Dt(e)&&e===e.ownerDocument.body}class Uo{constructor(e,t){Uo._observerInstance||Uo._createObserver(),this._element=e,this._callback=t,Uo._addElementCallback(e,t),Uo._observerInstance.observe(e)}destroy(){Uo._deleteElementCallback(this._element,this._callback)}static _addElementCallback(e,t){Uo._elementCallbacks||(Uo._elementCallbacks=new Map);let i=Uo._elementCallbacks.get(e);i||(i=new Set,Uo._elementCallbacks.set(e,i)),i.add(t)}static _deleteElementCallback(e,t){const i=Uo._getElementCallbacks(e);i&&(i.delete(t),i.size||(Uo._elementCallbacks.delete(e),Uo._observerInstance.unobserve(e))),Uo._elementCallbacks&&!Uo._elementCallbacks.size&&(Uo._observerInstance=null,Uo._elementCallbacks=null)}static _getElementCallbacks(e){return Uo._elementCallbacks?Uo._elementCallbacks.get(e):null}static _createObserver(){let e;e="function"==typeof qn.window.ResizeObserver?qn.window.ResizeObserver:Wo,Uo._observerInstance=new e(e=>{for(const t of e){const e=Uo._getElementCallbacks(t.target);if(e)for(const i of e)i(t)}})}}Uo._observerInstance=null,Uo._elementCallbacks=null;class Wo{constructor(e){this._callback=e,this._elements=new Set,this._previousRects=new Map,this._periodicCheckTimeout=null}observe(e){this._elements.add(e),this._checkElementRectsAndExecuteCallback(),1===this._elements.size&&this._startPeriodicCheck()}unobserve(e){this._elements.delete(e),this._previousRects.delete(e),this._elements.size||this._stopPeriodicCheck()}_startPeriodicCheck(){const e=()=>{this._checkElementRectsAndExecuteCallback(),this._periodicCheckTimeout=setTimeout(e,100)};this.listenTo(qn.window,"resize",()=>{this._checkElementRectsAndExecuteCallback()}),this._periodicCheckTimeout=setTimeout(e,100)}_stopPeriodicCheck(){clearTimeout(this._periodicCheckTimeout),this.stopListening(),this._previousRects.clear()}_checkElementRectsAndExecuteCallback(){const e=[];for(const t of this._elements)this._hasRectChanged(t)&&e.push({target:t,contentRect:this._previousRects.get(t)});e.length&&this._callback(e)}_hasRectChanged(e){if(!e.ownerDocument.body.contains(e))return!1;const t=new Bo(e),i=this._previousRects.get(e),n=!i||!i.isEqual(t);return this._previousRects.set(e,t),n}}function qo(t){return e=>e+t}function $o(e){return(e=e.next()).done?null:e.value}Me(Wo,to);class Yo{constructor(){this.set("isFocused",!1),this.set("focusedElement",null),this._elements=new Set,this._nextEventLoopTimeout=null}add(e){if(this._elements.has(e))throw new p.a("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>this._focus(e),{useCapture:!0}),this.listenTo(e,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(e)}remove(e){e===this.focusedElement&&this._blur(e),this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e))}destroy(){this.stopListening()}_focus(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}Me(Yo,to),Me(Yo,Ce);class Go{constructor(){this._listener=Object.create(to)}listenTo(e){this._listener.listenTo(e,"keydown",(e,t)=>{this._listener.fire("_keydown:"+an(t),t)})}set(e,i,t={}){e=ln(e),t=t.priority,this._listener.listenTo(this._listener,"_keydown:"+e,(e,t)=>{i(t,()=>{t.preventDefault(),t.stopPropagation(),e.stop()}),e.return=!0},{priority:t})}press(e){return!!this._listener.fire("_keydown:"+an(e),e)}destroy(){this._listener.stopListening()}}class Ko extends oo{constructor(e){super(e),this.document.on("keydown",(e,t)=>{if(this.isEnabled&&((i=t.keyCode)==rn.arrowright||i==rn.arrowleft||i==rn.arrowup||i==rn.arrowdown)){const i=new Ui(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(i,t),i.stop.called&&e.stop()}var i})}observe(){}}function Qo({target:e,viewportOffset:t=0}){var i=ir(e);let n=i,o=null;for(;n;){Jo(nr(n==i?e:o),()=>or(e,n));var r=or(e,n);if(function(i,n,o){const r=n.clone().moveBy(0,o),s=n.clone().moveBy(0,-o),a=new Bo(i).excludeScrollbarsAndBorders();if(![s,r].every(e=>a.contains(e))){let{scrollX:e,scrollY:t}=i;Xo(s,a)?t-=a.top-n.top+o:Zo(r,a)&&(t+=n.bottom-a.bottom+o),er(n,a)?e-=a.left-n.left+o:tr(n,a)&&(e+=n.right-a.right+o),i.scrollTo(e,t)}}(n,r,t),n.parent!=n){if(o=n.frameElement,n=n.parent,!o)return}else n=null}}function Jo(e,t){var i=ir(e);let n,o;for(;e!=i.document.body;)o=t(),n=new Bo(e).excludeScrollbarsAndBorders(),n.contains(o)||(Xo(o,n)?e.scrollTop-=n.top-o.top:Zo(o,n)&&(e.scrollTop+=o.bottom-n.bottom),er(o,n)?e.scrollLeft-=n.left-o.left:tr(o,n)&&(e.scrollLeft+=o.right-n.right)),e=e.parentNode}function Zo(e,t){return e.bottom>t.bottom}function Xo(e,t){return e.top<t.top}function er(e,t){return e.left<t.left}function tr(e,t){return e.right>t.right}function ir(e){return(Lo(e)?e.startContainer:e).ownerDocument.defaultView}function nr(t){if(Lo(t)){let e=t.commonAncestorContainer;return Tn(e)&&(e=e.parentNode),e}return t.parentNode}function or(e,t){const i=ir(e),n=new Bo(e);if(i===t)return n;{let e=i;for(;e!=t;){const t=e.frameElement,i=new Bo(t).excludeScrollbarsAndBorders();n.moveBy(i.left,i.top),e=e.parent}}return n}Object.assign({},{scrollViewportToShowTarget:Qo,scrollAncestorsToShowTarget:function(e){Jo(nr(e),()=>new Bo(e))}});class rr{constructor(e){var i;this.document=new Ki(e),this.domConverter=new Jn(this.document),this.domRoots=new Map,this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Hn(this.domConverter,this.document.selection),this._renderer.bind("isFocused").to(this.document),this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this._writer=new bn(this.document),this.addObserver(po),this.addObserver(Mo),this.addObserver(No),this.addObserver(wo),this.addObserver(Po),this.addObserver(Ro),this.addObserver(Ko),tn.isAndroid&&this.addObserver(Oo),this.document.on("arrowKey",On,{priority:"low"}),(i=this).document.on("arrowKey",(e,t)=>function(e,i){if(e.keyCode==rn.arrowright){const n=e.domTarget.ownerDocument.defaultView.getSelection(),o=1==n.rangeCount&&n.getRangeAt(0).collapsed;if(o||e.shiftKey){const t=n.focusNode,r=n.focusOffset,s=i.domPositionToView(t,r);if(null!==s){let t=!1;e=s.getLastMatchingPosition(e=>(e.item.is("uiElement")&&(t=!0),!(!e.item.is("uiElement")&&!e.item.is("attributeElement")))),t&&(e=i.viewPositionToDom(e),o?n.collapse(e.parent,e.offset):n.extend(e.parent,e.offset))}}}}(t,i.domConverter),{priority:"low"}),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0})}attachDomRoot(e,t="main"){const i=this.document.getRoot(t);i._name=e.tagName.toLowerCase();const n={};for(const{name:t,value:o}of Array.from(e.attributes))n[t]=o,"class"===t?this._writer.addClass(o.split(" "),i):this._writer.setAttribute(t,o,i);this._initialDomRootAttributes.set(e,n);const o=()=>{this._writer.setAttribute("contenteditable",!i.isReadOnly,i),i.isReadOnly?this._writer.addClass("ck-read-only",i):this._writer.removeClass("ck-read-only",i)};o(),this.domRoots.set(t,e),this.domConverter.bindElements(e,i),this._renderer.markToSync("children",i),this._renderer.markToSync("attributes",i),this._renderer.domDocuments.add(e.ownerDocument),i.on("change:children",(e,t)=>this._renderer.markToSync("children",t)),i.on("change:attributes",(e,t)=>this._renderer.markToSync("attributes",t)),i.on("change:text",(e,t)=>this._renderer.markToSync("text",t)),i.on("change:isReadOnly",()=>this.change(o)),i.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const i of this._observers.values())i.observe(e,t)}detachDomRoot(e){const t=this.domRoots.get(e);Array.from(t.attributes).forEach(({name:e})=>t.removeAttribute(e));var i=this._initialDomRootAttributes.get(t);for(const e in i)t.setAttribute(e,i[e]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(const[e,i]of this.domRoots)t.observe(i,e);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection(){var e=this.document.selection.getFirstRange();e&&Qo({target:this.domConverter.viewRangeToDom(e),viewportOffset:20})}focus(){var e;this.document.isFocused||(e=this.document.selection.editableElement)&&(this.domConverter.focus(e),this.forceRender())}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new p.a("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;var t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(e){p.a.rethrowUnexpectedError(e,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return Li._createAt(e,t)}createPositionAfter(e){return Li._createAfter(e)}createPositionBefore(e){return Li._createBefore(e)}createRange(e,t){return new Vi(e,t)}createRangeOn(e){return Vi._createOn(e)}createRangeIn(e){return Vi._createIn(e)}createSelection(e,t,i){return new Fi(e,t,i)}_disableRendering(e){0==(this._renderingDisabled=e)&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}Me(rr,Ce);class sr{constructor(e){this.parent=null,this._attrs=ei(e)}get index(){var e;if(!this.parent)return null;if(null===(e=this.parent.getChildIndex(this)))throw new p.a("model-node-not-found-in-parent",this);return e}get startOffset(){var e;if(!this.parent)return null;if(null===(e=this.parent.getChildStartOffset(this)))throw new p.a("model-node-not-found-in-parent",this);return e}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){var e=this.index;return null!==e&&this.parent.getChild(e+1)||null}get previousSibling(){var e=this.index;return null!==e&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){var i=this.getAncestors(t),n=e.getAncestors(t);let o=0;for(;i[o]==n[o]&&i[o];)o++;return 0===o?null:i[o-1]}isBefore(e){if(this==e)return!1;if(this.root!==e.root)return!1;var t=this.getPath(),i=e.getPath(),n=Kt(t,i);switch(n){case"prefix":return!0;case"extension":return!1;default:return t[n]<i[n]}}isAfter(e){return this!=e&&this.root===e.root&&!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((e,t)=>(e[t[0]]=t[1],e),{})),e}is(e){return"node"===e||"model:node"===e}_clone(){return new sr(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=ei(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}}class ar extends sr{constructor(e,t){super(t),this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}is(e){return"$text"===e||"model:$text"===e||"text"===e||"model:text"===e||"node"===e||"model:node"===e}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new ar(this.data,this.getAttributes())}static fromJSON(e){return new ar(e.data,e.attributes)}}class lr{constructor(e,t,i){if(this.textNode=e,t<0||t>e.offsetSize)throw new p.a("model-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.offsetSize)throw new p.a("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get startOffset(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}is(e){return"$textProxy"===e||"model:$textProxy"===e||"textProxy"===e||"model:textProxy"===e}getPath(){const e=this.textNode.getPath();return 0<e.length&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}class cr{constructor(e){this._nodes=[],e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((e,t)=>e+t.offsetSize,0)}getNode(e){return this._nodes[e]||null}getNodeIndex(e){return-1==(e=this._nodes.indexOf(e))?null:e}getNodeStartOffset(e){return null===(e=this.getNodeIndex(e))?null:this._nodes.slice(0,e).reduce((e,t)=>e+t.offsetSize,0)}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;if(!(e=this._nodes[e]))throw new p.a("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(e){let t=0;for(const i of this._nodes){if(e>=t&&e<t+i.offsetSize)return this.getNodeIndex(i);t+=i.offsetSize}if(t!=e)throw new p.a("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length}_insertNodes(e,t){for(const e of t)if(!(e instanceof sr))throw new p.a("model-nodelist-insertnodes-not-node",this);this._nodes.splice(e,0,...t)}_removeNodes(e,t=1){return this._nodes.splice(e,t)}toJSON(){return this._nodes.map(e=>e.toJSON())}}class dr extends sr{constructor(e,t,i){super(t),this.name=e,this._children=new cr,i&&this._insertChild(0,i)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}is(e,t=null){return t?t===this.name&&("element"===e||"model:element"===e):"element"===e||"model:element"===e||"node"===e||"model:node"===e}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(const i of e)t=t.getChild(t.offsetToIndex(i));return t}findAncestor(e,t={includeSelf:!1}){let i=t.includeSelf?this:this.parent;for(;i;){if(i.name===e)return i;i=i.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,0<this._children.length){e.children=[];for(const t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){return e=e?Array.from(this._children).map(e=>e._clone(!0)):null,new dr(this.name,this.getAttributes(),e)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){for(const e of t="string"==typeof t?[new ar(t)]:(Bt(t)||(t=[t]),Array.from(t).map(e=>"string"==typeof e?new ar(e):e instanceof lr?new ar(e.data,e.getAttributes()):e)))null!==e.parent&&e._remove(),e.parent=this;this._children._insertNodes(e,t)}_removeChildren(e,t=1){t=this._children._removeNodes(e,t);for(const e of t)e.parent=null;return t}static fromJSON(e){let t=null;if(e.children){t=[];for(const i of e.children)i.name?t.push(dr.fromJSON(i)):t.push(ar.fromJSON(i))}return new dr(e.name,e.attributes,t)}}class hr{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new p.a("model-tree-walker-no-start-position",null);var t=e.direction||"forward";if("forward"!=t&&"backward"!=t)throw new p.a("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this.position=e.startPosition.clone():this.position=gr._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}skip(e){let t,i,n,o;for(;n=this.position,o=this._visitedParent,{done:t,value:i}=this.next(),!t&&e(i););t||(this.position=n,this._visitedParent=o)}next(){return"forward"==this.direction?this._next():this._previous()}_next(){const e=this.position,i=this.position.clone(),n=this._visitedParent;if(null===n.parent&&i.offset===n.maxOffset)return{done:!0};if(n===this._boundaryEndParent&&i.offset==this.boundaries.end.offset)return{done:!0};const t=i.parent,o=mr(i,t),r=o||pr(i,t,o);if(r instanceof dr)return this.shallow?i.offset++:(i.path.push(0),this._visitedParent=r),this.position=i,ur("elementStart",r,e,i,1);if(r instanceof ar){let t;if(this.singleCharacters)t=1;else{let e=r.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<e&&(e=this.boundaries.end.offset),t=e-i.offset}const o=i.offset-r.startOffset,s=new lr(r,o,t);return i.offset+=t,this.position=i,ur("text",s,e,i,t)}return i.path.pop(),i.offset++,this.position=i,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():ur("elementEnd",n,e,i)}_previous(){const e=this.position,i=this.position.clone(),n=this._visitedParent;if(null===n.parent&&0===i.offset)return{done:!0};if(n==this._boundaryStartParent&&i.offset==this.boundaries.start.offset)return{done:!0};const t=i.parent,o=mr(i,t),r=o||fr(i,t,o);if(r instanceof dr)return i.offset--,this.shallow?(this.position=i,ur("elementStart",r,e,i,1)):(i.path.push(r.maxOffset),this.position=i,this._visitedParent=r,this.ignoreElementEnd?this._previous():ur("elementEnd",r,e,i));if(r instanceof ar){let t;if(this.singleCharacters)t=1;else{let e=r.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>e&&(e=this.boundaries.start.offset),t=i.offset-e}const o=i.offset-r.startOffset,s=new lr(r,o-t,t);return i.offset-=t,this.position=i,ur("text",s,e,i,t)}return i.path.pop(),this.position=i,this._visitedParent=n.parent,ur("elementStart",n,e,i,1)}}function ur(e,t,i,n,o){return{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:n,length:o}}}class gr{constructor(e,t,i="toNone"){if(!e.is("element")&&!e.is("documentFragment"))throw new p.a("model-position-root-invalid",e);if(!(t instanceof Array)||0===t.length)throw new p.a("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=i}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let t=this.root;for(let e=0;e<this.path.length-1;e++)if(t=t.getChild(t.offsetToIndex(this.path[e])),!t)throw new p.a("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new p.a("model-position-path-incorrect",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return mr(this,this.parent)}get nodeAfter(){var e=this.parent;return pr(this,e,mr(this,e))}get nodeBefore(){var e=this.parent;return fr(this,e,mr(this,e))}get isAtStart(){return 0===this.offset}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(e){if(this.root!=e.root)return"different";var t=Kt(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;const i=new hr(t);return i.skip(e),i.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];var t="string"==typeof(t=Kt(this.path,e.path))?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,t)}getCommonAncestor(e){var t=this.getAncestors(),i=e.getAncestors();let n=0;for(;t[n]==i[n]&&t[n];)n++;return 0===n?null:t[n-1]}getShiftedBy(e){const t=this.clone(),i=t.offset+e;return t.offset=i<0?0:i,t}isAfter(e){return"after"==this.compareWith(e)}isBefore(e){return"before"==this.compareWith(e)}isEqual(e){return"same"==this.compareWith(e)}isTouching(e){let t=null,i=null;switch(this.compareWith(e)){case"same":return!0;case"before":t=gr._createAt(this),i=gr._createAt(e);break;case"after":t=gr._createAt(e),i=gr._createAt(this);break;default:return!1}let n=t.parent;for(;t.path.length+i.path.length;){if(t.isEqual(i))return!0;if(t.path.length>i.path.length){if(t.offset!==n.maxOffset)return!1;t.path=t.path.slice(0,-1),n=n.parent,t.offset++}else{if(0!==i.offset)return!1;i.path=i.path.slice(0,-1)}}}is(e){return"position"===e||"model:position"===e}hasSameParentAs(e){return this.root===e.root&&"same"==Kt(this.getParentPath(),e.getParentPath())}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=gr._createAt(this)}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const t=e.movedRange;let i;return t.containsPosition(this)||t.start.isEqual(this)?(i=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(i=i._getTransformedByDeletion(e.deletionPosition,1))):i=this.isEqual(e.deletionPosition)?gr._createAt(e.deletionPosition):this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),i}_getTransformedByDeletion(e,t){const i=gr._createAt(this);if(this.root!=e.root)return i;if("same"==Kt(e.getParentPath(),this.getParentPath())){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;i.offset-=t}}else if("prefix"==Kt(e.getParentPath(),this.getParentPath())){var n=e.path.length-1;if(e.offset<=this.path[n]){if(e.offset+t>this.path[n])return null;i.path[n]-=t}}return i}_getTransformedByInsertion(e,t){const i=gr._createAt(this);return this.root!=e.root||("same"==Kt(e.getParentPath(),this.getParentPath())?(e.offset<this.offset||e.offset==this.offset&&"toPrevious"!=this.stickiness)&&(i.offset+=t):"prefix"==Kt(e.getParentPath(),this.getParentPath())&&(n=e.path.length-1,e.offset<=this.path[n]&&(i.path[n]+=t))),i;var n}_getTransformedByMove(e,t,i){if(t=t._getTransformedByDeletion(e,i),e.isEqual(t))return gr._createAt(this);const n=this._getTransformedByDeletion(e,i);return null===n||e.isEqual(this)&&"toNext"==this.stickiness||e.getShiftedBy(i).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(e,t):n._getTransformedByInsertion(t,i)}_getCombined(e,t){const i=e.path.length-1,n=gr._createAt(t);return n.stickiness=this.stickiness,n.offset=n.offset+this.path[i]-e.offset,n.path=[...n.path,...this.path.slice(1+i)],n}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,i="toNone"){if(e instanceof gr)return new gr(e.root,e.path,e.stickiness);{const n=e;if("end"==t)t=n.maxOffset;else{if("before"==t)return this._createBefore(n,i);if("after"==t)return this._createAfter(n,i);if(0!==t&&!t)throw new p.a("model-createpositionat-offset-required",[this,e])}if(!n.is("element")&&!n.is("documentFragment"))throw new p.a("model-position-parent-incorrect",[this,e]);const o=n.getPath();return o.push(t),new this(n.root,o,i)}}static _createAfter(e,t){if(!e.parent)throw new p.a("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}static _createBefore(e,t){if(!e.parent)throw new p.a("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}static fromJSON(e,t){if("$graveyard"===e.root){const i=new gr(t.graveyard,e.path);return i.stickiness=e.stickiness,i}if(!t.getRoot(e.root))throw new p.a("model-position-fromjson-no-root",t,{rootName:e.root});return new gr(t.getRoot(e.root),e.path,e.stickiness)}}function mr(e,t){const i=t.getChild(t.offsetToIndex(e.offset));return i&&i.is("$text")&&i.startOffset<e.offset?i:null}function pr(e,t,i){return null!==i?null:t.getChild(t.offsetToIndex(e.offset))}function fr(e,t,i){return null!==i?null:t.getChild(t.offsetToIndex(e.offset)-1)}class br{constructor(e,t=null){this.start=gr._createAt(e),this.end=t?gr._createAt(t):gr._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new hr({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return"same"==Kt(this.start.getParentPath(),this.end.getParentPath())}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);var i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),e=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&e}containsItem(e){return e=gr._createBefore(e),this.containsPosition(e)||this.start.isEqual(e)}is(e){return"range"===e||"model:range"===e}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new br(this.start,e.start)),this.containsPosition(e.end)&&t.push(new br(e.end,this.end))):t.push(new br(this.start,this.end)),t}getIntersection(i){if(this.isIntersecting(i)){let e=this.start,t=this.end;return this.containsPosition(i.start)&&(e=i.start),this.containsPosition(i.end)&&(t=i.end),new br(e,t)}return null}getJoined(e,t=!1){if(!(this.isIntersecting(e)||(this.start.isBefore(e.start)?t?this.end.isTouching(e.start):this.end.isEqual(e.start):t?e.end.isTouching(this.start):e.end.isEqual(this.start))))return null;let i=this.start,n=this.end;return e.start.isBefore(i)&&(i=e.start),e.end.isAfter(n)&&(n=e.end),new br(i,n)}getMinimalFlatRanges(){const e=[],t=this.start.getCommonPath(this.end).length,i=gr._createAt(this.start);let n=i.parent;for(;i.path.length>t+1;){const t=n.maxOffset-i.offset;0!=t&&e.push(new br(i,i.getShiftedBy(t))),i.path=i.path.slice(0,-1),i.offset++,n=n.parent}for(;i.path.length<=this.end.path.length;){const t=this.end.path[i.path.length-1],n=t-i.offset;0!=n&&e.push(new br(i,i.getShiftedBy(n))),i.offset=t,i.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new hr(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;for(const t of e=new hr(e))yield t.item}*getPositions(e={}){e.boundaries=this,yield(e=new hr(e)).position;for(const t of e)yield t.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new br(this.start,this.end)]}getTransformedByOperations(i){const n=[new br(this.start,this.end)];for(const o of i)for(let e=0;e<n.length;e++){var t=n[e].getTransformedByOperation(o);n.splice(e,1,...t),e+=t.length-1}for(let t=0;t<n.length;t++){const r=n[t];for(let e=t+1;e<n.length;e++){const i=n[e];(r.containsRange(i)||i.containsRange(r)||r.isEqual(i))&&n.splice(e,1)}}return n}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){var i=e.sourcePosition,n=e.howMany,e=e.targetPosition;return this._getTransformedByMove(i,e,n,t)}_getTransformedBySplitOperation(e){var t=this.start._getTransformedBySplitOperation(e);let i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),t.root!=i.root&&(i=this.end.getShiftedBy(-1)),new br(t,i)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new br(this.start);let t=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return t.root!=i.root&&(i=this.end.getShiftedBy(-1)),t.isAfter(i)&&(e.sourcePosition.isBefore(e.targetPosition)?(t=gr._createAt(i),t.offset=0):(e.deletionPosition.isEqual(t)||(i=e.deletionPosition),t=e.targetPosition)),new br(t,i)}_getTransformedByInsertion(e,t,i=!1){if(i&&this.containsPosition(e))return[new br(this.start,e),new br(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{const i=new br(this.start,this.end);return i.start=i.start._getTransformedByInsertion(e,t),i.end=i.end._getTransformedByInsertion(e,t),[i]}}_getTransformedByMove(e,t,i,n=!1){if(this.isCollapsed){const n=this.start._getTransformedByMove(e,t,i);return[new br(n)]}const o=br._createFromPositionAndShift(e,i),r=t._getTransformedByDeletion(e,i);if(this.containsPosition(t)&&!n&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const n=this.start._getTransformedByMove(e,t,i),o=this.end._getTransformedByMove(e,t,i);return[new br(n,o)]}let s;const a=this.getDifference(o);let l=null;const c=this.getIntersection(o);if(1==a.length?l=new br(a[0].start._getTransformedByDeletion(e,i),a[0].end._getTransformedByDeletion(e,i)):2==a.length&&(l=new br(this.start,this.end._getTransformedByDeletion(e,i))),s=l?l._getTransformedByInsertion(r,i,null!==c||n):[],c){const e=new br(c.start._getCombined(o.start,r),c.end._getCombined(o.start,r));2==s.length?s.splice(1,0,e):s.push(e)}return s}_getTransformedByDeletion(e,t){let i=this.start._getTransformedByDeletion(e,t),n=this.end._getTransformedByDeletion(e,t);return null==i&&null==n?null:(null==i&&(i=e),null==n&&(n=e),new br(i,n))}static _createFromPositionAndShift(e,t){var i=e,e=e.getShiftedBy(t);return 0<t?new this(i,e):new this(e,i)}static _createIn(e){return new this(gr._createAt(e,0),gr._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(gr._createBefore(e),e.offsetSize)}static _createFromRanges(t){if(0===t.length)throw new p.a("range-create-from-ranges-empty-array",null);if(1==t.length)return t[0].clone();var e=t[0];t.sort((e,t)=>e.start.isAfter(t.start)?1:-1);const i=t.indexOf(e),n=new this(e.start,e.end);if(0<i)for(let e=i-1;t[e].end.isEqual(n.start);e++)n.start=gr._createAt(t[e].start);for(let e=i+1;e<t.length&&t[e].start.isEqual(n.end);e++)n.end=gr._createAt(t[e].end);return n}static fromJSON(e,t){return new this(gr.fromJSON(e.start,t),gr.fromJSON(e.end,t))}}class wr{constructor(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",(e,t)=>{var i;t.viewPosition||(i=this._modelToViewMapping.get(t.modelPosition.parent),t.viewPosition=this.findPositionIn(i,t.modelPosition.offset))},{priority:"low"}),this.on("viewToModelPosition",(e,t)=>{var i,n;t.modelPosition||(n=this.findMappedViewAncestor(t.viewPosition),i=this._viewToModelMapping.get(n),n=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,n),t.modelPosition=gr._createAt(i,n))},{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e){const t=this.toModelElement(e);if(this._viewToModelMapping.delete(e),this._elementToMarkerNames.has(e))for(const t of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(t);this._modelToViewMapping.get(t)==e&&this._modelToViewMapping.delete(t)}unbindModelElement(e){var t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}bindElementToMarker(e,t){const i=this._markerNameToElements.get(t)||new Set;i.add(e);const n=this._elementToMarkerNames.get(e)||new Set;n.add(t),this._markerNameToElements.set(t,i),this._elementToMarkerNames.set(e,n)}unbindElementFromMarkerName(e,t){const i=this._markerNameToElements.get(t);i&&(i.delete(e),0==i.size&&this._markerNameToElements.delete(t));const n=this._elementToMarkerNames.get(e);n&&(n.delete(t),0==n.size&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){var e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new br(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new Vi(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){return this.fire("viewToModelPosition",e={viewPosition:e,mapper:this}),e.modelPosition}toViewPosition(e,t={isPhantom:!1}){return t={modelPosition:e,mapper:this,isPhantom:t.isPhantom},this.fire("modelToViewPosition",t),t.viewPosition}markerNameToElements(e){const t=this._markerNameToElements.get(e);if(!t)return null;const i=new Set;for(const e of t)if(e.is("attributeElement"))for(const t of e.getElementsWithSameId())i.add(t);else i.add(e);return i}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(t,i,e){if(e!=t)return this._toModelOffset(t.parent,t.index,e)+this._toModelOffset(t,i,t);if(t.is("$text"))return i;let n=0;for(let e=0;e<i;e++)n+=this.getModelLength(t.getChild(e));return n}getModelLength(t){if(this._viewToModelLengthCallbacks.get(t.name))return this._viewToModelLengthCallbacks.get(t.name)(t);if(this._viewToModelMapping.has(t))return 1;if(t.is("$text"))return t.data.length;if(t.is("uiElement"))return 0;{let e=0;for(const i of t.getChildren())e+=this.getModelLength(i);return e}}findPositionIn(e,t){let i,n=0,o=0,r=0;if(e.is("$text"))return new Li(e,t);for(;o<t;)i=e.getChild(r),n=this.getModelLength(i),o+=n,r++;return o==t?this._moveViewPositionToTextNode(new Li(e,r)):this.findPositionIn(i,t-(o-n))}_moveViewPositionToTextNode(e){var t=e.nodeBefore,i=e.nodeAfter;return t instanceof Zt?new Li(t,t.data.length):i instanceof Zt?new Li(i,0):e}}Me(wr,s);class kr{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(e,t){t=_r(t),e instanceof lr&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=_r(t),e instanceof lr&&(e=this._getSymbolForTextProxy(e)),!!this.test(e,t)&&(this._consumable.get(e).set(t,!1),!0)}test(e,t){t=_r(t),e instanceof lr&&(e=this._getSymbolForTextProxy(e));const i=this._consumable.get(e);return void 0===i||void 0===(t=i.get(t))?null:t}revert(e,t){t=_r(t),e instanceof lr&&(e=this._getSymbolForTextProxy(e));var i=this.test(e,t);return!1===i?(this._consumable.get(e).set(t,!0),!0):!0!==i&&null}_getSymbolForTextProxy(e){let t=null;const i=this._textProxyRegistry.get(e.startOffset);if(i){const n=i.get(e.endOffset);n&&(t=n.get(e.parent))}return t=t||this._addSymbolForTextProxy(e.startOffset,e.endOffset,e.parent),t}_addSymbolForTextProxy(e,t,i){var n=Symbol("textProxySymbol");let o,r;return o=this._textProxyRegistry.get(e),o||(o=new Map,this._textProxyRegistry.set(e,o)),r=o.get(t),r||(r=new Map,o.set(t,r)),r.set(i,n),n}}function _r(e){var t=e.split(":");return"addMarker"==t[0]||"removeMarker"==t[0]?e:1<t.length?t[0]+":"+t[1]:t[0]}class vr{constructor(e){this.conversionApi=Object.assign({dispatcher:this},e),this._reconversionEventsMapping=new Map}convertChanges(e,t,i){for(const t of e.getMarkersToRemove())this.convertMarkerRemove(t.name,t.range,i);const n=this._mapChangesWithAutomaticReconversion(e);for(const e of n)"insert"===e.type?this.convertInsert(br._createFromPositionAndShift(e.position,e.length),i):"remove"===e.type?this.convertRemove(e.position,e.length,e.name,i):"reconvert"===e.type?this.reconvertElement(e.element,i):this.convertAttribute(e.range,e.attributeKey,e.attributeOldValue,e.attributeNewValue,i);for(const e of this.conversionApi.mapper.flushUnboundMarkerNames()){const n=t.get(e).getRange();this.convertMarkerRemove(e,n,i),this.convertMarkerAdd(e,n,i)}for(const t of e.getMarkersToAdd())this.convertMarkerAdd(t.name,t.range,i)}convertInsert(e,t){this.conversionApi.writer=t,this.conversionApi.consumable=this._createInsertConsumable(e);for(const t of Array.from(e).map(yr))this._convertInsertWithAttributes(t);this._clearConversionApi()}convertRemove(e,t,i,n){this.conversionApi.writer=n,this.fire("remove:"+i,{position:e,length:t},this.conversionApi),this._clearConversionApi()}convertAttribute(e,t,i,n,o){this.conversionApi.writer=o,this.conversionApi.consumable=this._createConsumableForRange(e,"attribute:"+t);for(const o of e){const e={item:o.item,range:br._createFromPositionAndShift(o.previousPosition,o.length),attributeKey:t,attributeOldValue:i,attributeNewValue:n};this._testAndFire("attribute:"+t,e)}this._clearConversionApi()}reconvertElement(e,t){const i=br._createOn(e);this.conversionApi.writer=t,this.conversionApi.consumable=this._createInsertConsumable(i);const n=this.conversionApi.mapper,o=n.toViewElement(e);t.remove(o),this._convertInsertWithAttributes({item:e,range:i});var r=n.toViewElement(e);for(const i of br._createIn(e)){const{item:e}=i,o=function(e,t){if(e.is("textProxy")){const i=t.toViewPosition(gr._createBefore(e)).parent;return i.is("$text")?i:null}return t.toViewElement(e)}(e,n);o?o.root!==r.root&&t.move(t.createRangeOn(o),n.toViewPosition(gr._createBefore(e))):this._convertInsertWithAttributes(yr(i))}n.unbindViewElement(o),this._clearConversionApi()}convertSelection(e,t,i){const n=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this.conversionApi.writer=i,this.conversionApi.consumable=this._createSelectionConsumable(e,n),this.fire("selection",{selection:e},this.conversionApi),e.isCollapsed){for(const t of n){const i=t.getRange();if(function(e,t,i){const n=t.getRange(),o=Array.from(e.getAncestors());return o.shift(),o.reverse(),!o.some(e=>{if(n.containsItem(e))return!!i.toViewElement(e).getCustomProperty("addHighlight")})}(e.getFirstPosition(),t,this.conversionApi.mapper)){const n={item:e,markerName:t.name,markerRange:i};this.conversionApi.consumable.test(e,"addMarker:"+t.name)&&this.fire("addMarker:"+t.name,n,this.conversionApi)}}for(const t of e.getAttributeKeys()){const i={item:e,range:e.getFirstRange(),attributeKey:t,attributeOldValue:null,attributeNewValue:e.getAttribute(t)};this.conversionApi.consumable.test(e,"attribute:"+i.attributeKey)&&this.fire("attribute:"+i.attributeKey+":$text",i,this.conversionApi)}this._clearConversionApi()}else this._clearConversionApi()}convertMarkerAdd(e,t,i){if("$graveyard"!=t.root.rootName){this.conversionApi.writer=i;const o="addMarker:"+e,r=new kr;if(r.add(t,o),this.conversionApi.consumable=r,this.fire(o,{markerName:e,markerRange:t},this.conversionApi),r.test(t,o)){this.conversionApi.consumable=this._createConsumableForRange(t,o);for(const i of t.getItems()){var n;this.conversionApi.consumable.test(i,o)&&(n={item:i,range:br._createOn(i),markerName:e,markerRange:t},this.fire(o,n,this.conversionApi))}this._clearConversionApi()}else this._clearConversionApi()}}convertMarkerRemove(e,t,i){"$graveyard"!=t.root.rootName&&(this.conversionApi.writer=i,this.fire("removeMarker:"+e,{markerName:e,markerRange:t},this.conversionApi),this._clearConversionApi())}_mapReconversionTriggerEvent(e,t){this._reconversionEventsMapping.set(t,e)}_createInsertConsumable(e){const t=new kr;for(const i of e){const e=i.item;t.add(e,"insert");for(const n of e.getAttributeKeys())t.add(e,"attribute:"+n)}return t}_createConsumableForRange(e,t){const i=new kr;for(const n of e.getItems())i.add(n,t);return i}_createSelectionConsumable(e,t){const i=new kr;i.add(e,"selection");for(const n of t)i.add(e,"addMarker:"+n.name);for(const t of e.getAttributeKeys())i.add(e,"attribute:"+t);return i}_testAndFire(e,t){this.conversionApi.consumable.test(t.item,e)&&this.fire(`${e}:${t.item.name||"$text"}`,t,this.conversionApi)}_clearConversionApi(){delete this.conversionApi.writer,delete this.conversionApi.consumable}_convertInsertWithAttributes(e){this._testAndFire("insert",e);for(const t of e.item.getAttributeKeys())e.attributeKey=t,e.attributeOldValue=null,e.attributeNewValue=e.item.getAttribute(t),this._testAndFire("attribute:"+t,e)}_mapChangesWithAutomaticReconversion(e){const t=new Set,i=[];for(const o of e.getChanges()){const e=o.position||o.range.start,r=e.parent;if(mr(e,r))i.push(o);else{const s="attribute"===o.type?pr(e,r,null):r;var n;s.is("$text")?i.push(o):(n="attribute"===o.type?`attribute:${o.attributeKey}:${s.name}`:`${o.type}:${o.name}`,this._isReconvertTriggerEvent(n,s.name)?t.has(s)||(t.add(s),i.push({type:"reconvert",element:s})):i.push(o))}}return i}_isReconvertTriggerEvent(e,t){return this._reconversionEventsMapping.get(e)===t}}function yr(e){return{item:e.item,range:br._createFromPositionAndShift(e.previousPosition,e.length)}}Me(vr,s);class xr{constructor(e,t,i){this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map,e&&this.setTo(e,t,i)}get anchor(){if(0<this._ranges.length){var e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(0<this._ranges.length){var e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const i of this._ranges){let e=!1;for(const n of t._ranges)if(i.isEqual(n)){e=!0;break}if(!e)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new br(e.start,e.end)}getFirstRange(){let e=null;for(const t of this._ranges)e&&!t.start.isBefore(e.start)||(e=t);return e?new br(e.start,e.end):null}getLastRange(){let e=null;for(const t of this._ranges)e&&!t.end.isAfter(e.end)||(e=t);return e?new br(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(t,i,n){if(null===t)this._setRanges([]);else if(t instanceof xr)this._setRanges(t.getRanges(),t.isBackward);else if(t&&"function"==typeof t.getRanges)this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof br)this._setRanges([t],!!i&&!!i.backward);else if(t instanceof gr)this._setRanges([new br(t)]);else if(t instanceof sr){n=!!n&&!!n.backward;let e;if("in"==i)e=br._createIn(t);else if("on"==i)e=br._createOn(t);else{if(void 0===i)throw new p.a("model-selection-setto-required-second-parameter",[this,t]);e=new br(gr._createAt(t,i))}this._setRanges([e],n)}else{if(!Bt(t))throw new p.a("model-selection-setto-not-selectable",[this,t]);this._setRanges(t,i&&!!i.backward)}}_setRanges(e,t=!1){var i=(e=Array.from(e)).some(t=>{if(!(t instanceof br))throw new p.a("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(e=>!e.isEqual(t))});if(e.length!==this._ranges.length||i){this._removeAllRanges();for(const t of e)this._pushRange(t);this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0})}}setFocus(e,t){if(null===this.anchor)throw new p.a("model-selection-setfocus-no-ranges",[this,e]);const i=gr._createAt(e,t);"same"!=i.compareWith(this.focus)&&(t=this.anchor,this._ranges.length&&this._popRange(),"before"==i.compareWith(t)?(this._pushRange(new br(i,t)),this._lastRangeBackward=!0):(this._pushRange(new br(t,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0}))}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}is(e){return"selection"===e||"model:selection"===e}*getSelectedBlocks(){var e,t,i=new WeakSet;for(const r of this.getRanges()){var n=Cr(r.start,i);n&&Tr(n,r)&&(yield n);for(const s of r.getWalker()){var o=s.item;"elementEnd"==s.type&&(e=o,t=r,Ar(e,i)&&Tr(e,t))&&(yield o)}(n=Cr(r.end,i))&&!r.end.isTouching(gr._createAt(n,0))&&Tr(n,r)&&(yield n)}}containsEntireContent(e=this.anchor.root){const t=gr._createAt(e,0),i=gr._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new br(e.start,e.end))}_checkRange(t){for(let e=0;e<this._ranges.length;e++)if(t.isIntersecting(this._ranges[e]))throw new p.a("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[e]})}_removeAllRanges(){for(;0<this._ranges.length;)this._popRange()}_popRange(){this._ranges.pop()}}function Ar(e,t){return!t.has(e)&&(t.add(e),e.root.document.model.schema.isBlock(e)&&e.parent)}function Cr(e,t){const i=e.parent.root.document.model.schema,n=e.parent.getAncestors({parentFirst:!0,includeSelf:!0});let o=!1;return e=n.find(e=>!o&&(o=i.isLimit(e),!o&&Ar(e,t))),n.forEach(e=>t.add(e)),e}function Tr(i,e){var t=function(){const e=i.root.document.model.schema;let t=i.parent;for(;t;){if(e.isBlock(t))return t;t=t.parent}}();return!t||!e.containsRange(br._createOn(t),!0)}Me(xr,s);class Er extends br{constructor(e,t){super(e,t),function(){this.listenTo(this.root.document.model,"applyOperation",(e,t)=>{(t=t[0]).isDocumentOperation&&function(e){const t=this.getTransformedByOperation(e),i=br._createFromRanges(t),n=!i.isEqual(this),o=function(e,t){switch(t.type){case"insert":return e.containsPosition(t.position);case"move":case"remove":case"reinsert":case"merge":return e.containsPosition(t.sourcePosition)||e.start.isEqual(t.sourcePosition)||e.containsPosition(t.targetPosition);case"split":return e.containsPosition(t.splitPosition)||e.containsPosition(t.insertionPosition)}return!1}(this,e);let r=null;if(n){"$graveyard"==i.root.rootName&&(r="remove"==e.type?e.sourcePosition:e.deletionPosition);const t=this.toRange();this.start=i.start,this.end=i.end,this.fire("change:range",t,{deletionPosition:r})}else o&&this.fire("change:content",this.toRange(),{deletionPosition:r})}.call(this,t)},{priority:"low"})}.call(this)}detach(){this.stopListening()}is(e){return"liveRange"===e||"model:liveRange"===e||"range"==e||"model:range"===e}toRange(){return new br(this.start,this.end)}static fromRange(e){return new Er(e.start,e.end)}}Me(Er,s);class Ir{constructor(e){this._selection=new Sr(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection._updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}is(e){return"selection"===e||"model:selection"==e||"documentSelection"==e||"model:documentSelection"==e}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(e,t,i){this._selection.setTo(e,t,i)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection._getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return"selection:"+e}static _isStoreAttributeKey(e){return e.startsWith("selection:")}}Me(Ir,s);class Sr extends xr{constructor(e){super(),this.markers=new Ft({idProperty:"name"}),this._model=e.model,this._document=e,this._attributePriority=new Map,this._selectionRestorePosition=null,this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this._observedMarkers=new Set,this.listenTo(this._model,"applyOperation",(e,t)=>{(t=t[0]).isDocumentOperation&&"marker"!=t.type&&"rename"!=t.type&&"noop"!=t.type&&(0==this._ranges.length&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{for(const e of this.getRanges())if(!this._document._validateSelectionRange(e))throw new p.a("document-selection-wrong-position",this,{range:e})}),this.listenTo(this._model.markers,"update",(e,t,i,n)=>{this._updateMarker(t,n)}),this.listenTo(this._document,"change",(e,t)=>{!function(e,t){const i=e.document.differ;for(const n of i.getChanges())if("insert"==n.type){const i=n.position.parent;n.length===i.maxOffset&&e.enqueueChange(t,e=>{for(const t of Array.from(i.getAttributeKeys()).filter(e=>e.startsWith("selection:")))e.removeAttribute(t,i)})}}(this._model,t)})}get isCollapsed(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length||1}get hasOwnRange(){return 0<this._ranges.length}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(e,t,i){super.setTo(e,t,i),this._updateAttributes(!0),this._updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this._updateMarkers()}setAttribute(e,t){if(this._setAttribute(e,t)){const t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}removeAttribute(e){this._removeAttribute(e)&&this.fire("change:attribute",{attributeKeys:[e],directChange:!0})}overrideGravity(){var e=c();return this._overriddenGravityRegister.add(e),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new p.a("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this._updateMarkers()}_popRange(){this._ranges.pop().detach()}_pushRange(e){(e=this._prepareRange(e))&&this._ranges.push(e)}_prepareRange(e){if(this._checkRange(e),e.root!=this._document.graveyard){const n=Er.fromRange(e);return n.on("change:range",(e,t,i)=>{if(this._hasChangedRange=!0,n.root==this._document.graveyard){this._selectionRestorePosition=i.deletionPosition;const e=this._ranges.indexOf(n);this._ranges.splice(e,1),n.detach()}}),n}}_updateMarkers(){if(this._observedMarkers.size){const n=[];let e=!1;for(const o of this._model.markers){var t=o.name.split(":",1)[0];if(this._observedMarkers.has(t)){const r=o.getRange();for(const s of this.getRanges())r.containsRange(s,!s.isCollapsed)&&n.push(o)}}var i=Array.from(this.markers);for(const a of n)this.markers.has(a)||(this.markers.add(a),e=!0);for(const l of Array.from(this.markers))n.includes(l)||(this.markers.remove(l),e=!0);e&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}}_updateMarker(i,n){var o=i.name.split(":",1)[0];if(this._observedMarkers.has(o)){let t=!1;var e=Array.from(this.markers),o=this.markers.has(i);if(n){let e=!1;for(const i of this.getRanges())if(n.containsRange(i,!i.isCollapsed)){e=!0;break}e&&!o?(this.markers.add(i),t=!0):!e&&o&&(this.markers.remove(i),t=!0)}else o&&(this.markers.remove(i),t=!0);t&&this.fire("change:marker",{oldMarkers:e,directChange:!1})}}_updateAttributes(e){const t=ei(this._getSurroundingAttributes()),i=ei(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[e,t]of this._attributePriority)"low"==t&&(this._attrs.delete(e),this._attributePriority.delete(e));this._setAttributesTo(t);const n=[];for(const[e,t]of this.getAttributes())i.has(e)&&i.get(e)===t||n.push(e);for(const[e]of i)this.hasAttribute(e)||n.push(e);0<n.length&&this.fire("change:attribute",{attributeKeys:n,directChange:!1})}_setAttribute(e,t,i=!0){return("low"!=(i=i?"normal":"low")||"normal"!=this._attributePriority.get(e))&&super.getAttribute(e)!==t&&(this._attrs.set(e,t),this._attributePriority.set(e,i),!0)}_removeAttribute(e,t=!0){return!("low"==(t=t?"normal":"low")&&"normal"==this._attributePriority.get(e)||(this._attributePriority.set(e,t),!super.hasAttribute(e)||(this._attrs.delete(e),0)))}_setAttributesTo(e){const t=new Set;for(const[t,o]of this.getAttributes())e.get(t)!==o&&this._removeAttribute(t,!1);for(var[i,n]of e)this._setAttribute(i,n,!1)&&t.add(i);return t}*_getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const t of e.getAttributeKeys())t.startsWith("selection:")&&(yield[t.substr("selection:".length),e.getAttribute(t)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),t=this._model.schema;let i=null;if(this.isCollapsed){var n=e.textNode||e.nodeBefore,o=e.textNode||e.nodeAfter;if(this.isGravityOverridden||(i=Pr(n)),i=i||Pr(o),!this.isGravityOverridden&&!i){let e=n;for(;e&&!t.isInline(e)&&!i;)e=e.previousSibling,i=Pr(e)}if(!i){let e=o;for(;e&&!t.isInline(e)&&!i;)e=e.nextSibling,i=Pr(e)}i=i||this._getStoredAttributes()}else{const e=this.getFirstRange();for(const r of e){if(r.item.is("element")&&t.isObject(r.item))break;if("text"==r.type){i=r.item.getAttributes();break}}}return i}_fixGraveyardSelection(e){(e=this._model.schema.getNearestSelectionRange(e))&&this._pushRange(e)}}function Pr(e){return e instanceof lr||e instanceof ar?e.getAttributes():null}class Mr{constructor(e){this._dispatchers=e}add(e){for(const t of this._dispatchers)e(t);return this}}function Nr(e){return Ot(e,5)}class Rr extends Mr{elementToElement(e){return this.add(((t=Nr(t=e)).view=Dr(t.view,"container"),e=>{var r;if(e.on("insert:"+t.model,(r=t.view,(e,t,i)=>{var n,o=r(t.item,i);o&&i.consumable.consume(t.item,"insert")&&(n=i.mapper.toViewPosition(t.range.start),i.mapper.bindElements(t.item,o),i.writer.insert(n,o))}),{priority:t.converterPriority||"normal"}),t.triggerBy){if(t.triggerBy.attributes)for(const r of t.triggerBy.attributes)e._mapReconversionTriggerEvent(t.model,`attribute:${r}:${t.model}`);if(t.triggerBy.children)for(const r of t.triggerBy.children)e._mapReconversionTriggerEvent(t.model,"insert:"+r),e._mapReconversionTriggerEvent(t.model,"remove:"+r)}}));var t}attributeToElement(e){return this.add(function(t){let i="attribute:"+((t=Nr(t)).model.key||t.model);if(t.model.name&&(i+=":"+t.model.name),t.model.values)for(const i of t.model.values)t.view[i]=Dr(t.view[i],"attribute");else t.view=Dr(t.view,"attribute");const n=Lr(t);return e=>{var a;e.on(i,(a=n,(e,t,i)=>{var n=a(t.attributeOldValue,i),o=a(t.attributeNewValue,i);if((n||o)&&i.consumable.consume(t.item,e.name)){const r=i.writer,s=r.document.selection;if(t.item instanceof xr||t.item instanceof Ir)r.wrap(s.getFirstRange(),o);else{let e=i.mapper.toViewRange(t.range);null!==t.attributeOldValue&&n&&(e=r.unwrap(e,n)),null!==t.attributeNewValue&&o&&r.wrap(e,o)}}}),{priority:t.converterPriority||"normal"})}}(e))}attributeToAttribute(e){return this.add(function(t){let i="attribute:"+((t=Nr(t)).model.key||t.model);if(t.model.name&&(i+=":"+t.model.name),t.model.values)for(const i of t.model.values)t.view[i]=Vr(t.view[i]);else t.view=Vr(t.view);const n=Lr(t);return e=>{var a;e.on(i,(a=n,(e,t,i)=>{var n=a(t.attributeOldValue,i),o=a(t.attributeNewValue,i);if((n||o)&&i.consumable.consume(t.item,e.name)){const r=i.mapper.toViewElement(t.item),s=i.writer;if(!r)throw new p.a("conversion-attribute-to-attribute-on-text",[t,i]);if(null!==t.attributeOldValue&&n)if("class"==n.key){const e=Ut(n.value);for(const t of e)s.removeClass(t,r)}else if("style"==n.key){const e=Object.keys(n.value);for(const t of e)s.removeStyle(t,r)}else s.removeAttribute(n.key,r);if(null!==t.attributeNewValue&&o)if("class"==o.key){const e=Ut(o.value);for(const t of e)s.addClass(t,r)}else if("style"==o.key){const e=Object.keys(o.value);for(const t of e)s.setStyle(t,o.value[t],r)}else s.setAttribute(o.key,o.value,r)}}),{priority:t.converterPriority||"normal"})}}(e))}markerToElement(e){return this.add(((t=Nr(t=e)).view=Dr(t.view,"ui"),e=>{var l;e.on("addMarker:"+t.model,(l=t.view,(e,t,i)=>{t.isOpening=!0;var n=l(t,i);t.isOpening=!1;var o=l(t,i);if(n&&o){var r=t.markerRange;if(!r.isCollapsed||i.consumable.consume(r,e.name)){for(const t of r)if(!i.consumable.consume(t.item,e.name))return;const s=i.mapper,a=i.writer;a.insert(s.toViewPosition(r.start),n),i.mapper.bindElementToMarker(n,t.markerName),r.isCollapsed||(a.insert(s.toViewPosition(r.end),o),i.mapper.bindElementToMarker(o,t.markerName)),e.stop()}}}),{priority:t.converterPriority||"normal"}),e.on("removeMarker:"+t.model,(t.view,(e,t,i)=>{var n=i.mapper.markerNameToElements(t.markerName);if(n){for(const e of n)i.mapper.unbindElementFromMarkerName(e,t.markerName),i.writer.clear(i.writer.createRangeOn(e),e);i.writer.clearClonedElementsGroup(t.markerName),e.stop()}}),{priority:t.converterPriority||"normal"})}));var t}markerToHighlight(e){return this.add((t=e,e=>{var a,s,r;e.on("addMarker:"+t.model,(a=t.view,(e,t,i)=>{if(t.item&&(t.item instanceof xr||t.item instanceof Ir||t.item.is("$textProxy"))){var n=jr(a,t,i);if(n&&i.consumable.consume(t.item,e.name)){const o=i.writer,r=Or(o,n),s=o.document.selection;if(t.item instanceof xr||t.item instanceof Ir)o.wrap(s.getFirstRange(),r,s);else{const e=i.mapper.toViewRange(t.range),a=o.wrap(e,r);for(const e of a.getItems())if(e.is("attributeElement")&&e.isSimilar(r)){i.mapper.bindElementToMarker(e,t.markerName);break}}}}}),{priority:t.converterPriority||"normal"}),e.on("addMarker:"+t.model,(r=t.view,(e,t,i)=>{if(t.item&&t.item instanceof dr){var n=jr(r,t,i);if(n&&i.consumable.test(t.item,e.name)){const o=i.mapper.toViewElement(t.item);if(o&&o.getCustomProperty("addHighlight")){i.consumable.consume(t.item,e.name);for(const r of br._createIn(t.item))i.consumable.consume(r.item,e.name);o.getCustomProperty("addHighlight")(o,n,i.writer),i.mapper.bindElementToMarker(o,t.markerName)}}}}),{priority:t.converterPriority||"normal"}),e.on("removeMarker:"+t.model,(s=t.view,(e,t,i)=>{if(!t.markerRange.isCollapsed){var n=jr(s,t,i);if(n){var o=Or(i.writer,n),r=i.mapper.markerNameToElements(t.markerName);if(r){for(const s of r)i.mapper.unbindElementFromMarkerName(s,t.markerName),s.is("attributeElement")?i.writer.unwrap(i.writer.createRangeOn(s),o):s.getCustomProperty("removeHighlight")(s,n.id,i.writer);i.writer.clearClonedElementsGroup(t.markerName),e.stop()}}}}),{priority:t.converterPriority||"normal"})}));var t}markerToData(e){return this.add(function(t){const i=(t=Nr(t)).model;return t.view||(t.view=e=>({group:i,name:e.substr(t.model.length+1)})),e=>{var r,s;e.on("addMarker:"+i,(r=t.view,(e,t,i)=>{var n,o=r(t.markerName,i);o&&(n=t.markerRange,i.consumable.consume(n,e.name)&&(zr(n,!1,i,t,o),zr(n,!0,i,t,o),e.stop()))}),{priority:t.converterPriority||"normal"}),e.on("removeMarker:"+i,(s=t.view,(e,t,n)=>{const o=s(t.markerName,n);if(o){var i=n.mapper.markerNameToElements(t.markerName);if(i){for(const s of i)n.mapper.unbindElementFromMarkerName(s,t.markerName),s.is("containerElement")?(r(`data-${o.group}-start-before`,s),r(`data-${o.group}-start-after`,s),r(`data-${o.group}-end-before`,s),r(`data-${o.group}-end-after`,s)):n.writer.clear(n.writer.createRangeOn(s),s);n.writer.clearClonedElementsGroup(t.markerName),e.stop()}}function r(e,t){if(t.hasAttribute(e)){const i=new Set(t.getAttribute(e).split(","));i.delete(o.name),0==i.size?n.writer.removeAttribute(e,t):n.writer.setAttribute(e,Array.from(i).join(","),t)}}}),{priority:t.converterPriority||"normal"})}}(e))}}function Or(e,t){const i=e.createAttributeElement("span",t.attributes);return t.classes&&i._addClass(t.classes),"number"==typeof t.priority&&(i._priority=t.priority),i._id=t.id,i}function zr(e,t,i,n,o){const r=t?e.start:e.end,s=r.nodeAfter&&r.nodeAfter.is("element")?r.nodeAfter:null,l=r.nodeBefore&&r.nodeBefore.is("element")?r.nodeBefore:null;if(s||l){let e,a;a=t&&s||!t&&!l?(e=s,!0):(e=l,!1);var c=i.mapper.toViewElement(e);if(c)return function(e,t,i,n,o){const r=`data-${o.group}-${t?"start":"end"}-${a?"before":"after"}`,s=e.hasAttribute(r)?e.getAttribute(r).split(","):[];s.unshift(o.name),i.writer.setAttribute(r,s.join(","),e),i.mapper.bindElementToMarker(e,n.markerName)}(c,t,i,n,o),0}c=i.mapper.toViewPosition(r),t=`${o.group}-${t?"start":"end"}`,o=o.name?{name:o.name}:null,o=i.writer.createUIElement(t,o),i.writer.insert(c,o),i.mapper.bindElementToMarker(o,n.markerName)}function Dr(i,n){return"function"==typeof i?i:(e,t)=>function(e,t,i){"string"==typeof e&&(e={name:e});let n;const o=t.writer,r=Object.assign({},e.attributes);if("container"==i)n=o.createContainerElement(e.name,r);else if("attribute"==i){const t={priority:e.priority||Qi.DEFAULT_PRIORITY};n=o.createAttributeElement(e.name,r,t)}else n=o.createUIElement(e.name,r);if(e.styles){const t=Object.keys(e.styles);for(const i of t)o.setStyle(i,e.styles[i],n)}if(e.classes){const t=e.classes;if("string"==typeof t)o.addClass(t,n);else for(const e of t)o.addClass(e,n)}return n}(i,t,n)}function Lr(n){return n.model.values?(e,t)=>{const i=n.view[e];return i?i(e,t):null}:n.view}function Vr(t){return"string"==typeof t?e=>({key:t,value:e}):"object"==typeof t?t.value?()=>t:e=>({key:t.key,value:e}):t}function jr(e,t,i){const n="function"==typeof e?e(t,i):e;return n?(n.priority||(n.priority=10),n.id||(n.id=t.markerName),n):null}function Br(e){const{schema:t,document:i}=e.model;for(const o of i.getRootNames()){var n=i.getRoot(o);if(n.isEmpty&&!t.checkChild(n,"$text")&&t.checkChild(n,"paragraph"))return e.insertElement("paragraph",n),!0}return!1}function Fr(e,t,i){const n=i.createContext(e);return i.checkChild(n,"paragraph")&&i.checkChild(n.push("paragraph"),t)}function Hr(e,t){var i=t.createElement("paragraph");return t.insert(i,e),t.createPositionAt(i,0)}class Ur extends Mr{elementToElement(e){return this.add(Wr(e))}elementToAttribute(o){return this.add(function(t){Yr(t=Nr(o));const i=Gr(t,!1),e=qr(t.view),n=e?"element:"+e:"element";return e=>{e.on(n,i,{priority:t.converterPriority||"low"})}}())}attributeToAttribute(n){return this.add(function(t){let e=null;"string"!=typeof(t=Nr(n)).view&&!t.view.key||(e=function(e){"string"==typeof e.view&&(e.view={key:e.view});var t=e.view.key;let i;return i="class"==t||"style"==t?{["class"==t?"classes":"styles"]:e.view.value}:{attributes:{[t]:void 0===e.view.value?/[\s\S]*/:e.view.value}},e.view.name&&(i.name=e.view.name),e.view=i,t}(t)),Yr(t,e);const i=Gr(t,!0);return e=>{e.on("element",i,{priority:t.converterPriority||"low"})}}())}elementToMarker(e){return this.add((function(e){const i=e.model;e.model=(e,t)=>(e="string"==typeof i?i:i(e,t),t.writer.createElement("$marker",{"data-name":e}))}(e=Nr(e)),Wr(e)))}dataToMarker(e){return this.add(function(n){(n=Nr(n)).model||(n.model=e=>e?n.view+":"+e:n.view);const o=$r(Kr(n,"start")),r=$r(Kr(n,"end"));return e=>{e.on("element:"+n.view+"-start",o,{priority:n.converterPriority||"normal"}),e.on("element:"+n.view+"-end",r,{priority:n.converterPriority||"normal"});var s,t=a.get("low"),i=a.get("highest"),i=a.get(n.converterPriority)/i;e.on("element",(s=n,(e,o,r)=>{var t="data-"+s.view;function i(e,t){for(const i of t){const t=s.model(i,r),n=r.writer.createElement("$marker",{"data-name":t});r.writer.insert(n,e),o.modelCursor.isEqual(e)?o.modelCursor=o.modelCursor.getShiftedBy(1):o.modelCursor=o.modelCursor._getTransformedByInsertion(e,1),o.modelRange=o.modelRange._getTransformedByInsertion(e,1)[0]}}(r.consumable.test(o.viewItem,{attributes:t+"-end-after"})||r.consumable.test(o.viewItem,{attributes:t+"-start-after"})||r.consumable.test(o.viewItem,{attributes:t+"-end-before"})||r.consumable.test(o.viewItem,{attributes:t+"-start-before"}))&&(o.modelRange||Object.assign(o,r.convertChildren(o.viewItem,o.modelCursor)),r.consumable.consume(o.viewItem,{attributes:t+"-end-after"})&&i(o.modelRange.end,o.viewItem.getAttribute(t+"-end-after").split(",")),r.consumable.consume(o.viewItem,{attributes:t+"-start-after"})&&i(o.modelRange.end,o.viewItem.getAttribute(t+"-start-after").split(",")),r.consumable.consume(o.viewItem,{attributes:t+"-end-before"})&&i(o.modelRange.start,o.viewItem.getAttribute(t+"-end-before").split(",")),r.consumable.consume(o.viewItem,{attributes:t+"-start-before"})&&i(o.modelRange.start,o.viewItem.getAttribute(t+"-start-before").split(",")))}),{priority:t+i})}}(e))}}function Wr(t){const i=$r(t=Nr(t)),e=qr(t.view),n=e?"element:"+e:"element";return e=>{e.on(n,i,{priority:t.converterPriority||"normal"})}}function qr(e){return"string"==typeof e?e:"object"==typeof e&&"string"==typeof e.name?e.name:null}function $r(a){const l=new ti(a.view);return(e,t,i)=>{var n,o,r=l.match(t.viewItem);if(r){const s=r.match;s.name=!0,i.consumable.test(t.viewItem,s)&&(n=a.model,o=t.viewItem,r=i,(n=n instanceof Function?n(o,r):r.writer.createElement(n))&&i.safeInsert(n,t.modelCursor)&&(i.consumable.consume(t.viewItem,s),i.convertChildren(t.viewItem,n),i.updateConversionResult(n,t)))}}}function Yr(e,t=null){var i="object"!=typeof e.model?e.model:e.model.key,n="object"!=typeof e.model||void 0===e.model.value?null===t||(e=>e.getAttribute(t)):e.model.value;e.model={key:i,value:n}}function Gr(s,a){const l=new ti(s.view);return(e,t,i)=>{const n=l.match(t.viewItem);var o,r;n&&(o=s.view,r=t.viewItem,"object"==typeof(o="function"==typeof o?o(r):o)&&!qr(o)||o.classes||o.attributes||o.styles?delete n.match.name:n.match.name=!0,i.consumable.test(t.viewItem,n.match)&&(r=s.model.key,null!==(o="function"==typeof s.model.value?s.model.value(t.viewItem,i):s.model.value)&&(t.modelRange||Object.assign(t,i.convertChildren(t.viewItem,t.modelCursor)),function(e,t,i){let n=!1;for(const o of Array.from(e.getItems({shallow:a})))i.schema.checkAttribute(o,t.key)&&(n=!0,o.hasAttribute(t.key)||i.writer.setAttribute(t.key,t.value,o));return n}(t.modelRange,{key:r,value:o},i)&&i.consumable.consume(t.viewItem,n.match))))}}function Kr(i,e){const t={};return t.view=i.view+"-"+e,t.model=(e,t)=>(e=e.getAttribute("name"),e=i.model(e,t),t.writer.createElement("$marker",{"data-name":e})),t}class Qr{constructor(e,t){this.model=e,this.view=new rr(t),this.mapper=new wr,this.downcastDispatcher=new vr({mapper:this.mapper,schema:e.schema});const i=this.model.document,n=i.selection,o=this.model.markers;var r,s;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(i,"change",()=>{this.view.change(e=>{this.downcastDispatcher.convertChanges(i.differ,o,e),this.downcastDispatcher.convertSelection(n,o,e)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",(r=this.model,s=this.mapper,(e,t)=>{const i=t.newSelection,n=[];for(const r of i.getRanges())n.push(s.toModelRange(r));const o=r.createSelection(n,{backward:i.isBackward});o.isEqual(r.document.selection)||r.change(e=>{e.setSelection(o)})})),this.downcastDispatcher.on("insert:$text",(e,t,i)=>{if(i.consumable.consume(t.item,"insert")){const n=i.writer,o=i.mapper.toViewPosition(t.range.start),r=n.createText(t.item.data);n.insert(o,r)}},{priority:"lowest"}),this.downcastDispatcher.on("remove",(e,t,i)=>{const n=i.mapper.toViewPosition(t.position),o=t.position.getShiftedBy(t.length),r=i.mapper.toViewPosition(o,{isPhantom:!0}),s=i.writer.createRange(n,r),a=i.writer.remove(s.getTrimmed());for(const e of i.writer.createRangeIn(a).getItems())i.mapper.unbindViewElement(e)},{priority:"low"}),this.downcastDispatcher.on("selection",(e,t,i)=>{const n=i.writer,o=n.document.selection;for(const e of o.getRanges())e.isCollapsed&&e.end.parent.isAttached()&&i.writer.mergeAttributes(e.start);n.setSelection(null)},{priority:"high"}),this.downcastDispatcher.on("selection",(e,t,i)=>{const n=t.selection;if(!n.isCollapsed&&i.consumable.consume(n,"selection")){const o=[];for(const e of n.getRanges()){const t=i.mapper.toViewRange(e);o.push(t)}i.writer.setSelection(o,{backward:n.isBackward})}},{priority:"low"}),this.downcastDispatcher.on("selection",(e,t,i)=>{const n=t.selection;if(n.isCollapsed&&i.consumable.consume(n,"selection")){const o=i.writer,r=n.getFirstPosition(),s=i.mapper.toViewPosition(r),a=o.breakAttributes(s);o.setSelection(a)}},{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(e=>{if("$graveyard"==e.rootName)return null;const t=new zi(this.view.document,e.name);return t.rootName=e.rootName,this.mapper.bindElements(e,t),t})}destroy(){this.view.destroy(),this.stopListening()}}Me(Qr,Ce);class Jr{constructor(){this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){const i=this.get(e);if(!i)throw new p.a("commandcollection-command-not-found",this,{commandName:e});return i.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}class Zr{constructor(){this._consumables=new Map}add(e,t){let i;e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):(this._consumables.has(e)?i=this._consumables.get(e):(i=new Xr(e),this._consumables.set(e,i)),i.add(t))}test(e,t){const i=this._consumables.get(e);return void 0===i?null:e.is("$text")||e.is("documentFragment")?i:i.test(t)}consume(e,t){return!!this.test(e,t)&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0)}revert(e,t){const i=this._consumables.get(e);void 0!==i&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):i.revert(t))}static consumablesFromElement(e){const t={element:e,name:!0,attributes:[],classes:[],styles:[]},i=e.getAttributeKeys();for(const n of i)"style"!=n&&"class"!=n&&t.attributes.push(n);for(const o of e.getClassNames())t.classes.push(o);for(const r of e=e.getStyleNames())t.styles.push(r);return t}static createFrom(e,t){if(t=t||new Zr(e),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,Zr.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(const i of e.getChildren())t=Zr.createFrom(i,t);return t}}class Xr{constructor(e){this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(const t in this._consumables)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const i in this._consumables)if(i in e){var t=this._test(i,e[i]);if(!0!==t)return t}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(const t in this._consumables)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(const t in this._consumables)t in e&&this._revert(t,e[t])}_add(e,t){const i=ae(t)?t:[t],n=this._consumables[e];for(const t of i){if("attributes"===e&&("class"===t||"style"===t))throw new p.a("viewconsumable-invalid-attribute",this);if(n.set(t,!0),"styles"===e)for(const e of this.element.document.stylesProcessor.getRelatedStyles(t))n.set(e,!0)}}_test(e,t){const i=ae(t)?t:[t],n=this._consumables[e];for(const t of i)if("attributes"!==e||"class"!==t&&"style"!==t){const e=n.get(t);if(void 0===e)return null;if(!e)return!1}else{const e="class"==t?"classes":"styles",i=this._test(e,[...this._consumables[e].keys()]);if(!0!==i)return i}return!0}_consume(e,t){const i=ae(t)?t:[t],n=this._consumables[e];for(const t of i)if("attributes"!==e||"class"!==t&&"style"!==t){if(n.set(t,!1),"styles"==e)for(const e of this.element.document.stylesProcessor.getRelatedStyles(t))n.set(e,!1)}else{const e="class"==t?"classes":"styles";this._consume(e,[...this._consumables[e].keys()])}}_revert(e,t){const i=ae(t)?t:[t],n=this._consumables[e];for(const t of i)if("attributes"!==e||"class"!==t&&"style"!==t)!1===n.get(t)&&n.set(t,!0);else{const e="class"==t?"classes":"styles";this._revert(e,[...this._consumables[e].keys()])}}}class es{constructor(){this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,t)=>{t[0]=new ts(t[0])},{priority:"highest"}),this.on("checkChild",(e,t)=>{t[0]=new ts(t[0]),t[1]=this.getDefinition(t[1])},{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new p.a("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new p.a("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){return e="string"==typeof e?e:e.is&&(e.is("$text")||e.is("$textProxy"))?"$text":e.name,this.getDefinitions()[e]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){return!(!(e=this.getDefinition(e))||!e.isBlock)}isLimit(e){return!(!(e=this.getDefinition(e))||!e.isLimit&&!e.isObject)}isObject(e){return!!(e=this.getDefinition(e))&&!!(e.isObject||e.isLimit&&e.isSelectable&&e.isContent)}isInline(e){return!(!(e=this.getDefinition(e))||!e.isInline)}isSelectable(e){return!(!(e=this.getDefinition(e))||!e.isSelectable&&!e.isObject)}isContent(e){return!(!(e=this.getDefinition(e))||!e.isContent&&!e.isObject)}checkChild(e,t){return!!t&&this._checkContextMatch(t,e)}checkAttribute(e,t){const i=this.getDefinition(e.last);return!!i&&i.allowAttributes.includes(t)}checkMerge(e,t=null){if(e instanceof gr){const t=e.nodeBefore,i=e.nodeAfter;if(!(t instanceof dr))throw new p.a("schema-check-merge-no-element-before",this);if(!(i instanceof dr))throw new p.a("schema-check-merge-no-element-after",this);return this.checkMerge(t,i)}for(const n of t.getChildren())if(!this.checkChild(e,n))return!1;return!0}addChildCheck(n){this.on("checkChild",(e,[t,i])=>{!i||"boolean"==typeof(i=n(t,i))&&(e.stop(),e.return=i)},{priority:"high"})}addAttributeCheck(n){this.on("checkAttribute",(e,[t,i])=>{"boolean"==typeof(i=n(t,i))&&(e.stop(),e.return=i)},{priority:"high"})}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||{}}getLimitElement(e){let t;for(t=e instanceof gr?e.parent:(e instanceof br?[e]:Array.from(e.getRanges())).reduce((e,t)=>(t=t.getCommonAncestor(),e?e.getCommonAncestor(t,{includeSelf:!0}):t),null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed){var i=[...e.getFirstPosition().getAncestors(),new ar("",e.getAttributes())];return this.checkAttribute(i,t)}for(const n of e=e.getRanges())for(const o of n)if(this.checkAttribute(o.item,t))return!0;return!1}*getValidRanges(e,t){for(const i of e=function*(e){for(const t of e)yield*t.getMinimalFlatRanges()}(e))yield*this._getValidRangesForRange(i,t)}getNearestSelectionRange(e,t="both"){if(this.checkChild(e,"$text"))return new br(e);let i,n;var o=e.getAncestors().reverse().find(e=>this.isLimit(e))||e.root;"both"!=t&&"backward"!=t||(i=new hr({boundaries:br._createIn(o),startPosition:e,direction:"backward"})),"both"!=t&&"forward"!=t||(n=new hr({boundaries:br._createIn(o),startPosition:e}));for(const e of function*(e,t){let i=!1;for(;!i;){if(i=!0,e){const t=e.next();t.done||(i=!1,yield{walker:e,value:t.value})}if(t){const e=t.next();e.done||(i=!1,yield{walker:t,value:e.value})}}}(i,n)){const t=e.walker==i?"elementEnd":"elementStart",n=e.value;if(n.type==t&&this.isObject(n.item))return br._createOn(n.item);if(this.checkChild(n.nextPosition,"$text"))return new br(n.nextPosition)}return null}findAllowedParent(e,t){let i=e.parent;for(;i;){if(this.checkChild(i,t))return i;if(this.isLimit(i))return null;i=i.parent}return null}removeDisallowedAttributes(e,t){for(const i of e)if(i.is("$text"))os(this,i,t);else{const e=br._createIn(i).getPositions();for(const n of e)os(this,n.nodeBefore||n.parent,t)}}createContext(e){return new ts(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const t={},i=this._sourceDefinitions,e=Object.keys(i);for(const r of e)t[r]=(n=i[r],r,function(e,t){for(const i of e){const e=Object.keys(i).filter(e=>e.startsWith("is"));for(const n of e)t[n]=i[n]}}(n,o={name:r,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],allowChildren:[],inheritTypesFrom:[]}),is(n,o,"allowIn"),is(n,o,"allowContentOf"),is(n,o,"allowWhere"),is(n,o,"allowAttributes"),is(n,o,"allowAttributesOf"),is(n,o,"allowChildren"),is(n,o,"inheritTypesFrom"),function(e,t){for(const i of e){const e=i.inheritAllFrom;e&&(t.allowContentOf.push(e),t.allowWhere.push(e),t.allowAttributesOf.push(e),t.inheritTypesFrom.push(e))}}(n,o),o);var n,o;for(const i of e)!function(e,t){const i=e[t];for(const n of i.allowChildren){const i=e[n];i&&i.allowIn.push(t)}i.allowChildren.length=0}(t,i);for(const i of e)!function(e,t){for(const n of e[t].allowContentOf)e[n]&&!function(e){const t=e[n];return i=e,Object.keys(i).map(e=>i[e]).filter(e=>e.allowIn.includes(t.name));var i}(e).forEach(e=>{e.allowIn.push(t)});delete e[t].allowContentOf}(t,i);for(const i of e)!function(e,t){for(const n of e[t].allowWhere){var i=e[n];i&&(i=i.allowIn,e[t].allowIn.push(...i))}delete e[t].allowWhere}(t,i);for(const i of e)(function(e,t){for(const n of e[t].allowAttributesOf){var i=e[n];i&&(i=i.allowAttributes,e[t].allowAttributes.push(...i))}delete e[t].allowAttributesOf})(t,i),function(e,t){const i=e[t];for(const t of i.inheritTypesFrom){var n=e[t];if(n){const e=Object.keys(n).filter(e=>e.startsWith("is"));for(const t of e)t in i||(i[t]=n[t])}}delete i.inheritTypesFrom}(t,i);for(const i of e)(function(t,e){const i=t[e],n=i.allowIn.filter(e=>t[e]);i.allowIn=Array.from(new Set(n))})(t,i),function(e,t){for(const i of e[t].allowIn)e[i].allowChildren.push(t)}(t,i),function(){const e=t[i];e.allowAttributes=Array.from(new Set(e.allowAttributes))}();this._compiledDefinitions=t}_checkContextMatch(e,t,i=t.length-1){var n=t.getItem(i);if(e.allowIn.includes(n.name)){if(0==i)return!0;{const e=this.getDefinition(n);return this._checkContextMatch(e,t,i-1)}}return!1}*_getValidRangesForRange(e,t){let i=e.start,n=e.start;for(const o of e.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(br._createIn(o),t)),this.checkAttribute(o,t)||(i.isEqual(n)||(yield new br(i,n)),i=gr._createAfter(o)),n=gr._createAfter(o);i.isEqual(n)||(yield new br(i,n))}}Me(es,Ce);class ts{constructor(e){if(e instanceof ts)return e;"string"==typeof e?e=[e]:Array.isArray(e)||(e=e.getAncestors({includeSelf:!0})),this._items=e.map(ns)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const t=new ts([e]);return t._items=[...this._items,...t._items],t}getItem(e){return this._items[e]}*getNames(){yield*this._items.map(e=>e.name)}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function is(e,t,i){for(const n of e)"string"==typeof n[i]?t[i].push(n[i]):Array.isArray(n[i])&&t[i].push(...n[i])}function ns(t){return"string"==typeof t||t.is("documentFragment")?{name:"string"==typeof t?t:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:t.is("element")?t.name:"$text",*getAttributeKeys(){yield*t.getAttributeKeys()},getAttribute:e=>t.getAttribute(e)}}function os(e,t,i){for(const n of t.getAttributeKeys())e.checkAttribute(t,n)||i.removeAttribute(n,t)}class rs{constructor(e={}){this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this.conversionApi=Object.assign({},e),this.conversionApi.convertItem=this._convertItem.bind(this),this.conversionApi.convertChildren=this._convertChildren.bind(this),this.conversionApi.safeInsert=this._safeInsert.bind(this),this.conversionApi.updateConversionResult=this._updateConversionResult.bind(this),this.conversionApi.splitToAllowedParent=this._splitToAllowedParent.bind(this),this.conversionApi.getSplitParts=this._getSplitParts.bind(this)}convert(e,t,i=["$root"]){this.fire("viewCleanup",e),this._modelCursor=function(e,t){let i;for(const o of new ts(e)){const e={};for(const t of o.getAttributeKeys())e[t]=o.getAttribute(t);var n=t.createElement(o.name,e);i&&t.append(n,i),i=gr._createAt(n,0)}return i}(i,t),this.conversionApi.writer=t,this.conversionApi.consumable=Zr.createFrom(e),this.conversionApi.store={};const{modelRange:n}=this._convertItem(e,this._modelCursor),o=t.createDocumentFragment();if(n){this._removeEmptyElements();for(const e of Array.from(this._modelCursor.parent.getChildren()))t.append(e,o);o.markers=function(e,t){const i=new Set,n=new Map,o=br._createIn(e).getItems();for(const e of o)"$marker"==e.name&&i.add(e);for(const e of i){const i=e.getAttribute("data-name"),o=t.createPositionBefore(e);n.has(i)?n.get(i).end=o.clone():n.set(i,new br(o.clone())),t.remove(e)}return n}(o,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(e,t){if(t=Object.assign({viewItem:e,modelCursor:t,modelRange:null}),e.is("element")?this.fire("element:"+e.name,t,this.conversionApi):e.is("$text")?this.fire("text",t,this.conversionApi):this.fire("documentFragment",t,this.conversionApi),t.modelRange&&!(t.modelRange instanceof br))throw new p.a("view-conversion-dispatcher-incorrect-result",this);return{modelRange:t.modelRange,modelCursor:t.modelCursor}}_convertChildren(e,t){let i=t.is("position")?t:gr._createAt(t,0);const n=new br(i);for(const t of Array.from(e.getChildren())){const e=this._convertItem(t,i);e.modelRange instanceof br&&(n.end=e.modelRange.end,i=e.modelCursor)}return{modelRange:n,modelCursor:i}}_safeInsert(e,t){return!!(t=this._splitToAllowedParent(e,t))&&(this.conversionApi.writer.insert(e,t.position),!0)}_updateConversionResult(e,t){const i=this._getSplitParts(e),n=this.conversionApi.writer;t.modelRange||(t.modelRange=n.createRange(n.createPositionBefore(e),n.createPositionAfter(i[i.length-1]))),e=this._cursorParents.get(e),t.modelCursor=e?n.createPositionAt(e,0):t.modelRange.end}_splitToAllowedParent(e,t){const{schema:i,writer:n}=this.conversionApi;let o=i.findAllowedParent(t,e);if(o){if(o===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return Fr(t,e,i)?{position:Hr(t,n)}:null;const r=this.conversionApi.writer.split(t,o),s=[];for(const e of r.range.getWalker())if("elementEnd"==e.type)s.push(e.item);else{const a=s.pop(),i=e.item;this._registerSplitPair(a,i)}return t=r.range.end.parent,this._cursorParents.set(e,t),{position:r.position,cursorParent:t}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);const i=this._splitParts.get(e);this._splitParts.set(t,i),i.push(t)}_getSplitParts(e){return this._splitParts.has(e)?this._splitParts.get(e):[e]}_removeEmptyElements(){let e=!1;for(const t of this._splitParts.keys())t.isEmpty&&(this.conversionApi.writer.remove(t),this._splitParts.delete(t),e=!0);e&&this._removeEmptyElements()}}Me(rs,s);class ss{getHtml(e){const t=document.implementation.createHTMLDocument("").createElement("div");return t.appendChild(e),t.innerHTML}}class as{constructor(e){this._domParser=new DOMParser,this._domConverter=new Jn(e,{blockFillerMode:"nbsp"}),this._htmlWriter=new ss}toData(e){return e=this._domConverter.viewToDom(e,document),this._htmlWriter.getHtml(e)}toView(e){return e=this._toDom(e),this._domConverter.domToView(e)}registerRawContentMatcher(e){this._domConverter.registerRawContentMatcher(e)}useFillerType(e){this._domConverter.blockFillerMode="marked"==e?"markedNbsp":"nbsp"}_toDom(e){const t=this._domParser.parseFromString(e,"text/html"),i=t.createDocumentFragment();let n=t.firstChild;for(;!n.isSameNode(t.documentElement);){const e=n;n=n.nextSibling,e.nodeType==Node.COMMENT_NODE&&i.appendChild(e)}for(var o=t.body.childNodes;0<o.length;)i.appendChild(o[0]);return i}}class ls{constructor(e,t){this.model=e,this.mapper=new wr,this.downcastDispatcher=new vr({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",(e,t,i)=>{if(i.consumable.consume(t.item,"insert")){const n=i.writer,o=i.mapper.toViewPosition(t.range.start),r=n.createText(t.item.data);n.insert(o,r)}},{priority:"lowest"}),this.upcastDispatcher=new rs({schema:e.schema}),this.viewDocument=new Ki(t),this.stylesProcessor=t,this.htmlProcessor=new as(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new bn(this.viewDocument),this.upcastDispatcher.on("text",(e,t,{schema:i,consumable:n,writer:o})=>{let r=t.modelCursor;if(n.test(t.viewItem)){if(!i.checkChild(r,"$text")){if(!Fr(r,"$text",i))return;r=Hr(r,o)}n.consume(t.viewItem),n=o.createText(t.viewItem.data),o.insert(n,r),t.modelRange=o.createRange(r,r.getShiftedBy(n.offsetSize)),t.modelCursor=t.modelRange.end}},{priority:"lowest"}),this.upcastDispatcher.on("element",(e,t,i)=>{if(!t.modelRange&&i.consumable.consume(t.viewItem,{name:!0})){const{modelRange:e,modelCursor:n}=i.convertChildren(t.viewItem,t.modelCursor);t.modelRange=e,t.modelCursor=n}},{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",(e,t,i)=>{if(!t.modelRange&&i.consumable.consume(t.viewItem,{name:!0})){const{modelRange:e,modelCursor:n}=i.convertChildren(t.viewItem,t.modelCursor);t.modelRange=e,t.modelCursor=n}},{priority:"lowest"}),this.decorate("init"),this.decorate("set"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange("transparent",Br)},{priority:"lowest"})}get(e={}){var{rootName:t="main",trim:i="empty"}=e;if(!this._checkIfRootsExists([t]))throw new p.a("datacontroller-get-non-existent-root",this);return t=this.model.document.getRoot(t),"empty"!==i||this.model.hasContent(t,{ignoreWhitespaces:!0})?this.stringify(t,e):""}stringify(e,t={}){return t=this.toView(e,t),this.processor.toData(t)}toView(e,t={}){var i=this.viewDocument,n=this._viewWriter;this.mapper.clearBindings();var o=br._createIn(e),i=new fn(i);this.mapper.bindElements(e,i),this.downcastDispatcher.conversionApi.options=t,this.downcastDispatcher.convertInsert(o,n);for(const[r,t]of e=e.is("documentFragment")?Array.from(e.markers):function(e){const t=[],i=e.root.document;if(!i)return[];const n=br._createIn(e);for(const e of i.model.markers){const i=e.getRange(),r=i.isCollapsed,s=i.start.isEqual(n.start)||i.end.isEqual(n.end);var o;r&&s?t.push([e.name,i]):(o=n.getIntersection(i))&&t.push([e.name,o])}return t}(e))this.downcastDispatcher.convertMarkerAdd(r,t,n);return delete this.downcastDispatcher.conversionApi.options,i}init(e){if(this.model.document.version)throw new p.a("datacontroller-init-document-not-empty",this);let n={};if("string"==typeof e?n.main=e:n=e,!this._checkIfRootsExists(Object.keys(n)))throw new p.a("datacontroller-init-non-existent-root",this);return this.model.enqueueChange("transparent",e=>{for(const i of Object.keys(n)){var t=this.model.document.getRoot(i);e.insert(this.parse(n[i],t),t,0)}}),Promise.resolve()}set(e,t={}){let n={};if("string"==typeof e?n.main=e:n=e,!this._checkIfRootsExists(Object.keys(n)))throw new p.a("datacontroller-set-non-existent-root",this);t=t.batchType||"default",this.model.enqueueChange(t,e=>{e.setSelection(null),e.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const i of Object.keys(n)){var t=this.model.document.getRoot(i);e.remove(e.createRangeIn(t)),e.insert(this.parse(n[i],t),t,0)}})}parse(e,t="$root"){return e=this.processor.toView(e),this.toModel(e,t)}toModel(t,i="$root"){return this.model.change(e=>this.upcastDispatcher.convert(t,e,i))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const t of e)if(!this.model.document.getRootNames().includes(t))return!1;return!0}}Me(ls,Ce);class cs{constructor(e,t){this._helpers=new Map,this._downcast=Ut(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=Ut(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){var i=this._downcast.includes(t);if(!this._upcast.includes(t)&&!i)throw new p.a("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:i})}for(e){if(!this._helpers.has(e))throw new p.a("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(var{model:t,view:i}of ds(e))this.for("upcast").elementToElement({model:t,view:i,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(var{model:t,view:i}of ds(e))this.for("upcast").elementToAttribute({view:i,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(var{model:t,view:i}of ds(e))this.for("upcast").attributeToAttribute({view:i,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:i}){if(this._helpers.has(e))throw new p.a("conversion-group-exists",this);t=new(i?Rr:Ur)(t),this._helpers.set(e,t)}}function*ds(e){if(e.model.values)for(const t of e.model.values)yield*hs({key:e.model.key,value:t},e.view[t],e.upcastAlso?e.upcastAlso[t]:void 0);else yield*hs(e.model,e.view,e.upcastAlso)}function*hs(e,t,i){if(yield{model:e,view:t},i)for(const t of Ut(i))yield{model:e,view:t}}class us{constructor(e="default"){this.operations=[],this.type=e}get baseVersion(){for(const e of this.operations)if(null!==e.baseVersion)return e.baseVersion;return null}addOperation(e){return(e.batch=this).operations.push(e),e}}class gs{constructor(e){this.baseVersion=e,this.isDocumentOperation=null!==this.baseVersion,this.batch=null}_validate(){}toJSON(){const e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e){return new this(e.baseVersion)}}class ms{constructor(e){this.markers=new Map,this._children=new cr,e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}is(e){return"documentFragment"===e||"model:documentFragment"===e}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(const i of e)t=t.getChild(t.offsetToIndex(i));return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const t of this._children)e.push(t.toJSON());return e}static fromJSON(e){const t=[];for(const i of e)i.name?t.push(dr.fromJSON(i)):t.push(ar.fromJSON(i));return new ms(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){for(const e of t="string"==typeof t?[new ar(t)]:(Bt(t)||(t=[t]),Array.from(t).map(e=>"string"==typeof e?new ar(e):e instanceof lr?new ar(e.data,e.getAttributes()):e)))null!==e.parent&&e._remove(),e.parent=this;this._children._insertNodes(e,t)}_removeChildren(e,t=1){t=this._children._removeNodes(e,t);for(const e of t)e.parent=null;return t}}function ps(e,t){const i=(t=ws(t)).reduce((e,t)=>e+t.offsetSize,0),n=e.parent;_s(e);var o=e.index;return n._insertChild(o,t),ks(n,o+t.length),ks(n,o),new br(e,e.getShiftedBy(i))}function fs(e){if(!e.isFlat)throw new p.a("operation-utils-remove-range-not-flat",this);const t=e.start.parent;_s(e.start),_s(e.end);var i=t._removeChildren(e.start.index,e.end.index-e.start.index);return ks(t,e.start.index),i}function bs(e,t){if(!e.isFlat)throw new p.a("operation-utils-move-range-not-flat",this);var i=fs(e);return ps(t=t._getTransformedByDeletion(e.start,e.end.offset-e.start.offset),i)}function ws(t){const i=[];t instanceof Array||(t=[t]);for(let e=0;e<t.length;e++)if("string"==typeof t[e])i.push(new ar(t[e]));else if(t[e]instanceof lr)i.push(new ar(t[e].data,t[e].getAttributes()));else if(t[e]instanceof ms||t[e]instanceof cr)for(const n of t[e])i.push(n);else t[e]instanceof sr&&i.push(t[e]);for(let e=1;e<i.length;e++){const o=i[e],r=i[e-1];o instanceof ar&&r instanceof ar&&vs(o,r)&&(i.splice(e-1,2,new ar(r.data+o.data,r.getAttributes())),e--)}return i}function ks(e,t){const i=e.getChild(t-1),n=e.getChild(t);var o;i&&n&&i.is("$text")&&n.is("$text")&&vs(i,n)&&(o=new ar(i.data+n.data,i.getAttributes()),e._removeChildren(t-1,2),e._insertChild(t-1,o))}function _s(e){const t=e.textNode,i=e.parent;var n,o;t&&(o=e.offset-t.startOffset,n=t.index,i._removeChildren(n,1),e=new ar(t.data.substr(0,o),t.getAttributes()),o=new ar(t.data.substr(o),t.getAttributes()),i._insertChild(n,[e,o]))}function vs(e,t){const i=e.getAttributes(),n=t.getAttributes();for(const e of i){if(e[1]!==t.getAttribute(e[0]))return;n.next()}return n.next().done}function ys(e,t){return co(e,t)}class xs extends gs{constructor(e,t,i,n,o){super(o),this.range=e.clone(),this.key=t,this.oldValue=void 0===i?null:i,this.newValue=void 0===n?null:n}get type(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}clone(){return new xs(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new xs(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new p.a("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(null!==this.oldValue&&!ys(e.getAttribute(this.key),this.oldValue))throw new p.a("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&e.hasAttribute(this.key))throw new p.a("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){ys(this.oldValue,this.newValue)||function(e,t,i){_s(e.start),_s(e.end);for(const n of e.getItems({shallow:!0})){const e=n.is("$textProxy")?n.textNode:n;null!==i?e._setAttribute(t,i):e._removeAttribute(t),ks(e.parent,e.index)}ks(e.end.parent,e.end.index)}(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new xs(br.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}class As extends gs{constructor(e,t){super(null),this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new p.a("detach-operation-on-document-node",this)}_execute(){fs(br._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class Cs extends gs{constructor(e,t,i,n){super(n),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNone"}get type(){return"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){var e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new this.constructor(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent,i=this.sourcePosition.offset,n=this.targetPosition.offset;if(i+this.howMany>e.maxOffset)throw new p.a("move-operation-nodes-do-not-exist",this);if(e===t&&i<n&&n<i+this.howMany)throw new p.a("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==Kt(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){const e=this.sourcePosition.path.length-1;if(this.targetPosition.path[e]>=i&&this.targetPosition.path[e]<i+this.howMany)throw new p.a("move-operation-node-into-itself",this)}}_execute(){bs(br._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){var i=gr.fromJSON(e.sourcePosition,t),t=gr.fromJSON(e.targetPosition,t);return new this(i,e.howMany,t,e.baseVersion)}}class Ts extends gs{constructor(e,t,i){super(i),this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new cr(ws(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}clone(){const e=new cr([...this.nodes].map(e=>e._clone(!0))),t=new Ts(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}getReversed(){var e=this.position.root.document.graveyard,e=new gr(e,[0]);return new Cs(this.position,this.nodes.maxOffset,e,this.baseVersion+1)}_validate(){var e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new p.a("insert-operation-position-invalid",this)}_execute(){var e=this.nodes;this.nodes=new cr([...e].map(e=>e._clone(!0))),ps(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){const i=[];for(const t of e.nodes)t.name?i.push(dr.fromJSON(t)):i.push(ar.fromJSON(t));const n=new Ts(gr.fromJSON(e.position,t),i,e.baseVersion);return n.shouldReceiveAttributes=e.shouldReceiveAttributes,n}}class Es extends gs{constructor(e,t,i,n,o,r){super(r),this.name=e,this.oldRange=t?t.clone():null,this.newRange=i?i.clone():null,this.affectsData=o,this._markers=n}get type(){return"marker"}clone(){return new Es(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Es(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){var e=this.newRange?"_set":"_remove";this._markers[e](this.name,this.newRange,!0,this.affectsData)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new Es(e.name,e.oldRange?br.fromJSON(e.oldRange,t):null,e.newRange?br.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}}class Is extends gs{constructor(e,t,i,n){super(n),this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=i}get type(){return"rename"}clone(){return new Is(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Is(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){var e=this.position.nodeAfter;if(!(e instanceof dr))throw new p.a("rename-operation-wrong-position",this);if(e.name!==this.oldName)throw new p.a("rename-operation-wrong-name",this)}_execute(){this.position.nodeAfter.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new Is(gr.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}class Ss extends gs{constructor(e,t,i,n,o){super(o),this.root=e,this.key=t,this.oldValue=i,this.newValue=n}get type(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}clone(){return new Ss(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Ss(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new p.a("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new p.a("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new p.a("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(!t.getRoot(e.root))throw new p.a("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new Ss(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class Ps extends gs{constructor(e,t,i,n,o){super(o),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=n.clone()}get type(){return"merge"}get deletionPosition(){return new gr(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){var e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new br(this.sourcePosition,e)}clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){var e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),t=new gr(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new Ms(e,this.howMany,t,this.graveyardPosition,this.baseVersion+1)}_validate(){var e=this.sourcePosition.parent,t=this.targetPosition.parent;if(!e.parent)throw new p.a("merge-operation-source-position-invalid",this);if(!t.parent)throw new p.a("merge-operation-target-position-invalid",this);if(this.howMany!=e.maxOffset)throw new p.a("merge-operation-how-many-invalid",this)}_execute(){var e=this.sourcePosition.parent;bs(br._createIn(e),this.targetPosition),bs(br._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){var i=gr.fromJSON(e.sourcePosition,t),n=gr.fromJSON(e.targetPosition,t),t=gr.fromJSON(e.graveyardPosition,t);return new this(i,e.howMany,n,t,e.baseVersion)}}class Ms extends gs{constructor(e,t,i,n,o){super(o),this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=i,this.graveyardPosition=n?n.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new gr(this.insertionPosition.root,e)}get movedRange(){var e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new br(this.splitPosition,e)}clone(){return new this.constructor(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){var e=this.splitPosition.root.document.graveyard,e=new gr(e,[0]);return new Ps(this.moveTargetPosition,this.howMany,this.splitPosition,e,this.baseVersion+1)}_validate(){var e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new p.a("split-operation-position-invalid",this);if(!e.parent)throw new p.a("split-operation-split-in-root",this);if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new p.a("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new p.a("split-operation-graveyard-position-invalid",this)}_execute(){const e=this.splitPosition.parent;var t;this.graveyardPosition?bs(br._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition):(t=e._clone(),ps(this.insertionPosition,t)),bs(new br(gr._createAt(e,this.splitPosition.offset),gr._createAt(e,e.maxOffset)),this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const t=e.path.slice(0,-1);return t[t.length-1]++,new gr(e.root,t,"toPrevious")}static fromJSON(e,t){var i=gr.fromJSON(e.splitPosition,t),n=gr.fromJSON(e.insertionPosition,t),t=e.graveyardPosition?gr.fromJSON(e.graveyardPosition,t):null;return new this(i,e.howMany,n,t,e.baseVersion)}}class Ns extends dr{constructor(e,t,i="main"){super(t),this._document=e,this.rootName=i}get document(){return this._document}is(e,t){return t?t===this.name&&("rootElement"===e||"model:rootElement"===e||"element"===e||"model:element"===e):"rootElement"===e||"model:rootElement"===e||"element"===e||"model:element"===e||"node"===e||"model:node"===e}toJSON(){return this.rootName}}class Rs{constructor(e,t){this.model=e,this.batch=t}createText(e,t){return new ar(e,t)}createElement(e,t){return new dr(e,t)}createDocumentFragment(){return new ms}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,i=0){if(this._assertWriterUsedCorrectly(),!(e instanceof ar&&""==e.data)){var n=gr._createAt(t,i);if(e.parent){if(Ls(e.root,n.root))return void this.move(br._createOn(e),n);if(e.root.document)throw new p.a("model-writer-insert-forbidden-move",this);this.remove(e)}const o=n.root.document?n.root.document.version:null,r=new Ts(n,e,o);if(e instanceof ar&&(r.shouldReceiveAttributes=!0),this.batch.addOperation(r),this.model.applyOperation(r),e instanceof ms)for(const[t,i]of e.markers){const e=gr._createAt(i.root,0),s={range:new br(i.start._getCombined(e,n),i.end._getCombined(e,n)),usingOperation:!0,affectsData:!0};this.model.markers.has(t)?this.updateMarker(t,s):this.addMarker(t,s)}}}insertText(e,t,i,n){t instanceof ms||t instanceof dr||t instanceof gr?this.insert(this.createText(e),t,i):this.insert(this.createText(e,t),i,n)}insertElement(e,t,i,n){t instanceof ms||t instanceof dr||t instanceof gr?this.insert(this.createElement(e),t,i):this.insert(this.createElement(e,t),i,n)}append(e,t){this.insert(e,t,"end")}appendText(e,t,i){t instanceof ms||t instanceof dr?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),i,"end")}appendElement(e,t,i){t instanceof ms||t instanceof dr?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),i,"end")}setAttribute(e,t,i){if(this._assertWriterUsedCorrectly(),i instanceof br){var n=i.getMinimalFlatRanges();for(const i of n)Os(this,e,t,i)}else zs(this,e,t,i)}setAttributes(e,t){for(var[i,n]of ei(e))this.setAttribute(i,n,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof br){var i=t.getMinimalFlatRanges();for(const t of i)Os(this,e,null,t)}else zs(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();var t=e=>{for(const t of e.getAttributeKeys())this.removeAttribute(t,e)};if(e instanceof br)for(const i of e.getItems())t(i);else t(e)}move(e,t,i){if(this._assertWriterUsedCorrectly(),!(e instanceof br))throw new p.a("writer-move-invalid-range",this);if(!e.isFlat)throw new p.a("writer-move-range-not-flat",this);const n=gr._createAt(t,i);if(!n.isEqual(e.start)){if(this._addOperationForAffectedMarkers("move",e),!Ls(e.root,n.root))throw new p.a("writer-move-different-document",this);i=e.root.document?e.root.document.version:null,i=new Cs(e.start,e.end.offset-e.start.offset,n,i),this.batch.addOperation(i),this.model.applyOperation(i)}}remove(e){this._assertWriterUsedCorrectly();for(const t of e=(e instanceof br?e:br._createOn(e)).getMinimalFlatRanges().reverse())this._addOperationForAffectedMarkers("move",t),function(e,t,i,n){let o;if(e.root.document){const i=n.document,r=new gr(i.graveyard,[0]);o=new Cs(e,t,r,i.version)}else o=new As(e,t);i.addOperation(o),n.applyOperation(o)}(t.start,t.end.offset-t.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();var t=e.nodeBefore,i=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof dr))throw new p.a("writer-merge-no-element-before",this);if(!(i instanceof dr))throw new p.a("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,i){return this.model.createPositionFromPath(e,t,i)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(e,t,i){return this.model.createSelection(e,t,i)}_mergeDetached(e){var t=e.nodeBefore,e=e.nodeAfter;this.move(br._createIn(e),gr._createAt(t,"end")),this.remove(e)}_merge(e){var t=gr._createAt(e.nodeBefore,"end"),i=gr._createAt(e.nodeAfter,0),n=e.root.document.graveyard,o=new gr(n,[0]),n=e.root.document.version,n=new Ps(i,e.nodeAfter.maxOffset,t,o,n);this.batch.addOperation(n),this.model.applyOperation(n)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof dr))throw new p.a("writer-rename-not-element-instance",this);var i=e.root.document?e.root.document.version:null,i=new Is(gr._createBefore(e),e.name,t,i);this.batch.addOperation(i),this.model.applyOperation(i)}split(e,t){this._assertWriterUsedCorrectly();let i,n,o=e.parent;if(!o.parent)throw new p.a("writer-split-element-no-parent",this);if(t=t||o.parent,!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new p.a("writer-split-invalid-limit-element",this);do{const t=o.root.document?o.root.document.version:null,r=o.maxOffset-e.offset,s=Ms.getInsertionPosition(e),a=new Ms(e,r,s,null,t);this.batch.addOperation(a),this.model.applyOperation(a),i||n||(i=o,n=e.parent.nextSibling),o=(e=this.createPositionAfter(e.parent)).parent}while(o!==t);return{position:e,range:new br(gr._createAt(i,"end"),gr._createAt(n,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new p.a("writer-wrap-range-not-flat",this);if(0<(t=t instanceof dr?t:new dr(t)).childCount)throw new p.a("writer-wrap-element-not-empty",this);if(null!==t.parent)throw new p.a("writer-wrap-element-attached",this);this.insert(t,e.start),e=new br(e.start.getShiftedBy(1),e.end.getShiftedBy(1)),this.move(e,gr._createAt(t,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),null===e.parent)throw new p.a("writer-unwrap-element-no-parent",this);this.move(br._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||"boolean"!=typeof t.usingOperation)throw new p.a("writer-addmarker-no-usingoperation",this);var i=t.usingOperation,n=t.range,t=void 0!==t.affectsData&&t.affectsData;if(this.model.markers.has(e))throw new p.a("writer-addmarker-marker-exists",this);if(!n)throw new p.a("writer-addmarker-no-range",this);return i?(Ds(this,e,null,n,t),this.model.markers.get(e)):this.model.markers._set(e,n,i,t)}updateMarker(e,t){this._assertWriterUsedCorrectly();const i="string"==typeof e?e:e.name,n=this.model.markers.get(i);if(!n)throw new p.a("writer-updatemarker-marker-not-exists",this);if(t){var o="boolean"==typeof t.usingOperation,r="boolean"==typeof t.affectsData,s=(r?t:n).affectsData;if(!o&&!t.range&&!r)throw new p.a("writer-updatemarker-wrong-options",this);e=n.getRange(),r=t.range||e,o&&t.usingOperation!==n.managedUsingOperations?t.usingOperation?Ds(this,i,null,r,s):(Ds(this,i,e,null,s),this.model.markers._set(i,r,void 0,s)):n.managedUsingOperations?Ds(this,i,e,r,s):this.model.markers._set(i,r,void 0,s)}else this.model.markers._refresh(n)}removeMarker(e){if(this._assertWriterUsedCorrectly(),e="string"==typeof e?e:e.name,!this.model.markers.has(e))throw new p.a("writer-removemarker-no-marker",this);const t=this.model.markers.get(e);t.managedUsingOperations?Ds(this,e,t.getRange(),null,t.affectsData):this.model.markers._remove(e)}setSelection(e,t,i){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(e,t,i)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._setSelectionAttribute(e,t);else for(const[t,i]of ei(e))this._setSelectionAttribute(t,i)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){const i=this.model.document.selection;var n;i.isCollapsed&&i.anchor.parent.isEmpty&&(n=Ir._getStoreAttributeKey(e),this.setAttribute(n,t,i.anchor.parent)),i._setAttribute(e,t)}_removeSelectionAttribute(e){const t=this.model.document.selection;var i;t.isCollapsed&&t.anchor.parent.isEmpty&&(i=Ir._getStoreAttributeKey(e),this.removeAttribute(i,t.anchor.parent)),t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new p.a("writer-incorrect-use",this)}_addOperationForAffectedMarkers(t,i){for(const o of this.model.markers)if(o.managedUsingOperations){var n=o.getRange();let e=!1;if("move"===t)e=i.containsPosition(n.start)||i.start.isEqual(n.start)||i.containsPosition(n.end)||i.end.isEqual(n.end);else{const t=i.nodeBefore,r=i.nodeAfter,s=n.start.parent==t&&n.start.isAtEnd,a=n.end.parent==r&&0==n.end.offset,l=n.end.nodeAfter==r,c=n.start.nodeAfter==r;e=s||a||l||c}e&&this.updateMarker(o.name,{range:n})}}}function Os(i,n,o,e){const r=i.model,s=r.document;let a,l,t,c=e.start;for(const i of e.getWalker({shallow:!0}))t=i.item.getAttribute(n),a&&l!=t&&(l!=o&&d(),c=a),a=i.nextPosition,l=t;function d(){var e=new br(c,a),t=e.root.document?s.version:null,t=new xs(e,n,l,o,t);i.batch.addOperation(t),r.applyOperation(t)}a instanceof gr&&a!=c&&l!=o&&d()}function zs(e,t,i,n){const o=e.model,r=o.document,s=n.getAttribute(t);let a,l;if(s!=i){if(n.root===n){const e=n.document?r.version:null;l=new Ss(n,t,s,i,e)}else{const o=(a=new br(gr._createBefore(n),e.createPositionAfter(n))).root.document?r.version:null;l=new xs(a,t,s,i,o)}e.batch.addOperation(l),o.applyOperation(l)}}function Ds(e,t,i,n,o){const r=e.model,s=r.document,a=new Es(t,i,n,r.markers,o,s.version);e.batch.addOperation(a),r.applyOperation(a)}function Ls(e,t){return e===t||e instanceof Ns&&t instanceof Ns}class Vs{constructor(e){this._markerCollection=e,this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null}get isEmpty(){return 0==this._changesInElement.size&&0==this._changedMarkers.size}refreshItem(e){if(!this._isInInsertedElement(e.parent)){this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize);e=br._createOn(e);for(const i of this._markerCollection.getMarkersIntersectingRange(e)){var t=i.getRange();this.bufferMarkerChange(i.name,t,t,i.affectsData)}this._cachedChanges=null}}bufferOperation(e){switch(e.type){case"insert":if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":for(const s of e.range.getItems({shallow:!0}))this._isInInsertedElement(s.parent)||this._markAttribute(s);break;case"remove":case"move":case"reinsert":if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;var t=this._isInInsertedElement(e.sourcePosition.parent),i=this._isInInsertedElement(e.targetPosition.parent);t||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),i||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);break;case"rename":if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);var n=br._createFromPositionAndShift(e.position,1);for(const e of this._markerCollection.getMarkersIntersectingRange(n)){var o=e.getRange();this.bufferMarkerChange(e.name,o,o,e.affectsData)}break;case"split":var r=e.splitPosition.parent;this._isInInsertedElement(r)||this._markRemove(r,e.splitPosition.offset,e.howMany),this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1);break;case"merge":n=e.sourcePosition.parent,this._isInInsertedElement(n.parent)||this._markRemove(n.parent,n.startOffset,1),r=e.graveyardPosition.parent,this._markInsert(r,e.graveyardPosition.offset,1),r=e.targetPosition.parent,this._isInInsertedElement(r)||this._markInsert(r,e.targetPosition.offset,n.maxOffset)}this._cachedChanges=null}bufferMarkerChange(e,t,i,n){const o=this._changedMarkers.get(e);o?(o.newRange=i,o.affectsData=n,null==o.oldRange&&null==o.newRange&&this._changedMarkers.delete(e)):this._changedMarkers.set(e,{oldRange:t,newRange:i,affectsData:n})}getMarkersToRemove(){const e=[];for(var[t,i]of this._changedMarkers)null!=i.oldRange&&e.push({name:t,range:i.oldRange});return e}getMarkersToAdd(){const e=[];for(var[t,i]of this._changedMarkers)null!=i.newRange&&e.push({name:t,range:i.newRange});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(e=>({name:e[0],data:{oldRange:e[1].oldRange,newRange:e[1].newRange}}))}hasDataChanges(){for(var[,e]of this._changedMarkers)if(e.affectsData)return!0;return 0<this._changesInElement.size}getChanges(n={includeChangesInGraveyard:!1}){if(this._cachedChanges)return(n.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges).slice();let o=[];for(const n of this._changesInElement.keys()){var e=this._changesInElement.get(n).sort((e,t)=>e.offset===t.offset?e.type!=t.type?"remove"==e.type?-1:1:0:e.offset<t.offset?-1:1),r=this._elementSnapshots.get(n),s=js(n.getChildren());let t=0,i=0;for(const c of function(t){const i=[];let n=0,o=0;for(const t of e){if(t.offset>n){for(let e=0;e<t.offset-n;e++)i.push("e");o+=t.offset-n}if("insert"==t.type){for(let e=0;e<t.howMany;e++)i.push("i");n=t.offset+t.howMany}else if("remove"==t.type){for(let e=0;e<t.howMany;e++)i.push("r");n=t.offset,o+=t.howMany}else i.push(..."a".repeat(t.howMany).split("")),n=t.offset+t.howMany,o+=t.howMany}if(o<t)for(let e=0;e<t-o-n;e++)i.push("e");return i}(r.length))if("i"===c)o.push(this._getInsertDiff(n,t,s[t].name)),t++;else if("r"===c)o.push(this._getRemoveDiff(n,t,r[i].name)),i++;else if("a"===c){var a=s[t].attributes,l=r[i].attributes;let e;if("$text"==s[t].name)e=new br(gr._createAt(n,t),gr._createAt(n,t+1));else{const o=n.offsetToIndex(t);e=new br(gr._createAt(n,t),gr._createAt(n.getChild(o),0))}o.push(...this._getAttributesDiff(e,l,a)),t++,i++}else t++,i++}o.sort((e,t)=>e.position.root!=t.position.root?e.position.root.rootName<t.position.root.rootName?-1:1:e.position.isEqual(t.position)?e.changeCount-t.changeCount:e.position.isBefore(t.position)?-1:1);for(let e=1,t=0;e<o.length;e++){const i=o[t],d=o[e],h="remove"==i.type&&"remove"==d.type&&"$text"==i.name&&"$text"==d.name&&i.position.isEqual(d.position),u="insert"==i.type&&"insert"==d.type&&"$text"==i.name&&"$text"==d.name&&i.position.parent==d.position.parent&&i.position.offset+i.length==d.position.offset,g="attribute"==i.type&&"attribute"==d.type&&i.position.parent==d.position.parent&&i.range.isFlat&&d.range.isFlat&&i.position.offset+i.length==d.position.offset&&i.attributeKey==d.attributeKey&&i.attributeOldValue==d.attributeOldValue&&i.attributeNewValue==d.attributeNewValue;h||u||g?(i.length++,g&&(i.range.end=i.range.end.getShiftedBy(1)),o[e]=null):t=e}o=o.filter(e=>e);for(const n of o)delete n.changeCount,"attribute"==n.type&&(delete n.position,delete n.length);return this._changeCount=0,this._cachedChangesWithGraveyard=o.slice(),this._cachedChanges=o.filter(Bs),n.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges}reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._cachedChanges=null}_markInsert(e,t,i){i={type:"insert",offset:t,howMany:i,count:this._changeCount++},this._markChange(e,i)}_markRemove(e,t,i){var n={type:"remove",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,n),this._removeAllNestedChanges(e,t,i)}_markAttribute(e){var t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshot(e);const i=this._getChangesForElement(e);this._handleChange(t,i),i.push(t);for(let e=0;e<i.length;e++)i[e].howMany<1&&(i.splice(e,1),e--)}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshot(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,js(e.getChildren()))}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const s of t){var i,n,o=e.offset+e.howMany,r=s.offset+s.howMany;if("insert"==e.type&&("insert"==s.type&&(e.offset<=s.offset?s.offset+=e.howMany:e.offset<r&&(s.howMany+=e.nodesToHandle,e.nodesToHandle=0)),"remove"==s.type&&e.offset<s.offset&&(s.offset+=e.howMany),"attribute"==s.type)&&(e.offset<=s.offset?s.offset+=e.howMany:e.offset<r&&(i=s.howMany,s.howMany=e.offset-s.offset,t.unshift({type:"attribute",offset:o,howMany:i-s.howMany,count:this._changeCount++}))),"remove"==e.type){if("insert"==s.type)if(o<=s.offset)s.offset-=e.howMany;else if(o<=r)if(e.offset<s.offset){const t=o-s.offset;s.offset=e.offset,s.howMany-=t,e.nodesToHandle-=t}else s.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=s.offset)e.nodesToHandle-=s.howMany,s.howMany=0;else if(e.offset<r){const t=r-e.offset;s.howMany-=t,e.nodesToHandle-=t}if("remove"==s.type&&(o<=s.offset?s.offset-=e.howMany:e.offset<s.offset&&(e.nodesToHandle+=s.howMany,s.howMany=0)),"attribute"==s.type)if(o<=s.offset)s.offset-=e.howMany;else if(e.offset<s.offset){const t=o-s.offset;s.offset=e.offset,s.howMany-=t}else e.offset<r&&(o<=r?(n=s.howMany,s.howMany=e.offset-s.offset,n=n-s.howMany-e.nodesToHandle,t.unshift({type:"attribute",offset:e.offset,howMany:n,count:this._changeCount++})):s.howMany-=r-e.offset)}if("attribute"==e.type){if("insert"==s.type)if(e.offset<s.offset&&o>s.offset){if(r<o){const e={type:"attribute",offset:r,howMany:o-r,count:this._changeCount++};this._handleChange(e,t),t.push(e)}e.nodesToHandle=s.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=s.offset&&e.offset<r&&(r<o?(e.nodesToHandle=o-r,e.offset=r):e.nodesToHandle=0);"remove"==s.type&&e.offset<s.offset&&o>s.offset&&(n={type:"attribute",offset:s.offset,howMany:o-s.offset,count:this._changeCount++},this._handleChange(n,t),t.push(n),e.nodesToHandle=s.offset-e.offset,e.howMany=e.nodesToHandle),"attribute"==s.type&&(e.offset>=s.offset&&o<=r?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=s.offset&&r<=o&&(s.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,i){return{type:"insert",position:gr._createAt(e,t),name:i,length:1,changeCount:this._changeCount++}}_getRemoveDiff(e,t,i){return{type:"remove",position:gr._createAt(e,t),name:i,length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,i){const n=[];i=new Map(i);for(var[o,r]of t){const t=i.has(o)?i.get(o):null;t!==r&&n.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:r,attributeNewValue:t,changeCount:this._changeCount++}),i.delete(o)}for(const[t,s]of i)n.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:t,attributeOldValue:null,attributeNewValue:s,changeCount:this._changeCount++});return n}_isInInsertedElement(e){var t=e.parent;if(!t)return!1;var i=this._changesInElement.get(t),n=e.startOffset;if(i)for(const e of i)if("insert"==e.type&&n>=e.offset&&n<e.offset+e.howMany)return!0;return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,i){const n=new br(gr._createAt(e,t),gr._createAt(e,t+i));for(const e of n.getItems({shallow:!0}))e.is("element")&&(this._elementSnapshots.delete(e),this._changesInElement.delete(e),this._removeAllNestedChanges(e,0,e.maxOffset))}}function js(e){const t=[];for(const i of e)if(i.is("$text"))for(let e=0;e<i.data.length;e++)t.push({name:"$text",attributes:new Map(i.getAttributes())});else t.push({name:i.name,attributes:new Map(i.getAttributes())});return t}function Bs(e){var t=e.position&&"$graveyard"==e.position.root.rootName,e=e.range&&"$graveyard"==e.range.root.rootName;return!t&&!e}class Fs{constructor(){this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set}addOperation(e){this._operations.includes(e)||this._operations.push(e)}getOperations(e=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY){const i=[];for(const n of this._operations)n.baseVersion>=e&&n.baseVersion<t&&i.push(n);return i}getOperation(e){for(const t of this._operations)if(t.baseVersion==e)return t}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}}function Hs(e,t){return(i=e.charAt(t-1))&&1==i.length&&/[\ud800-\udbff]/.test(i)&&(t=e.charAt(t))&&1==t.length&&/[\udc00-\udfff]/.test(t);var i}function Us(e,t){return(t=e.charAt(t))&&1==t.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(t)}class Ws{constructor(e){this.model=e,this.version=0,this.history=new Fs(this),this.selection=new Ir(this),this.roots=new Ft({idProperty:"rootName"}),this.differ=new Vs(e.markers),this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root","$graveyard"),this.listenTo(e,"applyOperation",(e,t)=>{if((t=t[0]).isDocumentOperation&&t.baseVersion!==this.version)throw new p.a("model-document-applyoperation-wrong-version",this,{operation:t})},{priority:"highest"}),this.listenTo(e,"applyOperation",(e,t)=>{(t=t[0]).isDocumentOperation&&this.differ.bufferOperation(t)},{priority:"high"}),this.listenTo(e,"applyOperation",(e,t)=>{(t=t[0]).isDocumentOperation&&(this.version++,this.history.addOperation(t))},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(e,i,t,n)=>{this.differ.bufferMarkerChange(i.name,t,n,i.affectsData),null===t&&i.on("change",(e,t)=>{this.differ.bufferMarkerChange(i.name,t,i.getRange(),i.affectsData)})})}get graveyard(){return this.getRoot("$graveyard")}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new p.a("model-document-createroot-name-exists",this,{name:t});return t=new Ns(this,e,t),this.roots.add(t),t}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(){return Array.from(this.roots,e=>e.rootName).filter(e=>"$graveyard"!=e)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=Qt(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){for(const e of this.roots)if(e!==this.graveyard)return e;return this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),t=this.model,i=t.schema,n=t.createPositionFromPath(e,[0]);return i.getNearestSelectionRange(n)||t.createRange(n)}_validateSelectionRange(e){return qs(e.start)&&qs(e.end)}_callPostFixers(e){let t=!1;do{for(const i of this._postFixers)if(this.selection.refresh(),t=i(e),t)break}while(t)}}function qs(e){if(t=e.textNode){var t,i=t.data;return!Hs(i,t=e.offset-t.startOffset)&&!Us(i,t)}return!0}Me(Ws,s);class $s{constructor(){this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(e){return this._markers.has(e)}get(e){return this._markers.get(e)||null}_set(e,t,i=!1,n=!1){const o=e instanceof Ys?e.name:e;if(o.includes(","))throw new p.a("markercollection-incorrect-marker-name",this);const r=this._markers.get(o);if(r){const s=r.getRange();let e=!1;return s.isEqual(t)||(r._attachLiveRange(Er.fromRange(t)),e=!0),i!=r.managedUsingOperations&&(r._managedUsingOperations=i,e=!0),"boolean"==typeof n&&n!=r.affectsData&&(r._affectsData=n,e=!0),e&&this.fire("update:"+o,r,s,t),r}return e=Er.fromRange(t),n=new Ys(o,e,i,n),this._markers.set(o,n),this.fire("update:"+o,n,null,t),n}_remove(e){const t=e instanceof Ys?e.name:e,i=this._markers.get(t);return!!i&&(this._markers.delete(t),this.fire("update:"+t,i,i.getRange(),null),this._destroyMarker(i),!0)}_refresh(e){const t=e instanceof Ys?e.name:e,i=this._markers.get(t);if(!i)throw new p.a("markercollection-refresh-marker-not-exists",this);e=i.getRange(),this.fire("update:"+t,i,e,e,i.managedUsingOperations,i.affectsData)}*getMarkersAtPosition(e){for(const t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(const t of this)null!==t.getRange().getIntersection(e)&&(yield t)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}Me($s,s);class Ys{constructor(e,t,i,n){this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=i,this._affectsData=n}get managedUsingOperations(){if(!this._liveRange)throw new p.a("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new p.a("marker-destroyed",this);return this._affectsData}getStart(){if(!this._liveRange)throw new p.a("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new p.a("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new p.a("marker-destroyed",this);return this._liveRange.toRange()}is(e){return"marker"===e||"model:marker"===e}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Me(Ys,s);class Gs extends gs{get type(){return"noop"}clone(){return new Gs(this.baseVersion)}getReversed(){return new Gs(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}const Ks={};Ks[xs.className]=xs,Ks[Ts.className]=Ts,Ks[Es.className]=Es,Ks[Cs.className]=Cs,Ks[Gs.className]=Gs,Ks[gs.className]=gs,Ks[Is.className]=Is,Ks[Ss.className]=Ss,Ks[Ms.className]=Ms,Ks[Ps.className]=Ps;class Qs extends gr{constructor(e,t,i="toNone"){if(super(e,t,i),!this.root.is("rootElement"))throw new p.a("model-liveposition-root-not-rootelement",e);!function(){this.listenTo(this.root.document.model,"applyOperation",(e,t)=>{(t=t[0]).isDocumentOperation&&function(e){var t;e=this.getTransformedByOperation(e),this.isEqual(e)||(t=this.toPosition(),this.path=e.path,this.root=e.root,this.fire("change",t))}.call(this,t)},{priority:"low"})}.call(this)}detach(){this.stopListening()}is(e){return"livePosition"===e||"model:livePosition"===e||"position"==e||"model:position"===e}toPosition(){return new gr(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}Me(Qs,s);class Js{constructor(e,t,i){this.model=e,this.writer=t,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0),this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null}handleNodes(e){for(const t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){const t=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(e);if(i.isAfter(t)){if(this._lastNode=e,this.position.parent!=e||!this.position.isAtEnd)throw new p.a("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this.nodeToSelect?br._createOn(this.nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new br(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){this.schema.isObject(e)?this._handleObject(e):this._checkAndAutoParagraphToAllowedPosition(e)||this._checkAndSplitToAllowedPosition(e)?(this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e):this._handleDisallowedNode(e)}_insertPartialFragment(){if(!this._documentFragment.isEmpty){const e=Qs.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}}_handleObject(e){this._checkAndSplitToAllowedPosition(e)?this._appendToFragment(e):this._tryAutoparagraphing(e)}_handleDisallowedNode(e){e.is("element")?this.handleNodes(e.getChildren()):this._tryAutoparagraphing(e)}_appendToFragment(e){if(!this.schema.checkChild(this.position,e))throw new p.a("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this.nodeToSelect=e:this.nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=Qs.fromPosition(e,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(e)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Qs.fromPosition(e,"toNext"))}_mergeOnLeft(){var e=this._firstNode;if(e instanceof dr&&this._canMergeLeft(e)){const t=Qs._createBefore(e);t.stickiness="toNext";const i=Qs.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=Qs._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Qs._createAt(t.nodeBefore,"end","toNext")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}}_mergeOnRight(){var e=this._lastNode;if(e instanceof dr&&this._canMergeRight(e)){const t=Qs._createAfter(e);if(t.stickiness="toNext",!this.position.isEqual(t))throw new p.a("insertcontent-invalid-insertion-position",this);this.position=gr._createAt(t.nodeBefore,"end");const i=Qs.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=Qs._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Qs._createAt(t.nodeBefore,0,"toPrevious")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}}_canMergeLeft(e){var t=e.previousSibling;return t instanceof dr&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){var t=e.nextSibling;return t instanceof dr&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_tryAutoparagraphing(e){const t=this.writer.createElement("paragraph");this._getAllowedIn(this.position.parent,t)&&this.schema.checkChild(t,e)&&(t._appendChild(e),this._handleNode(t))}_checkAndAutoParagraphToAllowedPosition(e){return!!this.schema.checkChild(this.position.parent,e)||!(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",e))&&(this._insertPartialFragment(),e=this.writer.createElement("paragraph"),this.writer.insert(e,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=e,this.position=this.writer.createPositionAt(e,0),!0)}_checkAndSplitToAllowedPosition(e){var t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){const e=this.position.parent;this.position=this.writer.createPositionBefore(e),e.isEmpty&&e.parent===t&&this.writer.remove(e)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const e=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=e,this.canMergeWith.add(this.position.nodeAfter)}return!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}}function Zs(e,c,d={}){if(!c.isCollapsed){const h=c.getFirstRange();if("$graveyard"!=h.root.rootName){const u=e.schema;e.change(e=>{if(!d.doNotResetEntireContent&&(t=u,i=c,n=t.getLimitElement(i),i.containsEntireContent(n)&&((i=i.getFirstRange()).start.parent!=i.end.parent&&t.checkChild(n,"paragraph"))))return r=(o=e).model.schema.getLimitElement(s=c),o.remove(o.createRangeIn(r)),void ea(o,o.createPositionAt(r,0),s);var t,i,n,o,r,s;const[a,l]=function(e){const t=e.root.document.model,i=e.start;let n=e.end;if(t.hasContent(e,{ignoreMarkers:!0})){const i=function(e){const t=e.parent,i=t.root.document.model.schema,n=t.getAncestors({parentFirst:!0,includeSelf:!0});for(const e of n){if(i.isLimit(e))return null;if(i.isBlock(e))return e}}(n);if(i&&n.isTouching(t.createPositionAt(i,0))){const i=t.createSelection(e);t.modifySelection(i,{direction:"backward"});var o=i.getLastPosition(),e=t.createRange(o,n);t.hasContent(e,{ignoreMarkers:!0})||(n=o)}}return[Qs.fromPosition(i,"toPrevious"),Qs.fromPosition(n,"toNext")]}(h);a.isTouching(l)||e.remove(e.createRange(a,l)),d.leaveUnmerged||(function(e,o,t){const i=e.model;var n,r;Xs(e.model.schema,o,t)&&([n,r]=function(e){var t=o.getAncestors(),i=e.getAncestors();let n=0;for(;t[n]&&t[n]==i[n];)n++;return[t[n],i[n]]}(t),n&&r&&(!i.hasContent(n,{ignoreMarkers:!0})&&i.hasContent(r,{ignoreMarkers:!0})?function e(t,i,n,o){var r=i.parent,s=n.parent;if(r!=o&&s!=o){for(i=t.createPositionAfter(r),(n=t.createPositionBefore(s)).isEqual(i)||t.insert(r,n);i.parent.isEmpty;){const e=i.parent;i=t.createPositionBefore(e),t.remove(e)}n=t.createPositionBefore(s),function(e,t){const i=t.nodeBefore,n=t.nodeAfter;i.name!=n.name&&e.rename(i,n.name),e.clearAttributes(i),e.setAttributes(Object.fromEntries(n.getAttributes()),i),e.merge(t)}(t,n),Xs(t.model.schema,i,n)&&e(t,i,n,o)}}:function e(t,i,n,o){var r=i.parent,s=n.parent;if(r!=o&&s!=o){for(i=t.createPositionAfter(r),(n=t.createPositionBefore(s)).isEqual(i)||t.insert(s,i),t.merge(i);n.parent.isEmpty;){const e=n.parent;n=t.createPositionBefore(e),t.remove(e)}Xs(t.model.schema,i,n)&&e(t,i,n,o)}})(e,o,t,n.parent))}(e,a,l),u.removeDisallowedAttributes(a.parent.getChildren(),e)),ta(e,c,a),d.doNotAutoparagraph||(o=u,r=a,s=o.checkChild(r,"$text"),r=o.checkChild(r,"paragraph"),s||!r)||ea(e,a,c),a.detach(),l.detach()})}}}function Xs(e,t,i){var n=t.parent,o=i.parent;return n!=o&&!e.isLimit(n)&&!e.isLimit(o)&&function(e,t,i){const n=new br(e,t);for(const e of n.getWalker())if(i.isLimit(e.item))return;return 1}(t,i,e)}function ea(e,t,i){var n=e.createElement("paragraph");e.insert(n,t),ta(e,i,e.createPositionAt(n,0))}function ta(e,t,i){t instanceof Ir?e.setSelection(i):t.setTo(i)}function ia(e,t){const{isForward:i,walker:n,unit:o,schema:r}=e,{type:s,item:a,nextPosition:l}=t;return"text"==s?"word"===e.unit?function(t,i){let n=t.position.textNode;if(n){let e=t.position.offset-n.startOffset;for(;o=n.data,r=e,!' ,.?!:;"-()'.includes(o.charAt(r+(i?0:-1)))&&(s=n,e!==(i?s.endOffset:0));){t.next();const a=i?t.position.nodeAfter:t.position.nodeBefore;a&&a.is("$text")&&(s=a.data.charAt(i?0:a.data.length-1),' ,.?!:;"-()'.includes(s)||(t.next(),n=t.position.textNode)),e=t.position.offset-n.startOffset}}var o,r,s;return t.position}(n,i):function(t,i){var n=t.position.textNode;if(n){var o=n.data;let e=t.position.offset-n.startOffset;for(;Hs(o,e)||"character"==i&&Us(o,e);)t.next(),e=t.position.offset-n.startOffset}return t.position}(n,o):s==(i?"elementStart":"elementEnd")?r.isSelectable(a)?gr._createAt(a,i?"after":"before"):r.checkChild(l,"$text")?l:void 0:r.isLimit(a)?void n.skip(()=>!0):r.checkChild(l,"$text")?l:void 0}function na(t,i){const n=[];Array.from(t.getItems({direction:"backward"})).map(e=>i.createRangeOn(e)).filter(e=>(e.start.isAfter(t.start)||e.start.isEqual(t.start))&&(e.end.isBefore(t.end)||e.end.isEqual(t.end))).forEach(e=>{n.push(e.start.parent),i.remove(e)}),n.forEach(e=>{let t=e;for(;t.parent&&t.isEmpty;){const e=i.createRangeOn(t);t=t.parent,i.remove(e)}})}function oa(t){t.document.registerPostFixer(e=>function(e,t){const i=t.document.selection,n=t.schema,o=[];let r=!1;for(const e of i.getRanges()){const t=(s=n,(g=e).isCollapsed?function(e){const t=g.start,i=e.getNearestSelectionRange(t);return i?i.isCollapsed?(e=i.start,t.isEqual(e)?null:new br(e)):i:null}(s):function(i,n){const{start:o,end:r}=g,s=n.checkChild(o,"$text"),a=n.checkChild(r,"$text"),l=n.getLimitElement(o),c=n.getLimitElement(r);if(l===c){if(s&&a)return null;if(d=r,t=n,e=(e=o).nodeAfter&&!t.isLimit(e.nodeAfter)||t.checkChild(e,"$text"),d=d.nodeBefore&&!t.isLimit(d.nodeBefore)||t.checkChild(d,"$text"),e||d){const h=o.nodeAfter&&n.isSelectable(o.nodeAfter)?null:n.getNearestSelectionRange(o,"forward"),s=r.nodeBefore&&n.isSelectable(r.nodeBefore)?null:n.getNearestSelectionRange(r,"backward"),a=h?h.start:o,l=s?s.end:r;return new br(a,l)}}var e,t,d=l&&!l.is("rootElement"),i=c&&!c.is("rootElement");if(d||i){const u=o.nodeAfter&&r.nodeBefore&&o.nodeAfter.parent===r.nodeBefore.parent,s=d&&(!u||!sa(o.nodeAfter,n)),a=i&&(!u||!sa(r.nodeBefore,n));let e=o,t=r;return s&&(e=gr._createBefore(ra(l,n))),a&&(t=gr._createAfter(ra(c,n))),new br(e,t)}return null}(0,s));t&&!t.isEqual(e)?(o.push(t),r=!0):o.push(e)}var g,s;r&&e.setSelection(function(e){const t=[];t.push(e.shift());for(const o of e){const e=t.pop();var i,n;o.isEqual(e)?t.push(e):o.isIntersecting(e)?(i=(e.start.isAfter(o.start)?o:e).start,n=(e.end.isAfter(o.end)?e:o).end,n=new br(i,n),t.push(n)):(t.push(e),t.push(o))}return t}(o),{backward:i.isBackward})}(e,t))}function ra(e,t){let i=e,n=i;for(;t.isLimit(n)&&n.parent;)i=n,n=n.parent;return i}function sa(e,t){return e&&t.isSelectable(e)}class aa{constructor(){this.markers=new $s,this.document=new Ws(this),this.schema=new es,this._pendingChanges=[],this._currentWriter=null,["insertContent","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,t)=>{t[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$block",{allowIn:"$root",isBlock:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck((e,t)=>{if("$marker"===t.name)return!0}),oa(this),this.document.registerPostFixer(Br)}change(e){try{return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new us,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(e){p.a.rethrowUnexpectedError(e,this)}}enqueueChange(e,t){try{"string"==typeof e?e=new us(e):"function"==typeof e&&(t=e,e=new us),this._pendingChanges.push({batch:e,callback:t}),1==this._pendingChanges.length&&this._runPendingChanges()}catch(e){p.a.rethrowUnexpectedError(e,this)}}applyOperation(e){e._execute()}insertContent(e,t,i){return r=e,s=t,a=i,(o=this).change(e=>{let t;t=s?s instanceof xr||s instanceof Ir?s:e.createSelection(s,a):o.document.selection,t.isCollapsed||o.deleteContent(t,{doNotAutoparagraph:!0});const i=new Js(o,e,t.anchor);var n=r.is("documentFragment")?r.getChildren():[r];return i.handleNodes(n),(n=i.getSelectionRange())&&(t instanceof Ir?e.setSelection(n):t.setTo(n)),n=i.getAffectedRange()||o.createRange(t.anchor),i.destroy(),n});var o,r,s,a}deleteContent(e,t){Zs(this,e,t)}modifySelection(e,t){!function(e,t,i={}){const n=e.schema,o="backward"!=i.direction,r=i.unit||"character",s=t.focus,a=new hr({boundaries:(d=o,i=(c=s).root,i=gr._createAt(i,d?"end":0),d?new br(c,i):new br(i,c)),singleCharacters:!0,direction:o?"forward":"backward"}),l={walker:a,schema:n,isForward:o,unit:r};for(var c,d,h;h=a.next();){if(h.done)return;const u=ia(l,h.value);if(u)return t instanceof Ir?e.change(e=>{e.setSelectionFocus(u)}):t.setFocus(u)}}(this,e,t)}getSelectedContent(e){return l=e,this.change(e=>{const t=e.createDocumentFragment(),i=l.getFirstRange();if(!i||i.isCollapsed)return t;const n=i.start.root,o=i.start.getCommonPath(i.end),r=n.getNodeByPath(o);let s;s=i.start.parent==i.end.parent?i:e.createRange(e.createPositionAt(r,i.start.path[o.length]),e.createPositionAt(r,i.end.path[o.length]+1));var a=s.end.offset-s.start.offset;for(const l of s.getItems({shallow:!0}))l.is("$textProxy")?e.appendText(l.data,l.getAttributes(),t):e.append(e.cloneElement(l,!0),t);if(s!=i){const l=i._getTransformedByMove(s.start,e.createPositionAt(t,0),a)[0],n=e.createRange(e.createPositionAt(t,0),l.start);na(e.createRange(l.end,e.createPositionAt(t,"end")),e),na(n,e)}return t});var l}hasContent(e,t={}){const i=e instanceof dr?br._createIn(e):e;if(i.isCollapsed)return!1;var{ignoreWhitespaces:n=!1,ignoreMarkers:t=!1}=t;if(!t)for(const e of this.markers.getMarkersIntersectingRange(i))if(e.affectsData)return!0;for(const e of i.getItems())if(this.schema.isContent(e)){if(!e.is("$textProxy"))return!0;if(!n)return!0;if(-1!==e.data.search(/\S/))return!0}return!1}createPositionFromPath(e,t,i){return new gr(e,t,i)}createPositionAt(e,t){return gr._createAt(e,t)}createPositionAfter(e){return gr._createAfter(e)}createPositionBefore(e){return gr._createBefore(e)}createRange(e,t){return new br(e,t)}createRangeIn(e){return br._createIn(e)}createRangeOn(e){return br._createOn(e)}createSelection(e,t,i){return new xr(e,t,i)}createBatch(e){return new us(e)}createOperationFromJSON(e){return class{static fromJSON(e,t){return Ks[e.__className].fromJSON(e,t)}}.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];for(this.fire("_beforeChanges");this._pendingChanges.length;){var t=this._pendingChanges[0].batch;this._currentWriter=new Rs(this,t),t=this._pendingChanges[0].callback(this._currentWriter),e.push(t),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}return this.fire("_afterChanges"),e}}Me(aa,Ce);class la extends Go{constructor(e){super(),this.editor=e}set(i,e,t={}){if("string"==typeof e){const i=e;e=(e,t)=>{this.editor.execute(i),t()}}super.set(i,e,t)}}class ca{constructor(e={}){this._context=e.context||new Yt({language:e.language}),this._context._addEditor(this,!e.context);var t=Array.from(this.constructor.builtinPlugins||[]);this.config=new Lt(e,this.constructor.defaultConfig),this.config.define("plugins",t),this.config.define(this._context._getEditorConfig()),this.plugins=new Ht(this,t,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this.commands=new Jr,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.set("isReadOnly",!1),this.model=new aa,t=new Ti,this.data=new ls(this.model,t),this.editing=new Qr(this.model,t),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new cs([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new la(this),this.keystrokes.listenTo(this.editing.view.document)}initPlugins(){const e=this.config,t=e.get("plugins"),i=e.get("removePlugins")||[],n=e.get("extraPlugins")||[],o=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(n),i,o)}destroy(){let e=Promise.resolve();return"initializing"==this.state&&(e=new Promise(e=>this.once("ready",e))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(...e){try{return this.commands.execute(...e)}catch(e){p.a.rethrowUnexpectedError(e,this)}}focus(){this.editing.view.focus()}}Me(ca,Ce);class da{constructor(e){this.editor=e,this._components=new Map}*names(){for(const e of this._components.values())yield e.originalName}add(e,t){this._components.set(ha(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new p.a("componentfactory-item-missing",this,{name:e});return this._components.get(ha(e)).callback(this.editor.locale)}has(e){return this._components.has(ha(e))}}function ha(e){return String(e).toLowerCase()}class ua{constructor(e){this.editor=e,this.componentFactory=new da(e),this.focusTracker=new Yo,this._editableElementsMap=new Map,this.listenTo(e.editing.view.document,"layoutChanged",()=>this.update())}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null;this._editableElementsMap=new Map}setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}}Me(ua,s),t={updateSourceElement(){if(!this.sourceElement)throw new p.a("editor-missing-sourceelement",this);var e=this.sourceElement,t=this.data.get();e instanceof HTMLTextAreaElement&&(e.value=t),e.innerHTML=t}};class ga extends Gt{static get pluginName(){return"PendingActions"}init(){this.set("hasAny",!1),this._actions=new Ft({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if("string"!=typeof e)throw new p.a("pendingactions-add-invalid-message",this);const t=Object.create(Ce);return t.set("message",e),this._actions.add(t),this.hasAny=!0,t}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}const ma={cancel:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',caption:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',check:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',eraser:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',lowVision:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',image:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>',alignBottom:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',alignMiddle:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',alignTop:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',alignLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',alignCenter:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',alignRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',alignJustify:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',objectLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectCenter:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',objectRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectFullWidth:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',objectInline:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectBlockLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectBlockRight:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectSizeFull:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',objectSizeLarge:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M13 6H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V8a.5.5 0 0 1 .5-.5h11z"/></svg>',objectSizeSmall:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M7 10H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h5z"/></svg>',objectSizeMedium:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M10 8H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5h8z"/></svg>',pencil:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',pilcrow:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',quote:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',threeVerticalDots:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>'};function pa({emitter:e,activator:n,callback:o,contextElements:r}){e.listenTo(document,"mousedown",(e,t)=>{if(n()){const i="function"==typeof t.composedPath?t.composedPath():[];for(const e of r)if(e.contains(t.target)||i.includes(e))return;o()}})}function fa(e){e.set("_isCssTransitionsDisabled",!1),e.disableCssTransitions=()=>{e._isCssTransitionsDisabled=!0},e.enableCssTransitions=()=>{e._isCssTransitionsDisabled=!1},e.extendTemplate({attributes:{class:[e.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}function ba({view:i}){i.listenTo(i.element,"submit",(e,t)=>{t.preventDefault(),i.fire("submit")},{useCapture:!0})}class wa extends Ft{constructor(e=[]){super(e,{idProperty:"viewUid"}),this.on("add",(e,t,i)=>{this._renderViewIntoCollectionParent(t,i)}),this.on("remove",(e,t)=>{t.element&&this._parentElement&&t.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const e of this)this._renderViewIntoCollectionParent(e)}delegate(...n){if(!n.length||!n.every(e=>"string"==typeof e))throw new p.a("ui-viewcollection-delegate-wrong-events",this);return{to:i=>{for(const e of this)for(const t of n)e.delegate(t).to(i);this.on("add",(e,t)=>{for(const e of n)t.delegate(e).to(i)}),this.on("remove",(e,t)=>{for(const e of n)t.stopDelegating(e,i)})}}}_renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}}i(15);class ka{constructor(i){this.element=null,this.isRendered=!1,this.locale=i,this.t=i&&i.t,this._viewCollections=new Ft,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(e,t)=>{t.locale=i}),this.decorate("render")}get bindTemplate(){return this._bindTemplate||(this._bindTemplate=_a.bind(this,this))}createCollection(e){return e=new wa(e),this._viewCollections.add(e),e}registerChild(e){for(const t of e=Bt(e)?e:[e])this._unboundChildren.add(t)}deregisterChild(e){for(const t of e=Bt(e)?e:[e])this._unboundChildren.remove(t)}setTemplate(e){this.template=new _a(e)}extendTemplate(e){_a.extend(this.template,e)}render(){if(this.isRendered)throw new p.a("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}Me(ka,to),Me(ka,Ce);class _a{constructor(e){Object.assign(this,Ea(Ta(e))),this._isRendered=!1,this._revertData=null}render(){var e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:e,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new p.a("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){yield*function*e(t){if(t.children)for(const i of t.children)Na(i)?yield i:Ra(i)&&(yield*e(i))}(this)}static bind(n,o){return{to:(e,t)=>new ya({eventNameOrFunction:e,attribute:e,observable:n,emitter:o,callback:t}),if:(e,t,i)=>new xa({observable:n,emitter:o,attribute:e,valueIfTrue:t,callback:i})}}static extend(e,t){if(e._isRendered)throw new p.a("template-extend-render",[this,e]);!function t(i,n){if(n.attributes&&(i.attributes||(i.attributes={}),Pa(i.attributes,n.attributes)),n.eventListeners&&(i.eventListeners||(i.eventListeners={}),Pa(i.eventListeners,n.eventListeners)),n.text&&i.text.push(...n.text),n.children&&n.children.length){if(i.children.length!=n.children.length)throw new p.a("ui-template-extend-children-mismatch",i);let e=0;for(const o of n.children)t(i.children[e++],o)}}(e,Ea(Ta(t)))}_renderNode(e){if(e.node?this.tag&&this.text:this.tag?this.text:!this.text)throw new p.a("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){var t=(t=e.node)||(e.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag));return this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}_renderText(e){let t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),Aa(this.text)?this._bindToObservable({schema:this.text,updater:(i=t,{set(e){i.textContent=e},remove(){i.textContent=""}}),data:e}):t.textContent=this.text.join(""),t;var i}_renderAttributes(e){let t,i,n,o;if(this.attributes){const r=e.node,s=e.revertData;for(t in this.attributes)if(n=r.getAttribute(t),i=this.attributes[t],s&&(s.attributes[t]=n),o=_(i[0])&&i[0].ns?i[0].ns:null,Aa(i)){const a=o?i[0].value:i;s&&za(t)&&a.unshift(n),this._bindToObservable({schema:a,updater:function(t,i,n){return{set(e){t.setAttributeNS(n,i,e)},remove(){t.removeAttributeNS(n,i)}}}(r,t,o),data:e})}else"style"==t&&"string"!=typeof i[0]?this._renderStyleAttribute(i[0],e):(s&&n&&za(t)&&i.unshift(n),i=i.map(e=>e&&e.value||e).reduce((e,t)=>e.concat(t),[]).reduce(Sa,""),Ma(i)||r.setAttributeNS(o,t,i))}}_renderStyleAttribute(e,t){const i=t.node;for(const o in e){var n=e[o];Aa(n)?this._bindToObservable({schema:[n],updater:function(t,i){return{set(e){t.style[i]=e},remove(){t.style[i]=null}}}(i,o),data:t}):i.style[o]=n}}_renderElementChildren(e){const t=e.node,i=e.intoFragment?document.createDocumentFragment():t,n=e.isApplying;let o=0;for(const r of this.children)if(Oa(r)){if(!n){r.setParent(t);for(const e of r)i.appendChild(e.element)}}else if(Na(r))n||(r.isRendered||r.render(),i.appendChild(r.element));else if(Fn(r))i.appendChild(r);else if(n){const t={children:[],bindings:[],attributes:{}};e.revertData.children.push(t),r._renderNode({node:i.childNodes[o++],isApplying:!0,revertData:t})}else i.appendChild(r.render());e.intoFragment&&t.appendChild(i)}_setUpListeners(n){if(this.eventListeners)for(const o in this.eventListeners){var e=this.eventListeners[o].map(e=>{var[t,i]=o.split("@");return e.activateDomEventListener(t,i,n)});n.revertData&&n.revertData.bindings.push(e)}}_bindToObservable({schema:t,updater:i,data:n}){const e=n.revertData;Ca(t,i,n);var o=t.filter(e=>!Ma(e)).filter(e=>e.observable).map(e=>e.activateAttributeListener(t,i,n));e&&e.bindings.push(o)}_revertTemplateFromNode(t,i){for(const t of i.bindings)for(const i of t)i();if(i.text)t.textContent=i.text;else{for(const n in i.attributes){var e=i.attributes[n];null===e?t.removeAttribute(n):t.setAttribute(n,e)}for(let e=0;e<i.children.length;++e)this._revertTemplateFromNode(t.childNodes[e],i.children[e])}}}Me(_a,s);class va{constructor(e){Object.assign(this,e)}getValue(e){var t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,i){const n=()=>Ca(e,t,i);return this.emitter.listenTo(this.observable,"change:"+this.attribute,n),()=>{this.emitter.stopListening(this.observable,"change:"+this.attribute,n)}}}class ya extends va{activateDomEventListener(e,i,t){const n=(e,t)=>{i&&!t.target.matches(i)||("function"==typeof this.eventNameOrFunction?this.eventNameOrFunction(t):this.observable.fire(this.eventNameOrFunction,t))};return this.emitter.listenTo(t.node,e,n),()=>{this.emitter.stopListening(t.node,e,n)}}}class xa extends va{getValue(e){return!Ma(super.getValue(e))&&(this.valueIfTrue||!0)}}function Aa(e){return!!e&&(e.value&&(e=e.value),Array.isArray(e)?e.some(Aa):e instanceof va)}function Ca(e,t,{node:i}){let n=(o=i,e.map(e=>e instanceof va?e.getValue(o):e));var o;n=1==e.length&&e[0]instanceof xa?n[0]:n.reduce(Sa,""),Ma(n)?t.remove():t.set(n)}function Ta(e){return zt(e,e=>{if(e&&(e instanceof va||Ra(e)||Na(e)||Oa(e)))return e})}function Ea(e){if("string"==typeof e?e={text:[e]}:e.text&&(e.text=Ut(e.text)),e.on&&(e.eventListeners=function(e){for(const t in e)Ia(e,t);return e}(e.on),delete e.on),!e.text){e.attributes&&function(e){for(const t in e)e[t].value&&(e[t].value=Ut(e[t].value)),Ia(e,t)}(e.attributes);const t=[];if(e.children)if(Oa(e.children))t.push(e.children);else for(const i of e.children)Ra(i)||Na(i)||Fn(i)?t.push(i):t.push(new _a(i));e.children=t}return e}function Ia(e,t){e[t]=Ut(e[t])}function Sa(e,t){return Ma(t)?e:Ma(e)?t:`${e} ${t}`}function Pa(e,t){for(const i in t)e[i]?e[i].push(...t[i]):e[i]=t[i]}function Ma(e){return!e&&0!==e}function Na(e){return e instanceof ka}function Ra(e){return e instanceof _a}function Oa(e){return e instanceof wa}function za(e){return"class"==e||"style"==e}class Da extends wa{constructor(e,t=[]){super(t),this.locale=e}attachToDom(){this._bodyCollectionContainer=new _a({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();let e=document.querySelector(".ck-body-wrapper");e||(e=function(e,t,i=[]){const n=t.xmlns,o=n?e.createElementNS(n,"div"):e.createElement("div");for(const e in t)o.setAttribute(e,t[e]);for(var r of i=Do(i)||!Bt(i)?[i]:i)Do(r)&&(r=e.createTextNode(r)),o.appendChild(r);return o}(document,{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const e=document.querySelector(".ck-body-wrapper");e&&0==e.childElementCount&&e.remove()}}i(17);class La extends ka{constructor(){super();const e=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon"],viewBox:e.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const e=(new DOMParser).parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),t=e.getAttribute("viewBox");for(t&&(this.viewBox=t),this.element.innerHTML="";0<e.childNodes.length;)this.element.appendChild(e.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(e=>{e.style.fill=this.fillColor})}}i(19);class Va extends ka{constructor(e){super(e),this.set("text",""),this.set("position","s");const t=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip",t.to("position",e=>"ck-tooltip_"+e),t.if("text","ck-hidden",e=>!e.trim())]},children:[{tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:t.to("text")}]}]})}}i(21);class ja extends ka{constructor(e){super(e);const t=this.bindTemplate,i=c();this.set("class"),this.set("labelStyle"),this.set("icon"),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke"),this.set("label"),this.set("tabindex",-1),this.set("tooltip"),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.tooltipView=this._createTooltipView(),this.labelView=this._createLabelView(i),this.iconView=new La,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this)),this.setTemplate({tag:"button",attributes:{class:["ck","ck-button",t.to("class"),t.if("isEnabled","ck-disabled",e=>!e),t.if("isVisible","ck-hidden",e=>!e),t.to("isOn",e=>e?"ck-on":"ck-off"),t.if("withText","ck-button_with-text"),t.if("withKeystroke","ck-button_with-keystroke")],type:t.to("type",e=>e||"button"),tabindex:t.to("tabindex"),"aria-labelledby":"ck-editor__aria-label_"+i,"aria-disabled":t.if("isEnabled",!0,e=>!e),"aria-pressed":t.to("isOn",e=>!!this.isToggleable&&String(e))},children:this.children,on:{mousedown:t.to(e=>{e.preventDefault()}),click:t.to(e=>{this.isEnabled?this.fire("execute"):e.preventDefault()})}})}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.tooltipView),this.children.add(this.labelView),this.withKeystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}_createTooltipView(){const e=new Va;return e.bind("text").to(this,"_tooltipString"),e.bind("position").to(this,"tooltipPosition"),e}_createLabelView(e){const t=new ka,i=this.bindTemplate;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:i.to("labelStyle"),id:"ck-editor__aria-label_"+e},children:[{text:this.bindTemplate.to("label")}]}),t}_createKeystrokeView(){const e=new ka;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",e=>cn(e))}]}),e}_getTooltipString(e,t,i){return e?"string"==typeof e?e:(i=i&&cn(i),e instanceof Function?e(t,i):`${t}${i?` (${i})`:""}`):""}}i(23);class Ba extends ja{constructor(e){super(e),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new ka;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}class Fa{constructor(t){if(Object.assign(this,t),t.actions&&t.keystrokeHandler)for(const i in t.actions){let e=t.actions[i];"string"==typeof e&&(e=[e]);for(const n of e)t.keystrokeHandler.set(n,(e,t)=>{this[i](),t()})}}get first(){return this.focusables.find(Ha)||null}get last(){return this.focusables.filter(Ha).slice(-1)[0]||null}get next(){return this._getFocusableItem(1)}get previous(){return this._getFocusableItem(-1)}get current(){let i=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find((e,t)=>((e=e.element===this.focusTracker.focusedElement)&&(i=t),e)),i)}focusFirst(){this._focus(this.first)}focusLast(){this._focus(this.last)}focusNext(){this._focus(this.next)}focusPrevious(){this._focus(this.previous)}_focus(e){e&&e.focus()}_getFocusableItem(e){const t=this.current,i=this.focusables.length;if(!i)return null;if(null===t)return this[1===e?"first":"last"];let n=(t+i+e)%i;do{const t=this.focusables.get(n);if(Ha(t))return t}while(n=(n+i+e)%i,n!==t);return null}}function Ha(e){return!(!e.focus||"none"==qn.window.getComputedStyle(e.element).display)}i(25);var Ua='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';class Wa extends ja{constructor(e){super(e),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new La;return e.content=Ua,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}i(27);class qa extends ka{constructor(e){super(e);const t=this.bindTemplate;this.set("class"),this.set("icon"),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke"),this.set("label"),this.set("tabindex",-1),this.set("tooltip"),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(),this.arrowView=this._createArrowView(),this.keystrokes=new Go,this.focusTracker=new Yo,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",t.to("class"),t.if("isVisible","ck-hidden",e=>!e),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,t)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),t())}),this.keystrokes.set("arrowleft",(e,t)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),t())})}focus(){this.actionView.focus()}_createActionView(){const e=new ja;return e.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),e.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),e.delegate("execute").to(this),e}_createArrowView(){const e=new ja,t=e.bindTemplate;return e.icon=Ua,e.extendTemplate({attributes:{class:"ck-splitbutton__arrow","aria-haspopup":!0,"aria-expanded":t.to("isOn",e=>String(e))}}),e.bind("isEnabled").to(this),e.delegate("execute").to(this,"open"),e}}class $a extends ka{constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",t.to("position",e=>"ck-dropdown__panel_"+e),t.if("isVisible","ck-dropdown__panel-visible")]},children:this.children,on:{selectstart:t.to(e=>e.preventDefault())}})}focus(){this.children.length&&this.children.first.focus()}focusLast(){if(this.children.length){const e=this.children.last;"function"==typeof e.focusLast?e.focusLast():e.focus()}}}function Ya({element:e,target:t,positions:i,limiter:n,fitInViewport:o}){v(t)&&(t=t()),v(n)&&(n=n());var r=e&&e.parentNode&&e.offsetParent!==qn.document.body?e.offsetParent:null,e=new Bo(e),t=new Bo(t);let s,a;n||o?(n=function(e,t){const{elementRect:i,viewportRect:n}=t,o=i.getArea(),r=function(i,{targetRect:e,elementRect:t,limiterRect:n,viewportRect:o}){const r=[],s=t.getArea();for(const c of i){const i=Ga(c,e,t);if(i){var[a,l]=i;let e=0,t=0;if(n)if(o){const i=n.getIntersection(o);i&&(e=i.getIntersectionArea(l))}else e=n.getIntersectionArea(l);if(o&&(t=o.getIntersectionArea(l)),l={positionName:a,positionRect:l,limiterIntersectArea:e,viewportIntersectArea:t},e===s)return[l];r.push(l)}}return r}(e,t);if(n){const e=Ka(r.filter(({viewportIntersectArea:e})=>e===o),o);if(e)return e}return Ka(r,o)}(i,{targetRect:t,elementRect:e,limiterRect:n&&new Bo(n).getVisible(),viewportRect:o&&new Bo(qn.window)}),[a,s]=n||Ga(i[0],t,e)):[a,s]=Ga(i[0],t,e);let l=Qa(s);return r&&(l=([{left:o,top:i},t]=[l,r],e=Qa(new Bo(t)),r=Vo(t),o-=e.left,i-=e.top,o+=t.scrollLeft,i+=t.scrollTop,{left:o-=r.left,top:i-=r.top})),{left:l.left,top:l.top,name:a}}function Ga(e,t,i){if(!(n=e(t,i)))return null;var{left:e,top:t,name:n}=n;return[n,i.clone().moveTo(e,t)]}function Ka(e,t){let i,n,o=0;for(var{positionName:r,positionRect:s,limiterIntersectArea:a,viewportIntersectArea:l}of e){if(a===t)return[r,s];const e=l**2+a**2;e>o&&(o=e,i=s,n=r)}return i?[n,i]:null}function Qa({left:e,top:t}){var{scrollX:i,scrollY:n}=qn.window;return{left:e+i,top:t+n}}i(29);class Ja extends ka{constructor(e,t,i){super(e);const n=this.bindTemplate;this.buttonView=t,this.panelView=i,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class"),this.set("id"),this.set("panelPosition","auto"),this.keystrokes=new Go,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",n.to("class"),n.if("isEnabled","ck-disabled",e=>!e)],id:n.to("id"),"aria-describedby":n.to("ariaDescribedById")},children:[t,i]}),t.extendTemplate({attributes:{class:["ck-dropdown__button"]}})}render(){super.render(),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",()=>{this.isOpen&&("auto"===this.panelPosition?this.panelView.position=Ja._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions}).name:this.panelView.position=this.panelPosition)}),this.keystrokes.listenTo(this.element);var e=(e,t)=>{this.isOpen&&(this.buttonView.focus(),this.isOpen=!1,t())};this.keystrokes.set("arrowdown",(e,t)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,t())}),this.keystrokes.set("arrowright",(e,t)=>{this.isOpen&&t()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){var{south:e,north:t,southEast:i,southWest:n,northEast:o,northWest:r,southMiddleEast:s,southMiddleWest:a,northMiddleEast:l,northMiddleWest:c}=Ja.defaultPanelPositions;return"rtl"!==this.locale.uiLanguageDirection?[i,n,s,a,e,o,r,l,c,t]:[n,i,a,s,e,r,o,c,l,t]}}Ja.defaultPanelPositions={south:(e,t)=>({top:e.bottom,left:e.left-(t.width-e.width)/2,name:"s"}),southEast:e=>({top:e.bottom,left:e.left,name:"se"}),southWest:(e,t)=>({top:e.bottom,left:e.left-t.width+e.width,name:"sw"}),southMiddleEast:(e,t)=>({top:e.bottom,left:e.left-(t.width-e.width)/4,name:"sme"}),southMiddleWest:(e,t)=>({top:e.bottom,left:e.left-3*(t.width-e.width)/4,name:"smw"}),north:(e,t)=>({top:e.top-t.height,left:e.left-(t.width-e.width)/2,name:"n"}),northEast:(e,t)=>({top:e.top-t.height,left:e.left,name:"ne"}),northWest:(e,t)=>({top:e.top-t.height,left:e.left-t.width+e.width,name:"nw"}),northMiddleEast:(e,t)=>({top:e.top-t.height,left:e.left-(t.width-e.width)/4,name:"nme"}),northMiddleWest:(e,t)=>({top:e.top-t.height,left:e.left-3*(t.width-e.width)/4,name:"nmw"})},Ja._getOptimalPosition=Ya;class Za extends ka{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class Xa extends ka{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}function el(e){return Array.isArray(e)?{items:e,removeItems:[]}:e?Object.assign({items:[],removeItems:[]},e):{items:[],removeItems:[]}}i(31);class tl extends ka{constructor(e,t){super(e);const i=this.bindTemplate,n=this.t;this.options=t||{},this.set("ariaLabel",n("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new Yo,this.keystrokes=new Go,this.set("class"),this.set("isCompact",!1),this.itemsView=new il(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();var o,e="rtl"===e.uiLanguageDirection;this._focusCycler=new Fa({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[e?"arrowright":"arrowleft","arrowup"],focusNext:[e?"arrowleft":"arrowright","arrowdown"]}});const r=["ck","ck-toolbar",i.to("class"),i.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&r.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:r,role:"toolbar","aria-label":i.to("ariaLabel"),style:{maxWidth:i.to("maxWidth")}},children:this.children,on:{mousedown:(o=this).bindTemplate.to(e=>{e.target===o.element&&e.preventDefault()})}}),this._behavior=new(this.options.shouldGroupWhenFull?ol:nl)(this)}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,n){const o=el(e),t=o.items.filter((e,t,i)=>"|"===e||-1===o.removeItems.indexOf(e)&&("-"===e?!this.options.shouldGroupWhenFull||(Object(p.b)("toolbarview-line-break-ignored-when-grouping-items",i),!1):!!n.has(e)||(Object(p.b)("toolbarview-item-unavailable",{name:e}),!1))),i=this._cleanSeparators(t).map(e=>"|"===e?new Za:"-"===e?new Xa:n.create(e));this.items.addMany(i)}_cleanSeparators(e){const n=e=>"-"!==e&&"|"!==e,t=e.length,i=e.findIndex(n),o=t-e.slice().reverse().findIndex(n);return e.slice(i,o).filter((e,t,i)=>!!n(e)||!(0<t&&i[t-1]===e))}}class il extends ka{constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class nl{constructor(e){const t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using(e=>e),e.focusables.bindTo(e.items).using(e=>e),e.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class ol{constructor(e){this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,e.itemsView.children.bindTo(this.ungroupedItems).using(e=>e),this.ungroupedItems.on("add",this._updateFocusCycleableItems.bind(this)),this.ungroupedItems.on("remove",this._updateFocusCycleableItems.bind(this)),e.children.on("add",this._updateFocusCycleableItems.bind(this)),e.children.on("remove",this._updateFocusCycleableItems.bind(this)),e.items.on("change",(e,t)=>{var i=t.index;for(const e of t.removed)(i>=this.ungroupedItems.length?this.groupedItems:this.ungroupedItems).remove(e);for(let e=i;e<i+t.added.length;e++){var n=t.added[e-i];e>this.ungroupedItems.length?this.groupedItems.add(n,e-this.ungroupedItems.length):this.ungroupedItems.add(n,e)}this._updateGrouping()}),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(this.viewElement.ownerDocument.body.contains(this.viewElement))if(this.viewElement.offsetParent){var t=this.groupedItems.length;let e;for(;this._areItemsOverflowing;)this._groupLastItem(),e=!0;if(!e&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==t&&this.view.fire("groupedItemsUpdate")}else this.shouldUpdateGroupingOnNextResize=!0}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const e=this.viewElement,t=this.viewLocale.uiLanguageDirection,i=new Bo(e.lastChild),n=new Bo(e);if(!this.cachedPadding){const i=qn.window.getComputedStyle(e),n="ltr"===t?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(i[n])}return"ltr"===t?i.right>n.right-this.cachedPadding:i.left<n.left+this.cachedPadding}_enableGroupingOnResize(){let t;this.resizeObserver=new Uo(this.viewElement,e=>{t&&t===e.contentRect.width&&!this.shouldUpdateGroupingOnNextResize||(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),t=e.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new Za),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const e=this.viewLocale,t=e.t,i=ll(e);return i.class="ck-toolbar__grouped-dropdown",i.panelPosition="ltr"===e.uiLanguageDirection?"sw":"se",cl(i,[]),i.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:"rtl"===e.uiLanguageDirection?"se":"sw",icon:ma.threeVerticalDots}),i.toolbarView.items.bindTo(this.groupedItems).using(e=>e),i}_updateFocusCycleableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}i(33);class rl extends ka{constructor(){super(),this.items=this.createCollection(),this.focusTracker=new Yo,this.keystrokes=new Go,this._focusCycler=new Fa({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"]},children:this.items})}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}class sl extends ka{constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item"]},children:this.children})}focus(){this.children.first.focus()}}class al extends ka{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}function ll(e,t=Wa){const i=new t(e),n=new $a(e),o=new Ja(e,i,n);return i.bind("isEnabled").to(o),(i instanceof Wa?i:i.arrowView).bind("isOn").to(o,"isOpen"),(a=e=o).on("render",()=>{pa({emitter:a,activator:()=>a.isOpen,callback:()=>{a.isOpen=!1},contextElements:[a.element]})}),(s=e).on("execute",e=>{e.source instanceof Ba||(s.isOpen=!1)}),(r=e).keystrokes.set("arrowdown",(e,t)=>{r.isOpen&&(r.panelView.focus(),t())}),r.keystrokes.set("arrowup",(e,t)=>{r.isOpen&&(r.panelView.focusLast(),t())}),o;var r,s,a}function cl(e,t){const i=e.locale,n=i.t,o=e.toolbarView=new tl(i);o.set("ariaLabel",n("Dropdown toolbar")),e.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),t.map(e=>o.items.add(e)),e.panelView.children.add(o),o.items.delegate("execute").to(e)}function dl(e,t){const o=e.locale,i=e.listView=new rl(o);i.items.bindTo(t).using(({type:t,model:i})=>{if("separator"===t)return new al(o);if("button"===t||"switchbutton"===t){const n=new sl(o);let e;return e=new("button"===t?ja:Ba)(o),e.bind(...Object.keys(i)).to(i),e.delegate("execute").to(n),n.children.add(e),n}}),e.panelView.children.add(i),i.items.delegate("execute").to(e)}i(35),i(37),i(39);class hl extends ka{constructor(e){super(e),this.body=new Da(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}i(41);class ul extends ka{constructor(e){super(e),this.set("text"),this.set("for"),this.id="ck-editor__label_"+c();const t=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:t.to("for")},children:[{text:t.to("text")}]})}}class gl extends hl{constructor(e){super(e),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const e=this.t,t=new ul;return t.text=e("Rich Text Editor"),t.extendTemplate({attributes:{class:"ck-voice-label"}}),t}}class ml extends ka{constructor(e,t,i){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.name=null,this.set("isFocused",!1),this._editableElement=i,this._hasExternalElement=!!this._editableElement,this._editingView=t}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}_updateIsFocusedClasses(){const r=this._editingView;function s(i){r.change(e=>{var t=r.document.getRoot(i.name);e.addClass(i.isFocused?"ck-focused":"ck-blurred",t),e.removeClass(i.isFocused?"ck-blurred":"ck-focused",t)})}(r.isRenderingInProgress?function n(o){r.once("change:isRenderingInProgress",(e,t,i)=>{(i?n:s)(o)})}:s)(this)}}class pl extends ml{constructor(e,t,i){super(e,t,i),this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const i=this._editingView,n=this.t;i.change(e=>{var t=i.document.getRoot(this.name);e.setAttribute("aria-label",n("Rich Text Editor, %0",this.name),t)})}}i(43),i(45);class fl extends ka{constructor(e){super(e),this.set("value"),this.set("id"),this.set("placeholder"),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById"),this.focusTracker=new Yo,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{type:"text",class:["ck","ck-input","ck-input-text",t.if("isFocused","ck-input_focused"),t.if("isEmpty","ck-input-text_empty"),t.if("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),readonly:t.to("isReadOnly"),"aria-invalid":t.if("hasError",!0),"aria-describedby":t.to("ariaDescribedById")},on:{input:t.to("input"),change:t.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,t,i)=>{this._setDomElementValue(i),this._updateIsEmpty()})}select(){this.element.select()}focus(){this.element.focus()}_updateIsEmpty(){this.isEmpty=!this.element.value}_setDomElementValue(e){this.element.value=e||0===e?e:""}}i(47);class bl extends ka{constructor(e,t){super(e);var i="ck-labeled-field-view-"+c(),e="ck-labeled-field-view-status-"+c();this.fieldView=t(this,i,e),this.set("label"),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class"),this.set("placeholder"),this.labelView=this._createLabelView(i),this.statusView=this._createStatusView(e),this.bind("_statusText").to(this,"errorText",this,"infoText",(e,t)=>e||t);const n=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",n.to("class"),n.if("isEnabled","ck-disabled",e=>!e),n.if("isEmpty","ck-labeled-field-view_empty"),n.if("isFocused","ck-labeled-field-view_focused"),n.if("placeholder","ck-labeled-field-view_placeholder"),n.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:[this.fieldView,this.labelView]},this.statusView]})}_createLabelView(e){const t=new ul(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}_createStatusView(e){const t=new ka(this.locale),i=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",i.if("errorText","ck-labeled-field-view__status_error"),i.if("_statusText","ck-hidden",e=>!e)],id:e,role:i.if("errorText","alert")},children:[{text:i.to("_statusText")}]}),t}focus(){this.fieldView.focus()}}function wl(e,t,i){const n=new fl(e.locale);return n.set({id:t,ariaDescribedById:i}),n.bind("isReadOnly").to(e,"isEnabled",e=>!e),n.bind("hasError").to(e,"errorText",e=>!!e),n.on("input",()=>{e.errorText=null}),e.bind("isEmpty","isFocused","placeholder").to(n),n}class kl extends Gt{static get pluginName(){return"Notification"}init(){this.on("show:warning",(e,t)=>{window.alert(t.message)},{priority:"lowest"})}showSuccess(e,t={}){this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title})}showInfo(e,t={}){this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title})}showWarning(e,t={}){this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title})}_showNotification(e){var t="show:"+e.type+(e.namespace?":"+e.namespace:"");this.fire(t,{message:e.message,type:e.type,title:e.title||""})}}class _l{constructor(e,t){t&&we(this,t),e&&this.set(e)}}Me(_l,Ce),i(49);const vl=qo("px"),yl=qn.document.body;class xl extends ka{constructor(e){super(e);const t=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class"),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",t.to("position",e=>"ck-balloon-panel_"+e),t.if("isVisible","ck-balloon-panel_visible"),t.if("withArrow","ck-balloon-panel_with-arrow"),t.to("class")],style:{top:t.to("top",vl),left:t.to("left",vl)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){this.show();var t=xl.defaultPositions,i=Object.assign({},{element:this.element,positions:[t.southArrowNorth,t.southArrowNorthMiddleWest,t.southArrowNorthMiddleEast,t.southArrowNorthWest,t.southArrowNorthEast,t.northArrowSouth,t.northArrowSouthMiddleWest,t.northArrowSouthMiddleEast,t.northArrowSouthWest,t.northArrowSouthEast],limiter:yl,fitInViewport:!0},e),t=xl._getOptimalPosition(i),e=parseInt(t.left),i=parseInt(t.top),t=t.name;Object.assign(this,{top:i,left:e,position:t})}pin(e){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this._startPinning(e),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(r){this.attachTo(r);const s=Al(r.target),a=r.limiter?Al(r.limiter):yl;this.listenTo(qn.document,"scroll",(e,t)=>{const i=t.target,n=s&&i.contains(s),o=a&&i.contains(a);!n&&!o&&s&&a||this.attachTo(r)},{useCapture:!0}),this.listenTo(qn.window,"resize",()=>{this.attachTo(r)})}_stopPinning(){this.stopListening(qn.document,"scroll"),this.stopListening(qn.window,"resize")}}function Al(e){return Dt(e)?e:Lo(e)?e.commonAncestorContainer:"function"==typeof e?Al(e()):null}function Cl(e,t){return e.top-t.height-xl.arrowVerticalOffset}function Tl(e){return e.bottom+xl.arrowVerticalOffset}xl.arrowHorizontalOffset=25,xl.arrowVerticalOffset=10,xl._getOptimalPosition=Ya,xl.defaultPositions={northWestArrowSouthWest:(e,t)=>({top:Cl(e,t),left:e.left-xl.arrowHorizontalOffset,name:"arrow_sw"}),northWestArrowSouthMiddleWest:(e,t)=>({top:Cl(e,t),left:e.left-.25*t.width-xl.arrowHorizontalOffset,name:"arrow_smw"}),northWestArrowSouth:(e,t)=>({top:Cl(e,t),left:e.left-t.width/2,name:"arrow_s"}),northWestArrowSouthMiddleEast:(e,t)=>({top:Cl(e,t),left:e.left-.75*t.width+xl.arrowHorizontalOffset,name:"arrow_sme"}),northWestArrowSouthEast:(e,t)=>({top:Cl(e,t),left:e.left-t.width+xl.arrowHorizontalOffset,name:"arrow_se"}),northArrowSouthWest:(e,t)=>({top:Cl(e,t),left:e.left+e.width/2-xl.arrowHorizontalOffset,name:"arrow_sw"}),northArrowSouthMiddleWest:(e,t)=>({top:Cl(e,t),left:e.left+e.width/2-.25*t.width-xl.arrowHorizontalOffset,name:"arrow_smw"}),northArrowSouth:(e,t)=>({top:Cl(e,t),left:e.left+e.width/2-t.width/2,name:"arrow_s"}),northArrowSouthMiddleEast:(e,t)=>({top:Cl(e,t),left:e.left+e.width/2-.75*t.width+xl.arrowHorizontalOffset,name:"arrow_sme"}),northArrowSouthEast:(e,t)=>({top:Cl(e,t),left:e.left+e.width/2-t.width+xl.arrowHorizontalOffset,name:"arrow_se"}),northEastArrowSouthWest:(e,t)=>({top:Cl(e,t),left:e.right-xl.arrowHorizontalOffset,name:"arrow_sw"}),northEastArrowSouthMiddleWest:(e,t)=>({top:Cl(e,t),left:e.right-.25*t.width-xl.arrowHorizontalOffset,name:"arrow_smw"}),northEastArrowSouth:(e,t)=>({top:Cl(e,t),left:e.right-t.width/2,name:"arrow_s"}),northEastArrowSouthMiddleEast:(e,t)=>({top:Cl(e,t),left:e.right-.75*t.width+xl.arrowHorizontalOffset,name:"arrow_sme"}),northEastArrowSouthEast:(e,t)=>({top:Cl(e,t),left:e.right-t.width+xl.arrowHorizontalOffset,name:"arrow_se"}),southWestArrowNorthWest:(e,t)=>({top:Tl(e),left:e.left-xl.arrowHorizontalOffset,name:"arrow_nw"}),southWestArrowNorthMiddleWest:(e,t)=>({top:Tl(e),left:e.left-.25*t.width-xl.arrowHorizontalOffset,name:"arrow_nmw"}),southWestArrowNorth:(e,t)=>({top:Tl(e),left:e.left-t.width/2,name:"arrow_n"}),southWestArrowNorthMiddleEast:(e,t)=>({top:Tl(e),left:e.left-.75*t.width+xl.arrowHorizontalOffset,name:"arrow_nme"}),southWestArrowNorthEast:(e,t)=>({top:Tl(e),left:e.left-t.width+xl.arrowHorizontalOffset,name:"arrow_ne"}),southArrowNorthWest:(e,t)=>({top:Tl(e),left:e.left+e.width/2-xl.arrowHorizontalOffset,name:"arrow_nw"}),southArrowNorthMiddleWest:(e,t)=>({top:Tl(e),left:e.left+e.width/2-.25*t.width-xl.arrowHorizontalOffset,name:"arrow_nmw"}),southArrowNorth:(e,t)=>({top:Tl(e),left:e.left+e.width/2-t.width/2,name:"arrow_n"}),southArrowNorthMiddleEast:(e,t)=>({top:Tl(e),left:e.left+e.width/2-.75*t.width+xl.arrowHorizontalOffset,name:"arrow_nme"}),southArrowNorthEast:(e,t)=>({top:Tl(e),left:e.left+e.width/2-t.width+xl.arrowHorizontalOffset,name:"arrow_ne"}),southEastArrowNorthWest:(e,t)=>({top:Tl(e),left:e.right-xl.arrowHorizontalOffset,name:"arrow_nw"}),southEastArrowNorthMiddleWest:(e,t)=>({top:Tl(e),left:e.right-.25*t.width-xl.arrowHorizontalOffset,name:"arrow_nmw"}),southEastArrowNorth:(e,t)=>({top:Tl(e),left:e.right-t.width/2,name:"arrow_n"}),southEastArrowNorthMiddleEast:(e,t)=>({top:Tl(e),left:e.right-.75*t.width+xl.arrowHorizontalOffset,name:"arrow_nme"}),southEastArrowNorthEast:(e,t)=>({top:Tl(e),left:e.right-t.width+xl.arrowHorizontalOffset,name:"arrow_ne"})},i(51),i(53);const El=qo("px");class Il extends Ne{static get pluginName(){return"ContextualBalloon"}constructor(e){super(e),this.positionLimiter=()=>{const e=this.editor.editing.view,t=e.document.selection.editableElement;return t?e.domConverter.mapViewToDom(t.root):null},this.set("visibleView",null),this.view=new xl(e.locale),e.ui.view.body.add(this.view),e.ui.focusTracker.add(this.view.element),this._viewToStack=new Map,this._idToStack=new Map,this.set("_numberOfStacks",0),this.set("_singleViewMode",!1),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this.hasView(e.view))throw new p.a("contextualballoon-add-view-exist",[this,e]);var t=e.stackId||"main";if(!this._idToStack.has(t))return this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!e.singleViewMode||this.showStack(t));const i=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),i.set(e.view,e),this._viewToStack.set(e.view,i),i===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new p.a("contextualballoon-remove-view-not-exist",[this,e]);const t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(1===t.size?1<this._idToStack.size?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),1===t.size?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}showStack(e){this.visibleStack=e;const t=this._idToStack.get(e);if(!t)throw new p.a("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop())}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(t){return Array.from(this._idToStack.entries()).find(e=>e[1]===t)[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}_createRotatorView(){const e=new Sl(this.editor.locale),n=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(e,t)=>!t&&1<e),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(e,t)=>{if(t<2)return"";var i=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return n("%0 of %1",[i,t])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new Pl(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(e,t)=>!t&&2<=e?Math.min(e-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:t="",withArrow:i=!0,singleViewMode:n=!1}){this.view.class=t,this.view.withArrow=i,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),n&&(this._singleViewMode=!0)}_getBalloonPosition(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&!e.limiter&&(e=Object.assign({},e,{limiter:this.positionLimiter})),e}}class Sl extends ka{constructor(e){super(e);const t=e.t,i=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new Yo,this.buttonPrevView=this._createButtonView(t("Previous"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>'),this.buttonNextView=this._createButtonView(t("Next"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>'),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",i.to("isNavigationVisible",e=>e?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:i.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,t){const i=new ja(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i}}class Pl extends ka{constructor(e,t){super(e);const i=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=t,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",i.to("numberOfPanels",e=>e?"":"ck-hidden")],style:{top:i.to("top",El),left:i.to("left",El),width:i.to("width",El),height:i.to("height",El)}},children:this.content}),this.on("change:numberOfPanels",(e,t,i,n)=>{n<i?this._addPanels(i-n):this._removePanels(n-i),this.updatePosition()})}_addPanels(e){for(;e--;){const e=new ka;e.setTemplate({tag:"div"}),this.content.add(e),this.registerChild(e)}}_removePanels(e){for(;e--;){const e=this.content.last;this.content.remove(e),this.deregisterChild(e),e.destroy()}}updatePosition(){var e,t,i,n;this.numberOfPanels&&({top:e,left:t}=this._balloonPanelView,{width:i,height:n}=new Bo(this._balloonPanelView.element),Object.assign(this,{top:e,left:t,width:i,height:n}))}}i(55);const Ml=qo("px");class Nl extends ka{constructor(e){super(e);const t=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheLimiter",!1),this.set("_hasViewportTopOffset",!1),this.content=this.createCollection(),this._contentPanelPlaceholder=new _a({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:t.to("isSticky",e=>e?"block":"none"),height:t.to("isSticky",e=>e?Ml(this._panelRect.height):null)}}}).render(),this._contentPanel=new _a({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",t.if("isSticky","ck-sticky-panel__content_sticky"),t.if("_isStickyToTheLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:t.to("isSticky",e=>e?Ml(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:t.to("_hasViewportTopOffset",e=>e?Ml(this.viewportTopOffset):null),bottom:t.to("_isStickyToTheLimiter",e=>e?Ml(this.limiterBottomOffset):null),marginLeft:t.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this._contentPanel]})}render(){super.render(),this._checkIfShouldBeSticky(),this.listenTo(qn.window,"scroll",()=>{this._checkIfShouldBeSticky()}),this.listenTo(this,"change:isActive",()=>{this._checkIfShouldBeSticky()})}_checkIfShouldBeSticky(){var e=this._panelRect=this._contentPanel.getBoundingClientRect();let t;this.limiterElement?(t=this._limiterRect=this.limiterElement.getBoundingClientRect(),this.isSticky=this.isActive&&t.top<this.viewportTopOffset&&this._panelRect.height+this.limiterBottomOffset<t.height):this.isSticky=!1,this.isSticky?(this._isStickyToTheLimiter=t.bottom<e.height+this.limiterBottomOffset+this.viewportTopOffset,this._hasViewportTopOffset=!this._isStickyToTheLimiter&&!!this.viewportTopOffset,this._marginLeft=this._isStickyToTheLimiter?null:Ml(-qn.window.scrollX)):(this._isStickyToTheLimiter=!1,this._hasViewportTopOffset=!1,this._marginLeft=null)}}qo("px"),i(57),qo("px"),qo("px"),i(59);const Rl=new WeakMap;function Ol(e){const{view:t,element:i,text:n,isDirectHost:o=!0,keepOnFocus:r=!1}=e,s=t.document;Rl.has(s)||(Rl.set(s,new Map),s.registerPostFixer(e=>zl(s,e))),Rl.get(s).set(i,{text:n,isDirectHost:o,keepOnFocus:r,hostElement:o?i:null}),t.change(e=>zl(s,e))}function zl(e,t){const i=Rl.get(e),n=[];let o=!1;for(const[e,r]of i)r.isDirectHost&&(n.push(e),Dl(t,e,r)&&(o=!0));for(const[e,s]of i)if(!s.isDirectHost){const i=function(e){if(e.childCount){const t=e.getChild(0);if(t.is("element")&&!t.is("uiElement"))return t}return null}(e);i&&(n.includes(i)||(s.hostElement=i,Dl(t,e,s)&&(o=!0)))}return o}function Dl(e,t,i){const{text:n,isDirectHost:o,hostElement:r}=i;let s=!1;return r.getAttribute("data-placeholder")!==n&&(e.setAttribute("data-placeholder",n,r),s=!0),(o||1==t.childCount)&&(a=r,t=i.keepOnFocus,a.isAttached()&&!Array.from(a.getChildren()).some(e=>!e.is("uiElement"))&&(t||(!(t=a.document).isFocused||(t=t.selection.anchor)&&t.parent!==a)))?(i=e,!(l=r).hasClass("ck-placeholder")&&(i.addClass("ck-placeholder",l),1)&&(s=!0)):(l=e,(e=r).hasClass("ck-placeholder")&&(l.removeClass("ck-placeholder",e),1)&&(s=!0)),s;var a,l}const Ll=new Map;function Vl(e,t,i){let n=Ll.get(e);n||(n=new Map,Ll.set(e,n)),n.set(t,i)}function jl(e){return[e]}function Bl(e,t,i={}){const n=function(e,t){const i=Ll.get(e);return i&&i.has(t)?i.get(t):jl}(e.constructor,t.constructor);try{return n(e=e.clone(),t,i)}catch(e){throw e}}class Fl{constructor(e,t,i=!1){this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!i,this._relations=new Map}setOriginalOperations(e,t=null){var i=t?this.originalOperations.get(t):null;for(const t of e)this.originalOperations.set(t,i||t)}updateRelation(e,t){switch(e.constructor){case Cs:switch(t.constructor){case Ps:e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter");break;case Cs:e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter")}break;case Ms:switch(t.constructor){case Ps:e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");break;case Cs:if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{const l=br._createFromPositionAndShift(t.sourcePosition,t.howMany);var i,n;e.splitPosition.hasSameParentAs(t.sourcePosition)&&l.containsPosition(e.splitPosition)&&(i=l.end.offset-e.splitPosition.offset,n=e.splitPosition.offset-l.start.offset,this._setRelation(e,t,{howMany:i,offset:n}))}}break;case Ps:switch(t.constructor){case Ps:e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement");break;case Ms:e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource")}break;case Es:{const c=e.newRange;if(!c)return;switch(t.constructor){case Cs:{const d=br._createFromPositionAndShift(t.sourcePosition,t.howMany),h=d.containsPosition(c.start)||d.start.isEqual(c.start),u=d.containsPosition(c.end)||d.end.isEqual(c.end);!h&&!u||d.containsRange(c)||this._setRelation(e,t,{side:h?"left":"right",path:(h?c.start:c.end).path.slice()});break}case Ps:var o=c.start.isEqual(t.targetPosition),r=c.start.isEqual(t.deletionPosition),s=c.end.isEqual(t.deletionPosition),a=c.end.isEqual(t.sourcePosition);(o||r||s||a)&&this._setRelation(e,t,{wasInLeftElement:o,wasStartBeforeMergedElement:r,wasEndBeforeMergedElement:s,wasInRightElement:a})}break}}}getContext(e,t,i){return{aIsStrong:i,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){return(e=this.originalOperations.get(e)).wasUndone||this._history.isUndoneOperation(e)}_getRelation(e,t){if(t=this.originalOperations.get(t),!(t=this._history.getUndoneOperation(t)))return null;const i=this.originalOperations.get(e),n=this._relations.get(i);return n&&n.get(t)||null}_setRelation(e,t,i){e=this.originalOperations.get(e),t=this.originalOperations.get(t);let n=this._relations.get(e);n||(n=new Map,this._relations.set(e,n)),n.set(t,i)}}function Hl(e,t){for(const i of e)i.baseVersion=t++}function Ul(t,i){for(let e=0;e<i;e++)t.push(new Gs(0))}function Wl(e,t,i){var n=e.nodes.getNode(0).getAttribute(t);return n==i?null:(e=new br(e.position,e.position.getShiftedBy(e.howMany)),new xs(e,t,n,i,0))}function ql(e,t){return null===e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany)}function $l(i,e){const n=[];for(let t=0;t<i.length;t++){var o=i[t],r=new Cs(o.start,o.end.offset-o.start.offset,e,0);n.push(r);for(let e=t+1;e<i.length;e++)i[e]=i[e]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];e=e._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return n}Vl(xs,xs,(t,e,i)=>{if(t.key===e.key&&t.range.start.hasSameParentAs(e.range.start)){const n=t.range.getDifference(e.range).map(e=>new xs(e,t.key,t.oldValue,t.newValue,0)),o=t.range.getIntersection(e.range);return o&&i.aIsStrong&&n.push(new xs(o,e.key,e.newValue,t.newValue,0)),0==n.length?[new Gs(0)]:n}return[t]}),Vl(xs,Ts,(t,e)=>{if(t.range.start.hasSameParentAs(e.position)&&t.range.containsPosition(e.position)){const n=t.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(e=>new xs(e,t.key,t.oldValue,t.newValue,t.baseVersion));var i;return!e.shouldReceiveAttributes||(i=Wl(e,t.key,t.oldValue))&&n.unshift(i),n}return t.range=t.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[t]}),Vl(xs,Ps,(t,e)=>{const i=[];return t.range.start.hasSameParentAs(e.deletionPosition)&&(t.range.containsPosition(e.deletionPosition)||t.range.start.isEqual(e.deletionPosition))&&i.push(br._createFromPositionAndShift(e.graveyardPosition,1)),(e=t.range._getTransformedByMergeOperation(e)).isCollapsed||i.push(e),i.map(e=>new xs(e,t.key,t.oldValue,t.newValue,t.baseVersion))}),Vl(xs,Cs,(t,e)=>function(e,t){const i=br._createFromPositionAndShift(t.sourcePosition,t.howMany);let n=null,o=[];i.containsRange(e,!0)?n=e:e.start.hasSameParentAs(i.start)?(o=e.getDifference(i),n=e.getIntersection(i)):o=[e];const r=[];for(var s of o){s=s._getTransformedByDeletion(t.sourcePosition,t.howMany);const i=t.getMovedRangeStart(),n=s.start.hasSameParentAs(i);s=s._getTransformedByInsertion(i,t.howMany,n),r.push(...s)}return n&&r.push(n._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!1)[0]),r}(t.range,e).map(e=>new xs(e,t.key,t.oldValue,t.newValue,t.baseVersion))),Vl(xs,Ms,(e,t)=>{if(e.range.end.isEqual(t.insertionPosition))return t.graveyardPosition||e.range.end.offset++,[e];if(e.range.start.hasSameParentAs(t.splitPosition)&&e.range.containsPosition(t.splitPosition)){const i=e.clone();return i.range=new br(t.moveTargetPosition.clone(),e.range.end._getCombined(t.splitPosition,t.moveTargetPosition)),e.range.end=t.splitPosition.clone(),e.range.end.stickiness="toPrevious",[e,i]}return e.range=e.range._getTransformedBySplitOperation(t),[e]}),Vl(Ts,xs,(e,t)=>{const i=[e];return e.shouldReceiveAttributes&&e.position.hasSameParentAs(t.range.start)&&t.range.containsPosition(e.position)&&(t=Wl(e,t.key,t.newValue))&&i.push(t),i}),Vl(Ts,Ts,(e,t,i)=>(e.position.isEqual(t.position)&&i.aIsStrong||(e.position=e.position._getTransformedByInsertOperation(t)),[e])),Vl(Ts,Cs,(e,t)=>(e.position=e.position._getTransformedByMoveOperation(t),[e])),Vl(Ts,Ms,(e,t)=>(e.position=e.position._getTransformedBySplitOperation(t),[e])),Vl(Ts,Ps,(e,t)=>(e.position=e.position._getTransformedByMergeOperation(t),[e])),Vl(Es,Ts,(e,t)=>(e.oldRange&&(e.oldRange=e.oldRange._getTransformedByInsertOperation(t)[0]),e.newRange&&(e.newRange=e.newRange._getTransformedByInsertOperation(t)[0]),[e])),Vl(Es,Es,(e,t,i)=>{if(e.name==t.name){if(!i.aIsStrong)return[new Gs(0)];e.oldRange=t.newRange?t.newRange.clone():null}return[e]}),Vl(Es,Ps,(e,t)=>(e.oldRange&&(e.oldRange=e.oldRange._getTransformedByMergeOperation(t)),e.newRange&&(e.newRange=e.newRange._getTransformedByMergeOperation(t)),[e])),Vl(Es,Cs,(e,t,i)=>{if(e.oldRange&&(e.oldRange=br._createFromRanges(e.oldRange._getTransformedByMoveOperation(t))),e.newRange){if(i.abRelation){var n=br._createFromRanges(e.newRange._getTransformedByMoveOperation(t));if("left"==i.abRelation.side&&t.targetPosition.isEqual(e.newRange.start))return e.newRange.start.path=i.abRelation.path,e.newRange.end=n.end,[e];if("right"==i.abRelation.side&&t.targetPosition.isEqual(e.newRange.end))return e.newRange.start=n.start,e.newRange.end.path=i.abRelation.path,[e]}e.newRange=br._createFromRanges(e.newRange._getTransformedByMoveOperation(t))}return[e]}),Vl(Es,Ms,(e,t,i)=>{if(e.oldRange&&(e.oldRange=e.oldRange._getTransformedBySplitOperation(t)),e.newRange){if(i.abRelation){var n=e.newRange._getTransformedBySplitOperation(t);return e.newRange.start.isEqual(t.splitPosition)&&i.abRelation.wasStartBeforeMergedElement?e.newRange.start=gr._createAt(t.insertionPosition):e.newRange.start.isEqual(t.splitPosition)&&!i.abRelation.wasInLeftElement&&(e.newRange.start=gr._createAt(t.moveTargetPosition)),e.newRange.end.isEqual(t.splitPosition)&&i.abRelation.wasInRightElement?e.newRange.end=gr._createAt(t.moveTargetPosition):e.newRange.end.isEqual(t.splitPosition)&&i.abRelation.wasEndBeforeMergedElement?e.newRange.end=gr._createAt(t.insertionPosition):e.newRange.end=n.end,[e]}e.newRange=e.newRange._getTransformedBySplitOperation(t)}return[e]}),Vl(Ps,Ts,(e,t)=>(e.sourcePosition.hasSameParentAs(t.position)&&(e.howMany+=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByInsertOperation(t),e.targetPosition=e.targetPosition._getTransformedByInsertOperation(t),[e])),Vl(Ps,Ps,(e,t,i)=>{if(e.sourcePosition.isEqual(t.sourcePosition)&&e.targetPosition.isEqual(t.targetPosition)){if(i.bWasUndone){const i=t.graveyardPosition.path.slice();return i.push(0),e.sourcePosition=new gr(t.graveyardPosition.root,i),e.howMany=0,[e]}return[new Gs(0)]}if(!e.sourcePosition.isEqual(t.sourcePosition)||e.targetPosition.isEqual(t.targetPosition)||i.bWasUndone||"splitAtSource"==i.abRelation)return e.sourcePosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByMergeOperation(t),e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),e.graveyardPosition.isEqual(t.graveyardPosition)&&i.aIsStrong||(e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(t)),[e];var n="$graveyard"==e.targetPosition.root.rootName,o="$graveyard"==t.targetPosition.root.rootName;if(o&&!n||(!n||o)&&i.aIsStrong){const i=t.targetPosition._getTransformedByMergeOperation(t),r=e.targetPosition._getTransformedByMergeOperation(t);return[new Cs(i,e.howMany,r,0)]}return[new Gs(0)]}),Vl(Ps,Cs,(e,t,i)=>{const n=br._createFromPositionAndShift(t.sourcePosition,t.howMany);return"remove"==t.type&&!i.bWasUndone&&!i.forceWeakRemove&&e.deletionPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.sourcePosition)?[new Gs(0)]:(e.sourcePosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.sourcePosition.hasSameParentAs(t.sourcePosition)&&(e.howMany-=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByMoveOperation(t),e.targetPosition=e.targetPosition._getTransformedByMoveOperation(t),e.graveyardPosition.isEqual(t.targetPosition)||(e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(t)),[e])}),Vl(Ps,Ms,(e,t,i)=>{if(t.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedByDeletion(t.graveyardPosition,1),e.deletionPosition.isEqual(t.graveyardPosition)&&(e.howMany=t.howMany)),e.targetPosition.isEqual(t.splitPosition)){var n=0!=t.howMany,o=t.graveyardPosition&&e.deletionPosition.isEqual(t.graveyardPosition);if(n||o||"mergeTargetNotMoved"==i.abRelation)return e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(t),[e]}if(e.sourcePosition.isEqual(t.splitPosition)){if("mergeSourceNotMoved"==i.abRelation)return e.howMany=0,e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e];if("mergeSameElement"==i.abRelation||0<e.sourcePosition.offset)return e.sourcePosition=t.moveTargetPosition.clone(),e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e]}return e.sourcePosition.hasSameParentAs(t.splitPosition)&&(e.howMany=t.splitPosition.offset),e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(t),e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e]}),Vl(Cs,Ts,(e,t)=>{var i=br._createFromPositionAndShift(e.sourcePosition,e.howMany)._getTransformedByInsertOperation(t,!1)[0];return e.sourcePosition=i.start,e.howMany=i.end.offset-i.start.offset,e.targetPosition.isEqual(t.position)||(e.targetPosition=e.targetPosition._getTransformedByInsertOperation(t)),[e]}),Vl(Cs,Cs,(e,t,i)=>{const n=br._createFromPositionAndShift(e.sourcePosition,e.howMany),o=br._createFromPositionAndShift(t.sourcePosition,t.howMany);let r,s=i.aIsStrong,a=!i.aIsStrong;if("insertBefore"==i.abRelation||"insertAfter"==i.baRelation?a=!0:"insertAfter"!=i.abRelation&&"insertBefore"!=i.baRelation||(a=!1),r=e.targetPosition.isEqual(t.targetPosition)&&a?e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany):e.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),ql(e,t)&&ql(t,e))return[t.getReversed()];if(n.containsPosition(t.targetPosition)&&n.containsRange(o,!0))return n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),$l([n],r);if(o.containsPosition(e.targetPosition)&&o.containsRange(n,!0))return n.start=n.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),n.end=n.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),$l([n],r);var l=Kt(e.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if("prefix"==l||"extension"==l)return n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),$l([n],r);"remove"!=e.type||"remove"==t.type||i.aWasUndone||i.forceWeakRemove?"remove"==e.type||"remove"!=t.type||i.bWasUndone||i.forceWeakRemove||(s=!1):s=!0;const c=[],d=n.getDifference(o);for(const e of d){e.start=e.start._getTransformedByDeletion(t.sourcePosition,t.howMany),e.end=e.end._getTransformedByDeletion(t.sourcePosition,t.howMany);const i="same"==Kt(e.start.getParentPath(),t.getMovedRangeStart().getParentPath()),n=e._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,i);c.push(...n)}const h=n.getIntersection(o);return null!==h&&s&&(h.start=h.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),h.end=h.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),0===c.length?c.push(h):1==c.length?o.start.isBefore(n.start)||o.start.isEqual(n.start)?c.unshift(h):c.push(h):c.splice(1,0,h)),0===c.length?[new Gs(e.baseVersion)]:$l(c,r)}),Vl(Cs,Ms,(e,t,i)=>{let n=e.targetPosition.clone();e.targetPosition.isEqual(t.insertionPosition)&&t.graveyardPosition&&"moveTargetAfter"!=i.abRelation||(n=e.targetPosition._getTransformedBySplitOperation(t));const o=br._createFromPositionAndShift(e.sourcePosition,e.howMany);if(o.end.isEqual(t.insertionPosition))return t.graveyardPosition||e.howMany++,e.targetPosition=n,[e];if(o.start.hasSameParentAs(t.splitPosition)&&o.containsPosition(t.splitPosition)){let e=new br(t.splitPosition,o.end);return e=e._getTransformedBySplitOperation(t),$l([new br(o.start,t.splitPosition),e],n)}e.targetPosition.isEqual(t.splitPosition)&&"insertAtSource"==i.abRelation&&(n=t.moveTargetPosition),e.targetPosition.isEqual(t.insertionPosition)&&"insertBetween"==i.abRelation&&(n=e.targetPosition);const r=[o._getTransformedBySplitOperation(t)];if(t.graveyardPosition){const n=o.start.isEqual(t.graveyardPosition)||o.containsPosition(t.graveyardPosition);1<e.howMany&&n&&!i.aWasUndone&&r.push(br._createFromPositionAndShift(t.insertionPosition,1))}return $l(r,n)}),Vl(Cs,Ps,(i,n,o)=>{const e=br._createFromPositionAndShift(i.sourcePosition,i.howMany);if(n.deletionPosition.hasSameParentAs(i.sourcePosition)&&e.containsPosition(n.sourcePosition))if("remove"!=i.type||o.forceWeakRemove){if(1==i.howMany)return o.bWasUndone?(i.sourcePosition=n.graveyardPosition.clone(),i.targetPosition=i.targetPosition._getTransformedByMergeOperation(n),[i]):[new Gs(0)]}else if(!o.aWasUndone){const o=[];let e=n.graveyardPosition.clone(),t=n.targetPosition._getTransformedByMergeOperation(n);1<i.howMany&&(o.push(new Cs(i.sourcePosition,i.howMany-1,i.targetPosition,0)),e=e._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany-1),t=t._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany-1));const s=n.deletionPosition._getCombined(i.sourcePosition,i.targetPosition),a=new Cs(e,1,s,0),l=a.getMovedRangeStart().path.slice();l.push(0);var r=new gr(a.targetPosition.root,l);return t=t._getTransformedByMove(e,s,1),r=new Cs(t,n.howMany,r,0),o.push(a),o.push(r),o}return r=br._createFromPositionAndShift(i.sourcePosition,i.howMany)._getTransformedByMergeOperation(n),i.sourcePosition=r.start,i.howMany=r.end.offset-r.start.offset,i.targetPosition=i.targetPosition._getTransformedByMergeOperation(n),[i]}),Vl(Is,Ts,(e,t)=>(e.position=e.position._getTransformedByInsertOperation(t),[e])),Vl(Is,Ps,(e,t)=>(e.position.isEqual(t.deletionPosition)?(e.position=t.graveyardPosition.clone(),e.position.stickiness="toNext"):e.position=e.position._getTransformedByMergeOperation(t),[e])),Vl(Is,Cs,(e,t)=>(e.position=e.position._getTransformedByMoveOperation(t),[e])),Vl(Is,Is,(e,t,i)=>{if(e.position.isEqual(t.position)){if(!i.aIsStrong)return[new Gs(0)];e.oldName=t.newName}return[e]}),Vl(Is,Ms,(e,t)=>{if("same"!=Kt(e.position.path,t.splitPosition.getParentPath())||t.graveyardPosition)return e.position=e.position._getTransformedBySplitOperation(t),[e];{const t=new Is(e.position.getShiftedBy(1),e.oldName,e.newName,0);return[e,t]}}),Vl(Ss,Ss,(e,t,i)=>{if(e.root===t.root&&e.key===t.key){if(!i.aIsStrong||e.newValue===t.newValue)return[new Gs(0)];e.oldValue=t.newValue}return[e]}),Vl(Ms,Ts,(e,t)=>(e.splitPosition.hasSameParentAs(t.position)&&e.splitPosition.offset<t.position.offset&&(e.howMany+=t.howMany),e.splitPosition=e.splitPosition._getTransformedByInsertOperation(t),e.insertionPosition=e.insertionPosition._getTransformedByInsertOperation(t),[e])),Vl(Ms,Ps,(e,t,i)=>{if(e.graveyardPosition||i.bWasUndone||!e.splitPosition.hasSameParentAs(t.sourcePosition))return e.splitPosition.hasSameParentAs(t.deletionPosition)&&!e.splitPosition.isAfter(t.deletionPosition)&&e.howMany--,e.splitPosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.splitPosition=e.splitPosition._getTransformedByMergeOperation(t),e.insertionPosition=Ms.getInsertionPosition(e.splitPosition),e.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(t)),[e];{const i=t.graveyardPosition.path.slice();i.push(0);const n=new gr(t.graveyardPosition.root,i),o=Ms.getInsertionPosition(new gr(t.graveyardPosition.root,i)),r=new Ms(n,0,o,null,0);return e.splitPosition=e.splitPosition._getTransformedByMergeOperation(t),e.insertionPosition=Ms.getInsertionPosition(e.splitPosition),e.graveyardPosition=r.insertionPosition.clone(),e.graveyardPosition.stickiness="toNext",[r,e]}}),Vl(Ms,Cs,(e,t,i)=>{const n=br._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.graveyardPosition){const r=n.start.isEqual(e.graveyardPosition)||n.containsPosition(e.graveyardPosition);if(!i.bWasUndone&&r){const i=e.splitPosition._getTransformedByMoveOperation(t),n=e.graveyardPosition._getTransformedByMoveOperation(t),r=n.path.slice();r.push(0);var o=new gr(n.root,r);return[new Cs(i,e.howMany,o,0)]}e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(t)}const r=e.splitPosition.isEqual(t.targetPosition);if(r&&("insertAtSource"==i.baRelation||"splitBefore"==i.abRelation))return e.howMany+=t.howMany,e.splitPosition=e.splitPosition._getTransformedByDeletion(t.sourcePosition,t.howMany),e.insertionPosition=Ms.getInsertionPosition(e.splitPosition),[e];if(r&&i.abRelation&&i.abRelation.howMany){const{howMany:t,offset:n}=i.abRelation;return e.howMany+=t,e.splitPosition=e.splitPosition.getShiftedBy(n),[e]}if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.splitPosition)){const i=t.howMany-(e.splitPosition.offset-t.sourcePosition.offset);return e.howMany-=i,e.splitPosition.hasSameParentAs(t.targetPosition)&&e.splitPosition.offset<t.targetPosition.offset&&(e.howMany+=t.howMany),e.splitPosition=t.sourcePosition.clone(),e.insertionPosition=Ms.getInsertionPosition(e.splitPosition),[e]}return t.sourcePosition.isEqual(t.targetPosition)||(e.splitPosition.hasSameParentAs(t.sourcePosition)&&e.splitPosition.offset<=t.sourcePosition.offset&&(e.howMany-=t.howMany),e.splitPosition.hasSameParentAs(t.targetPosition)&&e.splitPosition.offset<t.targetPosition.offset&&(e.howMany+=t.howMany)),e.splitPosition.stickiness="toNone",e.splitPosition=e.splitPosition._getTransformedByMoveOperation(t),e.splitPosition.stickiness="toNext",e.graveyardPosition?e.insertionPosition=e.insertionPosition._getTransformedByMoveOperation(t):e.insertionPosition=Ms.getInsertionPosition(e.splitPosition),[e]}),Vl(Ms,Ms,(e,t,i)=>{if(e.splitPosition.isEqual(t.splitPosition)){if(!e.graveyardPosition&&!t.graveyardPosition)return[new Gs(0)];if(e.graveyardPosition&&t.graveyardPosition&&e.graveyardPosition.isEqual(t.graveyardPosition))return[new Gs(0)];if("splitBefore"==i.abRelation)return e.howMany=0,e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(t),[e]}if(e.graveyardPosition&&t.graveyardPosition&&e.graveyardPosition.isEqual(t.graveyardPosition)){var n="$graveyard"==e.splitPosition.root.rootName,o="$graveyard"==t.splitPosition.root.rootName;if(o&&!n||(!n||o)&&i.aIsStrong){const r=[];return t.howMany&&r.push(new Cs(t.moveTargetPosition,t.howMany,t.splitPosition,0)),e.howMany&&r.push(new Cs(e.splitPosition,e.howMany,e.moveTargetPosition,0)),r}return[new Gs(0)]}if(e.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(t)),e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==i.abRelation)return e.howMany++,[e];if(t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==i.baRelation){const s=t.insertionPosition.path.slice();return s.push(0),i=new gr(t.insertionPosition.root,s),[e,new Cs(e.insertionPosition,1,i,0)]}return e.splitPosition.hasSameParentAs(t.splitPosition)&&e.splitPosition.offset<t.splitPosition.offset&&(e.howMany-=t.howMany),e.splitPosition=e.splitPosition._getTransformedBySplitOperation(t),e.insertionPosition=Ms.getInsertionPosition(e.splitPosition),[e]});class Yl extends bo{constructor(e){super(e),this.domEventType="click"}onDomEvent(e){this.fire(e.type,e)}}class Gl extends bo{constructor(e){super(e),this.domEventType=["mousedown","mouseup","mouseover","mouseout"]}onDomEvent(e){this.fire(e.type,e)}}class Kl{constructor(e){this.document=e}createDocumentFragment(e){return new fn(this.document,e)}createElement(e,t,i){return new Si(this.document,e,t,i)}createText(e){return new Zt(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,i){return i._insertChild(e,t)}removeChildren(e,t,i){return i._removeChildren(e,t)}remove(e){const t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){const i=e.parent;return!!i&&(e=i.getChildIndex(e),this.removeChildren(e,1,i),this.insertChild(e,t,i),!0)}unwrapElement(e){const t=e.parent;var i;t&&(i=t.getChildIndex(e),this.remove(e),this.insertChild(i,e.getChildren(),t))}rename(e,t){return e=new Si(this.document,e,t.getAttributes(),t.getChildren()),this.replace(t,e)?e:null}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){(i=He(e)&&void 0===i?t:i)._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return Li._createAt(e,t)}createPositionAfter(e){return Li._createAfter(e)}createPositionBefore(e){return Li._createBefore(e)}createRange(e,t){return new Vi(e,t)}createRangeOn(e){return Vi._createOn(e)}createRangeIn(e){return Vi._createIn(e)}createSelection(e,t,i){return new Fi(e,t,i)}}new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","rebeccapurple","currentcolor","transparent"]);class Ql extends ua{constructor(e,t){super(e),this.view=t,this._toolbarConfig=el(e.config.get("toolbar")),this._elementReplacer=new zo}get element(){return this.view.element}init(e){const t=this.editor,i=this.view,n=t.editing.view,o=i.editable,r=n.document.getRoot();o.name=r.rootName,i.render();var s=o.element;this.setEditableElement(o.name,s),this.focusTracker.add(s),i.editable.bind("isFocused").to(this.focusTracker),n.attachDomRoot(s),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}destroy(){const e=this.view,t=this.editor.editing.view;this._elementReplacer.restore(),t.detachDomRoot(e.editable.name),e.destroy(),super.destroy()}_initToolbar(){const e=this.editor,t=this.view,i=e.editing.view;var n,o,r,s,a,l;t.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),t.stickyPanel.limiterElement=t.element,this._toolbarConfig.viewportTopOffset&&(t.stickyPanel.viewportTopOffset=this._toolbarConfig.viewportTopOffset),t.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),[{origin:n,originKeystrokeHandler:o,originFocusTracker:r,toolbar:s,beforeFocus:a,afterBlur:l}]=[{origin:i,originFocusTracker:this.focusTracker,originKeystrokeHandler:e.keystrokes,toolbar:t.toolbar}],r.add(s.element),o.set("Alt+F10",(e,t)=>{r.isFocused&&!s.focusTracker.isFocused&&(a&&a(),s.focus(),t())}),s.keystrokes.set("Esc",(e,t)=>{s.focusTracker.isFocused&&(n.focus(),l&&l(),t())})}_initPlaceholder(){const e=this.editor,t=e.editing.view,i=t.document.getRoot(),n=e.sourceElement,o=e.config.get("placeholder")||n&&"textarea"===n.tagName.toLowerCase()&&n.getAttribute("placeholder");o&&Ol({view:t,element:i,text:o,isDirectHost:!1,keepOnFocus:!0})}}i(61);class Jl extends gl{constructor(e,t,i={}){super(e),this.stickyPanel=new Nl(e),this.toolbar=new tl(e,{shouldGroupWhenFull:i.shouldToolbarGroupWhenFull}),this.editable=new pl(e,t)}render(){super.render(),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class Zl extends ca{constructor(e,t){super(t),Dt(e)&&(this.sourceElement=e),this.model.document.createRoot(),e=!this.config.get("toolbar.shouldNotGroupWhenFull"),e=new Jl(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:e}),this.ui=new Ql(this,e),function(t){if(!v(t.updateSourceElement))throw new p.a("attachtoform-missing-elementapi-interface",t);const i=t.sourceElement;if(i&&"textarea"===i.tagName.toLowerCase()&&i.form){let e;const n=i.form,o=()=>t.updateSourceElement();v(n.submit)&&(e=n.submit,n.submit=()=>{o(),e.apply(n)}),n.addEventListener("submit",o),t.on("destroy",()=>{n.removeEventListener("submit",o),e&&(n.submit=e)})}}(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(i,n={}){return new Promise(e=>{const t=new this(i,n);e(t.initPlugins().then(()=>t.ui.init(Dt(i)?i:null)).then(()=>{if(!Dt(i)&&n.initialData)throw new p.a("editor-create-initial-data",null);var e=void 0!==n.initialData?n.initialData:Dt(e=i)?e instanceof HTMLTextAreaElement?e.value:e.innerHTML:e;return t.data.init(e)}).then(()=>t.fire("ready")).then(()=>t))})}}Me(Zl,{setData(e){this.data.set(e)},getData(e){return this.data.get(e)}}),Me(Zl,t);class Xl{constructor(e){this.files=function(e){const t=e.files?Array.from(e.files):[],i=e.items?Array.from(e.items):[];return t.length?t:i.filter(e=>"file"===e.kind).map(e=>e.getAsFile())}(e),this._native=e}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}get isCanceled(){return"none"==this._native.dropEffect||!!this._native.mozUserCancelled}}class ec extends bo{constructor(e){super(e);const r=this.document;function t(o){return(e,t)=>{t.preventDefault();var i=t.dropRange?[t.dropRange]:null,n=new l(r,o);r.fire(n,{dataTransfer:t.dataTransfer,method:e.name,targetRanges:i,target:t.target}),n.stop.called&&t.stopPropagation()}}this.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"],this.listenTo(r,"paste",t("clipboardInput"),{priority:"low"}),this.listenTo(r,"drop",t("clipboardInput"),{priority:"low"}),this.listenTo(r,"dragover",t("dragging"),{priority:"low"})}onDomEvent(e){const t={dataTransfer:new Xl(e.clipboardData||e.dataTransfer)};"drop"!=e.type&&"dragover"!=e.type||(t.dropRange=function(e,t){const i=t.target.ownerDocument,n=t.clientX,o=t.clientY;let r;return i.caretRangeFromPoint&&i.caretRangeFromPoint(n,o)?r=i.caretRangeFromPoint(n,o):t.rangeParent&&(r=i.createRange(),r.setStart(t.rangeParent,t.rangeOffset),r.collapse(!0)),r?e.domConverter.domRangeToView(r):null}(this.view,e)),this.fire(e.type,e,t)}}const tc=["figcaption","li"];class ic extends Ne{static get pluginName(){return"ClipboardPipeline"}init(){this.editor.editing.view.addObserver(ec),this._setupPasteDrop(),this._setupCopyCut()}_setupPasteDrop(){const t=this.editor,n=t.model,r=t.editing.view,e=r.document;this.listenTo(e,"clipboardInput",e=>{t.isReadOnly&&e.stop()},{priority:"highest"}),this.listenTo(e,"clipboardInput",(e,t)=>{const i=t.dataTransfer;let n=t.content||"";n||(i.getData("text/html")?n=i.getData("text/html").replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>1==t.length?" ":t):i.getData("text/plain")&&(((o=(o=i.getData("text/plain")).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).includes("</p><p>")||o.includes("<br>"))&&(o=`<p>${o}</p>`),n=o),n=this.editor.data.htmlProcessor.toView(n));var o=new l(this,"inputTransformation");this.fire(o,{content:n,dataTransfer:i,targetRanges:t.targetRanges,method:t.method}),o.stop.called&&e.stop(),r.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(e,t)=>{if(!t.content.isEmpty){const i=this.editor.data.toModel(t.content,"$clipboardHolder");0!=i.childCount&&(e.stop(),n.change(()=>{this.fire("contentInsertion",{content:i,method:t.method,dataTransfer:t.dataTransfer,targetRanges:t.targetRanges})}))}},{priority:"low"}),this.listenTo(this,"contentInsertion",(e,t)=>{t.resultRange=n.insertContent(t.content)},{priority:"low"})}_setupCopyCut(){const n=this.editor,o=n.model.document,r=n.editing.view.document;function i(e,t){var i=t.dataTransfer;t.preventDefault(),t=n.data.toView(n.model.getSelectedContent(o.selection)),r.fire("clipboardOutput",{dataTransfer:i,content:t,method:e.name})}this.listenTo(r,"copy",i,{priority:"low"}),this.listenTo(r,"cut",(e,t)=>{n.isReadOnly?t.preventDefault():i(e,t)},{priority:"low"}),this.listenTo(r,"clipboardOutput",(e,t)=>{t.content.isEmpty||(t.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(t.content)),t.dataTransfer.setData("text/plain",function t(i){let n="";if(i.is("$text")||i.is("$textProxy"))n=i.data;else if(i.is("element","img")&&i.hasAttribute("alt"))n=i.getAttribute("alt");else if(i.is("element","br"))n="\n";else{let e=null;for(const o of i.getChildren()){const i=t(o);e&&(e.is("containerElement")||o.is("containerElement"))&&(tc.includes(e.name)||tc.includes(o.name)?n+="\n":n+="\n\n"),n+=i,e=o}}return n}(t.content))),"cut"==t.method&&n.model.deleteContent(o.selection)},{priority:"low"})}}function*nc(e,t){for(const i of t)i&&e.getAttributeProperties(i[0]).copyOnEnter&&(yield i)}class oc extends Oe{execute(){const t=this.editor.model,i=t.document;t.change(e=>{!function(e,t,i,n){const o=i.isCollapsed,r=i.getFirstRange(),s=r.start.parent,a=r.end.parent;if(n.isLimit(s)||n.isLimit(a))return o||s!=a||e.deleteContent(i);if(o){const e=nc(t.model.schema,i.getAttributes());rc(t,r.start),t.setSelectionAttribute(e)}else{const n=!(r.start.isAtStart&&r.end.isAtEnd),o=s==a;e.deleteContent(i,{leaveUnmerged:n}),n&&(o?rc(t,i.focus):t.setSelection(a,0))}}(this.editor.model,e,i.selection,t.schema),this.fire("afterExecute",{writer:e})})}}function rc(e,t){e.split(t),e.setSelection(t.parent.nextSibling,0)}class sc extends oo{constructor(e){super(e);const n=this.document;n.on("keydown",(e,t)=>{var i;this.isEnabled&&t.keyCode==rn.enter&&(i=new Ui(n,"enter",n.selection.getFirstRange()),n.fire(i,new fo(n,t.domEvent,{isSoft:t.shiftKey})),i.stop.called&&e.stop())})}observe(){}}class ac extends Ne{static get pluginName(){return"Enter"}init(){const i=this.editor,n=i.editing.view,e=n.document;n.addObserver(sc),i.commands.add("enter",new oc(i)),this.listenTo(e,"enter",(e,t)=>{t.preventDefault(),t.isSoft||(i.execute("enter"),n.scrollToTheSelection())},{priority:"low"})}}class lc{constructor(e,t=20){this.model=e,this.size=0,this.limit=t,this.isLocked=!1,this._changeCallback=(e,t)=>{"transparent"!=t.type&&t!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch()),this._batch}input(e){this.size+=e,this.size>=this.limit&&this._reset(!0)}lock(){this.isLocked=!0}unlock(){this.isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e){this.isLocked&&!e||(this._batch=null,this.size=0)}}class cc extends Oe{constructor(e,t){super(e),this.direction=t,this._buffer=new lc(e.model,e.config.get("typing.undoStep"))}get buffer(){return this._buffer}execute(o={}){const r=this.editor.model,s=r.document;r.enqueueChange(this._buffer.batch,e=>{this._buffer.lock();const i=e.createSelection(o.selection||s.selection),t=o.sequence||1,n=i.isCollapsed;if(i.isCollapsed&&r.modifySelection(i,{direction:this.direction,unit:o.unit}),this._shouldEntireContentBeReplacedWithParagraph(t))this._replaceEntireContentWithParagraph(e);else if(this._shouldReplaceFirstBlockWithParagraph(i,t))this.editor.execute("paragraph",{selection:i});else if(!i.isCollapsed){let t=0;i.getFirstRange().getMinimalFlatRanges().forEach(e=>{t+=Bi(e.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),r.deleteContent(i,{doNotResetEntireContent:n,direction:this.direction}),this._buffer.input(t),e.setSelection(i),this._buffer.unlock()}})}_shouldEntireContentBeReplacedWithParagraph(e){if(1<e)return!1;const t=this.editor.model,i=t.document.selection,n=t.schema.getLimitElement(i);return!(!i.isCollapsed||!i.containsEntireContent(n))&&(!!t.schema.checkChild(n,"paragraph")&&(!(e=n.getChild(0))||"paragraph"!==e.name))}_replaceEntireContentWithParagraph(e){const t=this.editor.model,i=t.document.selection,n=t.schema.getLimitElement(i),o=e.createElement("paragraph");e.remove(e.createRangeIn(n)),e.insert(o,n),e.setSelection(o,0)}_shouldReplaceFirstBlockWithParagraph(e,t){const i=this.editor.model;if(1<t||"backward"!=this.direction)return!1;if(!e.isCollapsed)return!1;const n=e.getFirstPosition(),o=i.schema.getLimitElement(n),r=o.getChild(0);return n.parent==r&&!!e.containsEntireContent(r)&&!!i.schema.checkChild(o,"paragraph")&&"paragraph"!=r.name}}class dc extends oo{constructor(o){super(o);const r=o.document;let s=0;function a(e,t,i){var n=new Ui(r,"delete",r.selection.getFirstRange());r.fire(n,new fo(r,t,i)),n.stop.called&&e.stop()}r.on("keyup",(e,t)=>{t.keyCode!=rn.delete&&t.keyCode!=rn.backspace||(s=0)}),r.on("keydown",(e,t)=>{const i={};if(t.keyCode==rn.delete)i.direction="forward",i.unit="character";else{if(t.keyCode!=rn.backspace)return;i.direction="backward",i.unit="codePoint"}var n=tn.isMac?t.altKey:t.ctrlKey;i.unit=n?"word":i.unit,i.sequence=++s,a(e,t.domEvent,i)}),tn.isAndroid&&r.on("beforeinput",(e,t)=>{if("deleteContentBackward"==t.domEvent.inputType){const i={unit:"codepoint",direction:"backward",sequence:1},n=t.domTarget.ownerDocument.defaultView.getSelection();n.anchorNode==n.focusNode&&n.anchorOffset+1!=n.focusOffset&&(i.selectionToRemove=o.domConverter.domSelectionToView(n)),a(e,t.domEvent,i)}})}observe(){}}class hc extends Ne{static get pluginName(){return"Delete"}init(){const n=this.editor,o=n.editing.view,e=o.document;o.addObserver(dc);var t=new cc(n,"forward");if(n.commands.add("deleteForward",t),n.commands.add("forwardDelete",t),n.commands.add("delete",new cc(n,"backward")),this.listenTo(e,"delete",(e,t)=>{const i={unit:t.unit,sequence:t.sequence};if(t.selectionToRemove){const o=n.model.createSelection(),e=[];for(const o of t.selectionToRemove.getRanges())e.push(n.editing.mapper.toModelRange(o));o.setTo(e),i.selection=o}n.execute("forward"==t.direction?"deleteForward":"delete",i),t.preventDefault(),o.scrollToTheSelection()},{priority:"low"}),tn.isAndroid){let i=null;this.listenTo(e,"delete",(e,t)=>{t=t.domTarget.ownerDocument.defaultView.getSelection(),i={anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}},{priority:"lowest"}),this.listenTo(e,"keyup",(e,t)=>{if(i){const e=t.domTarget.ownerDocument.defaultView.getSelection();e.collapse(i.anchorNode,i.anchorOffset),e.extend(i.focusNode,i.focusOffset),i=null}})}}}class uc{constructor(){this._stack=[]}add(e,t){var i=this._stack,n=i[0];this._insertDescriptor(e),n===(i=i[0])||gc(n,i)||this.fire("change:top",{oldDescriptor:n,newDescriptor:i,writer:t})}remove(e,t){var i=this._stack,n=i[0];this._removeDescriptor(e),n===(i=i[0])||gc(n,i)||this.fire("change:top",{oldDescriptor:n,newDescriptor:i,writer:t})}_insertDescriptor(t){const i=this._stack,n=i.findIndex(e=>e.id===t.id);if(!gc(t,i[n])){-1<n&&i.splice(n,1);let e=0;for(;i[e]&&((o=i[e]).priority>(r=t).priority||!(o.priority<r.priority)&&mc(o.classes)>mc(r.classes));)e++;var o,r;i.splice(e,0,t)}}_removeDescriptor(t){const e=this._stack,i=e.findIndex(e=>e.id===t);-1<i&&e.splice(i,1)}}function gc(e,t){return e&&t&&e.priority==t.priority&&mc(e.classes)==mc(t.classes)}function mc(e){return Array.isArray(e)?e.sort().join(","):e}function pc(e){return!!e.is("element")&&!!e.getCustomProperty("widget")}function fc(e,t,i={}){if(!e.is("containerElement"))throw new p.a("widget-to-widget-wrong-element-type",null,{element:e});return t.setAttribute("contenteditable","false",e),t.addClass("ck-widget",e),t.setCustomProperty("widget",!0,e),e.getFillerOffset=xc,i.label&&(o=i.label,t.setCustomProperty("widgetLabel",o,e)),i.hasSelectionHandle&&(n=e,i=(o=t).createUIElement("div",{class:"ck ck-widget__selection-handle"},function(e){const t=this.toDomElement(e),i=new La;return i.set("content",'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>'),i.render(),t.appendChild(i.element),t}),o.insert(o.createPositionAt(n,0),i),o.addClass(["ck-widget_with-selection-handle"],n)),kc(e,t,bc,wc),e;var n,o}function bc(e,t,i){if(t.classes&&i.addClass(Ut(t.classes),e),t.attributes)for(const n in t.attributes)i.setAttribute(n,t.attributes[n],e)}function wc(e,t,i){if(t.classes&&i.removeClass(Ut(t.classes),e),t.attributes)for(const n in t.attributes)i.removeAttribute(n,e)}function kc(i,e,n,o){const r=new uc;r.on("change:top",(e,t)=>{t.oldDescriptor&&o(i,t.oldDescriptor,t.writer),t.newDescriptor&&n(i,t.newDescriptor,t.writer)}),e.setCustomProperty("addHighlight",(e,t,i)=>r.add(t,i),i),e.setCustomProperty("removeHighlight",(e,t,i)=>r.remove(t,i),i)}function _c(n,o){return o.addClass(["ck-editor__editable","ck-editor__nested-editable"],n),o.setAttribute("contenteditable",n.isReadOnly?"false":"true",n),n.on("change:isReadOnly",(e,t,i)=>{o.setAttribute("contenteditable",i?"false":"true",n)}),n.on("change:isFocused",(e,t,i)=>{i?o.addClass("ck-editor__nested-editable_focused",n):o.removeClass("ck-editor__nested-editable_focused",n)}),n}function vc(e,t){const i=e.getSelectedElement();if(i){const n=Cc(e);if(n)return t.createRange(t.createPositionAt(i,n));if(t.schema.isObject(i)&&!t.schema.isInline(i))return t.createRangeOn(i)}const n=e.getSelectedBlocks().next().value;if(n){if(n.isEmpty)return t.createRange(t.createPositionAt(n,0));const i=t.createPositionAfter(n);return e.focus.isTouching(i)?t.createRange(i):t.createRange(t.createPositionBefore(n))}return t.createRange(e.focus)}function yc(e,t){const i=new Bo(qn.window),n=i.getIntersection(e),o=t.height+xl.arrowVerticalOffset;if(e.top-o>i.top||e.bottom+o<i.bottom)return null;var r=n||e,t=r.left+r.width/2-t.width/2;return{top:Math.max(e.top,0)+xl.arrowVerticalOffset,left:t,name:"arrow_n"}}function xc(){return null}function Ac(e,t,i){return e&&pc(e)&&!i.isInline(t)}function Cc(e){return e.getAttribute("widget-type-around")}Me(uc,s);const Tc=[an("arrowUp"),an("arrowRight"),an("arrowDown"),an("arrowLeft"),9,16,17,18,19,20,27,33,34,35,36,45,91,93,144,145,173,174,175,176,177,178,179,255];for(let e=112;e<=135;e++)Tc.push(e);function Ec(e){return e.ctrlKey||e.metaKey||Tc.includes(e.keyCode)}i(63);const Ic=["before","after"],Sc=(new DOMParser).parseFromString('<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',"image/svg+xml").firstChild;class Pc extends Ne{static get pluginName(){return"WidgetTypeAround"}static get requires(){return[ac,hc]}constructor(e){super(e),this._currentFakeCaretModelElement=null}init(){const n=this.editor,o=n.editing.view;this.on("change:isEnabled",(e,t,i)=>{o.change(e=>{for(const t of o.document.roots)i?e.removeClass("ck-widget__type-around_disabled",t):e.addClass("ck-widget__type-around_disabled",t)}),i||n.model.change(e=>{e.removeSelectionAttribute("widget-type-around")})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableDeleteContentIntegration()}destroy(){this._currentFakeCaretModelElement=null}_insertParagraph(e,t){const i=this.editor,n=i.editing.view;i.execute("insertParagraph",{position:i.model.createPositionAt(e,t)}),n.focus(),n.scrollToTheSelection()}_listenToIfEnabled(e,t,i,n){this.listenTo(e,t,(...e)=>{this.isEnabled&&i(...e)},n)}_insertParagraphAccordingToFakeCaretPosition(){const e=this.editor.model.document.selection,t=Cc(e);if(!t)return!1;var i=e.getSelectedElement();return this._insertParagraph(i,t),!0}_enableTypeAroundUIInjection(){const e=this.editor,r=e.model.schema,t=e.locale.t,s={before:t("Insert paragraph before block"),after:t("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(e,t,i)=>{var n,o=i.mapper.toViewElement(t.item);Ac(o,t.item,r)&&(t=i.writer,n=s,i=o,o=t.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(e){return function(e,t){for(const i of Ic){const n=new _a({tag:"div",attributes:{class:["ck","ck-widget__type-around__button","ck-widget__type-around__button_"+i],title:t[i]},children:[e.ownerDocument.importNode(Sc,!0)]});e.appendChild(n.render())}}(e=this.toDomElement(e),n),function(e){const t=new _a({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});e.appendChild(t.render())}(e),e}),t.insert(t.createPositionAt(i,"end"),o))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const n=this.editor,e=n.model,t=e.document.selection,r=e.schema,i=n.editing.view;function s(e){return"ck-widget_type-around_show-fake-caret_"+e}this._listenToIfEnabled(i.document,"arrowKey",(e,t)=>{this._handleArrowKeyPress(e,t)},{context:[pc,"$text"],priority:"high"}),this._listenToIfEnabled(t,"change:range",(e,t)=>{t.directChange&&n.model.change(e=>{e.removeSelectionAttribute("widget-type-around")})}),this._listenToIfEnabled(e.document,"change:data",()=>{var e=t.getSelectedElement();e&&Ac(n.editing.mapper.toViewElement(e),e,r)||n.model.change(e=>{e.removeSelectionAttribute("widget-type-around")})}),this._listenToIfEnabled(n.editing.downcastDispatcher,"selection",(e,t,i)=>{const n=i.writer;if(this._currentFakeCaretModelElement){const e=i.mapper.toViewElement(this._currentFakeCaretModelElement);e&&(n.removeClass(Ic.map(s),e),this._currentFakeCaretModelElement=null)}var o=t.selection.getSelectedElement();o&&(!Ac(i=i.mapper.toViewElement(o),o,r)||(t=Cc(t.selection))&&(n.addClass(s(t),i),this._currentFakeCaretModelElement=o))}),this._listenToIfEnabled(n.ui.focusTracker,"change:isFocused",(e,t,i)=>{i||n.model.change(e=>{e.removeSelectionAttribute("widget-type-around")})})}_handleArrowKeyPress(e,t){const i=this.editor,n=i.model,o=n.document.selection,r=n.schema,s=i.editing.view,a=hn(t.keyCode,i.locale.contentLanguageDirection),l=s.document.selection.getSelectedElement();let c;Ac(l,i.editing.mapper.toModelElement(l),r)?c=this._handleArrowKeyPressOnSelectedWidget(a):o.isCollapsed&&(c=this._handleArrowKeyPressWhenSelectionNextToAWidget(a)),c&&(t.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(t){const e=this.editor.model,i=Cc(e.document.selection);return e.change(e=>i?i!==(t?"after":"before")&&(e.removeSelectionAttribute("widget-type-around"),!0):(e.setSelectionAttribute("widget-type-around",t?"after":"before"),!0))}_handleArrowKeyPressWhenSelectionNextToAWidget(t){const e=this.editor,i=e.model,n=i.schema,o=e.plugins.get("Widget"),r=o._getObjectElementNextToSelection(t);return!!Ac(e.editing.mapper.toViewElement(r),r,n)&&(i.change(e=>{o._setSelectionOverElement(r),e.setSelectionAttribute("widget-type-around",t?"before":"after")}),!0)}_enableInsertingParagraphsOnButtonClick(){const s=this.editor,a=s.editing.view;this._listenToIfEnabled(a.document,"mousedown",(e,t)=>{var i,n,o,r=t.domTarget.closest(".ck-widget__type-around__button");r&&(i=r.classList.contains("ck-widget__type-around__button_before")?"before":"after",n=r,o=a.domConverter,n=n.closest(".ck-widget"),r=o.mapDomToView(n),r=s.editing.mapper.toModelElement(r),this._insertParagraph(r,i),t.preventDefault(),e.stop())})}_enableInsertingParagraphsOnEnterKeypress(){const s=this.editor,a=s.model.document.selection,e=s.editing.view;this._listenToIfEnabled(e.document,"enter",(t,i)=>{if("atTarget"==t.eventPhase){var n=a.getSelectedElement(),o=s.editing.mapper.toViewElement(n),r=s.model.schema;let e;this._insertParagraphAccordingToFakeCaretPosition()?e=!0:Ac(o,n,r)&&(this._insertParagraph(n,i.isSoft?"before":"after"),e=!0),e&&(i.preventDefault(),t.stop())}},{context:pc})}_enableInsertingParagraphsOnTypingKeystroke(){const e=this.editor.editing.view,i=[rn.enter,rn.delete,rn.backspace];this._listenToIfEnabled(e.document,"keydown",(e,t)=>{i.includes(t.keyCode)||Ec(t)||this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const s=this.editor,e=s.editing.view,a=s.model,l=a.schema;this._listenToIfEnabled(e.document,"delete",(t,e)=>{if("atTarget"==t.eventPhase){var i=Cc(a.document.selection);if(i){const n=e.direction,o=a.document.selection.getSelectedElement(),r="forward"==n;if("before"===i==r)s.execute("delete",{selection:a.createSelection(o,"on")});else{const t=l.getNearestSelectionRange(a.createPositionAt(o,i),n);if(t)if(t.isCollapsed){const e=a.createSelection(t.start);if(a.modifySelection(e,{direction:n}),e.focus.isEqual(t.start)){const s=function(e,t){let i=t;for(const n of t.getAncestors({parentFirst:!0})){if(1<n.childCount||e.isLimit(n))break;i=n}return i}(l,t.start.parent);a.deleteContent(a.createSelection(s,"on"),{doNotAutoparagraph:!0})}else a.change(e=>{e.setSelection(t),s.execute(r?"deleteForward":"delete")})}else a.change(e=>{e.setSelection(t),s.execute(r?"deleteForward":"delete")})}e.preventDefault(),t.stop()}}},{context:pc})}_enableInsertContentIntegration(){const e=this.editor,r=this.editor.model,s=r.document.selection;this._listenToIfEnabled(e.model,"insertContent",(e,[n,t])=>{if(!t||t.is("documentSelection")){const o=Cc(s);return o?(e.stop(),r.change(e=>{var t=s.getSelectedElement(),i=r.createPositionAt(t,o),t=e.createSelection(i),i=r.insertContent(n,t);return e.setSelection(t),i})):void 0}},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,i=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(e,[t])=>{t&&!t.is("documentSelection")||Cc(i)&&e.stop()},{priority:"high"})}}function Mc(e,t,i){const n=e.schema,o=e.createRangeIn(t.root),r="forward"==i?"elementStart":"elementEnd";for(const{previousPosition:e,item:s,type:a}of o.getWalker({startPosition:t,direction:i})){if(n.isLimit(s)&&!n.isInline(s))return e;if(a==r&&n.isBlock(s))return null}return null}function Nc(e,t,i){const n="backward"==i?t.end:t.start;if(e.checkChild(n,"$text"))return n;for(const{nextPosition:n}of t.getWalker({direction:i}))if(e.checkChild(n,"$text"))return n}i(65);class Rc extends Ne{static get pluginName(){return"Widget"}static get requires(){return[Pc,hc]}init(){const r=this.editor,e=r.editing.view,t=e.document;this._previouslySelected=new Set,this.editor.editing.downcastDispatcher.on("selection",(e,t,i)=>{const n=i.writer,o=t.selection;o.isCollapsed||!(t=o.getSelectedElement())||pc(t=r.editing.mapper.toViewElement(t))&&i.consumable.consume(o,"selection")&&n.setSelection(n.createRangeOn(t),{fake:!0,label:function(){const e=t.getCustomProperty("widgetLabel");return e?"function"==typeof e?e():e:""}()})}),this.editor.editing.downcastDispatcher.on("selection",(e,t,i)=>{this._clearPreviouslySelectedWidgets(i.writer);const n=i.writer,o=n.document.selection;let r=null;for(const e of o.getRanges())for(const t of e){const e=t.item;!pc(e)||(s=e,(a=r)&&Array.from(s.getAncestors()).includes(a))||(n.addClass("ck-widget_selected",e),this._previouslySelected.add(e),r=e)}var s,a},{priority:"low"}),e.addObserver(Gl),this.listenTo(t,"mousedown",(...e)=>this._onMousedown(...e)),this.listenTo(t,"arrowKey",(...e)=>{this._handleSelectionChangeOnArrowKeyPress(...e)},{context:[pc,"$text"]}),this.listenTo(t,"arrowKey",(...e)=>{this._preventDefaultOnArrowKeyPress(...e)},{context:"$root"}),this.listenTo(t,"arrowKey",function(d){const h=d.model;return(e,t)=>{const i=t.keyCode==rn.arrowup,n=t.keyCode==rn.arrowdown,o=t.shiftKey,r=h.document.selection;if(i||n){const l=n;if(!o||(s=r,a=l,s.isCollapsed||s.isBackward!=a)){var s,a;const c=function(e,t,i){const n=e.model;if(i){const e=t.isCollapsed?t.focus:t.getLastPosition(),o=Mc(n,e,"forward");return o?(i=n.createRange(e,o),(i=Nc(n.schema,i,"backward"))&&e.isBefore(i)?n.createRange(e,i):null):null}{const e=t.isCollapsed?t.focus:t.getFirstPosition(),r=Mc(n,e,"backward");return r?(t=n.createRange(r,e),(t=Nc(n.schema,t,"forward"))&&e.isAfter(t)?n.createRange(t,e):null):null}}(d,r,l);c&&!c.isCollapsed&&function(e,t,i){const n=e.model,o=e.view.domConverter;if(i){const e=n.createSelection(t.start);n.modifySelection(e),e.focus.isAtEnd||t.start.isEqual(e.focus)||(t=n.createRange(e.focus,t.end))}t=e.mapper.toViewRange(t),t=o.viewRangeToDom(t);let r;for(const e of Bo.getDomRangeRects(t))if(void 0!==r){if(Math.round(e.top)>=r)return;r=Math.max(r,Math.round(e.bottom))}else r=Math.round(e.bottom);return 1}(d,c,l)&&(h.change(e=>{var t=l?c.end:c.start;if(o){const i=h.createSelection(r.anchor);i.setFocus(t),e.setSelection(i)}else e.setSelection(t)}),e.stop(),t.preventDefault(),t.stopPropagation())}}}}(this.editor.editing),{context:"$text"}),this.listenTo(t,"delete",(e,t)=>{this._handleDelete("forward"==t.direction)&&(t.preventDefault(),e.stop())},{context:"$root"})}_onMousedown(e,t){const i=this.editor,n=i.editing.view,o=n.document;let r=t.target;if(function(e){for(;e;){if(e.is("editableElement")&&!e.is("rootElement"))return 1;if(pc(e))return;e=e.parent}}(r)){if((tn.isSafari||tn.isGecko)&&3<=t.domEvent.detail){const e=i.editing.mapper,n=r.is("attributeElement")?r.findAncestor(e=>!e.is("attributeElement")):r,o=e.toModelElement(n);t.preventDefault(),this.editor.model.change(e=>{e.setSelection(o,"in")})}}else(pc(r)||(r=r.findAncestor(pc),r))&&(tn.isAndroid&&t.preventDefault(),o.isFocused||n.focus(),t=i.editing.mapper.toModelElement(r),this._setSelectionOverElement(t))}_handleSelectionChangeOnArrowKeyPress(e,t){const i=t.keyCode,n=this.editor.model,o=n.schema,r=n.document.selection,s=r.getSelectedElement(),a=hn(i,this.editor.locale.contentLanguageDirection);if(s&&o.isObject(s)){const i=a?r.getLastPosition():r.getFirstPosition(),s=o.getNearestSelectionRange(i,a?"forward":"backward");s&&(n.change(e=>{e.setSelection(s)}),t.preventDefault(),e.stop())}else{var l;!r.isCollapsed||(l=this._getObjectElementNextToSelection(a))&&o.isObject(l)&&(this._setSelectionOverElement(l),t.preventDefault(),e.stop())}}_preventDefaultOnArrowKeyPress(e,t){const i=this.editor.model,n=i.schema,o=i.document.selection.getSelectedElement();o&&n.isObject(o)&&(t.preventDefault(),e.stop())}_handleDelete(e){if(!this.editor.isReadOnly){const i=this.editor.model.document.selection;if(i.isCollapsed){const n=this._getObjectElementNextToSelection(e);return n?(this.editor.model.change(e=>{let t=i.anchor.parent;for(;t.isEmpty;){const i=t;t=i.parent,e.remove(i)}this._setSelectionOverElement(n)}),!0):void 0}}}_setSelectionOverElement(t){this.editor.model.change(e=>{e.setSelection(e.createRangeOn(t))})}_getObjectElementNextToSelection(e){const t=this.editor.model,i=t.schema,n=t.document.selection,o=t.createSelection(n);return t.modifySelection(o,{direction:e?"forward":"backward"}),(e=e?o.focus.nodeBefore:o.focus.nodeAfter)&&i.isObject(e)?e:null}_clearPreviouslySelectedWidgets(e){for(const t of this._previouslySelected)e.removeClass("ck-widget_selected",t);this._previouslySelected.clear()}}function Oc(e,t,i){var n=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return _(i)&&(n="leading"in i?!!i.leading:n,o="trailing"in i?!!i.trailing:o),vo(e,t,{leading:n,maxWait:t,trailing:o})}i(67);class zc extends Ne{static get pluginName(){return"DragDrop"}static get requires(){return[ic,Rc]}init(){const e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,this._updateDropMarkerThrottled=Oc(e=>this._updateDropMarker(e),40),this._removeDropMarkerDelayed=Vc(()=>this._removeDropMarker(),40),this._clearDraggableAttributesDelayed=Vc(()=>this._clearDraggableAttributes(),40),t.addObserver(ec),t.addObserver(Gl),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDropMarker(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(e,t,i)=>{i?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(e,t,i)=>{i||this._finalizeDragging(!1)}),tn.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._updateDropMarkerThrottled.cancel(),this._removeDropMarkerDelayed.cancel(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const o=this.editor,r=o.model,s=r.document,e=o.editing.view,a=e.document;this.listenTo(a,"dragstart",(e,t)=>{const i=s.selection;if(t.target&&t.target.is("editableElement"))t.preventDefault();else{var n=t.target?jc(t.target):null;if(n){const s=o.editing.mapper.toModelElement(n);this._draggedRange=Er.fromRange(r.createRangeOn(s)),o.plugins.has("WidgetToolbarRepository")&&o.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop")}else if(!a.selection.isCollapsed){const o=a.selection.getSelectedElement();o&&pc(o)||(this._draggedRange=Er.fromRange(i.getFirstRange()))}this._draggedRange?(this._draggingUid=c(),t.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",t.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid),n=r.createSelection(this._draggedRange.toRange()),n=o.data.toView(r.getSelectedContent(n)),a.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:n,method:e.name}),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")):t.preventDefault()}},{priority:"low"}),this.listenTo(a,"dragend",(e,t)=>{this._finalizeDragging(!t.dataTransfer.isCanceled&&"move"==t.dataTransfer.dropEffect)},{priority:"low"}),this.listenTo(a,"dragenter",()=>{this.isEnabled&&e.focus()}),this.listenTo(a,"dragleave",()=>{this._removeDropMarkerDelayed()}),this.listenTo(a,"dragging",(e,t)=>{var i;this.isEnabled?(this._removeDropMarkerDelayed.cancel(),i=Dc(o,t.targetRanges,t.target),this._draggedRange||(t.dataTransfer.dropEffect="copy"),tn.isGecko||("copy"==t.dataTransfer.effectAllowed?t.dataTransfer.dropEffect="copy":["all","copyMove"].includes(t.dataTransfer.effectAllowed)&&(t.dataTransfer.dropEffect="move")),i&&this._updateDropMarkerThrottled(i)):t.dataTransfer.dropEffect="none"},{priority:"low"})}_setupClipboardInputIntegration(){const n=this.editor,e=n.editing.view.document;this.listenTo(e,"clipboardInput",(e,t)=>{if("drop"==t.method){var i=Dc(n,t.targetRanges,t.target);return this._removeDropMarker(),i?(this._draggedRange&&this._draggingUid!=t.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),"move"==Lc(t.dataTransfer)&&this._draggedRange&&this._draggedRange.containsRange(i,!0)?(this._finalizeDragging(!1),void e.stop()):void(t.targetRanges=[n.editing.mapper.toViewRange(i)])):(this._finalizeDragging(!1),void e.stop())}},{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(ic);e.on("contentInsertion",(e,t)=>{if(this.isEnabled&&"drop"===t.method){const i=t.targetRanges.map(e=>this.editor.editing.mapper.toModelRange(e));this.editor.model.change(e=>e.setSelection(i))}},{priority:"high"}),e.on("contentInsertion",(e,t)=>{var i;this.isEnabled&&"drop"===t.method&&(i="move"==Lc(t.dataTransfer),t=!t.resultRange||!t.resultRange.isCollapsed,this._finalizeDragging(t&&i))},{priority:"lowest"})}_setupDraggableAttributeHandling(){const n=this.editor,o=n.editing.view,r=o.document;this.listenTo(r,"mousedown",(e,i)=>{if(!tn.isAndroid&&i){this._clearDraggableAttributesDelayed.cancel();let t=jc(i.target);if(tn.isBlink&&!n.isReadOnly&&!t&&!r.selection.isCollapsed){const n=r.selection.getSelectedElement();n&&pc(n)||(t=r.selection.editableElement)}t&&(o.change(e=>{e.setAttribute("draggable","true",t)}),this._draggableElement=n.editing.mapper.toModelElement(t))}}),this.listenTo(r,"mouseup",()=>{tn.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const t=this.editor.editing;t.view.change(e=>{this._draggableElement&&"$graveyard"!=this._draggableElement.root.rootName&&e.removeAttribute("draggable",t.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_setupDropMarker(){const i=this.editor;i.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),i.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(e,{writer:t})=>{if(i.model.schema.checkChild(e.markerRange.start,"$text"))return t.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(e){const t=this.toDomElement(e);return t.innerHTML="&NoBreak;<span></span>&NoBreak;",t})}})}_updateDropMarker(t){const e=this.editor,i=e.model.markers;e.model.change(e=>{i.has("drop-target")?i.get("drop-target").getRange().isEqual(t)||e.updateMarker("drop-target",{range:t}):e.addMarker("drop-target",{range:t,usingOperation:!1,affectsData:!1})})}_removeDropMarker(){const e=this.editor.model;this._removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),e.markers.has("drop-target")&&e.change(e=>{e.removeMarker("drop-target")})}_finalizeDragging(e){const t=this.editor,i=t.model;this._removeDropMarker(),this._clearDraggableAttributes(),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._draggedRange&&(e&&this.isEnabled&&i.deleteContent(i.createSelection(this._draggedRange),{doNotAutoparagraph:!0}),this._draggedRange.detach(),this._draggedRange=null)}}function Dc(o,e,t){const i=o.model,n=o.editing.mapper;let r=null;if(e=e?e[0].start:null,t.is("uiElement")&&(t=t.parent),r=function(e,t){const i=e.model,n=e.editing.mapper;if(pc(t))return i.createRangeOn(n.toModelElement(t));if(!t.is("editableElement")){const e=t.findAncestor(e=>pc(e)||e.is("editableElement"));if(pc(e))return i.createRangeOn(n.toModelElement(e))}return null}(o,t),r)return r;var s=function(e){const t=o.editing.mapper,i=o.editing.view,n=t.toModelElement(e);return n||(e=i.createPositionBefore(e),e=t.findMappedViewAncestor(e),t.toModelElement(e))}(t);return(e=e?n.toModelPosition(e):null)?(r=function(e,t){const i=o.model;return i.schema.checkChild(t,"$block")?(t=i.createPositionAt(t,0),t=e.path.slice(0,t.path.length),(t=i.createPositionFromPath(e.root,t).nodeAfter)&&i.schema.isObject(t)?i.createRangeOn(t):null):null}(e,s),r||(r=i.schema.getNearestSelectionRange(e,tn.isGecko?"forward":"backward"),r||function(e){const t=o.model;for(;e;){if(t.schema.isObject(e))return t.createRangeOn(e);e=e.parent}}(e.parent))):function(){const e=o.model,t=e.schema,i=e.createPositionAt(s,0);return t.getNearestSelectionRange(i,"forward")}()}function Lc(e){return tn.isGecko?e.dropEffect:["all","copyMove"].includes(e.effectAllowed)?"move":"copy"}function Vc(t,i){let n;function o(...e){o.cancel(),n=setTimeout(()=>t(...e),i)}return o.cancel=()=>{clearTimeout(n)},o}function jc(e){return e.is("editableElement")?null:e.hasClass("ck-widget__selection-handle")?e.findAncestor(pc):pc(e)?e:(e=e.findAncestor(e=>pc(e)||e.is("editableElement")),pc(e)?e:null)}class Bc extends Ne{static get pluginName(){return"PastePlainText"}static get requires(){return[ic]}init(){const e=this.editor,o=e.model,t=e.editing.view,i=t.document,r=o.document.selection;let s=!1;t.addObserver(ec),this.listenTo(i,"keydown",(e,t)=>{s=t.shiftKey}),e.plugins.get(ic).on("contentInsertion",(e,n)=>{(s||function(e,t){if(!(1<e.childCount)){const i=e.getChild(0);return!t.isObject(i)&&0==[...i.getAttributeKeys()].length}}(n.content,o.schema))&&o.change(e=>{const t=Array.from(r.getAttributes()).filter(([e])=>o.schema.getAttributeProperties(e).isFormatting);r.isCollapsed||o.deleteContent(r,{doNotAutoparagraph:!0}),t.push(...r.getAttributes());const i=e.createRangeIn(n.content);for(const o of i.getItems())o.is("$textProxy")&&e.setAttributes(t,o)})})}}class Fc extends Ne{static get pluginName(){return"Clipboard"}static get requires(){return[ic,zc,Bc]}}class Hc extends Oe{execute(){const t=this.editor.model,i=t.document;t.change(e=>{!function(e,t,i){const n=i.isCollapsed,o=i.getFirstRange(),r=o.start.parent,s=o.end.parent,a=r==s;if(n){const n=nc(e.schema,i.getAttributes());Uc(e,t,o.end),t.removeSelectionAttribute(i.getAttributeKeys()),t.setSelectionAttribute(n)}else{const n=!(o.start.isAtStart&&o.end.isAtEnd);e.deleteContent(i,{leaveUnmerged:n}),a?Uc(e,t,i.focus):n&&t.setSelection(s,0)}}(t,e,i.selection),this.fire("afterExecute",{writer:e})})}refresh(){var e=this.editor.model,t=e.document;this.isEnabled=function(e,t){if(1<t.rangeCount)return!1;var i=t.anchor;return!(!i||!e.checkChild(i,"softBreak"))&&(t=(i=t.getFirstRange()).start.parent,i=i.end.parent,!Wc(t,e)&&!Wc(i,e)||t===i)}(e.schema,t.selection)}}function Uc(e,t,i){var n=t.createElement("softBreak");e.insertContent(n,i),t.setSelection(n,"after")}function Wc(e,t){return!e.is("rootElement")&&(t.isLimit(e)||Wc(e.parent,t))}class qc extends Ne{static get pluginName(){return"ShiftEnter"}init(){const i=this.editor,e=i.model.schema,t=i.conversion,n=i.editing.view,o=n.document;e.register("softBreak",{allowWhere:"$text",isInline:!0}),t.for("upcast").elementToElement({model:"softBreak",view:"br"}),t.for("downcast").elementToElement({model:"softBreak",view:(e,{writer:t})=>t.createEmptyElement("br")}),n.addObserver(sc),i.commands.add("shiftEnter",new Hc(i)),this.listenTo(o,"enter",(e,t)=>{t.preventDefault(),t.isSoft&&(i.execute("shiftEnter"),n.scrollToTheSelection())},{priority:"low"})}}class $c extends Oe{execute(){const e=this.editor.model,t=e.document.selection;let i=e.schema.getLimitElement(t);if(t.containsEntireContent(i)||!Yc(e.schema,i))do{if(i=i.parent,!i)return}while(!Yc(e.schema,i));e.change(e=>{e.setSelection(i,"in")})}}function Yc(e,t){return e.isLimit(t)&&(e.checkChild(t,"$text")||e.checkChild(t,"paragraph"))}const Gc=ln("Ctrl+A");class Kc extends Ne{static get pluginName(){return"SelectAllEditing"}init(){const i=this.editor,e=i.editing.view.document;i.commands.add("selectAll",new $c(i)),this.listenTo(e,"keydown",(e,t)=>{an(t)===Gc&&(i.execute("selectAll"),t.preventDefault())})}}class Qc extends Ne{static get pluginName(){return"SelectAllUI"}init(){const o=this.editor;o.ui.componentFactory.add("selectAll",e=>{const t=o.commands.get("selectAll"),i=new ja(e),n=e.t;return i.set({label:n("Select all"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',keystroke:"Ctrl+A",tooltip:!0}),i.bind("isOn","isEnabled").to(t,"value","isEnabled"),this.listenTo(i,"execute",()=>{o.execute("selectAll"),o.editing.view.focus()}),i})}}class Jc extends Ne{static get requires(){return[Kc,Qc]}static get pluginName(){return"SelectAll"}}class Zc extends Oe{constructor(e,t){super(e),this._buffer=new lc(e.model,t),this._batches=new WeakSet}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const t=this.editor.model,i=t.document,n=e.text||"",o=n.length,r=e.range?t.createSelection(e.range):i.selection,s=e.resultRange;t.enqueueChange(this._buffer.batch,e=>{this._buffer.lock(),this._batches.add(this._buffer.batch),t.deleteContent(r),n&&t.insertContent(e.createText(n,i.selection.getAttributes()),r),s?e.setSelection(s):r.is("documentSelection")||e.setSelection(r),this._buffer.unlock(),this._buffer.input(o)})}}function Xc(e){if(e.newChildren.length-e.oldChildren.length==1&&!(1<(e=function(e,t){const i=[];let n,o=0;return e.forEach(e=>{"equal"==e?(r(),o++):"insert"==e?(s("insert")?n.values.push(t[o]):(r(),n={type:"insert",index:o,values:[t[o]]}),o++):s("delete")?n.howMany++:(r(),n={type:"delete",index:o,howMany:1})}),r(),i;function r(){n&&(i.push(n),n=null)}function s(e){return n&&n.type==e}}(Vn(e.oldChildren,e.newChildren,ed),e.newChildren)).length)){const t=e[0];return t.values[0]&&t.values[0].is("$text")?t:void 0}}function ed(e,t){return e&&e.is("$text")&&t&&t.is("$text")?e.data===t.data:e===t}class td{constructor(e){this.editor=e,this.editing=this.editor.editing}handle(t,e){if(function(){if(0!=t.length)for(const e of t)if("children"===e.type&&!Xc(e))return 1}())this._handleContainerChildrenMutations(t,e);else for(const i of t)this._handleTextMutation(i,e),this._handleTextNodeInsertion(i)}_handleContainerChildrenMutations(t,i){if(r=function(){const e=t.map(e=>e.node).reduce((e,t)=>e.getCommonAncestor(t,{includeSelf:!0}));if(e)return e.getAncestors({includeSelf:!0,parentFirst:!0}).find(e=>e.is("containerElement")||e.is("rootElement"))}()){const e=this.editor.editing.view.domConverter.mapViewToDom(r),s=new Jn(this.editor.editing.view.document),a=this.editor.data.toModel(s.domToView(e)).getChild(0),l=this.editor.editing.mapper.toModelElement(r);if(l){const c=Array.from(a.getChildren()),d=Array.from(l.getChildren()),h=c[c.length-1],u=d[d.length-1],g=h&&h.is("element","softBreak"),m=u&&!u.is("element","softBreak");g&&m&&c.pop();var n=this.editor.model.schema;if(id(c,n)&&id(d,n)){const p=c.map(e=>e.is("$text")?e.data:"@").join("").replace(/\u00A0/g," "),f=d.map(e=>e.is("$text")?e.data:"@").join("").replace(/\u00A0/g," ");if(f!==p){var{firstChangeAt:o,insertions:r,deletions:n}=nd(Vn(f,p));let e=null;i&&(e=this.editing.mapper.toModelRange(i.getFirstRange())),r=p.substr(o,r),n=this.editor.model.createRange(this.editor.model.createPositionAt(l,o),this.editor.model.createPositionAt(l,o+n)),this.editor.execute("input",{text:r,range:n,resultRange:e})}}}}}_handleTextMutation(t,i){if("text"==t.type){const s=t.newText.replace(/\u00A0/g," "),a=t.oldText.replace(/\u00A0/g," ");if(a!==s){var{firstChangeAt:n,insertions:o,deletions:r}=nd(Vn(a,s));let e=null;i&&(e=this.editing.mapper.toModelRange(i.getFirstRange()));const l=this.editing.view.createPositionAt(t.node,n),c=this.editing.mapper.toModelPosition(l),d=this.editor.model.createRange(c,c.getShiftedBy(r)),h=s.substr(n,o);this.editor.execute("input",{text:h,range:d,resultRange:e})}}}_handleTextNodeInsertion(e){if("children"==e.type){const t=Xc(e),i=this.editing.view.createPositionAt(e.node,t.index),n=this.editing.mapper.toModelPosition(i),o=t.values[0].data;this.editor.execute("input",{text:o.replace(/\u00A0/g," "),range:this.editor.model.createRange(n)})}}}function id(e,t){return e.every(e=>t.isInline(e))}function nd(t){let i=null,n=null;for(let e=0;e<t.length;e++)"equal"!=t[e]&&(i=null===i?e:i,n=e);let o=0,r=0;for(let e=i;e<=n;e++)"insert"!=t[e]&&o++,"delete"!=t[e]&&r++;return{insertions:r,deletions:o,firstChangeAt:i}}class od extends Ne{static get pluginName(){return"Input"}init(){const e=this.editor,t=new Zc(e,e.config.get("typing.undoStep")||20);var n;e.commands.add("input",t),function(e){let o=null;const r=e.model,s=e.editing.view,a=e.commands.get("input");function i(e){var t=r.document,i=s.document.isComposing,n=o&&o.isEqual(t.selection);o=null,a.isEnabled&&(Ec(e)||t.selection.isCollapsed||i&&229===e.keyCode||!i&&229===e.keyCode&&n||l())}function l(){const e=a.buffer;e.lock();var t=e.batch;a._batches.add(t),r.enqueueChange(t,()=>{r.deleteContent(r.document.selection)}),e.unlock()}tn.isAndroid?s.document.on("beforeinput",(e,t)=>i(t),{priority:"lowest"}):s.document.on("keydown",(e,t)=>i(t),{priority:"lowest"}),s.document.on("compositionstart",function(){const e=r.document,t=1!==e.selection.rangeCount||e.selection.getFirstRange().isFlat;e.selection.isCollapsed||t||l()},{priority:"lowest"}),s.document.on("compositionend",()=>{o=r.createSelection(r.document.selection)},{priority:"lowest"})}(e),(n=e).editing.view.document.on("mutations",(e,t,i)=>{new td(n).handle(t,i)})}isInput(e){return this.editor.commands.get("input")._batches.has(e)}}class rd extends Ne{static get requires(){return[od,hc]}static get pluginName(){return"Typing"}}function sd(e,i){let n=e.start;return{text:Array.from(e.getItems()).reduce((e,t)=>t.is("$text")||t.is("$textProxy")?e+t.data:(n=i.createPositionAfter(t),""),""),range:i.createRange(n,e.end)}}class ad{constructor(e,t){this.model=e,this.testCallback=t,this.hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}_startListening(){const i=this.model.document;this.listenTo(i.selection,"change:range",(e,{directChange:t})=>{t&&(i.selection.isCollapsed?this._evaluateTextBeforeSelection("selection"):this.hasMatch&&(this.fire("unmatched"),this.hasMatch=!1))}),this.listenTo(i,"change:data",(e,t)=>{"transparent"!=t.type&&this._evaluateTextBeforeSelection("data",{batch:t})})}_evaluateTextBeforeSelection(e,t={}){const i=this.model,n=i.document.selection,o=i.createRange(i.createPositionAt(n.focus.parent,0),n.focus),{text:r,range:s}=sd(o,i),a=this.testCallback(r);if(!a&&this.hasMatch&&this.fire("unmatched"),this.hasMatch=!!a,a){const i=Object.assign(t,{text:r,range:s});"object"==typeof a&&Object.assign(i,a),this.fire("matched:"+e,i)}}}Me(ad,Ce);class ld extends Ne{static get pluginName(){return"TwoStepCaretMovement"}constructor(e){super(e),this.attributes=new Set,this._overrideUid=null}init(){const e=this.editor,t=e.model,i=e.editing.view,r=e.locale,s=t.document.selection;this.listenTo(i.document,"arrowKey",(e,t)=>{var i,n,o;s.isCollapsed&&(t.shiftKey||t.altKey||t.ctrlKey||(i=t.keyCode==rn.arrowright,n=t.keyCode==rn.arrowleft,!i&&!n||!0===("ltr"===(o=r.contentLanguageDirection)&&i||"rtl"===o&&n?this._handleForwardMovement(t):this._handleBackwardMovement(t))&&e.stop()))},{context:"$text",priority:"highest"}),this._isNextGravityRestorationSkipped=!1,this.listenTo(s,"change:range",(e,t)=>{this._isNextGravityRestorationSkipped?this._isNextGravityRestorationSkipped=!1:this._isGravityOverridden&&(!t.directChange&&ud(s.getFirstPosition(),this.attributes)||this._restoreGravity())})}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const t=this.attributes,i=this.editor.model.document.selection,n=i.getFirstPosition();return!this._isGravityOverridden&&(!n.isAtStart||!cd(i,t))&&(ud(n,t)?(hd(e),this._overrideGravity(),!0):void 0)}_handleBackwardMovement(e){const t=this.attributes,i=this.editor.model,n=i.document.selection,o=n.getFirstPosition();return this._isGravityOverridden?(hd(e),this._restoreGravity(),dd(i,t,o),!0):o.isAtStart?!!cd(n,t)&&(hd(e),dd(i,t,o),!0):(r=t,ud(o.getShiftedBy(-1),r)?o.isAtEnd&&!cd(n,t)&&ud(o,t)?(hd(e),dd(i,t,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):void 0);var r}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function cd(e,t){for(const i of t)if(e.hasAttribute(i))return 1}function dd(e,t,i){const n=i.nodeBefore;e.change(e=>{n?e.setSelectionAttribute(n.getAttributes()):e.removeSelectionAttribute(t)})}function hd(e){e.preventDefault()}function ud(e,t){const{nodeBefore:i,nodeAfter:n}=e;for(const e of t){const t=i?i.getAttribute(e):void 0;if((n?n.getAttribute(e):void 0)!==t)return 1}}var gd=/[\\^$.*+?()[\]{}|]/g,md=RegExp(gd.source);const pd={copyright:{from:"(c)",to:"©"},registeredTrademark:{from:"(r)",to:"®"},trademark:{from:"(tm)",to:"™"},oneHalf:{from:"1/2",to:"½"},oneThird:{from:"1/3",to:"⅓"},twoThirds:{from:"2/3",to:"⅔"},oneForth:{from:"1/4",to:"¼"},threeQuarters:{from:"3/4",to:"¾"},lessThanOrEqual:{from:"<=",to:"≤"},greaterThanOrEqual:{from:">=",to:"≥"},notEqual:{from:"!=",to:"≠"},arrowLeft:{from:"<-",to:"←"},arrowRight:{from:"->",to:"→"},horizontalEllipsis:{from:"...",to:"…"},enDash:{from:/(^| )(--)( )$/,to:[null,"–",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"—",null]},quotesPrimary:{from:wd('"'),to:[null,"“",null,"”"]},quotesSecondary:{from:wd("'"),to:[null,"‘",null,"’"]},quotesPrimaryEnGb:{from:wd("'"),to:[null,"‘",null,"’"]},quotesSecondaryEnGb:{from:wd('"'),to:[null,"“",null,"”"]},quotesPrimaryPl:{from:wd('"'),to:[null,"„",null,"”"]},quotesSecondaryPl:{from:wd("'"),to:[null,"‚",null,"’"]}},fd={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},bd=["symbols","mathematical","typography","quotes"];function wd(e){return new RegExp(`(^|\\s)(${e})([^${e}]*)(${e})$`)}function kd(e,t,i,n){return n.createRange(_d(e,t,i,!0,n),_d(e,t,i,!1,n))}function _d(e,t,i,n,o){let r=e.textNode||(n?e.nodeBefore:e.nodeAfter),s=null;for(;r&&r.getAttribute(t)==i;)s=r,r=n?r.previousSibling:r.nextSibling;return s?o.createPositionAt(s,n?"before":"after"):e}class vd extends Oe{constructor(e){super(e),this._stack=[],this._createdBatches=new WeakSet,this.refresh(),this.listenTo(e.data,"set",(e,t)=>{t[1]={...t[1]};const i=t[1];i.batchType||(i.batchType="transparent")},{priority:"high"}),this.listenTo(e.data,"set",(e,t)=>{"transparent"===t[1].batchType&&this.clearStack()})}refresh(){this.isEnabled=0<this._stack.length}addBatch(e){const t=this.editor.model.document.selection,i={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:i}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,i){const n=this.editor.model,o=n.document,r=[],s=e.map(e=>e.getTransformedByOperations(i)),a=s.flat();for(const e of s){const t=e.filter(e=>e.root!=o.graveyard).filter(e=>!function(t){return a.some(e=>e!==t&&e.containsRange(t,!0))}(e));t.length&&(function(t){t.sort((e,t)=>e.start.isBefore(t.start)?-1:1);for(let e=1;e<t.length;e++){var i=t[e-1].getJoined(t[e],!0);i&&(e--,t.splice(e,2,i))}}(t),r.push(t[0]))}r.length&&n.change(e=>{e.setSelection(r,{backward:t})})}_undo(e,t){const i=this.editor.model,n=i.document;this._createdBatches.add(t);const o=e.operations.slice().filter(e=>e.isDocumentOperation);o.reverse();for(const e of o){const o=e.baseVersion+1,r=Array.from(n.history.getOperations(o)),s=function(e,t,i){e=e.slice(),t=t.slice();const n=new Fl(i.document,i.useRelations,i.forceWeakRemove);n.setOriginalOperations(e),n.setOriginalOperations(t);const o=n.originalOperations;if(0==e.length||0==t.length)return{operationsA:e,operationsB:t,originalOperations:o};const r=new WeakMap;for(const t of e)r.set(t,0);const s={nextBaseVersionA:e[e.length-1].baseVersion+1,nextBaseVersionB:t[t.length-1].baseVersion+1,originalOperationsACount:e.length,originalOperationsBCount:t.length};let a=0;for(;a<e.length;){const i=e[a],o=r.get(i);if(o!=t.length){const s=t[o],l=Bl(i,s,n.getContext(i,s,!0)),c=Bl(s,i,n.getContext(s,i,!1));n.updateRelation(i,s),n.setOriginalOperations(l,i),n.setOriginalOperations(c,s);for(const e of l)r.set(e,o+c.length);e.splice(a,1,...l),t.splice(o,1,...c)}else a++}if(i.padWithNoOps){const i=e.length-s.originalOperationsACount,n=t.length-s.originalOperationsBCount;Ul(e,n-i),Ul(t,i-n)}return Hl(e,s.nextBaseVersionB),Hl(t,s.nextBaseVersionA),{operationsA:e,operationsB:t,originalOperations:o}}([e.getReversed()],r,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(const o of s)t.addOperation(o),i.applyOperation(o),n.history.setOperationAsUndone(e,o)}}}class yd extends vd{execute(t=null){const e=t?this._stack.findIndex(e=>e.batch==t):this._stack.length-1,i=this._stack.splice(e,1)[0],n=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(n,()=>{this._undo(i.batch,n);var e=this.editor.model.document.history.getOperations(i.batch.baseVersion);this._restoreSelection(i.selection.ranges,i.selection.isBackward,e),this.fire("revert",i.batch,n)}),this.refresh()}}class xd extends vd{execute(){const t=this._stack.pop(),i=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(i,()=>{var e=t.batch.operations[t.batch.operations.length-1].baseVersion+1,e=this.editor.model.document.history.getOperations(e);this._restoreSelection(t.selection.ranges,t.selection.isBackward,e),this._undo(t.batch,i)}),this.refresh()}}class Ad extends Ne{static get pluginName(){return"UndoEditing"}constructor(e){super(e),this._batchRegistry=new WeakSet}init(){const e=this.editor;this._undoCommand=new yd(e),this._redoCommand=new xd(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(e,t)=>{var i,n=t[0];n.isDocumentOperation&&(i=n.batch,t=this._redoCommand._createdBatches.has(i),n=this._undoCommand._createdBatches.has(i),this._batchRegistry.has(i)||"transparent"==i.type&&!t&&!n||(t?this._undoCommand.addBatch(i):n||(this._undoCommand.addBatch(i),this._redoCommand.clearStack()),this._batchRegistry.add(i)))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(e,t,i)=>{this._redoCommand.addBatch(i)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo")}}var Cd='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',Td='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';class Ed extends Ne{static get pluginName(){return"UndoUI"}init(){const e=this.editor,t=e.locale,i=e.t,n="ltr"==t.uiLanguageDirection?Cd:Td,o="ltr"==t.uiLanguageDirection?Td:Cd;this._addButton("undo",i("Undo"),"CTRL+Z",n),this._addButton("redo",i("Redo"),"CTRL+Y",o)}_addButton(n,o,r,s){const a=this.editor;a.ui.componentFactory.add(n,e=>{const t=a.commands.get(n),i=new ja(e);return i.set({label:o,icon:s,keystroke:r,tooltip:!0}),i.bind("isEnabled").to(t,"isEnabled"),this.listenTo(i,"execute",()=>{a.execute(n),a.editing.view.focus()}),i})}}class Id extends Ne{static get requires(){return[Ad,Ed]}static get pluginName(){return"Undo"}}class Sd{constructor(){const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=e=>{this.loaded=e.loaded}}get error(){return this._reader.error}get data(){return this._data}read(i){const n=this._reader;return this.total=i.size,new Promise((t,e)=>{n.onload=()=>{var e=n.result;this._data=e,t(e)},n.onerror=()=>{e("error")},n.onabort=()=>{e("aborted")},this._reader.readAsDataURL(i)})}abort(){this._reader.abort()}}Me(Sd,Ce);class Pd extends Ne{static get pluginName(){return"FileRepository"}static get requires(){return[ga]}init(){this.loaders=new Ft,this.loaders.on("add",()=>this._updatePendingAction()),this.loaders.on("remove",()=>this._updatePendingAction()),this._loadersMap=new Map,this._pendingAction=null,this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,t)=>t?e/t*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return Object(p.b)("filerepository-no-upload-adapter"),null;const t=new Md(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(t),this._loadersMap.set(e,t),e instanceof Promise&&t.file.then(e=>{this._loadersMap.set(e,t)}).catch(()=>{}),t.on("change:uploaded",()=>{let e=0;for(const t of this.loaders)e+=t.uploaded;this.uploaded=e}),t.on("change:uploadTotal",()=>{let e=0;for(const t of this.loaders)t.uploadTotal&&(e+=t.uploadTotal);this.uploadTotal=e}),t}destroyLoader(e){const i=e instanceof Md?e:this.getLoader(e);i._destroy(),this.loaders.remove(i),this._loadersMap.forEach((e,t)=>{e===i&&this._loadersMap.delete(t)})}_updatePendingAction(){const e=this.editor.plugins.get(ga);if(this.loaders.length){if(!this._pendingAction){const t=this.editor.t,i=e=>`${t("Upload in progress")} ${parseInt(e)}%.`;this._pendingAction=e.add(i(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",i)}}else e.remove(this._pendingAction),this._pendingAction=null}}Me(Pd,Ce);class Md{constructor(e,t){this.id=c(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=t(this),this._reader=new Sd,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,t)=>t?e/t*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if("idle"!=this.status)throw new p.a("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if("reading"!==this.status)throw this.status;return this.status="idle",e}).catch(e=>{if("aborted"===e)throw this.status="aborted";throw this.status="error",this._reader.error||e})}upload(){if("idle"!=this.status)throw new p.a("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{if("aborted"===this.status)throw"aborted";throw this.status="error",e})}abort(){var e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?"reading"==e?this._reader.abort():"uploading"==e&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const n={};return n.promise=new Promise((t,i)=>{n.rejecter=i,n.isFulfilled=!1,e.then(e=>{n.isFulfilled=!0,t(e)}).catch(e=>{n.isFulfilled=!0,i(e)})}),n}}Me(Md,Ce);class Nd extends ka{constructor(e){super(e),this.buttonView=new ja(e),this._fileInputView=new Rd(e),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.setTemplate({tag:"span",attributes:{class:"ck-file-dialog-button"},children:[this.buttonView,this._fileInputView]}),this.buttonView.on("execute",()=>{this._fileInputView.open()})}focus(){this.buttonView.focus()}}class Rd extends ka{constructor(e){super(e),this.set("acceptedType"),this.set("allowMultipleFiles",!1);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}class Od{constructor(e,t,i){this.loader=e,this.url=t,this.t=i}upload(){return this.loader.file.then(i=>new Promise((e,t)=>{this._initRequest(),this._initListeners(e,t,i),this._sendRequest(i)}))}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const e=this.xhr=new XMLHttpRequest;e.open("POST",this.url,!0),e.responseType="json"}_initListeners(t,i,e){const n=this.xhr,o=this.loader,r=(0,this.t)("Cannot upload file:")+` ${e.name}.`;n.addEventListener("error",()=>i(r)),n.addEventListener("abort",()=>i()),n.addEventListener("load",()=>{var e=n.response;if(!e||!e.uploaded)return i(e&&e.error&&e.error.message?e.error.message:r);t({default:e.url})}),n.upload&&n.upload.addEventListener("progress",e=>{e.lengthComputable&&(o.uploadTotal=e.total,o.uploaded=e.loaded)})}_sendRequest(e){const t=new FormData;t.append("upload",e),t.append("ckCsrfToken",function(){let e=function(e){e="ckCsrfToken".toLowerCase();const t=document.cookie.split(";");for(const i of t){const t=i.split("=");if(decodeURIComponent(t[0].trim().toLowerCase())===e)return decodeURIComponent(t[1])}return null}();var t;return e&&40==e.length||(e=function(){let t="";var i=new Uint8Array(40);window.crypto.getRandomValues(i);for(let e=0;e<i.length;e++){const n="abcdefghijklmnopqrstuvwxyz0123456789".charAt(i[e]%"abcdefghijklmnopqrstuvwxyz0123456789".length);t+=.5<Math.random()?n.toUpperCase():n}return t}(),t=e,document.cookie=encodeURIComponent("ckCsrfToken")+"="+encodeURIComponent(t)+";path=/"),e}()),this.xhr.send(t)}}function zd(l,c,d,h){let u,g=null;u="function"==typeof h?h:(g=l.commands.get(h),()=>{l.execute(h)}),l.model.document.on("change:data",(e,t)=>{if((!g||g.isEnabled)&&c.isEnabled){const n=$o(l.model.document.selection.getRanges());if(n.isCollapsed&&"transparent"!=t.type){var i=Array.from(l.model.document.differ.getChanges()),t=i[0];if(1==i.length&&"insert"===t.type&&"$text"==t.name&&1==t.length){const o=t.position.parent;if(!o.is("element","codeBlock")&&(!o.is("element","listItem")||"function"==typeof h||["numberedList","bulletedList","todoList"].includes(h))&&(!g||!0!==g.value)){const r=o.getChild(0),s=l.model.createRangeOn(r);if(s.containsRange(n)||n.end.isEqual(s.end)){const a=d.exec(r.data.substr(0,n.end.offset));a&&l.model.enqueueChange(e=>{const t=e.createPositionAt(o,0),i=e.createPositionAt(o,a[0].length),n=new Er(t,i);if(!1!==u({match:a})){e.remove(n);const t=l.model.document.selection.getFirstRange(),i=e.createRangeIn(o);!o.isEmpty||i.isEqual(t)||i.containsRange(t,!0)||e.remove(o)}n.detach()})}}}}}})}function Dd(u,g,e,m){let l,p;e instanceof RegExp?l=e:p=e,p=p||(e=>{const t=[],i=[];for(;null!==(a=l.exec(e))&&!(a&&a.length<4);){var{index:n,1:o,2:r,3:s}=a,a=[n+=a[0].length-(o+r+s).length,n+o.length],s=[n+o.length+r.length,n+o.length+r.length+s.length];t.push(a),t.push(s),i.push([n+o.length,n+o.length+r.length])}return{remove:t,format:i}}),u.model.document.on("change:data",(e,t)=>{if("transparent"!=t.type&&g.isEnabled){const n=u.model,o=n.document.selection;if(o.isCollapsed){var i=Array.from(n.document.differ.getChanges()),t=i[0];if(1==i.length&&"insert"===t.type&&"$text"==t.name&&1==t.length){const r=o.focus,s=r.parent,{text:a,range:l}=function(e,i){let n=e.start;return{text:Array.from(e.getItems()).reduce((e,t)=>!t.is("$text")&&!t.is("$textProxy")||t.getAttribute("code")?(n=i.createPositionAfter(t),""):e+t.data,""),range:i.createRange(n,e.end)}}(n.createRange(n.createPositionAt(s,0),r),n),c=p(a),d=Ld(l.start,c.format,n),h=Ld(l.start,c.remove,n);d.length&&h.length&&n.enqueueChange(e=>{if(!1!==m(e,d))for(const t of h.reverse())e.remove(t)})}}}})}function Ld(t,e,i){return e.filter(e=>void 0!==e[0]&&void 0!==e[1]).map(e=>i.createRange(t.getShiftedBy(e[0]),t.getShiftedBy(e[1])))}function Vd(i,n){return(e,t)=>{if(!i.commands.get(n).isEnabled)return!1;t=i.model.schema.getValidRanges(t,n);for(const i of t)e.setAttribute(n,!0,i);e.removeSelectionAttribute(n)}}class jd extends Oe{constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const i=this.editor.model,n=i.document.selection,o=void 0===e.forceValue?!this.value:e.forceValue;i.change(e=>{if(n.isCollapsed)o?e.setSelectionAttribute(this.attributeKey,!0):e.removeSelectionAttribute(this.attributeKey);else{var t=i.schema.getValidRanges(n.getRanges(),this.attributeKey);for(const i of t)o?e.setAttribute(this.attributeKey,o,i):e.removeAttribute(this.attributeKey,i)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,t=e.schema,i=e.document.selection;if(i.isCollapsed)return i.hasAttribute(this.attributeKey);for(const e of i.getRanges())for(const i of e.getItems())if(t.checkAttribute(i,this.attributeKey))return i.hasAttribute(this.attributeKey);return!1}}class Bd extends Ne{static get pluginName(){return"BoldEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:"bold"}),e.model.schema.setAttributeProperties("bold",{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:"bold",view:"strong",upcastAlso:["b",e=>(e=e.getStyle("font-weight"))?"bold"==e||600<=Number(e)?{name:!0,styles:["font-weight"]}:void 0:null]}),e.commands.add("bold",new jd(e,"bold")),e.keystrokes.set("CTRL+B","bold")}}class Fd extends Ne{static get pluginName(){return"BoldUI"}init(){const n=this.editor,o=n.t;n.ui.componentFactory.add("bold",e=>{const t=n.commands.get("bold"),i=new ja(e);return i.set({label:o("Bold"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(t,"value","isEnabled"),this.listenTo(i,"execute",()=>{n.execute("bold"),n.editing.view.focus()}),i})}}class Hd extends Ne{static get pluginName(){return"ItalicEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:"italic"}),e.model.schema.setAttributeProperties("italic",{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:"italic",view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add("italic",new jd(e,"italic")),e.keystrokes.set("CTRL+I","italic")}}class Ud extends Ne{static get pluginName(){return"ItalicUI"}init(){const n=this.editor,o=n.t;n.ui.componentFactory.add("italic",e=>{const t=n.commands.get("italic"),i=new ja(e);return i.set({label:o("Italic"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(t,"value","isEnabled"),this.listenTo(i,"execute",()=>{n.execute("italic"),n.editing.view.focus()}),i})}}class Wd extends Oe{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,i=t.schema,n=t.document.selection,o=Array.from(n.getSelectedBlocks()),r=void 0===e.forceValue?!this.value:e.forceValue;t.change(e=>{var t;r?(t=o.filter(e=>qd(e)||Yd(i,e)),this._applyQuote(e,t)):this._removeQuote(e,o.filter(qd))})}_getValue(){var e=$o(this.editor.model.document.selection.getSelectedBlocks());return!(!e||!qd(e))}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,i=$o(e.getSelectedBlocks());return!!i&&Yd(t,i)}_removeQuote(i,e){$d(i,e).reverse().forEach(e=>{var t;e.start.isAtStart&&e.end.isAtEnd?i.unwrap(e.start.parent):e.start.isAtStart?(t=i.createPositionBefore(e.start.parent),i.move(e,t)):(e.end.isAtEnd||i.split(e.end),t=i.createPositionAfter(e.end.parent),i.move(e,t))})}_applyQuote(i,e){const n=[];$d(i,e).reverse().forEach(e=>{let t=qd(e.start);t||(t=i.createElement("blockQuote"),i.wrap(e,t)),n.push(t)}),n.reverse().reduce((e,t)=>e.nextSibling==t?(i.merge(i.createPositionAfter(e)),e):t)}}function qd(e){return"blockQuote"==e.parent.name?e.parent:null}function $d(e,t){let i,n=0;const o=[];for(;n<t.length;){var r=t[n],s=t[n+1];i=i||e.createPositionBefore(r),s&&r.nextSibling==s||(o.push(e.createRange(i,e.createPositionAfter(r))),i=null),n++}return o}function Yd(e,t){var i=e.checkChild(t.parent,"blockQuote"),t=e.checkChild(["$root","blockQuote"],t);return i&&t}class Gd extends Ne{static get pluginName(){return"BlockQuoteEditing"}static get requires(){return[ac,hc]}init(){const n=this.editor,i=n.model.schema;n.commands.add("blockQuote",new Wd(n)),i.register("blockQuote",{allowWhere:"$block",allowContentOf:"$root"}),n.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),n.model.document.registerPostFixer(e=>{const t=n.model.document.differ.getChanges();for(const n of t)if("insert"==n.type){const t=n.position.nodeAfter;if(!t)continue;if(t.is("element","blockQuote")&&t.isEmpty)return e.remove(t),!0;if(t.is("element","blockQuote")&&!i.checkChild(n.position,t))return e.unwrap(t),!0;if(t.is("element")){const n=e.createRangeIn(t);for(const t of n.getItems())if(t.is("element","blockQuote")&&!i.checkChild(e.createPositionBefore(t),t))return e.unwrap(t),!0}}else if("remove"==n.type){const i=n.position.parent;if(i.is("element","blockQuote")&&i.isEmpty)return e.remove(i),!0}return!1});const e=this.editor.editing.view.document,o=n.model.document.selection,r=n.commands.get("blockQuote");this.listenTo(e,"enter",(e,t)=>{o.isCollapsed&&r.value&&o.getLastPosition().parent.isEmpty&&(n.execute("blockQuote"),n.editing.view.scrollToTheSelection(),t.preventDefault(),e.stop())},{context:"blockquote"}),this.listenTo(e,"delete",(e,t)=>{var i;"backward"==t.direction&&o.isCollapsed&&r.value&&(i=o.getLastPosition().parent).isEmpty&&!i.previousSibling&&(n.execute("blockQuote"),n.editing.view.scrollToTheSelection(),t.preventDefault(),e.stop())},{context:"blockquote"})}}i(69);class Kd extends Ne{static get pluginName(){return"BlockQuoteUI"}init(){const n=this.editor,o=n.t;n.ui.componentFactory.add("blockQuote",e=>{const t=n.commands.get("blockQuote"),i=new ja(e);return i.set({label:o("Block quote"),icon:ma.quote,tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(t,"value","isEnabled"),this.listenTo(i,"execute",()=>{n.execute("blockQuote"),n.editing.view.focus()}),i})}}class Qd extends Ne{static get pluginName(){return"CKFinderUI"}init(){const n=this.editor,e=n.ui.componentFactory,o=n.t;e.add("ckfinder",e=>{const t=n.commands.get("ckfinder"),i=new ja(e);return i.set({label:o("Insert image or file"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',tooltip:!0}),i.bind("isEnabled").to(t),i.on("execute",()=>{n.execute("ckfinder"),n.editing.view.focus()}),i})}}class Jd extends Oe{constructor(e){super(e),this.stopListening(this.editor.model.document,"change"),this.listenTo(this.editor.model.document,"change",()=>this.refresh(),{priority:"low"})}refresh(){var e=this.editor.commands.get("insertImage"),t=this.editor.commands.get("link");this.isEnabled=e.isEnabled||t.isEnabled}execute(){const s=this.editor,e=this.editor.config.get("ckfinder.openerMethod")||"modal";if("popup"!=e&&"modal"!=e)throw new p.a("ckfinder-unknown-openermethod",s);const t=this.editor.config.get("ckfinder.options")||{};t.chooseFiles=!0;const i=t.onInit;t.language||(t.language=s.locale.uiLanguage),t.onInit=r=>{i&&i(r),r.on("files:choose",e=>{const t=e.data.files.toArray(),i=t.filter(e=>!e.isImage()),n=t.filter(e=>e.isImage());for(const r of i)s.execute("link",r.getUrl());const o=[];for(const s of n){const e=s.getUrl();o.push(e||r.request("file:getProxyUrl",{file:s}))}o.length&&Zd(s,o)}),r.on("file:choose:resizedImage",e=>{const t=e.data.resizedUrl;if(t)Zd(s,[t]);else{const e=s.plugins.get("Notification"),t=s.locale.t;e.showWarning(t("Could not obtain resized image URL."),{title:t("Selecting resized image failed"),namespace:"ckfinder"})}})},window.CKFinder[e](t)}}function Zd(e,t){if(e.commands.get("insertImage").isEnabled)e.execute("insertImage",{source:t});else{const t=e.plugins.get("Notification"),i=e.locale.t;t.showWarning(i("Could not insert image at the current position."),{title:i("Inserting image failed"),namespace:"ckfinder"})}}class Xd extends Ne{static get pluginName(){return"CKFinderEditing"}static get requires(){return[kl,"LinkEditing"]}init(){const e=this.editor;if(!e.plugins.has("ImageBlockEditing")&&!e.plugins.has("ImageInlineEditing"))throw new p.a("ckfinder-missing-image-plugin",e);e.commands.add("ckfinder",new Jd(e))}}class eh extends Ne{static get pluginName(){return"CloudServicesUploadAdapter"}static get requires(){return["CloudServices",Pd]}init(){const e=this.editor,t=e.plugins.get("CloudServices"),i=t.token,n=t.uploadUrl;i&&(this._uploadGateway=e.plugins.get("CloudServicesCore").createUploadGateway(i,n),e.plugins.get(Pd).createUploadAdapter=e=>new th(this._uploadGateway,e))}}class th{constructor(e,t){this.uploadGateway=e,this.loader=t}upload(){return this.loader.file.then(e=>(this.fileUploader=this.uploadGateway.upload(e),this.fileUploader.on("progress",(e,t)=>{this.loader.uploadTotal=t.total,this.loader.uploaded=t.uploaded}),this.fileUploader.send()))}abort(){this.fileUploader.abort()}}class ih extends Oe{refresh(){const e=this.editor.model,t=$o(e.document.selection.getSelectedBlocks());this.value=!!t&&t.is("element","paragraph"),this.isEnabled=!!t&&nh(t,e.schema)}execute(i={}){const n=this.editor.model,o=n.document;n.change(e=>{var t=(i.selection||o.selection).getSelectedBlocks();for(const i of t)!i.is("element","paragraph")&&nh(i,n.schema)&&e.rename(i,"paragraph")})}}function nh(e,t){return t.checkChild(e.parent,"paragraph")&&!t.isObject(e)}class oh extends Oe{execute(e){const n=this.editor.model;let o=e.position;n.change(e=>{var t=e.createElement("paragraph");if(!n.schema.checkChild(o.parent,t)){var i=n.schema.findAllowedParent(o,t);if(!i)return;o=e.split(o,i).position}n.insertContent(t,o),e.setSelection(t,"in")})}}class rh extends Ne{static get pluginName(){return"Paragraph"}init(){const e=this.editor,t=e.model;e.commands.add("paragraph",new ih(e)),e.commands.add("insertParagraph",new oh(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(e,{writer:t})=>!rh.paragraphLikeElements.has(e.name)||e.isEmpty?null:t.createElement("paragraph"),view:/.+/,converterPriority:"low"})}}rh.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);class sh extends Oe{constructor(e,t){super(e),this.modelElements=t}refresh(){const t=$o(this.editor.model.document.selection.getSelectedBlocks());this.value=!!t&&this.modelElements.includes(t.name)&&t.name,this.isEnabled=!!t&&this.modelElements.some(e=>ah(t,e,this.editor.model.schema))}execute(e){const i=this.editor.model,n=i.document,o=e.value;i.change(e=>{var t=Array.from(n.selection.getSelectedBlocks()).filter(e=>ah(e,o,i.schema));for(const i of t)i.is("element",o)||e.rename(i,o)})}}function ah(e,t,i){return i.checkChild(e.parent,t)&&!i.isObject(e)}class lh extends Ne{static get pluginName(){return"HeadingEditing"}constructor(e){super(e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[rh]}init(){const e=this.editor,t=e.config.get("heading.options"),i=[];for(const n of t)"paragraph"!==n.model&&(e.model.schema.register(n.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(n),i.push(n.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new sh(e,i))}afterInit(){const n=this.editor,e=n.commands.get("enter"),o=n.config.get("heading.options");e&&this.listenTo(e,"afterExecute",(e,t)=>{const i=n.model.document.selection.getFirstPosition().parent;o.some(e=>i.is("element",e.model))&&!i.is("element","paragraph")&&0===i.childCount&&t.writer.rename(i,"paragraph")})}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:a.get("low")+1})}}i(13);class ch extends Ne{static get pluginName(){return"HeadingUI"}init(){const a=this.editor,e=a.t,l=function(e){const t=e.t,i={Paragraph:t("Paragraph"),"Heading 1":t("Heading 1"),"Heading 2":t("Heading 2"),"Heading 3":t("Heading 3"),"Heading 4":t("Heading 4"),"Heading 5":t("Heading 5"),"Heading 6":t("Heading 6")};return e.config.get("heading.options").map(e=>{var t=i[e.title];return t&&t!=e.title&&(e.title=t),e})}(a),c=e("Choose heading"),d=e("Heading");a.ui.componentFactory.add("heading",e=>{const i={},t=new Ft,n=a.commands.get("heading"),o=a.commands.get("paragraph"),r=[n];for(const a of l){const e={type:"button",model:new _l({label:a.title,class:a.class,withText:!0})};"paragraph"===a.model?(e.model.bind("isOn").to(o,"value"),e.model.set("commandName","paragraph"),r.push(o)):(e.model.bind("isOn").to(n,"value",e=>e===a.model),e.model.set({commandName:"heading",commandValue:a.model})),t.add(e),i[a.model]=a.title}const s=ll(e);return dl(s,t),s.buttonView.set({isOn:!1,withText:!0,tooltip:d}),s.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),s.bind("isEnabled").toMany(r,"isEnabled",(...e)=>e.some(e=>e)),s.buttonView.bind("label").to(n,"value",o,"value",(e,t)=>(t=e||t&&"paragraph",i[t]||c)),this.listenTo(s,"execute",e=>{a.execute(e.source.commandName,e.source.commandValue?{value:e.source.commandValue}:void 0),a.editing.view.focus()}),s})}}class dh extends Ne{static get requires(){return[Il]}static get pluginName(){return"WidgetToolbarRepository"}init(){const i=this.editor;var e;i.plugins.has("BalloonToolbar")&&(e=i.plugins.get("BalloonToolbar"),this.listenTo(e,"show",e=>{var t;(t=i.editing.view.document.selection.getSelectedElement())&&pc(t)&&e.stop()},{priority:"high"})),this._toolbarDefinitions=new Map,this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(i.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(i.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:t,items:i,getRelatedElement:n,balloonClassName:o="ck-toolbar-container"}){if(i.length){const r=this.editor,s=r.t,a=new tl(r.locale);if(a.ariaLabel=t||s("Widget toolbar"),this._toolbarDefinitions.has(e))throw new p.a("widget-toolbar-duplicated",this,{toolbarId:e});a.fillFromConfig(i,r.ui.componentFactory),this._toolbarDefinitions.set(e,{view:a,getRelatedElement:n,balloonClassName:o})}else Object(p.b)("widget-toolbar-no-items",{toolbarId:e})}_updateToolbarsVisibility(){let e=0,t=null,i=null;for(const o of this._toolbarDefinitions.values()){const r=o.getRelatedElement(this.editor.editing.view.document.selection);var n;this.isEnabled&&r?this.editor.ui.focusTracker.isFocused?(n=r.getAncestors().length)>e&&(e=n,t=r,i=o):this._isToolbarVisible(o)&&this._hideToolbar(o):this._isToolbarInBalloon(o)&&this._hideToolbar(o)}i&&this._showToolbar(i,t)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,t){this._isToolbarVisible(e)?hh(this.editor,t):this._isToolbarInBalloon(e)||(this._balloon.add({view:e.view,position:uh(this.editor,t),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const t of this._toolbarDefinitions.values()){var e;this._isToolbarVisible(t)&&(e=t.getRelatedElement(this.editor.editing.view.document.selection),hh(this.editor,e))}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function hh(e,t){const i=e.plugins.get("ContextualBalloon"),n=uh(e,t);i.updatePosition(n)}function uh(e,t){const i=e.editing.view,n=xl.defaultPositions;return{target:i.domConverter.mapViewToDom(t),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,yc]}}class gh{constructor(e){this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}begin(e,t,n){var i=new Bo(t);this.activeHandlePosition=function(e){for(const t of["top-left","top-right","bottom-right","bottom-left"])if(e.classList.contains("ck-widget__resizer__handle-"+t))return t}(e),this._referenceCoordinates=function(e,t){const i=new Bo(e),n=t.split("-"),o={x:"right"==n[1]?i.right:i.left,y:"bottom"==n[0]?i.bottom:i.top};return o.x+=e.ownerDocument.defaultView.scrollX,o.y+=e.ownerDocument.defaultView.scrollY,o}(t,(t=(e=this.activeHandlePosition).split("-"),`${(e={top:"bottom",bottom:"top",left:"right",right:"left"})[t[0]]}-${e[t[1]]}`)),this.originalWidth=i.width,this.originalHeight=i.height,this.aspectRatio=i.width/i.height;const o=n.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this.originalWidthPercents=parseFloat(o):this.originalWidthPercents=function(e){const t=n.parentElement,i=parseFloat(t.ownerDocument.defaultView.getComputedStyle(t).width);return e.width/i*100}(i)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}Me(gh,Ce);class mh extends ka{constructor(){super();const e=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",e.to("_viewPosition",e=>e?"ck-orientation-"+e:"")],style:{display:e.if("_isVisible","none",e=>!e)}},children:[{text:e.to("_label")}]})}_bindToState(n,e){this.bind("_isVisible").to(e,"proposedWidth",e,"proposedHeight",(e,t)=>null!==e&&null!==t),this.bind("_label").to(e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",e,"proposedWidthPercents",(e,t,i)=>"px"===n.unit?`${e}×${t}`:i+"%"),this.bind("_viewPosition").to(e,"activeHandlePosition",e,"proposedHandleHostWidth",e,"proposedHandleHostHeight",(e,t,i)=>t<50||i<50?"above-center":e)}_dismiss(){this.unbind(),this._isVisible=!1}}class ph{constructor(e){this._options=e,this._viewResizerWrapper=null,this.set("isEnabled",!0),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",e=>{this.state.proposedWidth||this.state.proposedWidthPercents||(this._cleanup(),e.stop())},{priority:"high"}),this.on("change:isEnabled",()=>{this.isEnabled&&this.redraw()})}attach(){const i=this,n=this._options.viewElement;this._options.editor.editing.view.change(e=>{var t=e.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(e){const n=this.toDomElement(e);return i._appendHandles(n),i._appendSizeUI(n),i.on("change:isEnabled",(e,t,i)=>{n.style.display=i?"":"none"}),n.style.display=i.isEnabled?"":"none",n});e.insert(e.createPositionAt(n,"end"),t),e.addClass("ck-widget_with-resizer",n),this._viewResizerWrapper=t})}begin(e){this.state=new gh(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const i=this._proposeNewSize(e);this._options.editor.editing.view.change(e=>{var t=("%"===(t=this._options.unit||"%")?i.widthPercents:i.width)+t;e.setStyle("width",t,this._options.viewElement)});var t=this._getHandleHost(),e=new Bo(t);i.handleHostWidth=Math.round(e.width),i.handleHostHeight=Math.round(e.height),t=new Bo(t),i.width=Math.round(t.width),i.height=Math.round(t.height),this.redraw(e),this.state.update(i)}commit(){const e=this._options.unit||"%",t=("%"===e?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(t)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const i=this._domResizerWrapper;if((n=i)&&n.ownerDocument&&n.ownerDocument.contains(n)){var n;const o=i.parentElement,r=this._getHandleHost(),s=this._viewResizerWrapper,a=[s.getStyle("width"),s.getStyle("height"),s.getStyle("left"),s.getStyle("top")];let t;if(o.isSameNode(r)){const i=e||new Bo(r);t=[i.width+"px",i.height+"px",void 0,void 0]}else t=[r.offsetWidth+"px",r.offsetHeight+"px",r.offsetLeft+"px",r.offsetTop+"px"];"same"!==Kt(a,t)&&this._options.editor.editing.view.change(e=>{e.setStyle({width:t[0],height:t[1],left:t[2],top:t[3]},s)})}}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(e=>{e.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){const t=this.state,i=e.pageX,n=e.pageY,o=!this._options.isCentered||this._options.isCentered(this),r={x:t._referenceCoordinates.x-(i+t.originalWidth),y:n-t.originalHeight-t._referenceCoordinates.y};o&&t.activeHandlePosition.endsWith("-right")&&(r.x=i-(t._referenceCoordinates.x+t.originalWidth)),o&&(r.x*=2);const s={width:Math.abs(t.originalWidth+r.x),height:Math.abs(t.originalHeight+r.y)};s.dominant=s.width/t.aspectRatio>s.height?"width":"height",s.max=s[s.dominant];const a={width:s.width,height:s.height};return"width"==s.dominant?a.height=a.width/t.aspectRatio:a.width=a.height*t.aspectRatio,{width:Math.round(a.width),height:Math.round(a.height),widthPercents:Math.min(Math.round(t.originalWidthPercents/t.originalWidth*a.width*100)/100,100)}}_getResizeHost(){var e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){var e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){var t;for(const i of["top-left","top-right","bottom-right","bottom-left"])e.appendChild(new _a({tag:"div",attributes:{class:"ck-widget__resizer__handle "+(t=i,"ck-widget__resizer__handle-"+t)}}).render())}_appendSizeUI(e){this._sizeView=new mh,this._sizeView.render(),e.appendChild(this._sizeView.element)}}Me(ph,Ce),i(72),Me(class extends Ne{static get pluginName(){return"WidgetResize"}init(){const e=this.editor.editing,t=qn.window.document;this.set("visibleResizer",null),this.set("_activeResizer",null),this._resizers=new Map,e.view.addObserver(Gl),this._observer=Object.create(to),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(t,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(t,"mouseup",this._mouseUpListener.bind(this));var i=()=>{this.visibleResizer&&this.visibleResizer.redraw()};this._redrawFocusedResizerThrottled=Oc(i,200),this.on("change:visibleResizer",i),this.editor.ui.on("update",this._redrawFocusedResizerThrottled),this.editor.model.document.on("change",()=>{for(var[e,t]of this._resizers)e.isAttached()||(this._resizers.delete(e),t.destroy())},{priority:"lowest"}),this._observer.listenTo(qn.window,"resize",this._redrawFocusedResizerThrottled);const n=this.editor.editing.view.document.selection;n.on("change",()=>{var e=n.getSelectedElement();this.visibleResizer=this.getResizerByViewElement(e)||null})}destroy(){this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawFocusedResizerThrottled.cancel()}attachTo(e){const t=new ph(e),i=this.editor.plugins;if(t.attach(),i.has("WidgetToolbarRepository")){const n=i.get("WidgetToolbarRepository");t.on("begin",()=>{n.forceDisabled("resize")},{priority:"lowest"}),t.on("cancel",()=>{n.clearForceDisabled("resize")},{priority:"highest"}),t.on("commit",()=>{n.clearForceDisabled("resize")},{priority:"highest"})}return this._resizers.set(e.viewElement,t),e=this.editor.editing.view.document.selection.getSelectedElement(),this.getResizerByViewElement(e)==t&&(this.visibleResizer=t),t}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const t of this._resizers.values())if(t.containsHandle(e))return t}_mouseDownListener(e,t){var i=t.domTarget;ph.isResizeHandle(i)&&(this._activeResizer=this._getResizerByHandle(i),this._activeResizer&&(this._activeResizer.begin(i),e.stop(),t.preventDefault()))}_mouseMoveListener(e,t){this._activeResizer&&this._activeResizer.updateSize(t)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}},Ce);class fh extends Oe{refresh(){const e=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!e,this.isEnabled&&e.hasAttribute("alt")?this.value=e.getAttribute("alt"):this.value=!1}execute(t){const e=this.editor,i=e.plugins.get("ImageUtils"),n=e.model,o=i.getClosestSelectedImageElement(n.document.selection);n.change(e=>{e.setAttribute("alt",t.newValue,o)})}}function bh(e,t){var i=e.createEmptyElement("img"),t="imageBlock"===t?e.createContainerElement("figure",{class:"image"}):e.createContainerElement("span",{class:"image-inline"},{isAllowedInsideAttributeElement:!0});return e.insert(e.createPositionAt(t,0),i),t}function wh(e,t){if(e.plugins.has("ImageInlineEditing")!==e.plugins.has("ImageBlockEditing"))return{name:"img",attributes:{src:!0}};const i=e.plugins.get("ImageUtils");return e=>i.isInlineImageView(e)&&e.hasAttribute("src")&&(e.findAncestor(i.isBlockImageView)?"imageBlock":"imageInline")===t?{name:!0,attributes:["src"]}:null}function kh(e,t){return!(t=$o(t.getSelectedBlocks()))||e.isObject(t)||t.isEmpty&&"listItem"!=t.name?"imageBlock":"imageInline"}class _h extends Ne{static get pluginName(){return"ImageUtils"}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(i={},n=null,o=null){const e=this.editor,r=e.model,s=r.document.selection;o=vh(e,n||s,o);for(const n in i={...Object.fromEntries(s.getAttributes()),...i})r.schema.checkAttribute(o,n)||delete i[n];return r.change(e=>{var t=e.createElement(o,i);return n||"imageInline"==o||(n=vc(s,r)),r.insertContent(t,n),t.parent?(e.setSelection(t,"on"),t):null})}getClosestSelectedImageWidget(e){var t=e.getSelectedElement();if(t&&this.isImageWidget(t))return t;let i=e.getFirstPosition().parent;for(;i;){if(i.is("element")&&this.isImageWidget(i))return i;i=i.parent}return null}getClosestSelectedImageElement(e){var t=e.getSelectedElement();return this.isImage(t)?t:e.getFirstPosition().findAncestor("imageBlock")}isImageAllowed(){var e=this.editor.model.document.selection;return function(t,i){if("imageBlock"==vh(t,i)){var e=function(){const e=vc(i,t.model).start.parent;return e.isEmpty&&!e.is("element","$root")?e.parent:e}();if(t.model.schema.checkChild(e,"imageBlock"))return!0}else if(t.model.schema.checkChild(i.focus,"imageInline"))return!0;return!1}(this.editor,e)&&[...e.focus.getAncestors()].every(e=>!e.is("element","imageBlock"))}toImageWidget(t,e,i){return e.setCustomProperty("image",!0,t),fc(t,e,{label:()=>{var e=this.findViewImgElement(t).getAttribute("alt");return e?`${e} ${i}`:i}})}isImageWidget(e){return!!e.getCustomProperty("image")&&pc(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const t=this.editor.editing.view;for(var{item:i}of t.createRangeIn(e))if(this.isInlineImageView(i))return i}}function vh(e,t,i){const n=e.model.schema,o=e.config.get("image.insert.type");return e.plugins.has("ImageBlockEditing")?e.plugins.has("ImageInlineEditing")?i||("inline"===o?"imageInline":"block"===o?"imageBlock":t.is("selection")?kh(n,t):n.checkChild(t,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}class yh extends Ne{static get requires(){return[_h]}static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new fh(this.editor))}}i(74),i(7);class xh extends ka{constructor(e){super(e);const t=this.locale.t;this.focusTracker=new Yo,this.keystrokes=new Go,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(t("Save"),ma.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(t("Cancel"),ma.cancel,"ck-button-cancel","cancel"),this._focusables=new wa,this._focusCycler=new Fa({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]}),fa(this)}render(){super.render(),this.keystrokes.listenTo(this.element),ba({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}_createButton(e,t,i,n){const o=new ja(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:i}}),n&&o.delegate("execute").to(this,n),o}_createLabeledInputView(){const e=this.locale.t,t=new bl(this.locale,wl);return t.label=e("Text alternative"),t}}function Ah(e){const t=e.editing.view,i=xl.defaultPositions,n=e.plugins.get("ImageUtils");return{target:t.domConverter.viewToDom(n.getClosestSelectedImageWidget(t.document.selection)),positions:[i.northArrowSouth,i.northArrowSouthWest,i.northArrowSouthEast,i.southArrowNorth,i.southArrowNorthWest,i.southArrowNorthEast]}}class Ch extends Ne{static get requires(){return[Il]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton(),this._createForm()}destroy(){super.destroy(),this._form.destroy()}_createButton(){const n=this.editor,o=n.t;n.ui.componentFactory.add("imageTextAlternative",e=>{const t=n.commands.get("imageTextAlternative"),i=new ja(e);return i.set({label:o("Change image text alternative"),icon:ma.lowVision,tooltip:!0}),i.bind("isEnabled").to(t,"isEnabled"),this.listenTo(i,"execute",()=>{this._showForm()}),i})}_createForm(){const e=this.editor,t=e.editing.view.document,i=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new xh(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(e,t)=>{this._hideForm(!0),t()}),this.listenTo(e.ui,"update",()=>{i.getClosestSelectedImageWidget(t.selection)?this._isVisible&&function(e){const t=e.plugins.get("ContextualBalloon");e.plugins.get("ImageUtils").getClosestSelectedImageWidget(e.editing.view.document.selection)&&(e=Ah(e),t.updatePosition(e))}(e):this._hideForm(!0)}),pa({emitter:this._form,activator:()=>this._isVisible,contextElements:[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(!this._isVisible){const e=this.editor,t=e.commands.get("imageTextAlternative"),i=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:Ah(e)}),i.fieldView.value=i.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}}_hideForm(e){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return this._balloon.visibleView===this._form}get _isInBalloon(){return this._balloon.hasView(this._form)}}class Th extends Ne{static get requires(){return[yh,Ch]}static get pluginName(){return"ImageTextAlternative"}}function Eh(s,t){return e=>{e.on("attribute:srcset:"+t,i)};function i(e,t,i){if(i.consumable.consume(t.item,e.name)){const n=i.writer,o=i.mapper.toViewElement(t.item),r=s.findViewImgElement(o);if(null===t.attributeNewValue){const s=t.attributeOldValue;s.data&&(n.removeAttribute("srcset",r),n.removeAttribute("sizes",r),s.width&&n.removeAttribute("width",r))}else{const s=t.attributeNewValue;s.data&&(n.setAttribute("srcset",s.data,r),n.setAttribute("sizes","100vw",r),s.width&&n.setAttribute("width",s.width,r))}}}}function Ih(s,t,i){return e=>{e.on(`attribute:${i}:${t}`,n)};function n(e,t,i){if(i.consumable.consume(t.item,e.name)){const n=i.writer,o=i.mapper.toViewElement(t.item),r=s.findViewImgElement(o);n.setAttribute(t.attributeKey,t.attributeNewValue||"",r)}}}class Sh extends oo{observe(e){this.listenTo(e,"load",(e,t)=>{var i=t.target;this.checkShouldIgnoreEventFromTarget(i)||"IMG"==i.tagName&&this._fireEvents(t)},{useCapture:!0})}_fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}class Ph extends Oe{constructor(e){super(e);var t=e.config.get("image.insert.type");e.plugins.has("ImageBlockEditing")||"block"===t&&Object(p.b)("image-block-plugin-required"),e.plugins.has("ImageInlineEditing")||"inline"===t&&Object(p.b)("image-inline-plugin-required")}refresh(){this.isEnabled=this.editor.plugins.get("ImageUtils").isImageAllowed()}execute(e){const t=Ut(e.source),n=this.editor.model.document.selection,o=this.editor.plugins.get("ImageUtils"),r=Object.fromEntries(n.getAttributes());t.forEach((e,t)=>{var i=n.getSelectedElement();if("string"==typeof e&&(e={src:e}),t&&i&&o.isImage(i)){const t=this.editor.model.createPositionAfter(i);o.insertImage({...e,...r},t)}else o.insertImage({...e,...r})})}}class Mh extends Ne{static get requires(){return[_h]}static get pluginName(){return"ImageEditing"}init(){const e=this.editor,t=e.conversion;e.editing.view.addObserver(Sh),t.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:e=>{const t={data:e.getAttribute("srcset")};return e.hasAttribute("width")&&(t.width=e.getAttribute("width")),t}}});var i=new Ph(e);e.commands.add("insertImage",i),e.commands.add("imageInsert",i)}}class Nh extends Oe{constructor(e,t){super(e),this._modelElementName=t}refresh(){const e=this.editor.plugins.get("ImageUtils"),t=e.getClosestSelectedImageElement(this.editor.model.document.selection);"imageBlock"===this._modelElementName?this.isEnabled=e.isInlineImage(t):this.isEnabled=e.isBlockImage(t)}execute(){const e=this.editor,o=this.editor.model,r=e.plugins.get("ImageUtils"),s=r.getClosestSelectedImageElement(o.document.selection),a=Object.fromEntries(s.getAttributes());return a.src||a.uploadId?o.change(e=>{var t=Array.from(o.markers).filter(e=>e.getRange().containsItem(s)),i=r.insertImage(a,o.createSelection(s,"on"),this._modelElementName);if(!i)return null;var n=e.createRangeOn(i);for(const o of t){const r=o.getRange(),s="$graveyard"!=r.root.rootName?r.getJoined(n,!0):n;e.updateMarker(o,{range:s})}return{oldElement:s,newElement:i}}):null}}class Rh extends Ne{static get requires(){return[Mh,_h,ic]}static get pluginName(){return"ImageBlockEditing"}init(){const e=this.editor;e.model.schema.register("imageBlock",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),e.plugins.has("ImageInlineEditing")&&(e.commands.add("imageTypeBlock",new Nh(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,i=e.t,t=e.conversion,n=e.plugins.get("ImageUtils");function o(e,t,i){if(i.consumable.test(t.viewItem,{name:!0,classes:"image"})){const o=r.findViewImgElement(t.viewItem);var n;o&&o.hasAttribute("src")&&i.consumable.test(o,{name:!0})&&(n=$o(i.convertItem(o,t.modelCursor).modelRange.getItems()))&&(i.convertChildren(t.viewItem,n),i.updateConversionResult(n,t))}}var r;t.for("dataDowncast").elementToElement({model:"imageBlock",view:(e,{writer:t})=>bh(t,"imageBlock")}),t.for("editingDowncast").elementToElement({model:"imageBlock",view:(e,{writer:t})=>n.toImageWidget(bh(t,"imageBlock"),t,i("image widget"))}),t.for("downcast").add(Ih(n,"imageBlock","src")).add(Ih(n,"imageBlock","alt")).add(Eh(n,"imageBlock")),t.for("upcast").elementToElement({view:wh(e,"imageBlock"),model:(e,{writer:t})=>t.createElement("imageBlock",{src:e.getAttribute("src")})}).add((r=n,e=>{e.on("element:figure",o)}))}_setupClipboardIntegration(){const o=this.editor,r=o.model,s=o.editing.view,a=o.plugins.get("ImageUtils");this.listenTo(o.plugins.get("ClipboardPipeline"),"inputTransformation",(e,t)=>{const i=Array.from(t.content.getChildren());if(i.every(a.isInlineImageView)){var n=t.targetRanges?o.editing.mapper.toModelRange(t.targetRanges[0]):r.document.selection.getFirstRange(),n=r.createSelection(n);if("imageBlock"===kh(r.schema,n)){const o=new Kl(s.document),r=i.map(e=>o.createElement("figure",{class:"image"},e));t.content=o.createDocumentFragment(r)}}})}}i(11);class Oh extends Ne{static get requires(){return[Rh,Rc,Th]}static get pluginName(){return"ImageBlock"}}class zh extends Ne{static get requires(){return[Mh,_h,ic]}static get pluginName(){return"ImageInlineEditing"}init(){const e=this.editor,t=e.model.schema;t.register("imageInline",{isObject:!0,isInline:!0,allowWhere:"$text",allowAttributes:["alt","src","srcset"]}),t.addChildCheck((e,t)=>{if(e.endsWith("caption")&&"imageInline"===t.name)return!1}),this._setupConversion(),e.plugins.has("ImageBlockEditing")&&(e.commands.add("imageTypeInline",new Nh(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,i=e.t,t=e.conversion,n=e.plugins.get("ImageUtils");t.for("dataDowncast").elementToElement({model:"imageInline",view:(e,{writer:t})=>t.createEmptyElement("img")}),t.for("editingDowncast").elementToElement({model:"imageInline",view:(e,{writer:t})=>n.toImageWidget(bh(t,"imageInline"),t,i("image widget"))}),t.for("downcast").add(Ih(n,"imageInline","src")).add(Ih(n,"imageInline","alt")).add(Eh(n,"imageInline")),t.for("upcast").elementToElement({view:wh(e,"imageInline"),model:(e,{writer:t})=>t.createElement("imageInline",{src:e.getAttribute("src")})})}_setupClipboardIntegration(){const o=this.editor,r=o.model,s=o.editing.view,a=o.plugins.get("ImageUtils");this.listenTo(o.plugins.get("ClipboardPipeline"),"inputTransformation",(e,t)=>{const i=Array.from(t.content.getChildren());if(i.every(a.isBlockImageView)){var n=t.targetRanges?o.editing.mapper.toModelRange(t.targetRanges[0]):r.document.selection.getFirstRange(),n=r.createSelection(n);if("imageInline"===kh(r.schema,n)){const o=new Kl(s.document),r=i.map(t=>1===t.childCount?(Array.from(t.getAttributes()).forEach(e=>o.setAttribute(...e,a.findViewImgElement(t))),t.getChild(0)):t);t.content=o.createDocumentFragment(r)}}})}}class Dh extends Ne{static get requires(){return[zh,Rc,Th]}static get pluginName(){return"ImageInline"}}function Lh(e){for(const t of e.getChildren())if(t&&t.is("element","caption"))return t;return null}function Vh(e,t){return(t=t.getFirstPosition().findAncestor("caption"))&&e.isBlockImage(t.parent)?t:null}class jh extends Oe{refresh(){const e=this.editor,t=e.plugins.get("ImageUtils");if(!e.plugins.has(Rh))return this.isEnabled=!1,void(this.value=!1);const i=e.model.document.selection,n=i.getSelectedElement();if(!n){const e=Vh(t,i);return this.isEnabled=!!e,void(this.value=!!e)}this.isEnabled=this.editor.plugins.get("ImageUtils").isImage(n),this.isEnabled?this.value=!!Lh(n):this.value=!1}execute(e={}){const{focusCaptionOnShow:t}=e;this.editor.model.change(e=>{this.value?this._hideImageCaption(e):this._showImageCaption(e,t)})}_showImageCaption(e,t){const i=this.editor.model.document.selection,n=this.editor.plugins.get("ImageCaptionEditing");let o=i.getSelectedElement();var r=n._getSavedCaption(o);this.editor.plugins.get("ImageUtils").isInlineImage(o)&&(this.editor.execute("imageTypeBlock"),o=i.getSelectedElement()),r=r||e.createElement("caption"),e.append(r,o),t&&e.setSelection(r,"in")}_hideImageCaption(e){const t=this.editor,i=t.model.document.selection,n=t.plugins.get("ImageCaptionEditing"),o=t.plugins.get("ImageUtils");let r,s=i.getSelectedElement();s?r=Lh(s):(r=Vh(o,i),s=r.parent),n._saveCaption(s,r),e.setSelection(s,"on"),e.remove(r)}}class Bh extends Ne{static get requires(){return[_h]}static get pluginName(){return"ImageCaptionEditing"}constructor(e){super(e),this._savedCaptionsMap=new WeakMap}init(){const e=this.editor,t=e.model.schema;t.isRegistered("caption")?t.extend("caption",{allowIn:"imageBlock"}):t.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new jh(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration()}_setupConversion(){const e=this.editor,i=e.editing.view,n=e.plugins.get("ImageUtils"),o=e.t;e.conversion.for("upcast").elementToElement({view:t=>function(e){return"figcaption"==t.name&&e.isBlockImageView(t.parent)?{name:!0}:null}(n),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(e,{writer:t})=>n.isBlockImage(e.parent)?t.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(e,{writer:t})=>n.isBlockImage(e.parent)?(e=t.createEditableElement("figcaption"),t.setCustomProperty("imageCaption",!0,e),Ol({view:i,element:e,text:o("Enter image caption"),keepOnFocus:!0}),kc(e=_c(e,t),t,(e,t,i)=>i.addClass(Ut(t.classes),e),(e,t,i)=>i.removeClass(Ut(t.classes),e)),e):null}),e.editing.mapper.on("modelToViewPosition",Fh(i)),e.data.mapper.on("modelToViewPosition",Fh(i))}_setupImageTypeCommandsIntegration(){const e=this.editor,n=e.plugins.get("ImageUtils"),t=e.commands.get("imageTypeInline"),i=e.commands.get("imageTypeBlock"),o=e=>{if(e.return){var{oldElement:t,newElement:e}=e.return;if(t){if(n.isBlockImage(t)){var i=Lh(t);if(i)return void this._saveCaption(e,i)}(t=this._getSavedCaption(t))&&this._saveCaption(e,t)}}};t&&this.listenTo(t,"execute",o,{priority:"low"}),i&&this.listenTo(i,"execute",o,{priority:"low"})}_getSavedCaption(e){return(e=this._savedCaptionsMap.get(e))?dr.fromJSON(e):null}_saveCaption(e,t){this._savedCaptionsMap.set(e,t.toJSON())}}function Fh(r){return(e,t)=>{const i=t.modelPosition,n=i.parent;var o;n.is("element","imageBlock")&&(o=t.mapper.toViewElement(n),t.viewPosition=r.createPositionAt(o,i.offset+1))}}class Hh extends Ne{static get requires(){return[_h]}static get pluginName(){return"ImageCaptionUI"}init(){const n=this.editor,o=n.editing.view,r=n.plugins.get("ImageUtils"),s=n.t;n.ui.componentFactory.add("toggleImageCaption",e=>{const t=n.commands.get("toggleImageCaption"),i=new ja(e);return i.set({icon:ma.caption,tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(t,"value","isEnabled"),i.bind("label").to(t,"value",e=>s(e?"Toggle caption off":"Toggle caption on")),this.listenTo(i,"execute",()=>{n.execute("toggleImageCaption",{focusCaptionOnShow:!0});var e=Vh(r,n.model.document.selection);if(e){const r=n.editing.mapper.toViewElement(e);o.scrollToTheSelection(),o.change(e=>{e.addClass("image__caption_highlighted",r)})}}),i})}}i(78);class Uh extends Oe{constructor(e,t){super(e),this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(t.map(e=>{if(e.isDefault)for(const t of e.modelElements)this._defaultStyles[t]=e.name;return[e.name,e]}))}refresh(){const e=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!e,this.isEnabled?e.hasAttribute("imageStyle")?this.value=e.getAttribute("imageStyle"):this.value=this._defaultStyles[e.name]:this.value=!1}execute(n={}){const e=this.editor,o=e.model,r=e.plugins.get("ImageUtils");o.change(e=>{var t=n.value;let i=r.getClosestSelectedImageElement(o.document.selection);t&&this.shouldConvertImageType(t,i)&&(this.editor.execute(r.isBlockImage(i)?"imageTypeInline":"imageTypeBlock"),i=r.getClosestSelectedImageElement(o.document.selection)),!t||this._styles.get(t).isDefault?e.removeAttribute("imageStyle",i):e.setAttribute("imageStyle",t,i)})}shouldConvertImageType(e,t){return!this._styles.get(e).modelElements.includes(t.name)}}const{objectFullWidth:Wh,objectInline:qh,objectLeft:$h,objectRight:Yh,objectCenter:Gh,objectBlockLeft:Kh,objectBlockRight:Qh}=ma,Jh={inline:{name:"inline",title:"In line",icon:qh,modelElements:["imageInline"],isDefault:!0},alignLeft:{name:"alignLeft",title:"Left aligned image",icon:$h,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"},alignBlockLeft:{name:"alignBlockLeft",title:"Left aligned image",icon:Kh,modelElements:["imageBlock"],className:"image-style-block-align-left"},alignCenter:{name:"alignCenter",title:"Centered image",icon:Gh,modelElements:["imageBlock"],className:"image-style-align-center"},alignRight:{name:"alignRight",title:"Right aligned image",icon:Yh,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"},alignBlockRight:{name:"alignBlockRight",title:"Right aligned image",icon:Qh,modelElements:["imageBlock"],className:"image-style-block-align-right"},block:{name:"block",title:"Centered image",icon:Gh,modelElements:["imageBlock"],isDefault:!0},side:{name:"side",title:"Side image",icon:Yh,modelElements:["imageBlock"],className:"image-style-side"}},Zh={full:Wh,left:Kh,right:Qh,center:Gh,inlineLeft:$h,inlineRight:Yh,inline:qh},Xh=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function eu(e){Object(p.b)("image-style-configuration-definition-invalid",e)}var tu={normalizeStyles:function(t){return(t.configuredStyles.options||[]).map(e=>function(e){return"string"==typeof(e="string"==typeof e?Jh[e]?{...Jh[e]}:{name:e}:function(e,t){const i={...t};for(const n in e)Object.prototype.hasOwnProperty.call(t,n)||(i[n]=e[n]);return i}(Jh[e.name],e)).icon&&(e.icon=Zh[e.icon]||e.icon),e}(e)).filter(e=>function(e,{isBlockPluginLoaded:t,isInlinePluginLoaded:i}){const{modelElements:n,name:o}=e;if(!(n&&n.length&&o))return eu({style:e}),!1;{const o=[t?"imageBlock":null,i?"imageInline":null];if(!n.some(e=>o.includes(e)))return Object(p.b)("image-style-missing-dependency",{style:e,missingPlugins:n.map(e=>"imageBlock"===e?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}(e,t))},getDefaultStylesConfiguration:function(e,t){return e&&t?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:e?{options:["block","side"]}:t?{options:["inline","alignLeft","alignRight"]}:{}},getDefaultDropdownDefinitions:function(e){return e.has("ImageBlockEditing")&&e.has("ImageInlineEditing")?[...Xh]:[]},warnInvalidStyle:eu,DEFAULT_OPTIONS:Jh,DEFAULT_ICONS:Zh,DEFAULT_DROPDOWN_DEFINITIONS:Xh};function iu(e,t){for(const i of t)if(i.name===e)return i}class nu extends Ne{static get pluginName(){return"ImageStyleEditing"}static get requires(){return[_h]}init(){const{normalizeStyles:e,getDefaultStylesConfiguration:t}=tu,i=this.editor,n=i.plugins.has("ImageBlockEditing"),o=i.plugins.has("ImageInlineEditing");i.config.define("image.styles",t(n,o)),this.normalizedStyles=e({configuredStyles:i.config.get("image.styles"),isBlockPluginLoaded:n,isInlinePluginLoaded:o}),this._setupConversion(n,o),this._setupPostFixer(),i.commands.add("imageStyle",new Uh(i,this.normalizedStyles))}_setupConversion(e,t){const i=this.editor,n=i.model.schema,o=(a=this.normalizedStyles,(e,t,i)=>{if(i.consumable.consume(t.item,e.name)){const n=iu(t.attributeNewValue,a),o=iu(t.attributeOldValue,a),r=i.mapper.toViewElement(t.item),s=i.writer;o&&s.removeClass(o.className,r),n&&s.addClass(n.className,r)}});var a,r=function(e){const r={imageInline:e.filter(e=>!e.isDefault&&e.modelElements.includes("imageInline")),imageBlock:e.filter(e=>!e.isDefault&&e.modelElements.includes("imageBlock"))};return(e,t,i)=>{if(t.modelRange){var n=t.viewItem,o=$o(t.modelRange.getItems());if(o&&i.schema.checkAttribute(o,"imageStyle"))for(const e of r[o.name])i.consumable.consume(n,{classes:e.className})&&i.writer.setAttribute("imageStyle",e.name,o)}}}(this.normalizedStyles);i.editing.downcastDispatcher.on("attribute:imageStyle",o),i.data.downcastDispatcher.on("attribute:imageStyle",o),e&&(n.extend("imageBlock",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:figure",r,{priority:"low"})),t&&(n.extend("imageInline",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:img",r,{priority:"low"}))}_setupPostFixer(){const e=this.editor,s=e.model.document,a=e.plugins.get(_h),l=new Map(this.normalizedStyles.map(e=>[e.name,e]));s.registerPostFixer(t=>{let i=!1;for(const o of s.differ.getChanges())if("insert"==o.type||"attribute"==o.type&&"imageStyle"==o.attributeKey){let e=("insert"==o.type?o.position:o.range.start).nodeAfter;if(e&&e.is("element","paragraph")&&0<e.childCount&&(e=e.getChild(0)),!a.isImage(e))continue;var n=e.getAttribute("imageStyle");if(!n)continue;const r=l.get(n);r&&r.modelElements.includes(e.name)||(t.removeAttribute("imageStyle",e),i=!0)}return i})}}i(80);class ou extends Ne{static get requires(){return[nu]}static get pluginName(){return"ImageStyleUI"}get localizedDefaultStylesTitles(){const e=this.editor.t;return{"Wrap text":e("Wrap text"),"Break text":e("Break text"),"In line":e("In line"),"Full size image":e("Full size image"),"Side image":e("Side image"),"Left aligned image":e("Left aligned image"),"Centered image":e("Centered image"),"Right aligned image":e("Right aligned image")}}init(){const e=this.editor.plugins,t=this.editor.config.get("image.toolbar")||[],i=ru(e.get("ImageStyleEditing").normalizedStyles,this.localizedDefaultStylesTitles);for(const e of i)this._createButton(e);var n=ru([...t.filter(_),...tu.getDefaultDropdownDefinitions(e)],this.localizedDefaultStylesTitles);for(const e of n)this._createDropdown(e,i)}_createDropdown(l,c){const d=this.editor.ui.componentFactory;d.add(l.name,e=>{let i;const{defaultItem:n,items:t,title:o}=l,r=t.filter(t=>c.find(({name:e})=>su(e)===t)).map(e=>{var t=d.create(e);return e===n&&(i=t),t});t.length!==r.length&&tu.warnInvalidStyle({dropdown:l});const s=ll(e,qa),a=s.buttonView;return cl(s,r),a.set({label:au(o,i.label),class:null,tooltip:!0}),a.bind("icon").toMany(r,"isOn",(...e)=>((e=e.findIndex(E))<0?i:r[e]).icon),a.bind("label").toMany(r,"isOn",(...e)=>(e=e.findIndex(E),au(o,(e<0?i:r[e]).label))),a.bind("isOn").toMany(r,"isOn",(...e)=>e.some(E)),a.bind("class").toMany(r,"isOn",(...e)=>e.some(E)?"ck-splitbutton_flatten":null),a.on("execute",()=>{r.some(({isOn:e})=>e)?s.isOpen=!s.isOpen:i.fire("execute")}),s.bind("isEnabled").toMany(r,"isEnabled",(...e)=>e.some(E)),s})}_createButton(n){const o=n.name;this.editor.ui.componentFactory.add(su(o),e=>{const t=this.editor.commands.get("imageStyle"),i=new ja(e);return i.set({label:n.title,icon:n.icon,tooltip:!0,isToggleable:!0}),i.bind("isEnabled").to(t,"isEnabled"),i.bind("isOn").to(t,"value",e=>e===o),i.on("execute",this._executeCommand.bind(this,o)),i})}_executeCommand(e){this.editor.execute("imageStyle",{value:e}),this.editor.editing.view.focus()}}function ru(e,t){for(const i of e)t[i.title]&&(i.title=t[i.title]);return e}function su(e){return"imageStyle:"+e}function au(e,t){return(e?e+": ":"")+t}function lu(e){const t=e.map(e=>e.replace("+","\\+"));return new RegExp(`^image\\/(${t.join("|")})$`)}function cu(e,t){return e.type||(t.match(/data:(image\/\w+);base64/)?t.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg")}class du extends Ne{static get pluginName(){return"ImageUploadUI"}init(){const r=this.editor,s=r.t,e=e=>{const t=new Nd(e),i=r.commands.get("uploadImage"),n=r.config.get("image.upload.types"),o=lu(n);return t.set({acceptedType:n.map(e=>"image/"+e).join(","),allowMultipleFiles:!0}),t.buttonView.set({label:s("Insert image"),icon:ma.image,tooltip:!0}),t.buttonView.bind("isEnabled").to(i),t.on("done",(e,t)=>{(t=Array.from(t).filter(e=>o.test(e.type))).length&&r.execute("uploadImage",{file:t})}),t};r.ui.componentFactory.add("uploadImage",e),r.ui.componentFactory.add("imageUpload",e)}}i(82),i(84),i(86);class hu extends Ne{static get pluginName(){return"ImageUploadProgress"}constructor(e){super(e),this.placeholder="data:image/svg+xml;utf8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 250"><rect rx="4"/></svg>')}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",(...e)=>this.uploadStatusChange(...e)),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",(...e)=>this.uploadStatusChange(...e))}uploadStatusChange(e,t,i){const n=this.editor,o=t.item,r=o.getAttribute("uploadId");if(i.consumable.consume(t.item,e.name)){const l=n.plugins.get("ImageUtils"),c=n.plugins.get(Pd),d=r?t.attributeNewValue:null,h=this.placeholder,u=n.editing.mapper.toViewElement(o),g=i.writer;if("reading"==d)return uu(u,g),void gu(l,h,u,g);if("uploading"==d){var s=c.loaders.get(r);return uu(u,g),void(s?(mu(u,g),function(e,t,i,n){const o=(s=(r=t).createUIElement("div",{class:"ck-progress-bar"}),r.setCustomProperty("progressBar",!0,s),s);var r,s;t.insert(t.createPositionAt(e,"end"),o),i.on("change:uploadedPercent",(e,t,i)=>{n.change(e=>{e.setStyle("width",i+"%",o)})})}(u,g,s,n.editing.view),e=l,a=u,t=g,(i=s).data&&(a=e.findViewImgElement(a),t.setAttribute("src",i.data,a))):gu(l,h,u,g))}var a;"complete"==d&&c.loaders.get(r)&&function(e,t,i){const n=t.createUIElement("div",{class:"ck-image-upload-complete-icon"});t.insert(t.createPositionAt(e,"end"),n),setTimeout(()=>{i.change(e=>e.remove(e.createRangeOn(n)))},3e3)}(u,g,n.editing.view),fu(u,g,"progressBar"),mu(u,g),a=u,g.removeClass("ck-appear",a)}}}function uu(e,t){e.hasClass("ck-appear")||t.addClass("ck-appear",e)}function gu(e,t,i,n){i.hasClass("ck-image-upload-placeholder")||n.addClass("ck-image-upload-placeholder",i);const o=e.findViewImgElement(i);o.getAttribute("src")!==t&&n.setAttribute("src",t,o),pu(i,"placeholder")||n.insert(n.createPositionAfter(o),(n=(i=n).createUIElement("div",{class:"ck-upload-placeholder-loader"}),i.setCustomProperty("placeholder",!0,n),n))}function mu(e,t){e.hasClass("ck-image-upload-placeholder")&&t.removeClass("ck-image-upload-placeholder",e),fu(e,t,"placeholder")}function pu(e,t){for(const i of e.getChildren())if(i.getCustomProperty(t))return i}function fu(e,t,i){(i=pu(e,i))&&t.remove(t.createRangeOn(i))}class bu extends Oe{refresh(){const e=this.editor,t=e.plugins.get("ImageUtils"),i=e.model.document.selection.getSelectedElement();this.isEnabled=t.isImageAllowed()||t.isImage(i)}execute(e){const t=Ut(e.file),n=this.editor.model.document.selection,o=this.editor.plugins.get("ImageUtils"),r=Object.fromEntries(n.getAttributes());t.forEach((e,t)=>{var i=n.getSelectedElement();if(t&&i&&o.isImage(i)){const t=this.editor.model.createPositionAfter(i);this._uploadImage(e,r,t)}else this._uploadImage(e,r)})}_uploadImage(e,t,i){const n=this.editor,o=n.plugins.get(Pd).createLoader(e),r=n.plugins.get("ImageUtils");o&&r.insertImage({...t,uploadId:o.id},i)}}class wu extends Ne{static get requires(){return[Pd,kl,ic,_h]}static get pluginName(){return"ImageUploadEditing"}constructor(e){super(e),e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}init(){const o=this.editor,n=o.model.document,e=o.conversion,r=o.plugins.get(Pd),s=o.plugins.get("ImageUtils"),a=lu(o.config.get("image.upload.types")),t=new bu(o);o.commands.add("uploadImage",t),o.commands.add("imageUpload",t),e.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(o.editing.view.document,"clipboardInput",(e,t)=>{if(i=t.dataTransfer,!Array.from(i.types).includes("text/html")||""===i.getData("text/html")){var i;const n=Array.from(t.dataTransfer.files).filter(e=>!!e&&a.test(e.type));n.length&&(e.stop(),o.model.change(e=>{t.targetRanges&&e.setSelection(t.targetRanges.map(e=>o.editing.mapper.toModelRange(e))),o.model.enqueueChange("default",()=>{o.execute("uploadImage",{file:n})})}))}}),this.listenTo(o.plugins.get("ClipboardPipeline"),"inputTransformation",(e,t)=>{if((t=Array.from(o.editing.view.createRangeIn(t.content)).filter(e=>function(e,t){return!(!e.isInlineImageView(t)||!t.getAttribute("src"))&&(t.getAttribute("src").match(/^data:image\/\w+;base64,/g)||t.getAttribute("src").match(/^blob:/g))}(s,e.item)&&!e.item.getAttribute("uploadProcessed")).map(e=>({promise:function(e){return new Promise((o,t)=>{const r=e.getAttribute("src");fetch(r).then(e=>e.blob()).then(e=>{const t=cu(e,r),i=t.replace("image/",""),n=new File([e],"image."+i,{type:t});o(n)}).catch(e=>e&&"TypeError"===e.name?function(n){return e=n,new Promise((t,i)=>{const n=qn.document.createElement("img");n.addEventListener("load",()=>{const e=qn.document.createElement("canvas");e.width=n.width,e.height=n.height,e.getContext("2d").drawImage(n,0,0),e.toBlob(e=>e?t(e):i())}),n.addEventListener("error",()=>i()),n.src=e}).then(e=>{const t=cu(e,n),i=t.replace("image/","");return new File([e],"image."+i,{type:t})});var e}(r).then(o).catch(t):t(e))})}(e.item),imageElement:e.item}))).length){const i=new Kl(o.editing.view.document);for(const o of t){i.setAttribute("uploadProcessed",!0,o.imageElement);const e=r.createLoader(o.promise);e&&(i.setAttribute("src","",o.imageElement),i.setAttribute("uploadId",e.id,o.imageElement))}}}),o.editing.view.document.on("dragover",(e,t)=>{t.preventDefault()}),n.on("change",()=>{const e=n.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),t=new Set;for(const n of e)if("insert"==n.type&&"$text"!=n.name){const e=n.position.nodeAfter,i="$graveyard"==n.position.root.rootName;for(const n of function(e,t){const i=e.plugins.get("ImageUtils");return Array.from(e.model.createRangeOn(t)).filter(e=>i.isImage(e.item)).map(e=>e.item)}(o,e)){const o=n.getAttribute("uploadId");if(o){const e=r.loaders.get(o);e&&(i?t.has(o)||e.abort():(t.add(o),this._uploadImageElements.set(o,n),"idle"==e.status&&this._readAndUpload(e)))}}}}),this.on("uploadComplete",(e,{imageElement:t,data:i})=>{const n=i.urls||i;this.editor.model.change(e=>{e.setAttribute("src",n.default,t),this._parseAndSetSrcsetAttributeOnImage(n,t,e)})},{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this.editor.plugins.has("ImageInlineEditing")&&e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]})}_readAndUpload(n){const i=this.editor,o=i.model,t=i.locale.t,e=i.plugins.get(Pd),r=i.plugins.get(kl),s=i.plugins.get("ImageUtils"),a=this._uploadImageElements;return o.enqueueChange("transparent",e=>{e.setAttribute("uploadStatus","reading",a.get(n.id))}),n.read().then(()=>{const e=n.upload(),t=a.get(n.id);if(tn.isSafari){const n=i.editing.mapper.toViewElement(t),o=s.findViewImgElement(n);i.editing.view.once("render",()=>{if(o.parent){const t=i.editing.view.domConverter.mapViewToDom(o.parent);var e;t&&(e=t.style.display,t.style.display="none",t._ckHack=t.offsetHeight,t.style.display=e)}})}return o.enqueueChange("transparent",e=>{e.setAttribute("uploadStatus","uploading",t)}),e}).then(i=>{o.enqueueChange("transparent",e=>{var t=a.get(n.id);e.setAttribute("uploadStatus","complete",t),this.fire("uploadComplete",{data:i,imageElement:t})}),l()}).catch(e=>{if("error"!==n.status&&"aborted"!==n.status)throw e;"error"==n.status&&e&&r.showWarning(e,{title:t("Upload failed"),namespace:"upload"}),o.enqueueChange("transparent",e=>{e.remove(a.get(n.id))}),l()});function l(){o.enqueueChange("transparent",e=>{var t=a.get(n.id);e.removeAttribute("uploadId",t),e.removeAttribute("uploadStatus",t),a.delete(n.id)}),e.destroyLoader(n)}}_parseAndSetSrcsetAttributeOnImage(t,e,i){let n=0;var o=Object.keys(t).filter(e=>{if(e=parseInt(e,10),!isNaN(e))return n=Math.max(n,e),!0}).map(e=>`${t[e]} ${e}w`).join(", ");""!=o&&i.setAttribute("srcset",{data:o,width:n},e)}}class ku extends Ne{static get pluginName(){return"IndentEditing"}init(){const e=this.editor;e.commands.add("indent",new De(e)),e.commands.add("outdent",new De(e))}}var _u='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',vu='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>';class yu extends Ne{static get pluginName(){return"IndentUI"}init(){const e=this.editor,t=e.locale,i=e.t,n="ltr"==t.uiLanguageDirection?_u:vu,o="ltr"==t.uiLanguageDirection?vu:_u;this._defineButton("indent",i("Increase indent"),n),this._defineButton("outdent",i("Decrease indent"),o)}_defineButton(n,o,r){const s=this.editor;s.ui.componentFactory.add(n,e=>{const t=s.commands.get(n),i=new ja(e);return i.set({label:o,icon:r,tooltip:!0}),i.bind("isOn","isEnabled").to(t,"value","isEnabled"),this.listenTo(i,"execute",()=>{s.execute(n),s.editing.view.focus()}),i})}}class xu{constructor(){this._definitions=new Set}get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach(e=>this._definitions.add(e)):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",(e,t,i)=>{if(i.consumable.test(t.item,"attribute:linkHref")){const o=i.writer,r=o.document.selection;for(const e of this._definitions){var n=o.createAttributeElement("a",e.attributes,{priority:5});e.classes&&o.addClass(e.classes,n);for(const t in e.styles)o.setStyle(t,e.styles[t],n);o.setCustomProperty("link",!0,n),e.callback(t.attributeNewValue)?t.item.is("selection")?o.wrap(r.getFirstRange(),n):o.wrap(i.mapper.toViewRange(t.range),n):o.unwrap(i.mapper.toViewRange(t.range),n)}}},{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:imageBlock",(e,t,{writer:i,mapper:n})=>{const o=n.toViewElement(t.item),r=Array.from(o.getChildren()).find(e=>"a"===e.name);for(const e of this._definitions){const n=ei(e.attributes);if(e.callback(t.attributeNewValue)){for(const[e,t]of n)"class"===e?i.addClass(t,r):i.setAttribute(e,t,r);e.classes&&i.addClass(e.classes,r);for(const t in e.styles)i.setStyle(t,e.styles[t],r)}else{for(const[e,t]of n)"class"===e?i.removeClass(t,r):i.removeAttribute(e,r);e.classes&&i.removeClass(e.classes,r);for(const t in e.styles)i.removeStyle(t,r)}}})}}}function Au(e){return Tu.test(e)}function Cu(e){var t,i,n=Au(e=ci(e))?Au(i=e)?i.match(Eu)||[]:i.split(""):void 0,o=n?n[0]:e.charAt(0),e=n?(n=(i=n).length,gi(i,1,t=void 0===t?n:t).join("")):e.slice(1);return o.toUpperCase()+e}var Tu=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),t="[\\ufe0e\\ufe0f]?"+(t="(?:"+(G="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]")+"|"+(ue="\\ud83c[\\udffb-\\udfff]")+")?")+"(?:\\u200d(?:"+[ne="[^\\ud800-\\udfff]",D="(?:\\ud83c[\\udde6-\\uddff]){2}",$="[\\ud800-\\udbff][\\udc00-\\udfff]"].join("|")+")[\\ufe0e\\ufe0f]?"+t+")*",$="(?:"+[ne+G+"?",G,D,$,"[\\ud800-\\udfff]"].join("|")+")",Eu=RegExp(ue+"(?="+ue+")|"+$+t,"g");const Iu=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Su=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i,Pu=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,Mu=/^((\w+:(\/{2,})?)|(\W))/i;function Nu(e,{writer:t}){return e=t.createAttributeElement("a",{href:e},{priority:5}),t.setCustomProperty("link",!0,e),e}function Ru(e){return(e=String(e)).replace(Iu,"").match(Su)?e:"#"}function Ou(e,t){return e&&t.checkAttribute(e.name,"linkHref")}function zu(e,t){var i=(i=e,Pu.test(i)?"mailto:":t),t=!!i&&!Mu.test(e);return e&&t?i+e:e}class Du extends Oe{constructor(e){super(e),this.manualDecorators=new Ft,this.automaticDecorators=new xu}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,t=e.document.selection,i=t.getSelectedElement()||$o(t.getSelectedBlocks());Ou(i,e.schema)?(this.value=i.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(i,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}execute(s,e={}){const a=this.editor.model,l=a.document.selection,c=[],d=[];for(const s in e)(e[s]?c:d).push(s);a.change(t=>{if(l.isCollapsed){var e=l.getFirstPosition();if(l.hasAttribute("linkHref")){const i=kd(e,"linkHref",l.getAttribute("linkHref"),a);t.setAttribute("linkHref",s,i),c.forEach(e=>{t.setAttribute(e,!0,i)}),d.forEach(e=>{t.removeAttribute(e,i)}),t.setSelection(t.createPositionAfter(i.end.nodeBefore))}else if(""!==s){const d=ei(l.getAttributes());d.set("linkHref",s),c.forEach(e=>{d.set(e,!0)});var{end:e}=a.insertContent(t.createText(s,d),e);t.setSelection(e)}["linkHref",...c,...d].forEach(e=>{t.removeSelectionAttribute(e)})}else{const n=a.schema.getValidRanges(l.getRanges(),"linkHref"),o=[];for(const s of l.getSelectedBlocks())a.schema.checkAttribute(s,"linkHref")&&o.push(t.createRangeOn(s));const r=o.slice();for(const s of n)this._isRangeToUpdate(s,o)&&r.push(s);for(const a of r)t.setAttribute("linkHref",s,a),c.forEach(e=>{t.setAttribute(e,!0,a)}),d.forEach(e=>{t.removeAttribute(e,a)})}})}_getDecoratorStateFromModel(e){const t=this.editor.model,i=t.document.selection,n=i.getSelectedElement();return(Ou(n,t.schema)?n:i).getAttribute(e)}_isRangeToUpdate(e,t){for(const i of t)if(i.containsRange(e))return!1;return!0}}class Lu extends Oe{refresh(){const e=this.editor.model,t=e.document.selection,i=t.getSelectedElement();Ou(i,e.schema)?this.isEnabled=e.schema.checkAttribute(i,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref")}execute(){const e=this.editor,i=this.editor.model,n=i.document.selection,o=e.commands.get("link");i.change(e=>{var t=n.isCollapsed?[kd(n.getFirstPosition(),"linkHref",n.getAttribute("linkHref"),i)]:i.schema.getValidRanges(n.getRanges(),"linkHref");for(const i of t)if(e.removeAttribute("linkHref",i),o)for(const n of o.manualDecorators)e.removeAttribute(n.id,i)})}}class Vu{constructor({id:e,label:t,attributes:i,classes:n,styles:o,defaultValue:r}){this.id=e,this.set("value"),this.defaultValue=r,this.label=t,this.attributes=i,this.classes=n,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}Me(Vu,Ce),i(88);const ju=/^(https?:)?\/\//;class Bu extends Ne{static get pluginName(){return"LinkEditing"}static get requires(){return[ld,od,ic]}constructor(e){super(e),e.config.define("link",{addTargetToExternalLinks:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:Nu}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(e,t)=>Nu(Ru(e),t)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:e=>e.getAttribute("href")}}),e.commands.add("link",new Du(e)),e.commands.add("unlink",new Lu(e));const t=function(e,t){const i={"Open in a new tab":e("Open in a new tab"),Downloadable:e("Downloadable")};return t.forEach(e=>(e.label&&i[e.label]&&(e.label=i[e.label]),e)),t}(e.t,function(e){const t=[];if(e)for(var[i,n]of Object.entries(e)){const e=Object.assign({},n,{id:"link"+Cu(i)});t.push(e)}return t}(e.config.get("link.decorators")));this._enableAutomaticDecorators(t.filter(e=>"automatic"===e.mode)),this._enableManualDecorators(t.filter(e=>"manual"===e.mode)),e.plugins.get(ld).registerAttribute("linkHref"),function(r,s,a){const i=r.editing.view,l=new Set;i.document.registerPostFixer(e=>{const t=r.model.document.selection;let i=!1;if(t.hasAttribute(s)){const n=kd(t.getFirstPosition(),s,t.getAttribute(s),r.model),o=r.editing.mapper.toViewRange(n);for(const r of o.getItems())r.is("element","a")&&!r.hasClass(a)&&(e.addClass(a,r),l.add(r),i=!0)}return i}),r.conversion.for("editingDowncast").add(e=>{function t(){i.change(e=>{for(const t of l.values())e.removeClass(a,t),l.delete(t)})}e.on("insert",t,{priority:"highest"}),e.on("remove",t,{priority:"highest"}),e.on("attribute",t,{priority:"highest"}),e.on("selection",t,{priority:"highest"})})}(e,"linkHref","ck-link_selected"),this._enableInsertContentSelectionAttributesFixer(),this._enableClickingAfterLink(),this._enableTypingOverLink(),this._handleDeleteContentAfterLink()}_enableAutomaticDecorators(e){const t=this.editor,i=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&i.add({id:"linkIsExternal",mode:"automatic",callback:e=>ju.test(e),attributes:{target:"_blank",rel:"noopener noreferrer"}}),i.add(e),i.length&&t.conversion.for("downcast").add(i.getDispatcher())}_enableManualDecorators(e){if(e.length){const t=this.editor,i=t.commands.get("link").manualDecorators;e.forEach(n=>{t.model.schema.extend("$text",{allowAttributes:n.id}),n=new Vu(n),i.add(n),t.conversion.for("downcast").attributeToElement({model:n.id,view:(e,{writer:t})=>{if(e){const e=t.createAttributeElement("a",n.attributes,{priority:5});n.classes&&t.addClass(n.classes,e);for(const i in n.styles)t.setStyle(i,n.styles[i],e);return t.setCustomProperty("link",!0,e),e}}}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",...n._createPattern()},model:{key:n.id}})})}}_enableInsertContentSelectionAttributesFixer(){const i=this.editor.model,n=i.document.selection;this.listenTo(i,"insertContent",()=>{const e=n.anchor.nodeBefore,t=n.anchor.nodeAfter;n.hasAttribute("linkHref")&&e&&e.hasAttribute("linkHref")&&(t&&t.hasAttribute("linkHref")||i.change(e=>{Fu(e,Uu(i.schema))}))},{priority:"low"})}_enableClickingAfterLink(){const e=this.editor,n=e.model;e.editing.view.addObserver(Gl);let o=!1;this.listenTo(e.editing.view.document,"mousedown",()=>{o=!0}),this.listenTo(e.editing.view.document,"selectionChange",()=>{if(o){o=!1;const e=n.document.selection;if(e.isCollapsed&&e.hasAttribute("linkHref")){const t=e.getFirstPosition(),i=kd(t,"linkHref",e.getAttribute("linkHref"),n);(t.isTouching(i.start)||t.isTouching(i.end))&&n.change(e=>{Fu(e,Uu(n.schema))})}}})}_enableTypingOverLink(){const t=this.editor,e=t.editing.view;let o,i;this.listenTo(e.document,"delete",()=>{i=!0},{priority:"high"}),this.listenTo(t.model,"deleteContent",()=>{const e=t.model.document.selection;e.isCollapsed||(i?i=!1:Hu(t)&&function(e){const t=e.document.selection,i=t.getFirstPosition(),n=t.getLastPosition(),o=i.nodeAfter;if(o&&o.is("$text")&&o.hasAttribute("linkHref")){var r=n.textNode||n.nodeBefore;return o===r||kd(i,"linkHref",o.getAttribute("linkHref"),e).containsRange(e.createRange(i,n),!0)}}(t.model)&&(o=e.getAttributes()))},{priority:"high"}),this.listenTo(t.model,"insertContent",(e,[n])=>{i=!1,Hu(t)&&o&&(t.model.change(e=>{for(var[t,i]of o)e.setAttribute(t,i,n)}),o=null)},{priority:"high"})}_handleDeleteContentAfterLink(){const e=this.editor,n=e.model,o=n.document.selection,t=e.editing.view;let r=!1,i=!1;this.listenTo(t.document,"delete",(e,t)=>{i=t.domEvent.keyCode===rn.backspace},{priority:"high"}),this.listenTo(n,"deleteContent",()=>{r=!1;var e=o.getFirstPosition(),t=o.getAttribute("linkHref");if(t){const i=kd(e,"linkHref",t,n);r=i.containsPosition(e)||i.end.isEqual(e)}},{priority:"high"}),this.listenTo(n,"deleteContent",()=>{i&&(i=!1,r||e.model.enqueueChange(e=>{Fu(e,Uu(n.schema))}))},{priority:"low"})}}function Fu(e,t){e.removeSelectionAttribute("linkHref");for(const i of t)e.removeSelectionAttribute(i)}function Hu(e){return e.plugins.get("Input").isInput(e.model.change(e=>e.batch))}function Uu(e){return e.getDefinition("$text").allowAttributes.filter(e=>e.startsWith("link"))}i(90);class Wu extends ka{constructor(e,t){super(e);const i=e.t;this.focusTracker=new Yo,this.keystrokes=new Go,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(i("Save"),ma.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(i("Cancel"),ma.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(t),this.children=this._createFormChildren(t.manualDecorators),this._focusables=new wa,this._focusCycler=new Fa({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const n=["ck","ck-link-form","ck-responsive-form"];t.manualDecorators.length&&n.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:n,tabindex:"-1"},children:this.children}),fa(this)}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,t)=>(e[t.name]=t.isOn,e),{})}render(){super.render(),ba({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}_createUrlInput(){const e=this.locale.t,t=new bl(this.locale,wl);return t.label=e("Link URL"),t}_createButton(e,t,i,n){const o=new ja(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:i}}),n&&o.delegate("execute").to(this,n),o}_createManualDecoratorSwitches(e){const t=this.createCollection();for(const i of e.manualDecorators){const n=new Ba(this.locale);n.set({name:i.id,label:i.label,withText:!0}),n.bind("isOn").toMany([i,e],"value",(e,t)=>void 0===t&&void 0===e?i.defaultValue:e),n.on("execute",()=>{i.set("value",!n.isOn)}),t.add(n)}return t}_createFormChildren(e){const t=this.createCollection();if(t.add(this.urlInputView),e.length){const e=new ka;e.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(e=>({tag:"li",children:[e],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(e)}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t}}i(92);class qu extends ka{constructor(e){super(e);const t=e.t;this.focusTracker=new Yo,this.keystrokes=new Go,this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(t("Unlink"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',"unlink"),this.editButtonView=this._createButton(t("Edit link"),ma.pencil,"edit"),this.set("href"),this._focusables=new wa,this._focusCycler=new Fa({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}_createButton(e,t,i){const n=new ja(this.locale);return n.set({label:e,icon:t,tooltip:!0}),n.delegate("execute").to(this,i),n}_createPreviewButton(){const e=new ja(this.locale),t=this.bindTemplate,i=this.t;return e.set({withText:!0,tooltip:i("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:t.to("href",e=>e&&Ru(e)),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",e=>e||i("This link has no URL")),e.bind("isEnabled").to(this,"href",e=>!!e),e.template.tag="a",e.template.eventListeners={},e}}class $u extends Ne{static get requires(){return[Il]}static get pluginName(){return"LinkUI"}init(){const e=this.editor;e.editing.view.addObserver(Yl),this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._balloon=e.plugins.get(Il),this._createToolbarLinkButton(),this._enableUserBalloonInteractions(),e.conversion.for("editingDowncast").markerToHighlight({model:"link-ui",view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:"link-ui",view:{name:"span",classes:["ck-fake-link-selection","ck-fake-link-selection_collapsed"]}})}destroy(){super.destroy(),this.formView.destroy()}_createActionsView(){const e=this.editor,t=new qu(e.locale),i=e.commands.get("link"),n=e.commands.get("unlink");return t.bind("href").to(i,"value"),t.editButtonView.bind("isEnabled").to(i),t.unlinkButtonView.bind("isEnabled").to(n),this.listenTo(t,"edit",()=>{this._addFormView()}),this.listenTo(t,"unlink",()=>{e.execute("unlink"),this._hideUI()}),t.keystrokes.set("Esc",(e,t)=>{this._hideUI(),t()}),t.keystrokes.set("Ctrl+K",(e,t)=>{this._addFormView(),t()}),t}_createFormView(){const t=this.editor,e=t.commands.get("link"),i=t.config.get("link.defaultProtocol"),n=new Wu(t.locale,e);return n.urlInputView.fieldView.bind("value").to(e,"value"),n.urlInputView.bind("isReadOnly").to(e,"isEnabled",e=>!e),n.saveButtonView.bind("isEnabled").to(e),this.listenTo(n,"submit",()=>{var{value:e}=n.urlInputView.fieldView.element,e=zu(e,i);t.execute("link",e,n.getDecoratorSwitchesState()),this._closeFormView()}),this.listenTo(n,"cancel",()=>{this._closeFormView()}),n.keystrokes.set("Esc",(e,t)=>{this._closeFormView(),t()}),n}_createToolbarLinkButton(){const e=this.editor,i=e.commands.get("link"),n=e.t;e.keystrokes.set("Ctrl+K",(e,t)=>{t(),i.isEnabled&&this._showUI(!0)}),e.ui.componentFactory.add("link",e=>{const t=new ja(e);return t.isEnabled=!0,t.label=n("Link"),t.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',t.keystroke="Ctrl+K",t.tooltip=!0,t.isToggleable=!0,t.bind("isEnabled").to(i,"isEnabled"),t.bind("isOn").to(i,"value",e=>!!e),this.listenTo(t,"execute",()=>this._showUI(!0)),t})}_enableUserBalloonInteractions(){var e=this.editor.editing.view.document;this.listenTo(e,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),this.editor.keystrokes.set("Tab",(e,t)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),t())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,t)=>{this._isUIVisible&&(this._hideUI(),t())}),pa({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this._areActionsInPanel||this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){var e;this._isFormInPanel||(e=this.editor.commands.get("link"),this.formView.disableCssTransitions(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions(),this.formView.urlInputView.fieldView.element.value=e.value||"")}_closeFormView(){const e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),void 0!==e.value?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(this._isUIInPanel){const e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}}_startUpdatingUI(){const e=this.editor,t=e.editing.view.document;let i=this._getSelectedLinkElement(),n=r();var o=()=>{var e=this._getSelectedLinkElement(),t=r();i&&!e||!i&&t!==n?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),i=e,n=t};function r(){return t.selection.focus.getAncestors().reverse().find(e=>e.is("element"))}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _isFormInPanel(){return this._balloon.hasView(this.formView)}get _areActionsInPanel(){return this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){return this._balloon.visibleView==this.formView||this._areActionsVisible}_getBalloonPositionData(){const t=this.editor.editing.view,e=this.editor.model,i=t.document;let n=null;if(e.markers.has("link-ui")){const e=Array.from(this.editor.editing.mapper.markerNameToElements("link-ui")),i=t.createRange(t.createPositionBefore(e[0]),t.createPositionAfter(e[e.length-1]));n=t.domConverter.viewRangeToDom(i)}else n=()=>{var e=this._getSelectedLinkElement();return e?t.domConverter.mapViewToDom(e):t.domConverter.viewRangeToDom(i.selection.getFirstRange())};return{target:n}}_getSelectedLinkElement(){const e=this.editor.editing.view,t=e.document.selection,i=t.getSelectedElement();if(t.isCollapsed||i&&pc(i))return Yu(t.getFirstPosition());{const i=t.getFirstRange().getTrimmed(),n=Yu(i.start),o=Yu(i.end);return n&&n==o&&e.createRangeIn(n).getTrimmed().isEqual(i)?n:null}}_showFakeVisualSelection(){const n=this.editor.model;n.change(e=>{const t=n.document.selection.getFirstRange();var i;n.markers.has("link-ui")?e.updateMarker("link-ui",{range:t}):t.start.isAtEnd?(i=t.start.getLastMatchingPosition(({item:e})=>!n.schema.isContent(e),{boundaries:t}),e.addMarker("link-ui",{usingOperation:!1,affectsData:!1,range:e.createRange(i,t.end)})):e.addMarker("link-ui",{usingOperation:!1,affectsData:!1,range:t})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has("link-ui")&&e.change(e=>{e.removeMarker("link-ui")})}}function Yu(e){return e.getAncestors().find(e=>e.is("attributeElement")&&!!e.getCustomProperty("link"))}const Gu=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i");class Ku extends Ne{static get pluginName(){return"AutoLink"}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling()}_enableTypingHandling(){const l=this.editor,e=new ad(l.model,e=>{if(4<e.length&&" "===e[e.length-1]&&" "!==e[e.length-2])return(e=Qu(e.substr(0,e.length-1)))?{url:e}:void 0}),c=l.plugins.get("Input");e.on("matched:data",(e,t)=>{const{batch:i,range:n,url:o}=t;if(c.isInput(i)){const r=n.end.getShiftedBy(-1),s=r.getShiftedBy(-o.length),a=l.model.createRange(s,r);this._applyAutoLink(o,a)}}),e.bind("isEnabled").to(this)}_enableEnterHandling(){const e=this.editor,t=e.model,i=e.commands.get("enter");i&&i.on("execute",()=>{var e=t.document.selection.getFirstPosition();e.parent.previousSibling&&(e=t.createRangeIn(e.parent.previousSibling),this._checkAndApplyAutoLinkOnRange(e))})}_enableShiftEnterHandling(){const e=this.editor,i=e.model,t=e.commands.get("shiftEnter");t&&t.on("execute",()=>{const e=i.document.selection.getFirstPosition(),t=i.createRange(i.createPositionAt(e.parent,0),e.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(t)})}_checkAndApplyAutoLinkOnRange(e){const t=this.editor.model,{text:i,range:n}=sd(e,t),o=Qu(i);if(o){const e=t.createRange(n.end.getShiftedBy(-o.length),n.end);this._applyAutoLink(o,e)}}_applyAutoLink(i,n){const e=this.editor.model;this.isEnabled&&e.schema.checkAttributeInSelection(e.createSelection(n),"linkHref")&&e.enqueueChange(e=>{var t=this.editor.config.get("link.defaultProtocol"),t=zu(i,t);e.setAttribute("linkHref",t,n)})}}function Qu(e){return(e=Gu.exec(e))?e[2]:null}class Ju extends Oe{constructor(e,t){super(e),this.type=t}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,i=t.document,r=Array.from(i.selection.getSelectedBlocks()).filter(e=>Xu(e,t.schema)),s=void 0!==e.forceValue?!e.forceValue:this.value;t.change(n=>{if(s){let e=r[r.length-1].nextSibling,t=Number.POSITIVE_INFINITY,i=[];for(;e&&"listItem"==e.name&&0!==e.getAttribute("listIndent");){const n=e.getAttribute("listIndent");n<t&&(t=n);const r=n-t;i.push({element:e,listIndent:r}),e=e.nextSibling}i=i.reverse();for(const o of i)n.setAttribute("listIndent",o.listIndent,o.element)}if(!s){let e=Number.POSITIVE_INFINITY;for(const t of r)t.is("element","listItem")&&t.getAttribute("listIndent")<e&&(e=t.getAttribute("listIndent"));e=0===e?1:e,Zu(r,!0,e),Zu(r,!1,e)}for(const e of r.reverse())s&&"listItem"==e.name?n.rename(e,"paragraph"):s||"listItem"==e.name?s||"listItem"!=e.name||e.getAttribute("listType")==this.type||n.setAttribute("listType",this.type,e):(n.setAttributes({listType:this.type,listIndent:0},e),n.rename(e,"listItem"));this.fire("_executeCleanup",r)})}_getValue(){const e=$o(this.editor.model.document.selection.getSelectedBlocks());return!!e&&e.is("element","listItem")&&e.getAttribute("listType")==this.type}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,i=$o(e.getSelectedBlocks());return!!i&&Xu(i,t)}}function Zu(i,n,o){const r=n?i[0]:i[i.length-1];if(r.is("element","listItem")){let e=r[n?"previousSibling":"nextSibling"],t=r.getAttribute("listIndent");for(;e&&e.is("element","listItem")&&e.getAttribute("listIndent")>=o;)t>e.getAttribute("listIndent")&&(t=e.getAttribute("listIndent")),e.getAttribute("listIndent")==t&&i[n?"unshift":"push"](e),e=e[n?"previousSibling":"nextSibling"]}}function Xu(e,t){return t.checkChild(e.parent,"listItem")&&!t.isObject(e)}class eg extends Oe{constructor(e,t){super(e),this._indentBy="forward"==t?1:-1}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,t=e.document;let n=Array.from(t.selection.getSelectedBlocks());e.change(e=>{const t=n[n.length-1];let i=t.nextSibling;for(;i&&"listItem"==i.name&&i.getAttribute("listIndent")>t.getAttribute("listIndent");)n.push(i),i=i.nextSibling;this._indentBy<0&&(n=n.reverse());for(const t of n){const n=t.getAttribute("listIndent")+this._indentBy;n<0?e.rename(t,"paragraph"):e.setAttribute("listIndent",n,t)}this.fire("_executeCleanup",n)})}_checkEnabled(){const t=$o(this.editor.model.document.selection.getSelectedBlocks());if(!t||!t.is("element","listItem"))return!1;if(0<this._indentBy){var i=t.getAttribute("listIndent"),n=t.getAttribute("listType");let e=t.previousSibling;for(;e&&e.is("element","listItem")&&e.getAttribute("listIndent")>=i;){if(e.getAttribute("listIndent")==i)return e.getAttribute("listType")==n;e=e.previousSibling}return!1}return!0}}function tg(t,i,n,e){const o=i.parent,r=n.mapper,s=n.writer;let a=r.toViewPosition(e.createPositionBefore(t));const l=og(t.previousSibling,{sameIndent:!0,smallerIndent:!0,listIndent:t.getAttribute("listIndent")}),c=t.previousSibling;if(l&&l.getAttribute("listIndent")==t.getAttribute("listIndent")){const t=r.toViewElement(l);a=s.breakContainer(s.createPositionAfter(t))}else if(c&&"listItem"==c.name){a=r.toViewPosition(e.createPositionAt(c,"end"));const t=r.findMappedViewAncestor(a),i=function(){for(const e of t.getChildren())if("ul"==e.name||"ol"==e.name)return e;return null}();a=i?s.createPositionBefore(i):s.createPositionAt(t,"end")}else a=r.toViewPosition(e.createPositionBefore(t));if(a=ng(a),s.insert(a,o),c&&"listItem"==c.name){const t=r.toViewElement(c),n=s.createRange(s.createPositionAt(t,0),a).getWalker({ignoreElementEnd:!0});for(const t of n)if(t.item.is("element","li")){const e=s.breakContainer(s.createPositionBefore(t.item)),o=t.item.parent,r=s.createPositionAt(i,"end");ig(s,r.nodeBefore,r.nodeAfter),s.move(s.createRangeOn(o),r),n.position=e}}else{const n=o.nextSibling;if(n&&(n.is("element","ul")||n.is("element","ol"))){let e=null;for(const i of n.getChildren()){const n=r.toModelElement(i);if(!(n&&n.getAttribute("listIndent")>t.getAttribute("listIndent")))break;e=i}e&&(s.breakContainer(s.createPositionAfter(e)),s.move(s.createRangeOn(e.parent),s.createPositionAt(i,"end")))}}ig(s,o,o.nextSibling),ig(s,o.previousSibling,o)}function ig(e,t,i){return!t||!i||"ul"!=t.name&&"ol"!=t.name||t.name!=i.name||t.getAttribute("class")!==i.getAttribute("class")?null:e.mergeContainers(e.createPositionAfter(t))}function ng(e){return e.getLastMatchingPosition(e=>e.item.is("uiElement"))}function og(e,t){var i=!!t.sameIndent,n=!!t.smallerIndent,o=t.listIndent;let r=e;for(;r&&"listItem"==r.name;){const e=r.getAttribute("listIndent");if(i&&o==e||n&&o>e)return r;r="forward"===t.direction?r.nextSibling:r.previousSibling}return null}function rg(n,o,r,s){n.ui.componentFactory.add(o,e=>{const t=n.commands.get(o),i=new ja(e);return i.set({label:r,icon:s,tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(t,"value","isEnabled"),i.on("execute",()=>{n.execute(o),n.editing.view.focus()}),i})}function sg(){var e=!this.isEmpty&&("ul"==this.getChild(0).name||"ol"==this.getChild(0).name);return this.isEmpty||e?0:Ni.call(this)}function ag(n){return(e,t,s)=>{const i=s.consumable;i.test(t.item,"insert")&&i.test(t.item,"attribute:listType")&&i.test(t.item,"attribute:listIndent")&&(i.consume(t.item,"insert"),i.consume(t.item,"attribute:listType"),i.consume(t.item,"attribute:listIndent"),tg(t=t.item,function(e){const t=s.mapper,i=s.writer,n="numbered"==e.getAttribute("listType")?"ol":"ul",o=function(){const e=i.createContainerElement("li");return e.getFillerOffset=sg,e}(),r=i.createContainerElement(n,null);return i.insert(i.createPositionAt(r,0),o),t.bindElements(e,o),o}(t),s,n))}}function lg(e,t,i){if(i.consumable.consume(t.item,"attribute:listType")){const n=i.mapper.toViewElement(t.item),o=i.writer;o.breakContainer(o.createPositionBefore(n)),o.breakContainer(o.createPositionAfter(n)),i=n.parent,t="numbered"==t.attributeNewValue?"ol":"ul",o.rename(t,i)}}function cg(e,t,i){var n=i.mapper.toViewElement(t.item).parent,o=i.writer;ig(o,n,n.nextSibling),ig(o,n.previousSibling,n);for(const e of t.item.getChildren())i.consumable.consume(e,"insert")}function dg(e,i,n){if("listItem"!=i.item.name){let t=n.mapper.toViewPosition(i.range.start);const o=n.writer,r=[];for(;("ul"==t.parent.name||"ol"==t.parent.name)&&(t=o.breakContainer(t),"li"==t.parent.name);){const i=t,n=o.createPositionAt(t.parent,"end");if(!i.isEqual(n)){const e=o.remove(o.createRange(i,n));r.push(e)}t=o.createPositionAfter(t.parent)}if(0<r.length){for(let e=0;e<r.length;e++){const n=t.nodeBefore;if(t=o.insert(t,r[e]).end,0<e){const i=ig(o,n,n.nextSibling);i&&i.parent==n&&t.offset--}}ig(o,t.nodeBefore,t.nodeAfter)}}}function hg(e,t,i){var t=(n=i.mapper.toViewPosition(t.position)).nodeBefore,n=n.nodeAfter;ig(i.writer,t,n)}function ug(e,t,i){if(i.consumable.consume(t.viewItem,{name:!0})){const e=i.writer,o=e.createElement("listItem"),r=function(e){let t=0,i=e.parent;for(;i;){if(i.is("element","li"))t++;else{const e=i.previousSibling;e&&e.is("element","li")&&t++}i=i.parent}return t}(t.viewItem);e.setAttribute("listIndent",r,o);var n=t.viewItem.parent&&"ol"==t.viewItem.parent.name?"numbered":"bulleted";e.setAttribute("listType",n,o),i.safeInsert(o,t.modelCursor)&&(n=function(e,t,i){const{writer:n,schema:o}=i;let r=n.createPositionAfter(e);for(const s of t)if("ul"==s.name||"ol"==s.name)r=i.convertItem(s,r).modelCursor;else{const t=i.convertItem(s,n.createPositionAt(e,"end")),a=t.modelRange.start.nodeAfter;a&&a.is("element")&&!o.checkChild(e,a.name)&&(e=t.modelCursor.parent.is("element","listItem")?t.modelCursor.parent:function(e){const t=new hr({startPosition:e});let i;for(;i=t.next(),!i.value.item.is("element","listItem"););return i.value.item}(t.modelCursor),r=n.createPositionAfter(e))}return r}(o,t.viewItem.getChildren(),i),t.modelRange=e.createRange(t.modelCursor,n),i.updateConversionResult(o,t))}}function gg(e,t,i){if(i.consumable.test(t.viewItem,{name:!0})){const e=Array.from(t.viewItem.getChildren());for(const t of e)t.is("element","li")||wg(t)||t._remove()}}function mg(i,n,e){if(e.consumable.test(n.viewItem,{name:!0})&&0!==n.viewItem.childCount){const i=[...n.viewItem.getChildren()];let e=!1,t=!0;for(const n of i)e&&!wg(n)&&n._remove(),n.is("$text")?(t&&(n._data=n.data.trimStart()),n.nextSibling&&!wg(n.nextSibling)||(n._data=n.data.trimEnd())):wg(n)&&(e=!0),t=!1}}function pg(r){return(e,t)=>{if(!t.isPhantom){const i=t.modelPosition.nodeBefore;if(i&&i.is("element","listItem")){const e=t.mapper.toViewElement(i),n=e.getAncestors().find(wg),o=r.createPositionAt(e,0).getWalker();for(const r of o){if("elementStart"==r.type&&r.item.is("element","li")){t.viewPosition=r.previousPosition;break}if("elementEnd"==r.type&&r.item==n){t.viewPosition=r.nextPosition;break}}}}}}function fg(t,[e,i]){let n,o=e.is("documentFragment")?e.getChild(0):e;if(n=i?this.createSelection(i):this.document.selection,o&&o.is("element","listItem")){const t=n.getFirstPosition();let e=null;if(t.parent.is("element","listItem")?e=t.parent:t.nodeBefore&&t.nodeBefore.is("element","listItem")&&(e=t.nodeBefore),e){const t=e.getAttribute("listIndent");if(0<t)for(;o&&o.is("element","listItem");)o._setAttribute("listIndent",o.getAttribute("listIndent")+t),o=o.nextSibling}}}function bg(e,t,i,n,o,r){const s=og(t.nodeBefore,{sameIndent:!0,smallerIndent:!0,listIndent:e,foo:"b"}),a=o.mapper,l=o.writer,c=s?s.getAttribute("listIndent"):null;let d;if(s)if(c==e){const e=a.toViewElement(s).parent;d=l.createPositionAfter(e)}else{const e=r.createPositionAt(s,"end");d=a.toViewPosition(e)}else d=i;d=ng(d);for(const e of[...n.getChildren()])wg(e)&&(d=l.move(l.createRangeOn(e),d).end,ig(l,e,e.nextSibling),ig(l,e.previousSibling,e))}function wg(e){return e.is("element","ol")||e.is("element","ul")}class kg extends Ne{static get pluginName(){return"ListEditing"}static get requires(){return[ac,hc]}init(){const t=this.editor;t.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});const e=t.data,i=t.editing;var l;t.model.document.registerPostFixer(e=>function(e,o){const t=e.document.differ.getChanges(),n=new Map;let r=!1;for(const n of t)if("insert"==n.type&&"listItem"==n.name)i(n.position);else if("insert"==n.type&&"listItem"!=n.name){if("$text"!=n.name){const t=n.position.nodeAfter;t.hasAttribute("listIndent")&&(o.removeAttribute("listIndent",t),r=!0),t.hasAttribute("listType")&&(o.removeAttribute("listType",t),r=!0),t.hasAttribute("listStyle")&&(o.removeAttribute("listStyle",t),r=!0);for(const o of Array.from(e.createRangeIn(t)).filter(e=>e.item.is("element","listItem")))i(o.previousPosition)}i(n.position.getShiftedBy(n.length))}else"remove"==n.type&&"listItem"==n.name?i(n.position):("attribute"==n.type&&"listIndent"==n.attributeKey||"attribute"==n.type&&"listType"==n.attributeKey)&&i(n.range.start);for(const e of n.values())(function(e){let t=0,i=null;for(;e&&e.is("element","listItem");){var n=e.getAttribute("listIndent");n>t?(n=null===i?(i=n-t,t):(i>n&&(i=n),n-i),o.setAttribute("listIndent",n,e),r=!0):(i=null,t=e.getAttribute("listIndent")+1),e=e.nextSibling}})(e),function(e){let t=[],i=null;for(;e&&e.is("element","listItem");){var n=e.getAttribute("listIndent");if(i&&i.getAttribute("listIndent")>n&&(t=t.slice(0,n+1)),0!=n)if(t[n]){const i=t[n];e.getAttribute("listType")!=i&&(o.setAttribute("listType",i,e),r=!0)}else t[n]=e.getAttribute("listType");e=(i=e).nextSibling}}(e);return r;function i(e){const i=e.nodeBefore;if(i&&i.is("element","listItem")){let t=i;if(!n.has(t)){for(let e=t.previousSibling;e&&e.is("element","listItem");e=t.previousSibling)if(t=e,n.has(t))return;n.set(i,t)}}else{const i=e.nodeAfter;i&&i.is("element","listItem")&&n.set(i,i)}}}(t.model,e)),i.mapper.registerViewToModelLength("li",_g),e.mapper.registerViewToModelLength("li",_g),i.mapper.on("modelToViewPosition",pg(i.view)),i.mapper.on("viewToModelPosition",(l=t.model,(i,n)=>{const o=n.viewPosition,r=o.parent,s=n.mapper;if("ul"==r.name||"ol"==r.name){if(o.isAtEnd){const i=s.toModelElement(o.nodeBefore),r=s.getModelLength(o.nodeBefore);n.modelPosition=l.createPositionBefore(i).getShiftedBy(r)}else{const i=s.toModelElement(o.nodeAfter);n.modelPosition=l.createPositionBefore(i)}i.stop()}else if("li"==r.name&&o.nodeBefore&&("ul"==o.nodeBefore.name||"ol"==o.nodeBefore.name)){var a=s.toModelElement(r);let e=1,t=o.nodeBefore;for(;t&&wg(t);)e+=s.getModelLength(t),t=t.previousSibling;n.modelPosition=l.createPositionBefore(a).getShiftedBy(e),i.stop()}})),e.mapper.on("modelToViewPosition",pg(i.view)),t.conversion.for("editingDowncast").add(e=>{var l,a;e.on("insert",dg,{priority:"high"}),e.on("insert:listItem",ag(t.model)),e.on("attribute:listType:listItem",lg,{priority:"high"}),e.on("attribute:listType:listItem",cg,{priority:"low"}),e.on("attribute:listIndent:listItem",(a=t.model,(e,t,i)=>{if(i.consumable.consume(t.item,"attribute:listIndent")){const r=i.mapper.toViewElement(t.item),s=i.writer;s.breakContainer(s.createPositionBefore(r)),s.breakContainer(s.createPositionAfter(r));var n=(o=r.parent).previousSibling,o=s.createRangeOn(o);s.remove(o),n&&n.nextSibling&&ig(s,n,n.nextSibling),bg(t.attributeOldValue+1,t.range.start,o.start,r,i,a),tg(t.item,r,i,a);for(const a of t.item.getChildren())i.consumable.consume(a,"insert")}})),e.on("remove:listItem",(l=t.model,(e,t,i)=>{const n=i.mapper.toViewPosition(t.position).getLastMatchingPosition(e=>!e.item.is("element","li")).nodeAfter,o=i.writer;o.breakContainer(o.createPositionBefore(n)),o.breakContainer(o.createPositionAfter(n));var r=(a=n.parent).previousSibling,s=o.createRangeOn(a),a=o.remove(s);r&&r.nextSibling&&ig(o,r,r.nextSibling),bg(i.mapper.toModelElement(n).getAttribute("listIndent")+1,t.position,s.start,n,i,l);for(const l of o.createRangeIn(a).getItems())i.mapper.unbindViewElement(l);e.stop()})),e.on("remove",hg,{priority:"low"})}),t.conversion.for("dataDowncast").add(e=>{e.on("insert",dg,{priority:"high"}),e.on("insert:listItem",ag(t.model))}),t.conversion.for("upcast").add(e=>{e.on("element:ul",gg,{priority:"high"}),e.on("element:ol",gg,{priority:"high"}),e.on("element:li",mg,{priority:"high"}),e.on("element:li",ug)}),t.model.on("insertContent",fg,{priority:"high"}),t.commands.add("numberedList",new Ju(t,"numbered")),t.commands.add("bulletedList",new Ju(t,"bulleted")),t.commands.add("indentList",new eg(t,"forward")),t.commands.add("outdentList",new eg(t,"backward"));var n=i.view.document;this.listenTo(n,"enter",(e,t)=>{const i=this.editor.model.document,n=i.selection.getLastPosition().parent;i.selection.isCollapsed&&"listItem"==n.name&&n.isEmpty&&(this.editor.execute("outdentList"),t.preventDefault(),e.stop())},{context:"li"}),this.listenTo(n,"delete",(e,t)=>{if("backward"===t.direction){const n=this.editor.model.document.selection;var i;n.isCollapsed&&(!(i=n.getFirstPosition()).isAtStart||"listItem"===(i=i.parent).name&&(i.previousSibling&&"listItem"===i.previousSibling.name||(this.editor.execute("outdentList"),t.preventDefault(),e.stop())))}},{context:"li"}),n=i=>(e,t)=>{this.editor.commands.get(i).isEnabled&&(this.editor.execute(i),t())},t.keystrokes.set("Tab",n("indentList")),t.keystrokes.set("Shift+Tab",n("outdentList"))}afterInit(){const e=this.editor.commands,t=e.get("indent"),i=e.get("outdent");t&&t.registerChildCommand(e.get("indentList")),i&&i.registerChildCommand(e.get("outdentList"))}}function _g(e){let t=1;for(const i of e.getChildren())if("ul"==i.name||"ol"==i.name)for(const e of i.getChildren())t+=_g(e);return t}class vg extends Ne{static get pluginName(){return"ListUI"}init(){const e=this.editor.t;rg(this.editor,"numberedList",e("Numbered List"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>'),rg(this.editor,"bulletedList",e("Bulleted List"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>')}}function yg(a,l){return e=>{e.on("attribute:url:media",t)};function t(e,t,i){if(i.consumable.consume(t.item,e.name)){const n=t.attributeNewValue,o=i.writer,r=i.mapper.toViewElement(t.item),s=[...r.getChildren()].find(e=>e.getCustomProperty("media-content"));o.remove(s),t=a.getMediaViewElement(o,n,l),o.insert(o.createPositionAt(r,0),t)}}}function xg(e,t,i,n){var o=e.createContainerElement("figure",{class:"media"});return e.insert(e.createPositionAt(o,0),t.getMediaViewElement(e,i,n)),o}function Ag(e){const t=e.getSelectedElement();return t&&t.is("element","media")?t:null}function Cg(i,n,o){i.change(e=>{var t=e.createElement("media",{url:n});i.insertContent(t,o),e.setSelection(t,"on")})}class Tg extends Oe{refresh(){const e=this.editor.model,t=e.document.selection,i=Ag(t);var n;this.value=i?i.getAttribute("url"):null,this.isEnabled=!!(n=t.getSelectedElement())&&"media"===n.name||function(e,t){let i=vc(e,t).start.parent;return i.isEmpty&&!t.schema.isLimit(i)&&(i=i.parent),t.schema.checkChild(i,"media")}(t,e)}execute(t){const e=this.editor.model,i=e.document.selection,n=Ag(i);n?e.change(e=>{e.setAttribute("url",t,n)}):Cg(e,t,vc(i,e))}}class Eg{constructor(e,t){const i=t.providers,n=t.extraProviders||[],o=new Set(t.removeProviders),r=i.concat(n).filter(e=>{var t=e.name;return t?!o.has(t):(Object(p.b)("media-embed-no-provider-name",{provider:e}),!1)});this.locale=e,this.providerDefinitions=r}hasMedia(e){return!!this._getMedia(e)}getMediaViewElement(e,t,i){return this._getMedia(t).getViewElement(e,i)}_getMedia(e){if(!e)return new Ig(this.locale);e=e.trim();for(const n of this.providerDefinitions){var t=n.html;for(const o of Ut(n.url)){var i=this._getUrlMatches(e,o);if(i)return new Ig(this.locale,e,i,t)}}return null}_getUrlMatches(e,t){let i=e.match(t);if(i)return i;let n=e.replace(/^https?:\/\//,"");return i=n.match(t),i||(n=n.replace(/^www\./,""),i=n.match(t),i||null)}}class Ig{constructor(e,t,i,n){this.url=this._getValidUrl(t),this._t=e.t,this._match=i,this._previewRenderer=n}getViewElement(e,t){const i={};let n;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(i["data-oembed-url"]=this.url),t.renderForEditingView&&(i.class="ck-media__wrapper");const o=this._getPreviewHtml(t);n=e.createRawElement("div",i,function(e){e.innerHTML=o})}else this.url&&(i.url=this.url),n=e.createEmptyElement(t.elementName,i);return e.setCustomProperty("media-content",!0,n),n}_getPreviewHtml(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const e=new Va,t=new La;return e.text=this._t("Open media in new tab"),t.content='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>',t.viewBox="0 0 64 42",new _a({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[t]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]},e]}]}).render().outerHTML}_getValidUrl(e){return e?e.match(/^https?/)?e:"https://"+e:null}}i(94);class Sg extends Ne{static get pluginName(){return"MediaEmbedEditing"}constructor(e){super(e),e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:/^dailymotion\.com\/video\/(\w+)/,html:e=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${e[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:e=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${e[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)/,/^youtube\.com\/embed\/([\w-]+)/,/^youtu\.be\/([\w-]+)/],html:e=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${e[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:e=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${e[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new Eg(e.locale,e.config.get("mediaEmbed"))}init(){const e=this.editor,t=e.model.schema,n=e.t,i=e.conversion,o=e.config.get("mediaEmbed.previewsInData"),r=e.config.get("mediaEmbed.elementName"),s=this.registry;e.commands.add("mediaEmbed",new Tg(e)),t.register("media",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["url"]}),i.for("dataDowncast").elementToElement({model:"media",view:(e,{writer:t})=>(e=e.getAttribute("url"),xg(t,s,e,{elementName:r,renderMediaPreview:e&&o}))}),i.for("dataDowncast").add(yg(s,{elementName:r,renderMediaPreview:o})),i.for("editingDowncast").elementToElement({model:"media",view:(e,{writer:t})=>{var i=e.getAttribute("url");return e=xg(t,s,i,{elementName:r,renderForEditingView:!0}),i=t,t=n("media widget"),i.setCustomProperty("media",!0,e),fc(e,i,{label:t})}}),i.for("editingDowncast").add(yg(s,{elementName:r,renderForEditingView:!0})),i.for("upcast").elementToElement({view:e=>["oembed",r].includes(e.name)&&e.getAttribute("url")?{name:!0}:null,model:(e,{writer:t})=>{if(e=e.getAttribute("url"),s.hasMedia(e))return t.createElement("media",{url:e})}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(e,{writer:t})=>{if(e=e.getAttribute("data-oembed-url"),s.hasMedia(e))return t.createElement("media",{url:e})}})}}const Pg=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class Mg extends Ne{static get requires(){return[Fc,Id]}static get pluginName(){return"AutoMediaEmbed"}constructor(e){super(e),this._timeoutId=null,this._positionToInsert=null}init(){const e=this.editor,n=e.model.document;this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",()=>{const e=n.selection.getFirstRange(),t=Qs.fromPosition(e.start);t.stickiness="toPrevious";const i=Qs.fromPosition(e.end);i.stickiness="toNext",n.once("change:data",()=>{this._embedMediaBetweenPositions(t,i),t.detach(),i.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(qn.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(e,t){const i=this.editor,n=i.plugins.get(Sg).registry,o=new Er(e,t),r=o.getWalker({ignoreElementEnd:!0});let s="";for(const e of r)e.item.is("$textProxy")&&(s+=e.item.data);s=s.trim(),s.match(Pg)&&n.hasMedia(s)&&i.commands.get("mediaEmbed").isEnabled?(this._positionToInsert=Qs.fromPosition(e),this._timeoutId=qn.window.setTimeout(()=>{i.model.change(e=>{let t;this._timeoutId=null,e.remove(o),o.detach(),"$graveyard"!==this._positionToInsert.root.rootName&&(t=this._positionToInsert),Cg(i.model,s,t),this._positionToInsert.detach(),this._positionToInsert=null})},100)):o.detach()}}i(96);class Ng extends ka{constructor(e,t){super(t);const i=t.t;this.focusTracker=new Yo,this.keystrokes=new Go,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(i("Save"),ma.check,"ck-button-save"),this.saveButtonView.type="submit",this.saveButtonView.bind("isEnabled").to(this,"mediaURLInputValue",e=>!!e),this.cancelButtonView=this._createButton(i("Cancel"),ma.cancel,"ck-button-cancel","cancel"),this._focusables=new wa,this._focusCycler=new Fa({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView,this.saveButtonView,this.cancelButtonView]}),fa(this)}render(){super.render(),ba({view:this}),[this.urlInputView,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element);var e=e=>e.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e),this.listenTo(this.urlInputView.element,"selectstart",(e,t)=>{t.stopPropagation()},{priority:"high"})}focus(){this._focusCycler.focusFirst()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.element.value=e.trim()}isValid(){this.resetFormStatus();for(const t of this._validators){var e=t(this);if(e)return this.urlInputView.errorText=e,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const e=this.locale.t,t=new bl(this.locale,wl),i=t.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),t.label=e("Media URL"),t.infoText=this._urlInputViewInfoDefault,i.on("input",()=>{t.infoText=i.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=i.element.value.trim()}),t}_createButton(e,t,i,n){const o=new ja(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:i}}),n&&o.delegate("execute").to(this,n),o}}class Rg extends Ne{static get requires(){return[Sg]}static get pluginName(){return"MediaEmbedUI"}init(){const o=this.editor,r=o.commands.get("mediaEmbed"),s=o.plugins.get(Sg).registry;o.ui.componentFactory.add("mediaEmbed",e=>{var t,i,n=ll(e),e=new Ng((t=o.t,i=s,[e=>{if(!e.url.length)return t("The URL must not be empty.")},e=>{if(!i.hasMedia(e.url))return t("This media URL is not supported.")}]),o.locale);return this._setUpDropdown(n,e,r,o),this._setUpForm(n,e,r),n})}_setUpDropdown(e,t,i){const n=this.editor,o=n.t,r=e.buttonView;function s(){n.editing.view.focus(),e.isOpen=!1}e.bind("isEnabled").to(i),e.panelView.children.add(t),r.set({label:o("Insert media"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V7.176v.001z"/></svg>',tooltip:!0}),r.on("open",()=>{t.disableCssTransitions(),t.url=i.value||"",t.urlInputView.fieldView.select(),t.focus(),t.enableCssTransitions()},{priority:"low"}),e.on("submit",()=>{t.isValid()&&(n.execute("mediaEmbed",t.url),s())}),e.on("change:isOpen",()=>t.resetFormStatus()),e.on("cancel",()=>s())}_setUpForm(e,t,i){t.delegate("submit","cancel").to(e),t.urlInputView.bind("value").to(i,"value"),t.urlInputView.bind("isReadOnly").to(i,"isEnabled",e=>!e)}}function Og(e,r){if(e.childCount){const s=new Kl(e.document),a=function(e,t){const i=t.createRangeIn(e),n=new ti({name:/^p|h\d+$/,styles:{"mso-list":/.*/}}),o=[];for(const e of i)if("elementStart"===e.type&&n.match(e.item)){const t=function(e){const t={},i=e.getStyle("mso-list");if(i){const e=i.match(/(^|\s{1,100})l(\d+)/i),n=i.match(/\s{0,100}lfo(\d+)/i),o=i.match(/\s{0,100}level(\d+)/i);e&&n&&o&&(t.id=e[2],t.order=n[1],t.indent=o[1])}return t}(e.item);o.push({element:e.item,id:t.id,order:t.order,indent:t.indent})}return o}(e,s);if(a.length){let n=null,o=1;a.forEach((e,t)=>{var i,i=!(i=a[t-1])||(i.id!==e.id?e.indent-i.indent!=1:!(i=e.element.previousSibling)||!(i.is("element","ol")||i.is("element","ul"))),t=(t=i?null:a[t-1])?e.indent-t.indent:e.indent-1;if(i&&(n=null,o=1),!n||0!=t){const a=function(e,t){const i=new RegExp(`@list l${e.id}:level${e.indent}\\s*({[^}]*)`,"gi"),n=i.exec(t);let o="decimal",r="ol";if(n&&n[1]){const t=/mso-level-number-format:([^;]{0,100});/gi.exec(n[1]);if(t&&t[1]&&(o=t[1].trim(),r="bullet"!==o&&"image"!==o?"ol":"ul"),"bullet"===o){const t=(e=function(e){if(e.getChild(0).is("$text"))return null;for(const t of e.getChildren())if(t.is("element","span")){const e=t.getChild(0);return e.is("$text")?e:e.getChild(0)}}(e.element))?"o"===(e=e._data)?"circle":"·"===e?"disc":"§"===e?"square":null:null;t&&(o=t)}}return{type:r,style:function(e){switch(e){case"arabic-leading-zero":return"decimal-leading-zero";case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return e;default:return null}}(o)}}(e,r);if(n){if(e.indent>o){const e=n.getChild(n.childCount-1),r=e.getChild(e.childCount-1);n=zg(a,r,s),o+=1}else if(e.indent<o){const r=o-e.indent;n=function(e,t){let i=null,n=0;for(const o of e=e.getAncestors({parentFirst:!0}))if("ul"!==o.name&&"ol"!==o.name||n++,n===t){i=o;break}return i}(n,r),o=parseInt(e.indent)}}else n=zg(a,e.element,s);e.indent<=o&&(n.is("element",a.type)||(n=s.rename(a.type,n)))}(function(e,t){const i=new ti({name:"span",styles:{"mso-list":"Ignore"}}),n=t.createRangeIn(e);for(const e of n)"elementStart"===e.type&&i.match(e.item)&&t.remove(e.item)})(i=e.element,t=s),i=t.rename("li",i),s.appendChild(i,n)})}}}function zg(e,t,i){const n=t.parent,o=i.createElement(e.type),r=n.getChildIndex(t)+1;return i.insertChild(r,o,n),e.style&&i.setStyle("list-style-type",e.style,o),o}i(98);const Dg=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class Lg{constructor(e){this.document=e}isActive(e){return Dg.test(e)}execute(e){var t=new Kl(this.document),{body:i}=e._parsedData;!function(e,t){for(const n of e.getChildren()){var i;n.is("element","b")&&"normal"===n.getStyle("font-weight")&&(i=e.getChildIndex(n),t.remove(n),t.insertChild(i,n.getChildren(),e))}}(i,t),function(e,t){for(const i of t.createRangeIn(e)){const e=i.item;if(e.is("element","li")){const n=e.getChild(0);n&&n.is("element","p")&&t.unwrapElement(n)}}}(i,t),e.content=i}}function Vg(e,t){var o;e.childCount&&(function(t,e,i){const n=i.createRangeIn(e),o=new ti({name:"img"}),r=[];for(const e of n)if(o.match(e.item)){const i=e.item,n=i.getAttribute("v:shapes")?i.getAttribute("v:shapes").split(" "):[];(n.length&&n.every(e=>-1<t.indexOf(e))||!i.getAttribute("src"))&&r.push(i)}for(const t of r)i.remove(t)}(function(e,t){const i=t.createRangeIn(e),n=new ti({name:/v:(.+)/}),o=[];for(const e of i){const t=e.item,i=t.previousSibling&&t.previousSibling.name||null;n.match(t)&&t.getAttribute("o:gfxdata")&&"v:shapetype"!==i&&o.push(e.item.getAttribute("id"))}return o}(e,o=new Kl),e,o),function(e,t){const i=t.createRangeIn(e),n=new ti({name:/v:(.+)/}),o=[];for(const e of i)n.match(e.item)&&o.push(e.item);for(const e of o)t.remove(e)}(e,o),(e=function(e){const t=o.createRangeIn(e),i=new ti({name:"img"}),n=[];for(const e of t)i.match(e.item)&&e.item.getAttribute("src").startsWith("file://")&&n.push(e.item);return n}(e)).length&&function(t,i,n){if(t.length===i.length)for(let e=0;e<t.length;e++)o=`data:${i[e].type};base64,${o=i[e].hex,btoa(o.match(/\w{2}/g).map(e=>String.fromCharCode(parseInt(e,16))).join(""))}`,n.setAttribute("src",o,t[e]);var o}(e,function(t){if(!t)return[];const i=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,e=new RegExp("(?:("+i.source+"))([\\da-fA-F\\s]+)\\}","g"),n=t.match(e),o=[];if(n)for(const t of n){let e=!1;t.includes("\\pngblip")?e="image/png":t.includes("\\jpegblip")&&(e="image/jpeg"),e&&o.push({hex:t.replace(i,"").replace(/[^\da-fA-F]/g,""),type:e})}return o}(t),o))}const jg=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,Bg=/xmlns:o="urn:schemas-microsoft-com/i;class Fg{constructor(e){this.document=e}isActive(e){return jg.test(e)||Bg.test(e)}execute(e){var{body:t,stylesString:i}=e._parsedData;Og(t,i),Vg(t,e.dataTransfer.getData("text/rtf")),e.content=t}}function Hg(e){return e.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>1===t.length?" ":Array(t.length+1).join("  ").substr(0,t.length))}function Ug(e,t,i,n,o=1){o<t?n.setAttribute(e,t,i):n.removeAttribute(e,i)}function Wg(e,t,i={}){return i=e.createElement("tableCell",i),e.insertElement("paragraph",i),e.insert(i,t),i}function qg(e,t){const i=t.parent.parent,n=parseInt(i.getAttribute("headingColumns")||0),{column:o}=e.getCellLocation(t);return!!n&&o<n}function $g(t){return e=>{e.on("element:"+t,(e,t,i)=>{if(t.modelRange&&t.viewItem.isEmpty){const e=t.modelRange.start.nodeAfter,n=i.writer.createPositionAt(e,0);i.writer.insertElement("paragraph",n)}},{priority:"low"})}}class Yg{constructor(e,t={}){this._table=e,this._startRow=void 0!==t.row?t.row:t.startRow||0,this._endRow=void 0!==t.row?t.row:t.endRow,this._startColumn=void 0!==t.column?t.column:t.startColumn||0,this._endColumn=void 0!==t.column?t.column:t.endColumn,this._includeAllSlots=!!t.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){const e=this._table.getChild(this._rowIndex);if(!e||this._isOverEndRow())return{done:!0};if(!e.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let t=null;const i=this._getSpanned();if(i)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(i.cell,i.row,i.column));else{const i=e.getChild(this._cellIndex);if(!i)return this._advanceToNextRow();var n=parseInt(i.getAttribute("colspan")||1),o=parseInt(i.getAttribute("rowspan")||1);(1<n||1<o)&&this._recordSpans(i,o,n),this._shouldSkipSlot()||(t=this._formatOutValue(i)),this._nextCellAtColumn=this._column+n}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next()}skipRow(e){this._skipRows.add(e)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return void 0!==this._endRow&&this._row>this._endRow}_isOverEndColumn(){return void 0!==this._endColumn&&this._column>this._endColumn}_formatOutValue(e,t=this._row,i=this._column){return{done:!1,value:new Gg(this,e,t,i)}}_shouldSkipSlot(){var e=this._skipRows.has(this._row),t=this._row<this._startRow,i=this._column<this._startColumn,n=void 0!==this._endColumn&&this._column>this._endColumn;return e||t||i||n}_getSpanned(){const e=this._spannedCells.get(this._row);return e&&e.get(this._column)||null}_recordSpans(e,i,n){var o={cell:e,row:this._row,column:this._column};for(let t=this._row;t<this._row+i;t++)for(let e=this._column;e<this._column+n;e++)t==this._row&&e==this._column||this._markSpannedCell(t,e,o)}_markSpannedCell(e,t,i){this._spannedCells.has(e)||this._spannedCells.set(e,new Map),this._spannedCells.get(e).set(t,i)}}class Gg{constructor(e,t,i,n){this.cell=t,this.row=e._row,this.column=e._column,this.cellAnchorRow=i,this.cellAnchorColumn=n,this._cellIndex=e._cellIndex,this._rowIndex=e._rowIndex,this._table=e._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||1)}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||1)}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function Kg(f={}){return e=>e.on("insert:table",(t,i,n)=>{const o=i.item;if(n.consumable.consume(o,"insert")){n.consumable.consume(o,"attribute:headingRows:table"),n.consumable.consume(o,"attribute:headingColumns:table");var r,s,a=f&&f.asWidget,l=n.writer.createContainerElement("figure",{class:"table"}),c=n.writer.createContainerElement("table");let e;n.writer.insert(n.writer.createPositionAt(l,0),c),a&&((s=n.writer).setCustomProperty("table",!0,r=l),e=fc(r,s,{hasSelectionHandle:!0}));const g=new Yg(o),m={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0},p=new Map;for(const t of g){var{row:d,cell:h}=t,u=o.getChild(d),u=p.get(d)||em(c,u,d,m,n);p.set(d,u),n.consumable.consume(h,"insert"),Xg(t,m,n.writer.createPositionAt(u,"end"),n,f)}for(const f of o.getChildren()){const t=f.index;f.is("element","tableRow")&&!p.has(t)&&p.set(t,em(c,f,t,m,n))}i=n.mapper.toViewPosition(i.range.start),n.mapper.bindElements(o,a?e:l),n.writer.insert(i,a?e:l)}})}function Qg(e,t){const{writer:i}=t;if(e.parent.is("element","tableCell"))return Jg(e)?i.createContainerElement("span",{class:"ck-table-bogus-paragraph"}):i.createContainerElement("p")}function Jg(e){return 1===e.parent.childCount&&!om(e)}function Zg(e,t,i){var{cell:n}=e,e=tm(e,t);(t=i.mapper.toViewElement(n))&&t.name!==e&&function(e,t,i){const n=i.writer,o=i.mapper.toViewElement(e),r=_c(n.createEditableElement(t,o.getAttributes()),n);kc(r,n,(e,t,i)=>i.addClass(Ut(t.classes),e),(e,t,i)=>i.removeClass(Ut(t.classes),e)),n.insert(n.createPositionAfter(o),r),n.move(n.createRangeIn(o),n.createPositionAt(r,0)),n.remove(n.createRangeOn(o)),i.mapper.unbindViewElement(o),i.mapper.bindElements(e,r)}(n,e,i)}function Xg(e,t,i,n,o){o=o&&o.asWidget,t=tm(e,t),t=o?_c(n.writer.createEditableElement(t),n.writer):n.writer.createContainerElement(t),o&&kc(t,n.writer,(e,t,i)=>i.addClass(Ut(t.classes),e),(e,t,i)=>i.removeClass(Ut(t.classes),e));const r=e.cell,s=r.getChild(0),a=1===r.childCount&&"paragraph"===s.name;if(n.writer.insert(i,t),n.mapper.bindElements(r,t),!o&&a&&!om(s)){const e=r.getChild(0);n.consumable.consume(e,"insert"),n.mapper.bindElements(e,t)}}function em(e,t,i,n,o){o.consumable.consume(t,"insert");var r=t.isEmpty?o.writer.createEmptyElement("tr"):o.writer.createContainerElement("tr");o.mapper.bindElements(t,r);var s,a=n.headingRows,t=(t=o,im(s=i<n.headingRows?"thead":"tbody",n=e)||(e=s,s=n,t=(n=t).writer.createContainerElement(e),e=n.writer.createPositionAt(s,"tbody"==e?"end":0),n.writer.insert(e,t),t)),i=o.writer.createPositionAt(t,0<a&&a<=i?i-a:i);return o.writer.insert(i,r),r}function tm(e,t){var{row:i,column:n}=e,{headingColumns:e,headingRows:t}=t;return t&&i<t||e&&n<e?"th":"td"}function im(e,t){for(const i of t.getChildren())if(i.name==e)return i}function nm(e,t,i){(t=im(e,t))&&0===t.childCount&&i.writer.remove(i.writer.createRangeOn(t))}function om(e){return[...e.getAttributeKeys()].length}class rm extends Oe{refresh(){var e=(t=this.editor.model).document.selection,t=t.schema;this.isEnabled=(e=(e=e.getFirstPosition().parent)===e.root?e:e.parent,t.checkChild(e,"table"))}execute(i={}){const n=this.editor.model,e=n.document.selection,o=this.editor.plugins.get("TableUtils"),t=this.editor.config.get("table"),r=vc(e,n),s=t.defaultHeadings.rows,a=t.defaultHeadings.columns;void 0===i.headingRows&&s&&(i.headingRows=s),void 0===i.headingColumns&&a&&(i.headingColumns=a),n.change(e=>{const t=o.createTable(e,i);n.insertContent(t,r),e.setSelection(e.createPositionAt(t.getNodeByPath([0,0,0]),0))})}}function sm(e){const t=[];for(const i of um(e.getRanges())){const e=i.getContainedElement();e&&e.is("element","tableCell")&&t.push(e)}return t}function am(e){const t=[];for(const i of e.getRanges()){const e=i.start.findAncestor("tableCell");e&&t.push(e)}return t}function lm(e){var t=sm(e);return t.length?t:am(e)}function cm(e){return gm(e.map(e=>e.parent.index))}function dm(t){var e=t[0].findAncestor("table");return gm([...new Yg(e)].filter(e=>t.includes(e.cell)).map(e=>e.column))}function hm(e,t){if(e.length<2||!function(e){const t=e[0].findAncestor("table"),i=cm(e),n=parseInt(t.getAttribute("headingRows")||0);if(pm(i,n)){var o=parseInt(t.getAttribute("headingColumns")||0);return pm(dm(e),o)}}(e))return!1;const i=new Set,n=new Set;let o=0;for(const s of e){const{row:a,column:l}=t.getCellLocation(s),c=parseInt(s.getAttribute("rowspan")||1),d=parseInt(s.getAttribute("colspan")||1);i.add(a),n.add(l),1<c&&i.add(a+c-1),1<d&&n.add(l+d-1),o+=c*d}return r=i,e=n,r=Array.from(r.values()),e=Array.from(e.values()),(Math.max(...r)-Math.min(...r)+1)*(Math.max(...e)-Math.min(...e)+1)==o;var r}function um(e){return Array.from(e).sort(mm)}function gm(e){return{first:(e=e.sort((e,t)=>e-t))[0],last:e[e.length-1]}}function mm(e,t){const i=e.start,n=t.start;return i.isBefore(n)?-1:1}function pm({first:e,last:t},i){return e<i==t<i}class fm extends Oe{constructor(e,t={}){super(e),this.order=t.order||"below"}refresh(){var e=!!lm(this.editor.model.document.selection).length;this.isEnabled=e}execute(){const e=this.editor,t=e.model.document.selection,i=e.plugins.get("TableUtils"),n="above"===this.order,o=lm(t),r=cm(o),s=n?r.first:r.last,a=o[0].findAncestor("table");i.insertRows(a,{at:n?s:s+1,copyStructureFromAbove:!n})}}class bm extends Oe{constructor(e,t={}){super(e),this.order=t.order||"right"}refresh(){var e=!!lm(this.editor.model.document.selection).length;this.isEnabled=e}execute(){const e=this.editor,t=e.model.document.selection,i=e.plugins.get("TableUtils"),n="left"===this.order,o=lm(t),r=dm(o),s=n?r.first:r.last,a=o[0].findAncestor("table");i.insertColumns(a,{columns:1,at:n?s:s+1})}}class wm extends Oe{constructor(e,t={}){super(e),this.direction=t.direction||"horizontally"}refresh(){var e=lm(this.editor.model.document.selection);this.isEnabled=1===e.length}execute(){const e=lm(this.editor.model.document.selection)[0],t="horizontally"===this.direction,i=this.editor.plugins.get("TableUtils");t?i.splitCellHorizontally(e,2):i.splitCellVertically(e,2)}}function km(e,t,i){const{startRow:n,startColumn:o,endRow:r,endColumn:s}=t,a=i.createElement("table"),l=r-n+1;for(let e=0;e<l;e++)i.insertElement("tableRow",a,"end");const c=[...new Yg(e,{startRow:n,endRow:r,startColumn:o,endColumn:s,includeAllSlots:!0})];for(const{row:m,column:p,cell:l,isAnchor:f,cellAnchorRow:b,cellAnchorColumn:w}of c){const c=m-n,k=a.getChild(c);if(f){const n=i.cloneElement(l);i.append(n,k),Am(n,m,p,r,s,i)}else(b<n||w<o)&&Wg(i,i.createPositionAt(k,"end"))}return d=a,h=e,u=n,g=o,t=i,0<(e=parseInt(h.getAttribute("headingRows")||0))&&Ug("headingRows",e-u,d,t,0),0<(h=parseInt(h.getAttribute("headingColumns")||0))&&Ug("headingColumns",h-g,d,t,0),a;var d,h,u,g}function _m(e,t,i=0){const n=[],o=new Yg(e,{startRow:i,endRow:t-1});for(const e of o){const{row:i,cellHeight:o}=e,r=i+o-1;i<t&&t<=r&&n.push(e)}return n}function vm(e,t,i){const n=e.parent,o=n.parent,r=n.index,s=t-r,a={},l=parseInt(e.getAttribute("rowspan"))-s;1<l&&(a.rowspan=l),1<(t=parseInt(e.getAttribute("colspan")||1))&&(a.colspan=t);var c=r+s;let d,h=null;for(const u of[...new Yg(o,{startRow:r,endRow:c,includeAllSlots:!0})]){const{row:n,column:o,cell:r}=u;r===e&&void 0===d&&(d=o),void 0!==d&&d===o&&n===c&&(h=Wg(i,u.getPositionBefore(),a))}return Ug("rowspan",s,e,i),h}function ym(e,t){const i=[],n=new Yg(e);for(const e of n){const{column:n,cellWidth:o}=e,r=n+o-1;n<t&&t<=r&&i.push(e)}return i}function xm(e,t,i,n){const o=i-t,r={},s=parseInt(e.getAttribute("colspan"))-o;return 1<s&&(r.colspan=s),1<(t=parseInt(e.getAttribute("rowspan")||1))&&(r.rowspan=t),t=Wg(n,n.createPositionAfter(e),r),Ug("colspan",o,e,n),t}function Am(e,t,i,n,o,r){var s=parseInt(e.getAttribute("colspan")||1),a=parseInt(e.getAttribute("rowspan")||1);o<i+s-1&&Ug("colspan",o-i+1,e,r,1),n<t+a-1&&Ug("rowspan",n-t+1,e,r,1)}function Cm(e,t){const i=t.getColumns(e),n=new Array(i).fill(0);for(const{column:t}of new Yg(e))n[t]++;var o=n.reduce((e,t,i)=>t?e:[...e,i],[]);if(0<o.length){const i=o[o.length-1];return t.removeColumns(e,{at:i}),1}}function Tm(t,e){const i=[],n=e.getRows(t);for(let e=0;e<n;e++)t.getChild(e).isEmpty&&i.push(e);if(0<i.length){const n=i[i.length-1];return e.removeRows(t,{at:n}),1}}function Em(e,t){Cm(e,t)||Tm(e,t)}function Im(e,t){const i=Array.from(new Yg(e,{startColumn:t.firstColumn,endColumn:t.lastColumn,row:t.lastRow}));return i.every(({cellHeight:e})=>1===e)?t.lastRow:(e=i[0].cellHeight-1,t.lastRow+e)}function Sm(e,t){const i=Array.from(new Yg(e,{startRow:t.firstRow,endRow:t.lastRow,column:t.lastColumn}));return i.every(({cellWidth:e})=>1===e)?t.lastColumn:(e=i[0].cellWidth-1,t.lastColumn+e)}class Pm extends Oe{constructor(e,t){super(e),this.direction=t.direction,this.isHorizontal="right"==this.direction||"left"==this.direction}refresh(){var e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,l=am(e.document.selection)[0],c=this.value,d=this.direction;e.change(e=>{const t="right"==d||"down"==d,i=t?l:c,n=t?c:l,o=n.parent;r=i,s=e,Mm(a=n)||(Mm(r)&&s.remove(s.createRangeIn(r)),s.move(s.createRangeIn(a),s.createPositionAt(r,"end"))),s.remove(a);var r=this.isHorizontal?"colspan":"rowspan",s=parseInt(l.getAttribute(r)||1),a=parseInt(c.getAttribute(r)||1);e.setAttribute(r,s+a,i),e.setSelection(e.createRangeIn(i)),e=this.editor.plugins.get("TableUtils"),Em(o.findAncestor("table"),e)})}_getMergeableCell(){const e=am(this.editor.model.document.selection)[0];if(e){const n=this.editor.plugins.get("TableUtils"),o=(this.isHorizontal?function(e,t,i){const n=e.parent.parent,o="right"==t?e.nextSibling:e.previousSibling,r=0<(n.getAttribute("headingColumns")||0);if(o){const s="right"==t?e:o,a="right"==t?o:e,{column:l}=i.getCellLocation(s),{column:c}=i.getCellLocation(a),d=parseInt(s.getAttribute("colspan")||1),h=qg(i,s),u=qg(i,a);if(!r||h==u)return l+d===c?o:void 0}}:function(t,n,e){const i=t.parent,o=i.parent,r=o.getChildIndex(i);if(!("down"==n&&r===e.getRows(o)-1||"up"==n&&0===r)){var s=parseInt(t.getAttribute("rowspan")||1);if(!(e=o.getAttribute("headingRows")||0)||("down"!=n||r+s!==e)&&("up"!=n||r!==e)){const a=parseInt(t.getAttribute("rowspan")||1),l="down"==n?r+a:r,c=[...new Yg(o,{endRow:l})],d=c.find(e=>e.cell===t).column,h=c.find(({row:e,cellHeight:t,column:i})=>i===d&&("down"==n?e===l:l===e+t));return h&&h.cell}}})(e,this.direction,n);if(o){var t=this.isHorizontal?"rowspan":"colspan",i=parseInt(e.getAttribute(t)||1);return parseInt(o.getAttribute(t)||1)===i?o:void 0}}}}function Mm(e){return 1==e.childCount&&e.getChild(0).is("element","paragraph")&&e.getChild(0).isEmpty}class Nm extends Oe{refresh(){const e=lm(this.editor.model.document.selection),t=e[0];var i,n;t?(i=t.findAncestor("table"),n=this.editor.plugins.get("TableUtils").getRows(i)-1,n=0===(i=cm(e)).first&&i.last===n,this.isEnabled=!n):this.isEnabled=!1}execute(){const e=this.editor.model,i=this.editor.plugins.get("TableUtils"),t=lm(e.document.selection),n=cm(t),o=t[0],r=o.findAncestor("table"),s=i.getCellLocation(o).column;e.change(e=>{var t=n.last-n.first+1;i.removeRows(r,{at:n.first,rows:t}),t=function(e,t,i,n){const o=e.getChild(Math.min(t,n-1));let r=o.getChild(0),s=0;for(const e of o.getChildren()){if(s>i)return r;r=e,s+=parseInt(e.getAttribute("colspan")||1)}return r}(r,n.first,s,i.getRows(r)),e.setSelection(e.createPositionAt(t,0))})}}class Rm extends Oe{refresh(){const e=lm(this.editor.model.document.selection),t=e[0];var i,n,o;t?(o=t.findAncestor("table"),i=this.editor.plugins.get("TableUtils").getColumns(o),{first:n,last:o}=dm(e),this.isEnabled=o-n<i-1):this.isEnabled=!1}execute(){const[t,i]=function(e){const t=lm(e),i=t[0],n=t.pop(),o=[i,n];return i.isBefore(n)?o:o.reverse()}(this.editor.model.document.selection),n=t.parent.parent,e=[...new Yg(n)],o={first:e.find(e=>e.cell===t).column,last:e.find(e=>e.cell===i).column},r=(s=e,a=t,l=i,c=o,1<parseInt(l.getAttribute("colspan")||1)?l:a.previousSibling||l.nextSibling?l.nextSibling||a.previousSibling:(c.first?s.reverse().find(({column:e})=>e<c.first):s.reverse().find(({column:e})=>c.last<e)).cell);var s,a,l,c;this.editor.model.change(e=>{var t=o.last-o.first+1;this.editor.plugins.get("TableUtils").removeColumns(n,{at:o.first,columns:t}),e.setSelection(e.createPositionAt(r,0))})}}class Om extends Oe{refresh(){const e=lm(this.editor.model.document.selection),t=0<e.length;this.isEnabled=t,this.value=t&&e.every(e=>this._isInHeading(e,e.parent.parent))}execute(e={}){if(e.forceValue!==this.value){const t=this.editor.model,i=lm(t.document.selection),n=i[0].findAncestor("table"),{first:o,last:r}=cm(i),s=this.value?o:r+1,a=n.getAttribute("headingRows")||0;t.change(e=>{var t;if(s)for({cell:t}of _m(n,s,s>a?a:0))vm(t,s,e);Ug("headingRows",s,n,e,0)})}}_isInHeading(e,t){return!!(t=parseInt(t.getAttribute("headingRows")||0))&&e.parent.index<t}}class zm extends Oe{refresh(){const e=lm(this.editor.model.document.selection),t=this.editor.plugins.get("TableUtils"),i=0<e.length;this.isEnabled=i,this.value=i&&e.every(e=>qg(t,e))}execute(e={}){if(e.forceValue!==this.value){const t=this.editor.model,i=lm(t.document.selection),n=i[0].findAncestor("table"),{first:o,last:r}=dm(i),s=this.value?o:r+1;t.change(e=>{if(s){var t=ym(n,s);for(const{cell:i,column:n}of t)xm(i,n,s,e)}Ug("headingColumns",s,n,e,0)})}}}class Dm extends Ne{static get pluginName(){return"TableUtils"}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(e){const t=e.parent,i=t.parent,n=i.getChildIndex(t),o=new Yg(i,{row:n});for(const{cell:t,row:i,column:n}of o)if(t===e)return{row:i,column:n}}createTable(e,t){var i=e.createElement("table"),n=parseInt(t.rows)||2,o=parseInt(t.columns)||2;return Lm(e,i,0,n,o),t.headingRows&&Ug("headingRows",Math.min(t.headingRows,n),i,e,0),t.headingColumns&&Ug("headingColumns",Math.min(t.headingColumns,o),i,e,0),i}insertRows(l,e={}){const t=this.editor.model,c=e.at||0,d=e.rows||1,h=void 0!==e.copyStructureFromAbove,u=e.copyStructureFromAbove?c-1:c,g=this.getRows(l),m=this.getColumns(l);if(c>g)throw new p.a("tableutils-insertrows-insert-out-of-range",this,{options:e});t.change(t=>{const i=l.getAttribute("headingRows")||0;if(i>c&&Ug("headingRows",i+d,l,t,0),h||0!==c&&c!==g){const o=h?Math.max(c,u):c,r=new Yg(l,{endRow:o}),s=new Array(m).fill(1);for(const{row:l,column:i,cellHeight:g,cellWidth:a,cell:m}of r){var e=l+g-1,n=l<=u&&u<=e;l<c&&c<=e?(t.setAttribute("rowspan",g+d,m),s[i]=-a):h&&n&&(s[i]=a)}for(let e=0;e<d;e++){const i=t.createElement("tableRow");t.insert(i,l,c);for(let e=0;e<s.length;e++){const c=s[e],d=t.createPositionAt(i,"end");0<c&&Wg(t,d,1<c?{colspan:c}:null),e+=Math.abs(c)-1}}}else Lm(t,l,c,d,m)})}insertColumns(l,e={}){const t=this.editor.model,c=e.at||0,d=e.columns||1;t.change(e=>{const t=l.getAttribute("headingColumns");c<t&&e.setAttribute("headingColumns",t+d,l);const i=this.getColumns(l);if(0!==c&&i!==c){const n=new Yg(l,{column:c,includeAllSlots:!0});for(const l of n){const{row:t,cell:i,cellAnchorColumn:o,cellAnchorRow:r,cellWidth:s,cellHeight:a}=l;if(o<c){e.setAttribute("colspan",s+d,i);const l=r+a-1;for(let e=t;e<=l;e++)n.skipRow(e)}else Vm(d,e,l.getPositionBefore())}}else for(const t of l.getChildren())t.is("element","tableRow")&&Vm(d,e,e.createPositionAt(t,c?"end":0))})}removeRows(l,e){const t=this.editor.model,i=e.rows||1,n=this.getRows(l),c=e.at,d=c+i-1;if(d>n-1)throw new p.a("tableutils-removerows-row-index-out-of-range",this,{table:l,options:e});t.change(t=>{const{cellsToMove:e,cellsToTrim:i}=function(e,t,i){const n=new Map,o=[];for(var{row:r,column:s,cellHeight:a,cell:l}of new Yg(e,{endRow:i})){const e=r+a-1;if(t<=r&&r<=i&&e>i){const e=a-(i-r+1);n.set(s,{cell:l,rowspan:e})}r<t&&e>=t&&(r=e>=i?i-t+1:e-t+1,o.push({cell:l,rowspan:a-r}))}return{cellsToMove:n,cellsToTrim:o}}(l,c,d);e.size&&function(e,t,i,n){const o=[...new Yg(e,{includeAllSlots:!0,row:t})],r=e.getChild(t);let s;for(const{column:e,cell:t,isAnchor:a}of o)if(i.has(e)){const{cell:t,rowspan:o}=i.get(e),l=s?n.createPositionAfter(s):n.createPositionAt(r,0);n.move(n.createRangeOn(t),l),Ug("rowspan",o,t,n),s=t}else a&&(s=t)}(l,1+d,e,t);for(let e=d;e>=c;e--)t.remove(l.getChild(e));for(const{rowspan:l,cell:e}of i)Ug("rowspan",l,e,t);var n=l,o=c,r=d,s=t,a=n.getAttribute("headingRows")||0;o<a&&Ug("headingRows",r<a?a-(r-o+1):o,n,s,0),Cm(l,this)||Tm(l,this)})}removeColumns(s,e){const t=this.editor.model,a=e.at,i=e.columns||1,l=e.at+i-1;t.change(t=>{var e,i=s,n={first:a,last:l},o=t;(e=i.getAttribute("headingColumns")||0)&&n.first<e&&(n=Math.min(e-1,n.last)-n.first+1,o.setAttribute("headingColumns",e-n,i));for(let e=l;e>=a;e--)for(const{cell:a,column:r,cellWidth:l}of[...new Yg(s)])r<=e&&1<l&&r+l>e?Ug("colspan",l-1,a,t):r===e&&t.remove(a);Tm(s,this)||Cm(s,this)})}splitCellVertically(c,d=2){const e=this.editor.model,h=c.parent.parent,u=parseInt(c.getAttribute("rowspan")||1),g=parseInt(c.getAttribute("colspan")||1);e.change(e=>{if(1<g){const{newCellsSpan:h,updatedSpan:i}=jm(g,d);Ug("colspan",i,c,e);const n={};1<h&&(n.colspan=h),1<u&&(n.rowspan=u),Vm(g>d?d-1:g-1,e,e.createPositionAfter(c),n)}if(g<d){const o=d-g,r=[...new Yg(h)],{column:s}=r.find(({cell:e})=>e===c),a=r.filter(({cell:e,cellWidth:t,column:i})=>e!==c&&i===s||i<s&&i+t>s);for(const{cell:c,cellWidth:d}of a)e.setAttribute("colspan",d+o,c);const l={};1<u&&(l.rowspan=u),Vm(o,e,e.createPositionAfter(c),l);var t=h.getAttribute("headingColumns")||0;t>s&&Ug("headingColumns",t+o,h,e)}})}splitCellHorizontally(d,h=2){const e=this.editor.model,t=d.parent,u=t.parent,g=u.getChildIndex(t),m=parseInt(d.getAttribute("rowspan")||1),p=parseInt(d.getAttribute("colspan")||1);e.change(e=>{if(1<m){const n=[...new Yg(u,{startRow:g,endRow:g+m-1,includeAllSlots:!0})],{newCellsSpan:o,updatedSpan:r}=jm(m,h);Ug("rowspan",r,d,e);const{column:s}=n.find(({cell:e})=>e===d),a={};1<o&&(a.rowspan=o),1<p&&(a.colspan=p);for(const d of n){const{column:h,row:l}=d,u=h===s,m=(l+g+r)%o==0;l>=g+r&&u&&m&&Vm(1,e,d.getPositionBefore(),a)}}if(m<h){var t=h-m,i=[...new Yg(u,{startRow:0,endRow:g})];for(const{cell:h,cellHeight:u,row:m}of i)if(h!==d&&m+u>g){const d=u+t;e.setAttribute("rowspan",d,h)}const c={};1<p&&(c.colspan=p),Lm(e,u,g+1,t,1,c),(i=u.getAttribute("headingRows")||0)>g&&Ug("headingRows",i+t,u,e)}})}getColumns(e){return[...e.getChild(0).getChildren()].reduce((e,t)=>e+parseInt(t.getAttribute("colspan")||1),0)}getRows(e){return Array.from(e.getChildren()).reduce((e,t)=>t.is("element","tableRow")?e+1:e,0)}}function Lm(t,i,n,o,r,s={}){for(let e=0;e<o;e++){const o=t.createElement("tableRow");t.insert(o,i,n),Vm(r,t,t.createPositionAt(o,"end"),s)}}function Vm(t,i,n,o={}){for(let e=0;e<t;e++)Wg(i,n,o)}function jm(e,t){if(e<t)return{newCellsSpan:1,updatedSpan:1};var i=Math.floor(e/t);return{newCellsSpan:i,updatedSpan:e-i*t+i}}class Bm extends Oe{refresh(){var e=sm(this.editor.model.document.selection);this.isEnabled=hm(e,this.editor.plugins.get(Dm))}execute(){const l=this.editor.model,c=this.editor.plugins.get(Dm);l.change(e=>{const t=sm(l.document.selection),i=t.shift(),{mergeWidth:n,mergeHeight:o}=function(e,t,i){let n=0,o=0;for(const e of t){const{row:t,column:r}=i.getCellLocation(e);n=Hm(e,r,n,"colspan"),o=Hm(e,t,o,"rowspan")}const{row:r,column:s}=i.getCellLocation(e);return{mergeWidth:n-s,mergeHeight:o-r}}(i,t,c);Ug("colspan",n,i,e),Ug("rowspan",o,i,e);for(const l of t)r=l,s=i,a=e,Fm(r)||(Fm(s)&&a.remove(a.createRangeIn(s)),a.move(a.createRangeIn(r),a.createPositionAt(s,"end"))),a.remove(r);var r,s,a;Em(i.findAncestor("table"),c),e.setSelection(i,"in")})}}function Fm(e){return 1==e.childCount&&e.getChild(0).is("element","paragraph")&&e.getChild(0).isEmpty}function Hm(e,t,i,n){return n=parseInt(e.getAttribute(n)||1),Math.max(i,t+n)}class Um extends Oe{refresh(){var e=lm(this.editor.model.document.selection);this.isEnabled=0<e.length}execute(){const t=this.editor.model,e=lm(t.document.selection),i=cm(e),n=e[0].findAncestor("table"),o=[];for(let e=i.first;e<=i.last;e++)for(const i of n.getChild(e).getChildren())o.push(t.createRangeOn(i));t.change(e=>{e.setSelection(o)})}}class Wm extends Oe{refresh(){var e=lm(this.editor.model.document.selection);this.isEnabled=0<e.length}execute(){const e=this.editor.model,t=lm(e.document.selection),i=t[0],n=t.pop(),o=i.findAncestor("table"),r=this.editor.plugins.get("TableUtils"),s=r.getCellLocation(i),a=r.getCellLocation(n),l=Math.min(s.column,a.column),c=Math.max(s.column,a.column),d=[];for(const t of new Yg(o,{startColumn:l,endColumn:c}))d.push(e.createRangeOn(t.cell));e.change(e=>{e.setSelection(d)})}}function qm(e,t){let i=!1;for(const n of e.getChildren())i=$m(n,t)||i;return i}function $m(e,t){if(0==e.childCount)return t.insertElement("paragraph",e),!0;for(const i of e=Array.from(e.getChildren()).filter(e=>e.is("$text")))t.wrap(t.createRangeOn(i),"paragraph");return!!e.length}i(100);class Ym extends Ne{static get pluginName(){return"TableEditing"}init(){const e=this.editor,t=e.model,i=t.schema,n=e.conversion;var o,r,s,a,l;i.register("table",{allowWhere:"$block",allowAttributes:["headingRows","headingColumns"],isObject:!0,isBlock:!0}),i.register("tableRow",{allowIn:"table",isLimit:!0}),i.register("tableCell",{allowIn:"tableRow",allowChildren:"$block",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),n.for("upcast").add(e=>{e.on("element:figure",(e,t,i)=>{var n;!i.consumable.test(t.viewItem,{name:!0,classes:"table"})||(n=function(){for(const e of t.viewItem.getChildren())if(e.is("element","table"))return e}())&&i.consumable.test(n,{name:!0})&&(n=$o(i.convertItem(n,t.modelCursor).modelRange.getItems()))&&(i.convertChildren(t.viewItem,i.writer.createPositionAt(n,"end")),i.updateConversionResult(n,t))})}),n.for("upcast").add(e=>{e.on("element:table",(e,t,i)=>{var n=t.viewItem;if(i.consumable.test(n,{name:!0})){const{rows:o,headingRows:r,headingColumns:s}=function(e){const t={headingRows:0,headingColumns:0},i=[],n=[];let o;for(const r of Array.from(e.getChildren()))if("tbody"===r.name||"thead"===r.name||"tfoot"===r.name){"thead"!==r.name||o||(o=r);const e=Array.from(r.getChildren()).filter(e=>e.is("element","tr"));for(const s of e)if("thead"===s.parent.name&&s.parent===o)t.headingRows++,i.push(s);else{n.push(s);const e=function(e){let t=0,i=0;for(var n=Array.from(e.getChildren()).filter(e=>"th"===e.name||"td"===e.name);i<n.length&&"th"===n[i].name;){const e=n[i];t+=parseInt(e.getAttribute("colspan")||1),i++}return t}(s);e>t.headingColumns&&(t.headingColumns=e)}}return t.rows=[...i,...n],t}(n),a={};s&&(a.headingColumns=s),r&&(a.headingRows=r);const l=i.writer.createElement("table",a);if(i.safeInsert(l,t.modelCursor)){if(i.consumable.consume(n,{name:!0}),o.forEach(e=>i.convertItem(e,i.writer.createPositionAt(l,"end"))),i.convertChildren(n,i.writer.createPositionAt(l,"end")),l.isEmpty){const e=i.writer.createElement("tableRow");i.writer.insert(e,i.writer.createPositionAt(l,"end")),Wg(i.writer,i.writer.createPositionAt(e,"end"))}i.updateConversionResult(l,t)}}})}),n.for("editingDowncast").add(Kg({asWidget:!0})),n.for("dataDowncast").add(Kg()),n.for("upcast").elementToElement({model:"tableRow",view:"tr"}),n.for("upcast").add(e=>{e.on("element:tr",(e,t)=>{t.viewItem.isEmpty&&0==t.modelCursor.index&&e.stop()},{priority:"high"})}),n.for("editingDowncast").add(e=>e.on("insert:tableRow",(e,t,i)=>{var n=t.item;if(i.consumable.consume(n,"insert")){const o=n.parent,r=function(){for(const e of i.mapper.toViewElement(o).getChildren())if("table"===e.name)return e}(),s=o.getChildIndex(n),a=new Yg(o,{row:s}),l={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0},c=new Map;for(const e of a){const t=c.get(s)||em(r,n,s,l,i);c.set(s,t),i.consumable.consume(e.cell,"insert"),Xg(e,l,i.writer.createPositionAt(t,"end"),i,{asWidget:!0})}}})),n.for("editingDowncast").add(e=>e.on("remove:tableRow",(e,t,i)=>{e.stop();const n=i.writer,o=i.mapper,r=o.toViewPosition(t.position).getLastMatchingPosition(e=>!e.item.is("element","tr")).nodeAfter,s=r.parent.parent,a=n.createRangeOn(r),l=n.remove(a);for(const e of n.createRangeIn(l).getItems())o.unbindViewElement(e);nm("thead",s,i),nm("tbody",s,i)},{priority:"higher"})),n.for("upcast").elementToElement({model:"tableCell",view:"td"}),n.for("upcast").elementToElement({model:"tableCell",view:"th"}),n.for("upcast").add($g("td")),n.for("upcast").add($g("th")),n.for("editingDowncast").add(e=>e.on("insert:tableCell",(e,t,i)=>{var n=t.item;if(i.consumable.consume(n,"insert")){const o=n.parent,r=o.parent,s=r.getChildIndex(o),a=new Yg(r,{row:s}),l={headingRows:r.getAttribute("headingRows")||0,headingColumns:r.getAttribute("headingColumns")||0};for(const e of a)if(e.cell===n){const t=i.mapper.toViewElement(o);return void Xg(e,l,i.writer.createPositionAt(t,o.getChildIndex(n)),i,{asWidget:!0})}}})),n.for("editingDowncast").elementToElement({model:"paragraph",view:Qg,converterPriority:"high"}),n.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),n.for("upcast").attributeToAttribute({model:{key:"colspan",value:Gm("colspan")},view:"colspan"}),n.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),n.for("upcast").attributeToAttribute({model:{key:"rowspan",value:Gm("rowspan")},view:"rowspan"}),n.for("editingDowncast").add(e=>e.on("attribute:headingColumns:table",(e,t,i)=>{const n=t.item;if(i.consumable.consume(t.item,e.name)){var o={headingRows:n.getAttribute("headingRows")||0,headingColumns:n.getAttribute("headingColumns")||0},e=t.attributeOldValue,t=((t=t.attributeNewValue)<e?e:t)-1;for(const r of new Yg(n,{endColumn:t}))Zg(r,o,i)}})),e.data.mapper.on("modelToViewPosition",(e,t)=>{const i=t.modelPosition.parent,n=t.modelPosition.nodeBefore;var o;i.is("element","tableCell")&&n&&n.is("element","paragraph")&&t.mapper.toViewElement(n)===(o=t.mapper.toViewElement(i))&&(t.viewPosition=t.mapper.findPositionIn(o,n.maxOffset))}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new rm(e)),e.commands.add("insertTableRowAbove",new fm(e,{order:"above"})),e.commands.add("insertTableRowBelow",new fm(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new bm(e,{order:"left"})),e.commands.add("insertTableColumnRight",new bm(e,{order:"right"})),e.commands.add("removeTableRow",new Nm(e)),e.commands.add("removeTableColumn",new Rm(e)),e.commands.add("splitTableCellVertically",new wm(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new wm(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new Bm(e)),e.commands.add("mergeTableCellRight",new Pm(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new Pm(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new Pm(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new Pm(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new zm(e)),e.commands.add("setTableRowHeader",new Om(e)),e.commands.add("selectTableRow",new Um(e)),e.commands.add("selectTableColumn",new Wm(e)),(l=t).document.registerPostFixer(()=>function(e){const t=e.document.differ,i=new Set;for(const e of t.getChanges())if("attribute"==e.type){const t=e.range.start.nodeAfter;t&&t.is("element","table")&&"headingRows"==e.attributeKey&&i.add(t)}if(i.size){for(const e of i.values())t.refreshItem(e);return!0}return!1}(l)),(a=t).document.registerPostFixer(e=>function(t,e){var i,n,e=e.document.differ.getChanges();let o=!1;const r=new Set;for(const s of e){let e;"table"==s.name&&"insert"==s.type&&(e=s.position.nodeAfter),"tableRow"!=s.name&&"tableCell"!=s.name||(e=s.position.findAncestor("table")),n="attribute"===s.type,i=s.attributeKey,!n||"headingRows"!==i&&"colspan"!==i&&"rowspan"!==i||(e=s.range.start.findAncestor("table")),e&&!r.has(e)&&(o=function(e,t){let i=!1;if((e=function(e){const t=parseInt(e.getAttribute("headingRows")||0),i=Array.from(e.getChildren()).reduce((e,t)=>t.is("element","tableRow")?e+1:e,0),n=[];for(var{row:o,cell:r,cellHeight:s}of new Yg(e))if(!(s<2)){const e=o<t?t:i;if(o+s>e){const t=e-o;n.push({cell:r,rowspan:t})}}return n}(e)).length){i=!0;for(const n of e)Ug("rowspan",n.rowspan,n.cell,t,1)}return i}(e,t)||o,o=function(i,t){let e=!1;const n=function(e){const t=new Array(e.childCount).fill(0);for(var{rowIndex:i}of new Yg(e,{includeAllSlots:!0}))t[i]++;return t}(i),o=[];for(const[t,e]of n.entries())!e&&i.getChild(t).is("element","tableRow")&&o.push(t);if(o.length){e=!0;for(const e of o.reverse())t.remove(i.getChild(e)),n.splice(e,1)}const r=n.filter((e,t)=>i.getChild(t).is("element","tableRow")),s=r[0];if(!r.every(e=>e===s)){const n=r.reduce((e,t)=>e<t?t:e,0);for(const[o,s]of r.entries()){const r=n-s;if(r){for(let e=0;e<r;e++)Wg(t,t.createPositionAt(i.getChild(o),"end"));e=!0}}}return e}(e,t)||o,r.add(e))}return o}(e,a)),r=t,s=e.editing.mapper,r.document.registerPostFixer(()=>function(e,t){const i=new Set;for(const t of e.getChanges()){const e=("attribute"==t.type?t.range.start:t.position).parent;e.is("element","tableCell")&&i.add(e)}for(const n of i.values())for(const i of[...n.getChildren()].filter(e=>function(e,t){if(!e.is("element","paragraph"))return!1;const i=t.toViewElement(e);return!!i&&Jg(e)!==i.is("element","span")}(e,t)))e.refreshItem(i);return!1}(r.document.differ,s)),(o=t).document.registerPostFixer(e=>function(e){var t;let i=!1;for(const n of o.document.differ.getChanges())"insert"==n.type&&"table"==n.name&&(i=function(e,t){let i=!1;for(const n of e.getChildren())n.is("element","tableRow")&&(i=qm(n,t)||i);return i}(n.position.nodeAfter,e)||i),"insert"==n.type&&"tableRow"==n.name&&(i=qm(n.position.nodeAfter,e)||i),"insert"==n.type&&"tableCell"==n.name&&(i=$m(n.position.nodeAfter,e)||i),t=n,t.position&&t.position.parent.is("element","tableCell")&&("insert"==t.type&&"$text"==t.name||"remove"==t.type)&&(i=$m(n.position.parent,e)||i);return i}(e))}static get requires(){return[Dm]}}function Gm(t){return e=>(e=parseInt(e.getAttribute(t)),Number.isNaN(e)||e<=0?null:e)}i(102);class Km extends ka{constructor(e){super(e);const t=this.bindTemplate;this.items=this._createGridCollection(),this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(e,t)=>`${t} × ${e}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":t.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck-insert-table-dropdown__label"]},children:[{text:t.to("label")}]}],on:{mousedown:t.to(e=>{e.preventDefault()}),click:t.to(()=>{this.fire("execute")})}}),this.on("boxover",(e,t)=>{var{row:i,column:t}=t.target.dataset;this.set({rows:parseInt(i),columns:parseInt(t)})}),this.on("change:columns",()=>{this._highlightGridBoxes()}),this.on("change:rows",()=>{this._highlightGridBoxes()})}focus(){}focusLast(){}_highlightGridBoxes(){const i=this.rows,n=this.columns;this.items.map((e,t)=>{t=Math.floor(t/10)<i&&t%10<n,e.set("isOn",t)})}_createGridCollection(){const t=[];for(let e=0;e<100;e++){var i=Math.floor(e/10),n=e%10;t.push(new Qm(this.locale,i+1,1+n))}return this.createCollection(t)}}class Qm extends ka{constructor(e,t,i){super(e);const n=this.bindTemplate;this.set("isOn",!1),this.setTemplate({tag:"div",attributes:{class:["ck-insert-table-dropdown-grid-box",n.if("isOn","ck-on")],"data-row":t,"data-column":i}})}}class Jm extends Ne{static get pluginName(){return"TableUI"}init(){const o=this.editor,r=this.editor.t,i="ltr"===o.locale.contentLanguageDirection;o.ui.componentFactory.add("insertTable",e=>{const t=o.commands.get("insertTable"),i=ll(e);let n;return i.bind("isEnabled").to(t),i.buttonView.set({icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>',label:r("Insert table"),tooltip:!0}),i.on("change:isOpen",()=>{n||(n=new Km(e),i.panelView.children.add(n),n.delegate("execute").to(i),i.buttonView.on("open",()=>{n.rows=0,n.columns=0}),i.on("execute",()=>{o.execute("insertTable",{rows:n.rows,columns:n.columns}),o.editing.view.focus()}))}),i}),o.ui.componentFactory.add("tableColumn",e=>{var t=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:r("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:i?"insertTableColumnLeft":"insertTableColumnRight",label:r("Insert column left")}},{type:"button",model:{commandName:i?"insertTableColumnRight":"insertTableColumnLeft",label:r("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:r("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:r("Select column")}}];return this._prepareDropdown(r("Column"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',t,e)}),o.ui.componentFactory.add("tableRow",e=>{var t=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:r("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:r("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:r("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:r("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:r("Select row")}}];return this._prepareDropdown(r("Row"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',t,e)}),o.ui.componentFactory.add("mergeTableCells",e=>{var t=[{type:"button",model:{commandName:"mergeTableCellUp",label:r("Merge cell up")}},{type:"button",model:{commandName:i?"mergeTableCellRight":"mergeTableCellLeft",label:r("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:r("Merge cell down")}},{type:"button",model:{commandName:i?"mergeTableCellLeft":"mergeTableCellRight",label:r("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:r("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:r("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(r("Merge cells"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>',t,e)})}_prepareDropdown(e,t,i,n){const o=this.editor,r=ll(n),s=this._fillDropdownWithListOptions(r,i);return r.buttonView.set({label:e,icon:t,tooltip:!0}),r.bind("isEnabled").toMany(s,"isEnabled",(...e)=>e.some(e=>e)),this.listenTo(r,"execute",e=>{o.execute(e.source.commandName),o.editing.view.focus()}),r}_prepareMergeSplitButtonDropdown(e,t,i,n){const o=this.editor,r=ll(n,qa),s=o.commands.get("mergeTableCells"),a=this._fillDropdownWithListOptions(r,i);return r.buttonView.set({label:e,icon:t,tooltip:!0,isEnabled:!0}),r.bind("isEnabled").toMany([s,...a],"isEnabled",(...e)=>e.some(e=>e)),this.listenTo(r.buttonView,"execute",()=>{o.execute("mergeTableCells"),o.editing.view.focus()}),this.listenTo(r,"execute",e=>{o.execute(e.source.commandName),o.editing.view.focus()}),r}_fillDropdownWithListOptions(e,t){var i=this.editor,n=[],o=new Ft;for(const e of t)!function(e,t,i,n){const o=e.model=new _l(e.model),{commandName:r,bindIsOn:s}=e.model;if("button"===e.type||"switchbutton"===e.type){const e=t.commands.get(r);i.push(e),o.set({commandName:r}),o.bind("isEnabled").to(e),s&&o.bind("isOn").to(e,"value")}o.set({withText:!0}),n.add(e)}(e,i,n,o);return dl(e,o,i.ui.componentFactory),n}}i(104);class Zm extends Ne{static get pluginName(){return"TableSelection"}static get requires(){return[Dm]}init(){var e=this.editor.model;this.listenTo(e,"deleteContent",(e,t)=>this._handleDeleteContent(e,t),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){var e=sm(this.editor.model.document.selection);return 0==e.length?null:e}getSelectionAsFragment(){const d=this.getSelectedTableCells();return d?this.editor.model.change(e=>{var t=e.createDocumentFragment(),i=this.editor.plugins.get("TableUtils"),{first:n,last:o}=dm(d),{first:r,last:s}=cm(d),a=d[0].findAncestor("table");let l=s,c=o;if(hm(d,i)){const d={firstColumn:n,lastColumn:o,firstRow:r,lastRow:s};l=Im(a,d),c=Sm(a,d)}return n=km(a,{startRow:r,startColumn:n,endRow:l,endColumn:c},e),e.insert(n,t,0),t}):null}setCellSelection(e,t){const i=this._getCellsToSelect(e,t);this.editor.model.change(t=>{t.setSelection(i.cells.map(e=>t.createRangeOn(e)),{backward:i.backward})})}getFocusCell(){const e=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return e&&e.is("element","tableCell")?e:null}getAnchorCell(){const e=$o(this.editor.model.document.selection.getRanges()).getContainedElement();return e&&e.is("element","tableCell")?e:null}_defineSelectionConverter(){const e=this.editor,r=new Set;e.conversion.for("editingDowncast").add(e=>e.on("selection",(e,t,i)=>{const n=i.writer;!function(e){for(const t of r)e.removeClass("ck-editor__editable_selected",t);r.clear()}(n);var o=this.getSelectedTableCells();if(o){for(const e of o){const t=i.mapper.toViewElement(e);n.addClass("ck-editor__editable_selected",t),r.add(t)}o=i.mapper.toViewElement(o[o.length-1]),n.setSelection(o,0)}},{priority:"lowest"}))}_enablePluginDisabling(){const n=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const i=this.getSelectedTableCells();i&&n.model.change(e=>{var t=e.createPositionAt(i[0],0),t=n.model.schema.getNearestSelectionRange(t);e.setSelection(t)})}})}_handleDeleteContent(e,t){const[i,n]=t,o=this.editor.model,r=!n||"backward"==n.direction,s=sm(i);s.length&&(e.stop(),o.change(e=>{var t=s[r?s.length-1:0];o.change(e=>{for(const t of s)o.deleteContent(e.createSelection(t,"in"))}),t=o.schema.getNearestSelectionRange(e.createPositionAt(t,0)),i.is("documentSelection")?e.setSelection(t):i.setTo(t)}))}_getCellsToSelect(e,t){const i=this.editor.plugins.get("TableUtils"),n=i.getCellLocation(e),o=i.getCellLocation(t),r=Math.min(n.row,o.row),s=Math.max(n.row,o.row),a=Math.min(n.column,o.column),l=Math.max(n.column,o.column),c=new Array(s-r+1).fill(null).map(()=>[]),d={startRow:r,endRow:s,startColumn:a,endColumn:l};for(const{row:h,cell:i}of new Yg(e.findAncestor("table"),d))c[h-r].push(i);return t=o.row<n.row,e=o.column<n.column,t&&c.reverse(),e&&c.forEach(e=>e.reverse()),{cells:c.flat(),backward:t||e}}}class Xm extends Ne{static get pluginName(){return"TableClipboard"}static get requires(){return[Zm,Dm]}init(){var e=this.editor,t=e.editing.view.document;this.listenTo(t,"copy",(e,t)=>this._onCopyCut(e,t)),this.listenTo(t,"cut",(e,t)=>this._onCopyCut(e,t)),this.listenTo(e.model,"insertContent",(e,t)=>this._onInsertContent(e,...t),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(e,t){const i=this.editor.plugins.get(Zm);if(i.getSelectedTableCells()&&("cut"!=e.name||!this.editor.isReadOnly)){t.preventDefault(),e.stop();const n=this.editor.data,o=this.editor.editing.view.document,r=n.toView(i.getSelectionAsFragment());o.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:r,method:e.name})}}_onInsertContent(e,t,i){if(!i||i.is("documentSelection")){const n=this.editor.model,c=this.editor.plugins.get(Dm);let l=function(e,t){if(!e.is("documentFragment")&&!e.is("element"))return null;if(e.is("element","table"))return e;if(1==e.childCount&&e.getChild(0).is("element","table"))return e.getChild(0);const i=t.createRangeIn(e);for(const e of i.getItems())if(e.is("element","table")){var n=t.createRange(i.start,t.createPositionBefore(e));return t.hasContent(n,{ignoreWhitespaces:!0})?null:(n=t.createRange(t.createPositionAfter(e),i.end),t.hasContent(n,{ignoreWhitespaces:!0})?null:e)}return null}(t,n);if(l){const d=lm(n.document.selection);d.length?(e.stop(),n.change(t=>{const e={width:c.getColumns(l),height:c.getRows(l)},i=function(e,t,i,n){const o=e[0].findAncestor("table"),r=dm(e),s=cm(e),a={firstColumn:r.first,lastColumn:r.last,firstRow:s.first,lastRow:s.last},l=1===e.length;var c,d,h,u,g;return l&&(a.lastRow+=t.height-1,a.lastColumn+=t.width-1,c=o,d=a.lastRow+1,h=a.lastColumn+1,g=(u=n).getColumns(c),t=u.getRows(c),g<h&&u.insertColumns(c,{at:g,columns:h-g}),t<d&&u.insertRows(c,{at:t,rows:d-t})),l||!hm(e,n)?function(e,t,i){var{firstRow:n,lastRow:o,firstColumn:r,lastColumn:s}=t,a={first:n,last:o},t={first:r,last:s};tp(e,r,a,i),tp(e,s+1,a,i),ep(e,n,t,i),ep(e,o+1,t,i,n)}(o,a,i):(a.lastRow=Im(o,a),a.lastColumn=Sm(o,a)),a}(d,e,t,c),n=i.lastRow-i.firstRow+1,o=i.lastColumn-i.firstColumn+1,r={startRow:0,startColumn:0,endRow:Math.min(n,e.height)-1,endColumn:Math.min(o,e.width)-1};l=km(l,r,t);const s=d[0].findAncestor("table"),a=this._replaceSelectedCellsWithPasted(l,e,s,i,t);if(this.editor.plugins.get("TableSelection").isEnabled){const e=um(a.map(e=>t.createRangeOn(e)));t.setSelection(e)}else t.setSelection(a[0],0)})):Em(l,c)}}}_replaceSelectedCellsWithPasted(e,t,i,n,o){const{width:r,height:s}=t,a=function(e,t,i){const n=new Array(i).fill(null).map(()=>new Array(t).fill(null));for(const{column:t,row:i,cell:o}of new Yg(e))n[i][t]=o;return n}(e,r,s),l=[...new Yg(i,{startRow:n.firstRow,endRow:n.lastRow,startColumn:n.firstColumn,endColumn:n.lastColumn,includeAllSlots:!0})],c=[];let d;for(const e of l){const{row:t,column:i}=e;i===n.firstColumn&&(d=e.getPositionBefore());const l=t-n.firstRow,h=i-n.firstColumn,u=a[l%s][h%r],g=u?o.cloneElement(u):null,m=this._replaceTableSlotCell(e,g,d,o);m&&(Am(m,t,i,n.lastRow,n.lastColumn,o),c.push(m),d=o.createPositionAfter(m))}const h=parseInt(i.getAttribute("headingRows")||0),u=parseInt(i.getAttribute("headingColumns")||0),g=n.firstRow<h&&h<=n.lastRow,m=n.firstColumn<u&&u<=n.lastColumn;if(g){const e=ep(i,h,{first:n.firstColumn,last:n.lastColumn},o,n.firstRow);c.push(...e)}if(m){const e=tp(i,u,{first:n.firstRow,last:n.lastRow},o);c.push(...e)}return c}_replaceTableSlotCell(e,t,i,n){var{cell:o,isAnchor:e}=e;return e&&n.remove(o),t?(n.insert(t,i),t):null}}function ep(e,t,i,n,o=0){if(!(t<1))return _m(e,t,o).filter(({column:e,cellWidth:t})=>ip(e,t,i)).map(({cell:e})=>vm(e,t,n))}function tp(e,i,n,o){if(!(i<1))return ym(e,i).filter(({row:e,cellHeight:t})=>ip(e,t,n)).map(({cell:e,column:t})=>xm(e,t,i,o))}function ip(e,t,i){var{first:n,last:i}=i;return n<=e&&e<=i||e<n&&n<=e+t-1}class np extends Ne{static get pluginName(){return"TableKeyboard"}static get requires(){return[Zm]}init(){var e=this.editor.editing.view.document;this.editor.keystrokes.set("Tab",(...e)=>this._handleTabOnSelectedTable(...e),{priority:"low"}),this.editor.keystrokes.set("Tab",this._getTabHandler(!0),{priority:"low"}),this.editor.keystrokes.set("Shift+Tab",this._getTabHandler(!1),{priority:"low"}),this.listenTo(e,"arrowKey",(...e)=>this._onArrowKey(...e),{context:"table"})}_handleTabOnSelectedTable(e,t){const i=this.editor,n=i.model.document.selection.getSelectedElement();n&&n.is("element","table")&&(t(),i.model.change(e=>{e.setSelection(e.createRangeIn(n.getChild(0).getChild(0)))}))}_getTabHandler(h){const u=this.editor;return(e,t)=>{var i;if(i=(i=am(u.model.document.selection)[0])||this.editor.plugins.get("TableSelection").getFocusCell()){t();const n=i.parent,o=n.parent,r=o.getChildIndex(n),s=n.getChildIndex(i),a=0===s;if(h||!a||0!==r){const l=this.editor.plugins.get("TableUtils"),c=s===n.childCount-1,d=r===l.getRows(o)-1;if(h&&d&&c&&(u.execute("insertTableRowBelow"),r===l.getRows(o)-1))u.model.change(e=>{e.setSelection(e.createRangeOn(o))});else{let t;if(h&&c){const h=o.getChild(r+1);t=h.getChild(0)}else if(!h&&a){const h=o.getChild(r-1);t=h.getChild(h.childCount-1)}else t=n.getChild(s+(h?1:-1));u.model.change(e=>{e.setSelection(e.createRangeIn(t))})}}else u.model.change(e=>{e.setSelection(e.createRangeOn(o))})}}}_onArrowKey(e,t){var i=this.editor,i=dn(t.keyCode,i.locale.contentLanguageDirection);this._handleArrowKeys(i,t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),e.stop())}_handleArrowKeys(e,t){const i=this.editor.model.document.selection,n=["right","down"].includes(e),o=sm(i);if(o.length){var r=t?this.editor.plugins.get("TableSelection").getFocusCell():n?o[o.length-1]:o[0];return this._navigateFromCellInDirection(r,e,t),!0}return!(!(r=i.focus.findAncestor("tableCell"))||t&&!i.isCollapsed&&i.isBackward==n||!this._isSelectionAtCellEdge(i,r,n)||(this._navigateFromCellInDirection(r,e,t),0))}_isSelectionAtCellEdge(e,t,i){const n=this.editor.model,o=this.editor.model.schema,r=i?e.getLastPosition():e.getFirstPosition();return o.getLimitElement(r).is("element","tableCell")?(t=n.createSelection(r),n.modifySelection(t,{direction:i?"forward":"backward"}),r.isEqual(t.focus)):n.createPositionAt(t,i?"end":0).isTouching(r)}_navigateFromCellInDirection(t,e,i=!1){const n=this.editor.model,o=t.findAncestor("table"),r=[...new Yg(o,{includeAllSlots:!0})],{row:s,column:a}=r[r.length-1],l=r.find(({cell:e})=>e==t);let{row:c,column:d}=l;switch(e){case"left":d--;break;case"up":c--;break;case"right":d+=l.cellWidth;break;case"down":c+=l.cellHeight}if(c<0||c>s||d<0&&c<=0||d>a&&c>=s)n.change(e=>{e.setSelection(e.createRangeOn(o))});else{d<0?(d=i?0:a,c--):d>a&&(d=i?a:0,c++);const h=r.find(e=>e.row==c&&e.column==d).cell,u=["right","down"].includes(e),g=this.editor.plugins.get("TableSelection");if(i&&g.isEnabled){const e=g.getAnchorCell()||t;g.setCellSelection(e,h)}else{const t=n.createPositionAt(h,u?0:"end");n.change(e=>{e.setSelection(t)})}}}}class op extends bo{constructor(e){super(e),this.domEventType=["mousemove","mouseleave"]}onDomEvent(e){this.fire(e.type,e)}}class rp extends Ne{static get pluginName(){return"TableMouse"}static get requires(){return[Zm]}init(){this.editor.editing.view.addObserver(op),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const o=this.editor;let r=!1;const s=o.plugins.get(Zm);this.listenTo(o.editing.view.document,"mousedown",(e,t)=>{var i,n;this.isEnabled&&s.isEnabled&&t.domEvent.shiftKey&&(!(i=s.getAnchorCell()||am(o.model.document.selection)[0])||(n=this._getModelTableCellFromDomEvent(t))&&sp(i,n)&&(r=!0,s.setCellSelection(i,n),t.preventDefault()))}),this.listenTo(o.editing.view.document,"mouseup",()=>{r=!1}),this.listenTo(o.editing.view.document,"selectionChange",e=>{r&&e.stop()},{priority:"highest"})}_enableMouseDragSelection(){const e=this.editor;let n,o,r=!1,s=!1;const a=e.plugins.get(Zm);this.listenTo(e.editing.view.document,"mousedown",(e,t)=>{this.isEnabled&&a.isEnabled&&(t.domEvent.shiftKey||t.domEvent.ctrlKey||t.domEvent.altKey||(n=this._getModelTableCellFromDomEvent(t)))}),this.listenTo(e.editing.view.document,"mousemove",(e,t)=>{var i;t.domEvent.buttons&&n&&((i=this._getModelTableCellFromDomEvent(t))&&sp(n,i)&&(o=i,r||o==n||(r=!0)),r&&(s=!0,a.setCellSelection(n,o),t.preventDefault()))}),this.listenTo(e.editing.view.document,"mouseup",()=>{r=!1,s=!1,n=null,o=null}),this.listenTo(e.editing.view.document,"selectionChange",e=>{s&&e.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(e){return e=e.target,e=this.editor.editing.view.createPositionAt(e,0),this.editor.editing.mapper.toModelPosition(e).parent.findAncestor("tableCell",{includeSelf:!0})}}function sp(e,t){return e.parent.parent==t.parent.parent}function ap(e){return(e=e.getSelectedElement())&&cp(e)?e:null}function lp(e){let t=e.getFirstPosition().parent;for(;t;){if(t.is("element")&&cp(t))return t;t=t.parent}return null}function cp(e){return e.getCustomProperty("table")&&pc(e)}i(106);const dp={autoRefresh:!0};class hp{constructor(t,e=dp){if(!t)throw new p.a("token-missing-token-url",this);e.initValue&&this._validateTokenValue(e.initValue),this.set("value",e.initValue),this._refresh="function"==typeof t?t:()=>{return e=t,new Promise((i,n)=>{const o=new XMLHttpRequest;o.open("GET",e),o.addEventListener("load",()=>{var e=o.status,t=o.response;return e<200||299<e?n(new p.a("token-cannot-download-new-token",null)):i(t)}),o.addEventListener("error",()=>n(new Error("Network Error"))),o.addEventListener("abort",()=>n(new Error("Abort"))),o.send()});var e},this._options=Object.assign({},dp,e)}init(){return new Promise((e,t)=>{this.value?(this._options.autoRefresh&&this._registerRefreshTokenTimeout(),e(this)):this.refreshToken().then(e).catch(t)})}refreshToken(){return this._refresh().then(e=>{this._validateTokenValue(e),this.set("value",e),this._options.autoRefresh&&this._registerRefreshTokenTimeout()}).then(()=>this)}destroy(){clearTimeout(this._tokenRefreshTimeout)}_validateTokenValue(e){var t="string"==typeof e,i=!/^".*"$/.test(e),e=t&&3===e.split(".").length;if(!i||!e)throw new p.a("token-not-in-jwt-format",this)}_registerRefreshTokenTimeout(){var e=this._getTokenRefreshTimeoutTime();clearTimeout(this._tokenRefreshTimeout),this._tokenRefreshTimeout=setTimeout(()=>{this.refreshToken()},e)}_getTokenRefreshTimeoutTime(){try{var[,e]=this.value.split("."),{exp:t}=JSON.parse(atob(e));return t?Math.floor((1e3*t-Date.now())/2):36e5}catch(e){return 36e5}}static create(e,t=dp){return new hp(e,t).init()}}Me(hp,Ce);var up=hp;const gp=/^data:(\S*?);base64,/;class mp{constructor(e,t,i){if(!e)throw new p.a("fileuploader-missing-file",null);if(!t)throw new p.a("fileuploader-missing-token",null);if(!i)throw new p.a("fileuploader-missing-api-address",null);var n;this.file="string"==typeof(n=e)&&((n=n.match(gp))&&n.length)?function(e){try{const t=e.match(gp)[1],i=atob(e.replace(gp,"")),n=[];for(let e=0;e<i.length;e+=512){const o=i.slice(e,e+512),r=new Array(o.length);for(let e=0;e<o.length;e++)r[e]=o.charCodeAt(e);n.push(new Uint8Array(r))}return new Blob(n,{type:t})}catch(e){throw new p.a("fileuploader-decoding-image-data-error",null)}}(e):e,this._token=t,this._apiAddress=i}onProgress(i){return this.on("progress",(e,t)=>i(t)),this}onError(i){return this.once("error",(e,t)=>i(t)),this}abort(){this.xhr.abort()}send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}_prepareRequest(){const e=new XMLHttpRequest;e.open("POST",this._apiAddress),e.setRequestHeader("Authorization",this._token.value),e.responseType="json",this.xhr=e}_attachXHRListeners(){const t=this,i=this.xhr;function e(e){return()=>t.fire("error",e)}i.addEventListener("error",e("Network Error")),i.addEventListener("abort",e("Abort")),i.upload&&i.upload.addEventListener("progress",e=>{e.lengthComputable&&this.fire("progress",{total:e.total,uploaded:e.loaded})}),i.addEventListener("load",()=>{var e=i.status,t=i.response;if(e<200||299<e)return this.fire("error",t.message||t.error)})}_sendRequest(){const e=new FormData,o=this.xhr;return e.append("file",this.file),new Promise((i,n)=>{o.addEventListener("load",()=>{var e=o.status,t=o.response;return e<200||299<e?t.message?n(new p.a("fileuploader-uploading-data-failed",this,{message:t.message})):n(t.error):i(t)}),o.addEventListener("error",()=>n(new Error("Network Error"))),o.addEventListener("abort",()=>n(new Error("Abort"))),o.send(e)})}}Me(mp,s);class pp{constructor(e,t){if(!e)throw new p.a("uploadgateway-missing-token",null);if(!t)throw new p.a("uploadgateway-missing-api-address",null);this._token=e,this._apiAddress=t}upload(e){return new mp(e,this._token,this._apiAddress)}}class fp extends Gt{static get pluginName(){return"CloudServicesCore"}createToken(e,t){return new up(e,t)}createUploadGateway(e,t){return new pp(e,t)}}class bp extends Zl{}bp.builtinPlugins=[class extends Ne{static get requires(){return[Fc,ac,Jc,qc,rd,Id]}static get pluginName(){return"Essentials"}},class extends Ne{static get requires(){return[Pd]}static get pluginName(){return"CKFinderUploadAdapter"}init(){const t=this.editor.config.get("ckfinder.uploadUrl");t&&(this.editor.plugins.get(Pd).createUploadAdapter=e=>new Od(e,t,this.editor.t))}},class extends Ne{static get pluginName(){return"Autoformat"}afterInit(){this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats()}_addListAutoformats(){const e=this.editor.commands;e.get("bulletedList")&&zd(this.editor,this,/^[*-]\s$/,"bulletedList"),e.get("numberedList")&&zd(this.editor,this,/^1[.|)]\s$/,"numberedList"),e.get("todoList")&&zd(this.editor,this,/^\[\s?\]\s$/,"todoList"),e.get("checkTodoList")&&zd(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const e=this.editor.commands;if(e.get("bold")){const e=Vd(this.editor,"bold");Dd(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,e),Dd(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,e)}if(e.get("italic")){const e=Vd(this.editor,"italic");Dd(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,e),Dd(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,e)}if(e.get("code")){const e=Vd(this.editor,"code");Dd(this.editor,this,/(`)([^`]+)(`)$/g,e)}if(e.get("strikethrough")){const e=Vd(this.editor,"strikethrough");Dd(this.editor,this,/(~~)([^~]+)(~~)$/g,e)}}_addHeadingAutoformats(){const i=this.editor.commands.get("heading");i&&i.modelElements.filter(e=>e.match(/^heading[1-6]$/)).forEach(e=>{var t=e[7],t=new RegExp(`^(#{${t}})\\s$`);zd(this.editor,this,t,()=>!(!i.isEnabled||i.value===e)&&void this.editor.execute("heading",{value:e}))})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&zd(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const e=this.editor,t=e.model.document.selection;e.commands.get("codeBlock")&&zd(e,this,/^```$/,()=>!t.getFirstPosition().parent.is("element","listItem")&&void this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0}))}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&zd(this.editor,this,/^---$/,"horizontalLine")}},class extends Ne{static get requires(){return[Bd,Fd]}static get pluginName(){return"Bold"}},class extends Ne{static get requires(){return[Hd,Ud]}static get pluginName(){return"Italic"}},class extends Ne{static get requires(){return[Gd,Kd]}static get pluginName(){return"BlockQuote"}},class extends Ne{static get pluginName(){return"CKFinder"}static get requires(){return["Link","CKFinderUploadAdapter",Xd,Qd]}},class extends Gt{static get pluginName(){return"CloudServices"}static get requires(){return[fp]}init(){var e=this.context.config.get("cloudServices")||{};for(const t in e)this[t]=e[t];if(this._tokens=new Map,this.tokenUrl)return this.token=this.context.plugins.get("CloudServicesCore").createToken(this.tokenUrl),this._tokens.set(this.tokenUrl,this.token),this.token.init();this.token=null}registerTokenUrl(e){if(this._tokens.has(e))return Promise.resolve(this.getTokenFor(e));const t=this.context.plugins.get("CloudServicesCore").createToken(e);return this._tokens.set(e,t),t.init()}getTokenFor(e){if(!(e=this._tokens.get(e)))throw new p.a("cloudservices-token-not-registered",this);return e}destroy(){super.destroy();for(const e of this._tokens.values())e.destroy()}},class extends Ne{static get requires(){return[eh,"ImageUpload"]}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")||e.plugins.has("ImageInlineEditing")||Object(p.b)("easy-image-image-feature-missing",e)}static get pluginName(){return"EasyImage"}},class extends Ne{static get requires(){return[lh,ch]}static get pluginName(){return"Heading"}},class extends Ne{static get requires(){return[Oh,Dh]}static get pluginName(){return"Image"}},class extends Ne{static get requires(){return[Bh,Hh]}static get pluginName(){return"ImageCaption"}},class extends Ne{static get requires(){return[nu,ou]}static get pluginName(){return"ImageStyle"}},class extends Ne{static get requires(){return[dh,_h]}static get pluginName(){return"ImageToolbar"}afterInit(){const e=this.editor,t=e.t,i=e.plugins.get(dh),n=e.plugins.get("ImageUtils");i.register("image",{ariaLabel:t("Image toolbar"),items:(e.config.get("image.toolbar")||[]).map(e=>_(e)?e.name:e),getRelatedElement:e=>n.getClosestSelectedImageWidget(e)})}},class extends Ne{static get pluginName(){return"ImageUpload"}static get requires(){return[wu,du,hu]}},class extends Ne{static get pluginName(){return"Indent"}static get requires(){return[ku,yu]}},class extends Ne{static get requires(){return[Bu,$u,Ku]}static get pluginName(){return"Link"}},class extends Ne{static get requires(){return[kg,vg]}static get pluginName(){return"List"}},class extends Ne{static get requires(){return[Sg,Rg,Mg,Rc]}static get pluginName(){return"MediaEmbed"}},rh,class extends Ne{static get pluginName(){return"PasteFromOffice"}static get requires(){return[ic]}init(){const e=this.editor,o=e.editing.view.document,r=[];r.push(new Fg(o)),r.push(new Lg(o)),e.plugins.get("ClipboardPipeline").on("inputTransformation",(e,t)=>{if(!t._isTransformedWithPasteFromOffice){const i=t.dataTransfer.getData("text/html"),n=r.find(e=>e.isActive(i));n&&(t._parsedData=function(e,t){const i=new DOMParser,n=Hg(Hg(function(e){var t=e.indexOf("</body>");if(t<0)return e;var i=e.indexOf("</html>",t+"</body>".length);return e.substring(0,t+"</body>".length)+(0<=i?e.substring(i):"")}(e=e.replace(/<!--\[if gte vml 1]>/g,"")))).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/ <\//g," </").replace(/ <o:p><\/o:p>/g," <o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><"),o=i.parseFromString(n,"text/html");o.querySelectorAll("span[style*=spacerun]").forEach(e=>{var t=e.innerText.length||0;e.innerHTML=Array(t+1).join("  ").substr(0,t)});var r=o.body.innerHTML;return{body:e=function(e,t){const i=new Ki(t),n=new Jn(i,{blockFillerMode:"nbsp"}),o=e.createDocumentFragment(),r=e.body.childNodes;for(;0<r.length;)o.appendChild(r[0]);return n.domToView(o,{skipComments:!0})}(o,t),bodyString:r,styles:(t=function(e){const t=[],i=[],n=Array.from(e.getElementsByTagName("style"));for(const e of n)e.sheet&&e.sheet.cssRules&&e.sheet.cssRules.length&&(t.push(e.sheet),i.push(e.innerHTML));return{styles:t,stylesString:i.join(" ")}}(o)).styles,stylesString:t.stylesString}}(i,o.stylesProcessor),n.execute(t),t._isTransformedWithPasteFromOffice=!0)}},{priority:"high"})}},class extends Ne{static get requires(){return[Ym,Jm,Zm,rp,np,Xm,Rc]}static get pluginName(){return"Table"}},class extends Ne{static get requires(){return[dh]}static get pluginName(){return"TableToolbar"}afterInit(){const e=this.editor,t=e.t,i=e.plugins.get(dh),n=e.config.get("table.contentToolbar"),o=e.config.get("table.tableToolbar");n&&i.register("tableContent",{ariaLabel:t("Table toolbar"),items:n,getRelatedElement:lp}),o&&i.register("table",{ariaLabel:t("Table toolbar"),items:o,getRelatedElement:ap})}},class extends Ne{static get pluginName(){return"TextTransformation"}constructor(e){super(e),e.config.define("typing",{transformations:{include:bd}})}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const e=this.editor,u=e.model,o=e.plugins.get("Input"),i=function(e){const t=e.extra||[],i=e.remove||[],n=e=>!i.includes(e);return function(e){const t=new Set;for(const i of e)if(fd[i])for(const e of fd[i])t.add(e);else t.add(i);return Array.from(t)}(e.include.concat(t).filter(n)).filter(n).map(e=>pd[e]||e).map(e=>({from:function(e){return"string"==typeof e?new RegExp(`(${t=e,(t=ci(t))&&md.test(t)?t.replace(gd,"\\$&"):t})$`):e;var t}(e.from),to:function(e){return"string"==typeof e?()=>[e]:e instanceof Array?()=>e:e}(e.to)}))}(e.config.get("typing.transformations")),t=new ad(e.model,e=>{for(const t of i)if(t.from.test(e))return{normalizedTransformation:t}});t.on("matched:data",(e,t)=>{if(o.isInput(t.batch)){const{from:i,to:n}=t.normalizedTransformation,c=i.exec(t.text),d=n(c.slice(1)),h=t.range;let l=c.index;u.enqueueChange(t=>{for(let e=1;e<c.length;e++){var i=c[e],n=d[e-1];if(null!=n){const r=h.start.getShiftedBy(l),s=u.createRange(r,r.getShiftedBy(i.length)),a=((o=r).textNode||o.nodeAfter).getAttributes();u.insertContent(t.createText(n,a),s),l+=n.length}else l+=i.length}var o})}}),t.bind("isEnabled").to(this)}}],bp.defaultConfig={toolbar:{items:["heading","|","bold","italic","link","bulletedList","numberedList","|","outdent","indent","|","uploadImage","blockQuote","insertTable","mediaEmbed","undo","redo"]},image:{toolbar:["imageStyle:inline","imageStyle:block","imageStyle:side","|","toggleImageCaption","imageTextAlternative"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},language:"en"}}],n={},o.m=i,o.c=n,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=108).default;function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var i,n});
var Iconify=function(){"use strict";function e(e,n,t){return e(t={path:n,exports:{},require:function(e,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==n&&t.path)}},t.exports),t.exports}var l=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.fullIcon=n.iconDefaults=n.minifyProps=n.matchName=void 0,n.matchName=/^[a-z0-9]+(-[a-z0-9]+)*$/,n.minifyProps=["width","height","top","left"],n.iconDefaults=Object.freeze({left:0,top:0,width:16,height:16,rotate:0,vFlip:!1,hFlip:!1}),n.fullIcon=function(e){return Object.assign({},n.iconDefaults,e)}}),s=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.mergeIconData=void 0,n.mergeIconData=function(e,n){var t,o=Object.assign({},e);for(t in l.iconDefaults){var r=t;if(void 0!==n[r]){var i=n[r];if(void 0!==o[r])switch(r){case"rotate":o[r]=(o[r]+i)%4;break;case"hFlip":case"vFlip":o[r]=i!==o[r];break;default:o[r]=i}else o[r]=i}}return o}}),c=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.parseIconSet=void 0;var u=Object.keys(l.iconDefaults);n.parseIconSet=function(n,t,o){void 0===o&&(o="none");var r=[];if("object"!=typeof n)return"none"!==o&&r;if(n.not_found instanceof Array&&n.not_found.forEach(function(e){t(e,null),"all"===o&&r.push(e)}),"object"!=typeof n.icons)return"none"!==o&&r;var i=Object.create(null);u.forEach(function(e){void 0!==n[e]&&"object"!=typeof n[e]&&(i[e]=n[e])});var c,a=n.icons;return Object.keys(a).forEach(function(e){var n=a[e];"string"==typeof n.body&&(t(e,Object.freeze(Object.assign({},l.iconDefaults,i,n))),r.push(e))}),"object"==typeof n.aliases&&(c=n.aliases,Object.keys(c).forEach(function(e){var n=function e(n,t,o,r){void 0===r&&(r=0);var i=n.parent;if(void 0!==t[i])return s.mergeIconData(t[i],n);if(void 0!==o[i]){if(2<r)return null;if(r=e(o[i],t,o,r+1))return s.mergeIconData(r,n)}return null}(c[e],a,c,1);n&&(t(e,Object.freeze(Object.assign({},l.iconDefaults,i,n))),r.push(e))})),"none"===o?0<r.length:r}}),a=e(function(e,c){Object.defineProperty(c,"__esModule",{value:!0}),c.validateIcon=c.stringToIcon=void 0,c.stringToIcon=function(e,n,t,o){void 0===o&&(o="");var r=e.split(":");if("@"===e.slice(0,1)){if(r.length<2||3<r.length)return null;o=r.shift().slice(1)}if(3<r.length||!r.length)return null;if(1<r.length){var i=r.pop(),e=r.pop(),i={provider:0<r.length?r[0]:o,prefix:e,name:i};return n&&!c.validateIcon(i)?null:i}i=r[0],r=i.split("-");if(1<r.length){r={provider:o,prefix:r.shift(),name:r.join("-")};return n&&!c.validateIcon(r)?null:r}if(t&&""===o){i={provider:o,prefix:"",name:i};return n&&!c.validateIcon(i,t)?null:i}return null},c.validateIcon=function(e,n){return!!e&&!(""!==e.provider&&!e.provider.match(l.matchName)||!(n&&""===e.prefix||e.prefix.match(l.matchName))||!e.name.match(l.matchName))}}),h=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.listIcons=n.getIcon=n.iconExists=n.addIcon=n.addIconSet=n.getStorage=n.newStorage=void 0;var r=Object.create(null);function o(e,n){return{provider:e,prefix:n,icons:Object.create(null),missing:Object.create(null)}}function i(e,n){void 0===r[e]&&(r[e]=Object.create(null));var t=r[e];return void 0===t[n]&&(t[n]=o(e,n)),t[n]}n.newStorage=o,n.getStorage=i,n.addIconSet=function(t,e,n){void 0===n&&(n="none");var o=Date.now();return c.parseIconSet(e,function(e,n){null===n?t.missing[e]=o:t.icons[e]=n},n)},n.addIcon=function(e,n,t){try{if("string"==typeof t.body)return e.icons[n]=Object.freeze(l.fullIcon(t)),!0}catch(e){}return!1},n.iconExists=function(e,n){return void 0!==e.icons[n]},n.getIcon=function(e,n){n=e.icons[n];return void 0===n?null:n},n.listIcons=function(e,n){var o=[];return("string"==typeof e?[e]:Object.keys(r)).forEach(function(t){("string"==typeof t&&"string"==typeof n?[n]:void 0===r[t]?[]:Object.keys(r[t])).forEach(function(n){var e=i(t,n),e=Object.keys(e.icons).map(function(e){return(""!==t?"@"+t+":":"")+n+":"+e});o=o.concat(e)})}),o}}),g=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.storageFunctions=n.addCollection=n.addIcon=n.getIconData=n.allowSimpleNames=void 0;var o=!1;function t(e){e="string"==typeof e?a.stringToIcon(e,!0,o):e;return e?h.getIcon(h.getStorage(e.provider,e.prefix),e.name):null}function r(e,n){var t=a.stringToIcon(e,!0,o);if(!t)return!1;e=h.getStorage(t.provider,t.prefix);return h.addIcon(e,t.name,n)}function i(e,n){if("object"!=typeof e)return!1;if("string"!=typeof n&&(n="string"==typeof e.provider?e.provider:""),o&&""===n&&("string"!=typeof e.prefix||""===e.prefix)){var t=!1;return c.parseIconSet(e,function(e,n){null!==n&&r(e,n)&&(t=!0)}),t}if("string"!=typeof e.prefix||!a.validateIcon({provider:n,prefix:e.prefix,name:"a"}))return!1;n=h.getStorage(n,e.prefix);return!!h.addIconSet(n,e)}n.allowSimpleNames=function(e){return o="boolean"==typeof e?e:o},n.getIconData=t,n.addIcon=r,n.addCollection=i,n.storageFunctions={iconExists:function(e){return null!==t(e)},getIcon:function(e){e=t(e);return e?Object.assign({},e):null},listIcons:h.listIcons,addIcon:r,addCollection:i}}),y=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.replaceIDs=void 0;var r=/\sid="(\S+)"/g,i="([^A-Za-z0-9_-])",c="IconifyId-"+Date.now().toString(16)+"-"+(16777216*Math.random()|0).toString(16)+"-",a=0;n.replaceIDs=function(t,o){void 0===o&&(o=c);for(var e,n=[];e=r.exec(t);)n.push(e[1]);return n.length&&n.forEach(function(e){var n="function"==typeof o?o():o+a++;t=t.replace(new RegExp(i+"("+e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+")"+i,"g"),"$1"+n+"$3")}),t}}),r=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.calculateSize=void 0;var u=/(-?[0-9.]*[0-9]+[0-9.]*)/g,l=/^-?[0-9.]*[0-9]+[0-9.]*$/g;n.calculateSize=function(e,n,t){if(1===n)return e;if(t=void 0===t?100:t,"number"==typeof e)return Math.ceil(e*n*t)/t;if("string"!=typeof e)return e;var o=e.split(u);if(null===o||!o.length)return e;for(var r,i=[],c=o.shift(),a=l.test(c);;){if(a?(r=parseFloat(c),isNaN(r)?i.push(c):i.push(Math.ceil(r*n*t)/t)):i.push(c),void 0===(c=o.shift()))return i.join("");a=!a}}}),I=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.mergeCustomisations=n.defaults=void 0,n.defaults=Object.freeze({inline:!1,width:null,height:null,hAlign:"center",vAlign:"middle",slice:!1,hFlip:!1,vFlip:!1,rotate:0}),n.mergeCustomisations=function(e,n){var t,o={};for(t in e){var r=t;if(o[r]=e[r],void 0!==n[r]){var i=n[r];switch(r){case"inline":case"slice":"boolean"==typeof i&&(o[r]=i);break;case"hFlip":case"vFlip":!0===i&&(o[r]=!o[r]);break;case"hAlign":case"vAlign":"string"==typeof i&&""!==i&&(o[r]=i);break;case"width":case"height":("string"==typeof i&&""!==i||"number"==typeof i&&i||null===i)&&(o[r]=i);break;case"rotate":"number"==typeof i&&(o[r]+=i)}}}return o}}),j=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.iconToSVG=void 0,n.iconToSVG=function(e,n){var t,i={left:e.left,top:e.top,width:e.width,height:e.height},c=e.body;[e,n].forEach(function(e){var n,t=[],o=e.hFlip,r=e.vFlip,e=e.rotate;switch(o?r?e+=2:(t.push("translate("+(i.width+i.left)+" "+(0-i.top)+")"),t.push("scale(-1 1)"),i.top=i.left=0):r&&(t.push("translate("+(0-i.left)+" "+(i.height+i.top)+")"),t.push("scale(1 -1)"),i.top=i.left=0),e<0&&(e-=4*Math.floor(e/4)),e%=4){case 1:n=i.height/2+i.top,t.unshift("rotate(90 "+n+" "+n+")");break;case 2:t.unshift("rotate(180 "+(i.width/2+i.left)+" "+(i.height/2+i.top)+")");break;case 3:n=i.width/2+i.left,t.unshift("rotate(-90 "+n+" "+n+")")}e%2==1&&(0===i.left&&0===i.top||(n=i.left,i.left=i.top,i.top=n),i.width!==i.height&&(n=i.width,i.width=i.height,i.height=n)),t.length&&(c='<g transform="'+t.join(" ")+'">'+c+"</g>")}),null===n.width&&null===n.height?t=r.calculateSize(o="1em",i.width/i.height):null!==n.width&&null!==n.height?(t=n.width,o=n.height):null!==n.height?(o=n.height,t=r.calculateSize(o,i.width/i.height)):(t=n.width,o=r.calculateSize(t,i.height/i.width));var o={attributes:{width:t="string"==typeof(t="auto"===t?i.width:t)?t:t+"",height:o="string"==typeof(o="auto"===o?i.height:o)?o:o+"",preserveAspectRatio:function(e){var n="";switch(e.hAlign){case"left":n+="xMin";break;case"right":n+="xMax";break;default:n+="xMid"}switch(e.vAlign){case"top":n+="YMin";break;case"bottom":n+="YMax";break;default:n+="YMid"}return n+(e.slice?" slice":" meet")}(n),viewBox:i.left+" "+i.top+" "+i.width+" "+i.height},body:c};return n.inline&&(o.inline=!0),o}}),n=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.builderFunctions=void 0,n.builderFunctions={replaceIDs:y.replaceIDs,calculateSize:r.calculateSize,buildIcon:function(e,n){return j.iconToSVG(l.fullIcon(e),I.mergeCustomisations(I.defaults,n))}}}),m=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.coreModules=void 0,n.coreModules={}}),o=e(function(e,c){Object.defineProperty(c,"__esModule",{value:!0}),c.storeCache=c.loadCache=c.mock=c.emptyList=c.count=c.config=void 0;var r="iconify2",l="iconify",o="iconify-count",i="iconify-version",n=!(c.config={local:!0,session:!0});c.count={local:0,session:0},c.emptyList={local:[],session:[]};var t="undefined"==typeof window?{}:window;function s(e){var n=e+"Storage";try{if(t&&t[n]&&"number"==typeof t[n].length)return t[n]}catch(e){}return c.config[e]=!1,null}function f(e,n,t){try{return e.setItem(o,t+""),c.count[n]=t,1}catch(e){return}}function d(e){e=e.getItem(o);return e&&parseInt(e)||0}c.mock=function(e){n=!1,t=e},c.loadCache=function(){if(!n){n=!0;var e,u=Math.floor(Date.now()/36e5)-168;for(e in c.config)!function(e){var a=s(e);if(a)try{var n=a.getItem(i);if(n!==r)return n&&function(e){try{for(var n=d(e),t=0;t<n;t++)e.removeItem(l+t)}catch(e){}}(a),function(e,n){try{e.setItem(i,r)}catch(e){}f(e,n,0)}(a,e);for(var t=d(a),o=t-1;0<=o;o--)!function(n){var e=l+n,t=a.getItem(e);if("string"!=typeof t)return!1;n=!0;try{var o,r,i,c=JSON.parse(t);n=!("object"!=typeof c||"number"!=typeof c.cached||c.cached<u||"string"!=typeof c.provider||"object"!=typeof c.data||"string"!=typeof c.data.prefix)&&(o=c.provider,r=c.data.prefix,i=h.getStorage(o,r),h.addIconSet(i,c.data))}catch(e){n=!1}return n||a.removeItem(e),n}(o)&&(o===t-1?t--:c.emptyList[e].push(o));f(a,e,t)}catch(e){}}(e)}},c.storeCache=function(r,i){function e(e){if(c.config[e]){var n=s(e);if(n){var t=c.emptyList[e].shift();if(void 0!==t||f(n,e,(t=c.count[e])+1)){try{var o={cached:Math.floor(Date.now()/36e5),provider:r,data:i};n.setItem(l+t,JSON.stringify(o))}catch(e){return}return 1}}}}n||c.loadCache(),e("local")||e("session")}}),t=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toggleBrowserCache=void 0,n.toggleBrowserCache=function(e,n){switch(e){case"local":case"session":o.config[e]=n;break;case"all":for(var t in o.config)o.config[t]=n}}}),u=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.defaultConfig=void 0,n.defaultConfig={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1}}),f=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.sendQuery=void 0,n.sendQuery=function(c,o,r,e,a){var n=c.resources.length,n=c.random?Math.floor(Math.random()*n):c.index;if(c.random){for(var t=c.resources.slice(0),u=[];1<t.length;){var i=Math.floor(Math.random()*t.length);u.push(t[i]),t=t.slice(0,i).concat(t.slice(i+1))}u=u.concat(t)}else u=c.resources.slice(n).concat(c.resources.slice(0,n));var l=Date.now(),s="pending",f=0,d=void 0,p=null,v=[],h=[];function g(){p&&(clearTimeout(p),p=null)}function m(){"pending"===s&&(s="aborted"),g(),v.forEach(function(e){e.abort&&e.abort(),"pending"===e.status&&(e.status="aborted")}),v=[]}function b(e,n){n&&(h=[]),"function"==typeof e&&h.push(e)}function y(){return{startTime:l,payload:o,status:s,queriesSent:f,queriesPending:v.length,subscribe:b,abort:m}}function I(){s="failed",h.forEach(function(e){e(void 0,d)})}function j(){v=v.filter(function(e){return"pending"===e.status&&(e.status="aborted"),e.abort&&e.abort(),!1})}return"function"==typeof e&&h.push(e),setTimeout(function i(){{var e,t,n;"pending"===s&&(g(),void 0!==(e=u.shift())?(t={getQueryStatus:y,status:"pending",resource:e,done:function(e,n){!function(n,t,e){var o,r=void 0===t;switch(v=v.filter(function(e){return e!==n}),s){case"pending":break;case"failed":if(r||!c.dataAfterTimeout)return;break;default:return}if(r)return void 0!==e&&(d=e),v.length||(u.length?i:I)();g(),j(),a&&!c.random&&-1!==(o=c.resources.indexOf(n.resource))&&o!==c.index&&a(o),s="completed",h.forEach(function(e){e(t)})}(t,e,n)}},v.push(t),f++,n="function"==typeof c.rotate?c.rotate(f,l):c.rotate,p=setTimeout(i,n),r(e,o,t)):v.length&&(e="function"==typeof c.timeout?c.timeout(l):c.timeout)?p=setTimeout(function(){g(),"pending"===s&&(j(),I())},e):I())}}),y}}),i=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.initRedundancy=void 0,n.initRedundancy=function(e){var o=function(e){if(!("object"==typeof e&&"object"==typeof e.resources&&e.resources instanceof Array&&e.resources.length))throw new Error("Invalid Reduncancy configuration");var n,t=Object.create(null);for(n in u.defaultConfig)void 0!==e[n]?t[n]=e[n]:t[n]=u.defaultConfig[n];return t}(e),r=[];function i(){r=r.filter(function(e){return"pending"===e().status})}return{query:function(e,n,t){n=f.sendQuery(o,e,n,function(e,n){i(),t&&t(e,n)},function(e){o.index=e});return r.push(n),n},find:function(n){var e=r.find(function(e){return n(e)});return void 0!==e?e:null},setIndex:function(e){o.index=e},getIndex:function(){return o.index},cleanup:i}}}),b=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.sortIcons=void 0,n.sortIcons=function(e){var r={loaded:[],missing:[],pending:[]},i=Object.create(null);e.sort(function(e,n){return e.provider!==n.provider?e.provider.localeCompare(n.provider):e.prefix!==n.prefix?e.prefix.localeCompare(n.prefix):e.name.localeCompare(n.name)});var c={provider:"",prefix:"",name:""};return e.forEach(function(e){var n,t,o;c.name===e.name&&c.prefix===e.prefix&&c.provider===e.provider||(n=(c=e).provider,t=e.prefix,o=e.name,void 0===i[n]&&(i[n]=Object.create(null)),void 0===(e=i[n])[t]&&(e[t]=h.getStorage(n,t)),(void 0!==(e=e[t]).icons[o]?r.loaded:""===t||void 0!==e.missing[o]?r.missing:r.pending).push({provider:n,prefix:t,name:o}))}),r}}),x=e(function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.storeCallback=a.updateCallbacks=a.callbacks=void 0,a.callbacks=Object.create(null);var t=Object.create(null);function u(e,o){e.forEach(function(e){var n,t=e.provider;void 0===a.callbacks[t]||(e=(n=a.callbacks[t])[t=e.prefix])&&(n[t]=e.filter(function(e){return e.id!==o}))})}a.updateCallbacks=function(i,c){void 0===t[i]&&(t[i]=Object.create(null));var n=t[i];n[c]||(n[c]=!0,setTimeout(function(){var e,o,r;n[c]=!1,void 0!==a.callbacks[i]&&void 0!==a.callbacks[i][c]&&(e=a.callbacks[i][c].slice(0)).length&&(o=h.getStorage(i,c),r=!1,e.forEach(function(e){var n=e.icons,t=n.pending.length;n.pending=n.pending.filter(function(e){if(e.prefix!==c)return!0;e=e.name;if(void 0!==o.icons[e])n.loaded.push({provider:i,prefix:c,name:e});else{if(void 0===o.missing[e])return r=!0;n.missing.push({provider:i,prefix:c,name:e})}return!1}),n.pending.length!==t&&(r||u([{provider:i,prefix:c}],e.id),e.callback(n.loaded.slice(0),n.missing.slice(0),n.pending.slice(0),e.abort))}))}))};var c=0;a.storeCallback=function(e,n,t){var o=c++,r=u.bind(null,t,o);if(!n.pending.length)return r;var i={id:o,icons:n,callback:e,abort:r};return t.forEach(function(e){var n=e.provider,e=e.prefix;void 0===a.callbacks[n]&&(a.callbacks[n]=Object.create(null));n=a.callbacks[n];void 0===n[e]&&(n[e]=[]),n[e].push(i)}),r}}),O=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAPIModule=n.setAPIModule=void 0;var t=Object.create(null);n.setAPIModule=function(e,n){t[e]=n},n.getAPIModule=function(e){return void 0===t[e]?t[""]:t[e]}}),P=e(function(e,n){function t(e){var n;if("string"==typeof e.resources)n=[e.resources];else if(!((n=e.resources)instanceof Array&&n.length))return null;return{resources:n,path:void 0===e.path?"/":e.path,maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:!0===e.random,index:e.index||0,dataAfterTimeout:!1!==e.dataAfterTimeout}}Object.defineProperty(n,"__esModule",{value:!0}),n.getAPIConfig=n.setAPIConfig=void 0;for(var o=Object.create(null),r=["https://api.simplesvg.com","https://api.unisvg.com"],i=[];0<r.length;)1===r.length||.5<Math.random()?i.push(r.shift()):i.push(r.pop());o[""]=t({resources:["https://api.iconify.design"].concat(i)}),n.setAPIConfig=function(e,n){n=t(n);return null!==n&&(o[e]=n,!0)},n.getAPIConfig=function(e){return o[e]}}),w=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getProviders=n.listToIcons=void 0,n.listToIcons=function(e,n,t){void 0===n&&(n=!0),void 0===t&&(t=!1);var o=[];return e.forEach(function(e){e="string"==typeof e?a.stringToIcon(e,!1,t):e;n&&!a.validateIcon(e,t)||o.push({provider:e.provider,prefix:e.prefix,name:e.name})}),o},n.getProviders=function(e){var n=Object.create(null);return e.forEach(function(e){n[e.provider]=!0}),Object.keys(n)}}),d=e(function(e,n){function l(){}Object.defineProperty(n,"__esModule",{value:!0}),n.API=n.getRedundancyCache=void 0;var f=Object.create(null),t=Object.create(null),d=Object.create(null),c=Object.create(null),o=Object.create(null);function p(e){if(void 0===o[e]){var n=P.getAPIConfig(e);if(!n)return;n={config:n,redundancy:i.initRedundancy(n)};o[e]=n}return o[e]}n.getRedundancyCache=p;var v=Object.create(null);function s(a,u,e){function o(){var e=(""===a?"":"@"+a+":")+u,n=Math.floor(Date.now()/6e4);v[e]<n&&(v[e]=n,console.error('Unable to retrieve icons for "'+e+'" because API is not configured properly.'))}void 0===t[a]&&(t[a]=Object.create(null));var r=t[a];void 0===c[a]&&(c[a]=Object.create(null));var i=c[a];void 0===f[a]&&(f[a]=Object.create(null));var l,s=f[a];void 0===r[u]?r[u]=e:r[u]=r[u].concat(e).sort(),i[u]||(i[u]=!0,setTimeout(function(){i[u]=!1;var e=r[u];delete r[u];var n=O.getAPIModule(a);if(n){if(void 0===l){var t=p(a);if(void 0===t)return void o();l=t}n.prepare(a,u,e).forEach(function(c){l.redundancy.query(c,n.send,function(e,n){var t=h.getStorage(a,u);if("object"!=typeof e){if(404!==n)return;var o=Date.now();c.icons.forEach(function(e){t.missing[e]=o})}else try{var r=h.addIconSet(t,e,"all");if("boolean"==typeof r)return;var i=s[u];r.forEach(function(e){delete i[e]}),m.coreModules.cache&&m.coreModules.cache(a,e)}catch(e){console.error(e)}!function(e,n){void 0===d[e]&&(d[e]=Object.create(null));var t=d[e];t[n]||(t[n]=!0,setTimeout(function(){t[n]=!1,x.updateCallbacks(e,n)}))}(a,u)})})}else o()}))}n.API={isPending:function(e){return void 0!==f[e.provider]&&void 0!==f[e.provider][e.prefix]&&void 0!==f[e.provider][e.prefix][e.name]},loadIcons:function(e,n){var e=w.listToIcons(e,!0,g.allowSimpleNames()),t=b.sortIcons(e);if(!t.pending.length){var o=!0;return n&&setTimeout(function(){o&&n(t.loaded,t.missing,t.pending,l)}),function(){o=!1}}var r,i,c=Object.create(null),a=[];t.pending.forEach(function(e){var n=e.provider,t=e.prefix;t===i&&n===r||(r=n,i=t,a.push({provider:n,prefix:t}),void 0===f[n]&&(f[n]=Object.create(null)),void 0===(e=f[n])[t]&&(e[t]=Object.create(null)),void 0===c[n]&&(c[n]=Object.create(null)),void 0===(n=c[n])[t]&&(n[t]=[]))});var u=Date.now();return t.pending.forEach(function(e){var n=e.provider,t=e.prefix,o=e.name,e=f[n][t];void 0===e[o]&&(e[o]=u,c[n][t].push(o))}),a.forEach(function(e){var n=e.provider,e=e.prefix;c[n][e].length&&s(n,e,c[n][e])}),n?x.storeCallback(n,t,a):l}}}),p=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.APIInternalFunctions=n.APIFunctions=void 0,n.APIFunctions={loadIcons:d.API.loadIcons,addAPIProvider:P.setAPIConfig},n.APIInternalFunctions={getAPI:d.getRedundancyCache,getAPIConfig:P.getAPIConfig,setAPIModule:O.setAPIModule}}),v=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAPIModule=void 0;var o=null,s="{prefix}.js?icons={icons}&callback={callback}",l=Object.create(null),f=Object.create(null);function d(){var e,n,t;return null===o&&(t=self,n=".cb",o=void 0===t[e="Iconify"]?(n="",void 0===t[e="IconifyJSONP"]&&(t[e]=Object.create(null)),t[e]):(void 0===(t=t[e]).cb&&(t.cb=Object.create(null)),t.cb),s=s.replace("{callback}",e+n+".{cb}")),o}n.getAPIModule=function(u){return{prepare:function(t,o,e){var r=[],i=l[t+":"+o];void 0===i&&(i=function(e,n){var t,o=u(e);if(!o)return 0;var r=o.maxURL?(t=0,o.resources.forEach(function(e){t=Math.max(t,e.length)}),d(),o.maxURL-t-o.path.length-s.replace("{provider}",e).replace("{prefix}",n).replace("{icons}","").length-3):0,n=e+":"+n;return f[n]=o.path,l[n]=r}(t,o));var c={provider:t,prefix:o,icons:[]},a=0;return e.forEach(function(e,n){(a+=e.length+1)>=i&&0<n&&(r.push(c),c={provider:t,prefix:o,icons:[]},a=e.length),c.icons.push(e)}),r.push(c),r},send:function(e,n,t){for(var o=n.provider,r=n.prefix,i=n.icons.join(","),n=o+":"+r,c=r.split("-").shift().slice(0,3),a=d(),u=function(e){for(var n=0,t=e.length-1;0<=t;t--)n+=e.charCodeAt(t);return n%999}(o+":"+e+":"+r+":"+i);void 0!==a[c+u];)u++;var l=c+u,i=f[n]+s.replace("{provider}",o).replace("{prefix}",r).replace("{icons}",i).replace("{cb}",l);a[l]=function(e){delete a[l],t.done(e)};e+=i,i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,document.head.appendChild(i)}}}}),M=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAPIModule=n.setFetch=void 0;var l="{prefix}.json?icons={icons}",s=Object.create(null),f=Object.create(null),i=null;try{i=fetch}catch(e){}n.setFetch=function(e){i=e},n.getAPIModule=function(u){return{prepare:function(t,o,e){var r=[],i=s[o];void 0===i&&(i=function(e,n){var t,o=u(e);if(!o)return 0;var r=o.maxURL?(t=0,o.resources.forEach(function(e){t=Math.max(t,e.length)}),o.maxURL-t-o.path.length-l.replace("{provider}",e).replace("{prefix}",n).replace("{icons}","").length):0,n=e+":"+n;return f[n]=o.path,s[n]=r}(t,o));var c={provider:t,prefix:o,icons:[]},a=0;return e.forEach(function(e,n){(a+=e.length+1)>=i&&0<n&&(r.push(c),c={provider:t,prefix:o,icons:[]},a=e.length),c.icons.push(e)}),r.push(c),r},send:function(e,n,t){var o=n.provider,r=n.prefix,n=n.icons.join(","),n=f[o+":"+r]+l.replace("{provider}",o).replace("{prefix}",r).replace("{icons}",n);i?i(e+n).then(function(e){return 200===e.status?e.json():void t.done(void 0,e.status)}).then(function(e){"object"==typeof e&&null!==e&&t.done(e)}).catch(function(e){t.done(void 0,e.errno)}):t.done(void 0,424)}}}}),A="iconifyFinder"+Date.now(),S="iconifyData"+Date.now();function _(e,n,t,o){var r;try{r=document.createElement("span")}catch(e){return o?"":null}var i=j.iconToSVG(t,I.mergeCustomisations(I.defaults,n)),c=e.element,a=e.finder,u=e.name,t=c?c.getAttribute("class"):"",t=a?a.classFilter(t?t.split(/\s+/):[]):[],t='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--'+u.prefix+(""===u.provider?"":" iconify--"+u.provider)+(t.length?" "+t.join(" "):"")+'">'+y.replaceIDs(i.body)+"</svg>";r.innerHTML=t;var l=r.childNodes[0],s=l.style,f=i.attributes;if(Object.keys(f).forEach(function(e){l.setAttribute(e,f[e])}),i.inline&&(s.verticalAlign="-0.125em"),c){for(var d=c.attributes,p=0;p<d.length;p++){var v=d.item(p);if(v){var h=v.name;if("class"!==h&&"style"!==h&&void 0===f[h])try{l.setAttribute(h,v.value)}catch(e){}}}for(var g=c.style,m=0;m<g.length;m++){var b=g[m];s[b]=g[b]}}a&&(l[S]={name:u,status:"loaded",customisations:n},l[A]=a);o=o?r.innerHTML:l;return c&&c.parentNode?c.parentNode.replaceChild(l,c):r.removeChild(l),o}var E=[];function k(e){for(var n=0;n<E.length;n++){var t=E[n];if(("function"==typeof t.node?t.node():t.node)===e)return t}}function C(e,n){void 0===n&&(n=!1);var t=k(e);return t?t.temporary&&(t.temporary=n):E.push(t={node:e,temporary:n}),t}var F=null,T={childList:!0,subtree:!0,attributes:!0};function D(e){var n;e.observer&&((n=e.observer).pendingScan||(n.pendingScan=setTimeout(function(){delete n.pendingScan,F&&F(e)})))}function N(e,n){e.observer.instance.observe(n,T)}function L(e){var n,t=e.observer;t&&t.instance||(n="function"==typeof e.node?e.node():e.node)&&(t||(e.observer=t={paused:0}),t.instance=new MutationObserver(function(e,n){if(e.observer){var t=e.observer;if(!t.pendingScan)for(var o=0;o<n.length;o++){var r=n[o];if(r.addedNodes&&0<r.addedNodes.length||"attributes"===r.type&&void 0!==r.target[A])return void(t.paused||D(e))}}}.bind(null,e)),N(e,n),t.paused||D(e))}function z(){E.forEach(L)}function R(e){e.observer&&((e=e.observer).pendingScan&&(clearTimeout(e.pendingScan),delete e.pendingScan),e.instance&&(e.instance.disconnect(),delete e.instance))}function q(e){(e?[e]:E).forEach(function(e){var n;e.observer?((n=e.observer).paused++,1<n.paused||!n.instance||n.instance.disconnect()):e.observer={paused:1}})}function U(e){(e?[e]:E).forEach(function(e){var n,t;e.observer?!(n=e.observer).paused||(n.paused--,n.paused)||(t="function"==typeof e.node?e.node():e.node)&&(n.instance?N(e,t):L(e)):L(e)})}function V(e,n){n=C(e,n=void 0===n?!1:n);return L(n),n}function G(e){var n,t=k(e);t&&(R(t),n=e,E=E.filter(function(e){e="function"==typeof e.node?e.node():e.node;return n!==e}))}var $=[];function B(e){return null!==(e="string"==typeof e?a.stringToIcon(e):e)&&a.validateIcon(e)?e:null}var Q=!1;function H(){Q||(Q=!0,setTimeout(function(){Q&&(Q=!1,J())}))}function J(e,n){void 0===n&&(n=!1),Q=!1;var o,d=Object.create(null);(e?[e]:E).forEach(function(l){var s,f,e="function"==typeof l.node?l.node():l.node;e&&e.querySelectorAll&&(f=s=!1,function(n){var c=[];$.forEach(function(t){var e=t.find(n);Array.prototype.forEach.call(e,function(e){var n=e;void 0!==n[A]&&n[A]!==t||null!==(e=B(t.name(n)))&&(n[A]=t,c.push({element:n,finder:t,name:e}))})});var e=n.querySelectorAll("svg.iconify");return Array.prototype.forEach.call(e,function(e){var n,t,o=e,r=o[A],i=o[S];r&&i&&(null!==(n=B(r.name(o)))&&(e=!1,n.prefix!==i.name.prefix||n.name!==i.name.name?e=!0:(t=r.customisations(o),function(e,n){var t=Object.keys(e),o=Object.keys(n);if(t.length===o.length){for(var r=0;r<t.length;r++){var i=t[r];if(n[i]!==e[i])return}return 1}}(i.customisations,t)||(e=!0)),e&&c.push({element:o,finder:r,name:n,customisations:t})))}),c}(e).forEach(function(e){var n=e.element,t=e.name,o=t.provider,r=t.prefix,i=t.name,c=n[S];if(void 0!==c&&(null!==(a=c.name)&&null!==t&&a.name===t.name&&a.prefix===t.prefix))switch(c.status){case"missing":return;case"loading":if(m.coreModules.api&&m.coreModules.api.isPending({provider:o,prefix:r,name:i}))return void(s=!0)}var a,u=h.getStorage(o,r);void 0===u.icons[i]?u.missing[i]?n[S]=c={name:t,status:"missing",customisations:{}}:(m.coreModules.api&&!m.coreModules.api.isPending({provider:o,prefix:r,name:i})&&(void 0===d[o]&&(d[o]=Object.create(null)),void 0===(a=d[o])[r]&&(a[r]=Object.create(null)),a[r][i]=!0),n[S]=c={name:t,status:"loading",customisations:{}},s=!0):(!f&&l.observer&&(q(l),f=!0),n=void 0!==e.customisations?e.customisations:e.finder.customisations(n),_(e,n,h.getIcon(u,i)))}),l.temporary&&!s?G(e):n&&s?V(e,!0):f&&l.observer&&U(l))}),m.coreModules.api&&(o=m.coreModules.api,Object.keys(d).forEach(function(t){var e=d[t];Object.keys(e).forEach(function(n){o.loadIcons(Object.keys(e[n]).map(function(e){return{provider:t,prefix:n,name:e}}),H)})}))}var Y=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.rotateFromString=void 0,n.rotateFromString=function(e){var n=e.replace(/^-?[0-9.]*/,"");function t(e){for(;e<0;)e+=4;return e%4}if(""===n){var o=parseInt(e);return isNaN(o)?0:t(o)}if(n!==e){var r=0;switch(n){case"%":r=25;break;case"deg":r=90}if(r){n=parseFloat(e.slice(0,e.length-n.length));return!isNaN(n)&&(n/=r)%1==0?t(n):0}}return 0}}),Z=e(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.alignmentFromString=n.flipFromString=void 0;var o=/[\s,]+/;n.flipFromString=function(n,e){e.split(o).forEach(function(e){switch(e.trim()){case"horizontal":n.hFlip=!0;break;case"vertical":n.vFlip=!0}})},n.alignmentFromString=function(t,e){e.split(o).forEach(function(e){var n=e.trim();switch(n){case"left":case"center":case"right":t.hAlign=n;break;case"top":case"middle":case"bottom":t.vAlign=n;break;case"slice":case"crop":t.slice=!0;break;case"meet":t.slice=!1}})}});function K(e,n){return e.hasAttribute(n)}function W(e,n){return e.getAttribute(n)}var X=["inline","hFlip","vFlip"],ee=["width","height"],ne={find:function(e){return e.querySelectorAll("i.iconify, span.iconify, i.iconify-inline, span.iconify-inline")},name:function(e){return K(e,"data-icon")?W(e,"data-icon"):null},customisations:function(o,e){var n,r=e=void 0===e?{inline:!1}:e,e=o.getAttribute("class");return-1!==(e?e.split(/\s+/):[]).indexOf("iconify-inline")&&(r.inline=!0),K(o,"data-rotate")&&(n=Y.rotateFromString(W(o,"data-rotate")))&&(r.rotate=n),K(o,"data-flip")&&Z.flipFromString(r,W(o,"data-flip")),K(o,"data-align")&&Z.alignmentFromString(r,W(o,"data-align")),X.forEach(function(e){var n,t;K(o,"data-"+e)&&(n="data-"+e,"boolean"==typeof(t=(t=o.getAttribute(n))===n||"true"===t||""!==t&&"false"!==t&&null)&&(r[e]=t))}),ee.forEach(function(e){var n;!K(o,"data-"+e)||""!==(n=W(o,"data-"+e))&&(r[e]=n)}),r},classFilter:function(e){var n=[];return e.forEach(function(e){"iconify"!==e&&""!==e&&"iconify--"!==e.slice(0,9)&&n.push(e)}),n}};function te(e,n,t){var o=g.getIconData(e);return o?_({name:a.stringToIcon(e)},I.mergeCustomisations(I.defaults,n),o,t):null}var oe,re={getVersion:function(){return"2.0.3"},renderSVG:function(e,n){return te(e,n,!1)},renderHTML:function(e,n){return te(e,n,!0)},renderIcon:function(e,n){e=g.getIconData(e);if(!e)return null;n=I.mergeCustomisations(I.defaults,n);return j.iconToSVG(e,n)},scan:function(e){var n;e?(e=k(n=e))?J(e):J({node:n,temporary:!0},!0):J()},observe:function(e){V(e)},stopObserving:function(e){G(e)},pauseObserver:function(e){e?(e=k(e))&&q(e):q()},resumeObserver:function(e){e?(e=k(e))&&U(e):U()}};"undefined"!=typeof document&&"undefined"!=typeof window&&(document.documentElement?C(document.documentElement):E.push({node:function(){return document.documentElement}}),ne=ne,-1===$.indexOf(ne)&&$.push(ne),void 0!==(ne=window).IconifyPreload&&(oe="Invalid IconifyPreload syntax.","object"==typeof(ie=ne.IconifyPreload)&&null!==ie&&(ie instanceof Array?ie:[ie]).forEach(function(e){try{("object"!=typeof e||null===e||e instanceof Array||"object"!=typeof e.icons||"string"!=typeof e.prefix||!g.storageFunctions.addCollection(e))&&console.error(oe)}catch(e){console.error(oe)}})),setTimeout(function(){var e,n;n=null!==F,F!==(e=J)&&(F=e,n&&E.forEach(R)),n?z():(e=z,"complete"===(n=document).readyState||"loading"!==n.readyState&&!n.documentElement.doScroll?e():(n.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e))),J()}));var ie={enableCache:function(e,n){return t.toggleBrowserCache(e,!1!==n)},disableCache:function(e){return t.toggleBrowserCache(e,!0)}},ce={_api:p.APIInternalFunctions};[g.storageFunctions,n.builderFunctions,re,ie,p.APIFunctions].forEach(function(e){for(var n in e)ce[n]=e[n]}),m.coreModules.api=d.API;var ae=M.getAPIModule;try{"undefined"!=typeof document&&"undefined"!=typeof window&&(ae=("function"==typeof fetch&&"function"==typeof Promise?M:v).getAPIModule)}catch(oe){}if(O.setAPIModule("",ae(P.getAPIConfig)),ce._api.setFetch=function(e){M.setFetch(e),ae!==M.getAPIModule&&(ae=M.getAPIModule,O.setAPIModule("",ae(P.getAPIConfig)))},"undefined"!=typeof document&&"undefined"!=typeof window){m.coreModules.cache=o.storeCache,o.loadCache();v=window;if(void 0!==v.IconifyProviders){var ue=v.IconifyProviders;if("object"==typeof ue&&null!==ue)for(var le in ue){var se="IconifyProviders["+le+"] is invalid.";try{var fe=ue[le];if("object"!=typeof fe||!fe||void 0===fe.resources)continue;P.setAPIConfig(le,fe)||console.error(se)}catch(e){console.error(se)}}}}return ce}();try{void 0===self.Iconify&&(self.Iconify=Iconify)}catch(e){}if("object"==typeof exports)try{exports.__esModule=!0,exports.default=Iconify}catch(e){}
!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},e=i[e]=i[e]||[];return-1==e.indexOf(t)&&e.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{};return(i[e]=i[e]||{})[t]=!0,this}},t.off=function(e,t){e=this._events&&this._events[e];if(e&&e.length){t=e.indexOf(t);return-1!=t&&e.splice(t,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var s=i[o];n&&n[s]&&(this.off(e,s),delete n[s]),s.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(t,i){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(e){return i(t,e)}):"object"==typeof module&&module.exports?module.exports=i(t,require("ev-emitter")):t.imagesLoaded=i(t,t.EvEmitter)}("undefined"!=typeof window?window:this,function(t,e){function s(e,t){for(var i in t)e[i]=t[i];return e}function r(e,t,i){if(!(this instanceof r))return new r(e,t,i);var n,o=e;return(o="string"==typeof e?document.querySelectorAll(e):o)?(this.elements=(n=o,Array.isArray(n)?n:"object"==typeof n&&"number"==typeof n.length?d.call(n):[n]),this.options=s({},this.options),"function"==typeof t?i=t:s(this.options,t),i&&this.on("always",i),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(o||e))}function i(e){this.img=e}function n(e,t){this.url=e,this.element=t,this.img=new Image}var h=t.jQuery,a=t.console,d=Array.prototype.slice;(r.prototype=Object.create(e.prototype)).options={},r.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},r.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&m[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background)for(var s=e.querySelectorAll(this.options.background),n=0;n<s.length;n++){var r=s[n];this.addElementBackgroundImages(r)}}};var m={1:!0,9:!0,11:!0};return r.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},r.prototype.addImage=function(e){e=new i(e);this.images.push(e)},r.prototype.addBackground=function(e,t){t=new n(e,t);this.images.push(t)},r.prototype.check=function(){function t(e,t,i){setTimeout(function(){n.progress(e,t,i)})}var n=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},r.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,e,t)},r.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(e=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[e](this))},(i.prototype=Object.create(e.prototype)).check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},i.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},i.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},i.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},i.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(n.prototype=Object.create(i.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},n.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},n.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},(r.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((h=e).fn.imagesLoaded=function(e,t){return new r(this,e,t).jqDeferred.promise(h(this))})})(),r});
!function(e,i){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("jquery")):e.jQueryBridget=i(e,e.jQuery)}(window,function(t,e){"use strict";function i(u,h,d){(d=d||e||t.jQuery)&&(h.prototype.option||(h.prototype.option=function(t){d.isPlainObject(t)&&(this.options=d.extend(!0,this.options,t))}),d.fn[u]=function(t){if("string"!=typeof t)return a=t,this.each(function(t,e){var i=d.data(e,u);i?(i.option(a),i._init()):(i=new h(e,a),d.data(e,u,i))}),this;var o,n,s,r,a,e=l.call(arguments,1);return n=e,r="$()."+u+'("'+(o=t)+'")',(t=this).each(function(t,e){var i=d.data(e,u);i?(e=i[o])&&"_"!=o.charAt(0)?(i=e.apply(i,n),s=void 0===s?i:s):c(r+" is not a valid method"):c(u+" not initialized. Cannot call methods, i.e. "+r)}),void 0!==s?s:t},o(d))}function o(t){!t||t&&t.bridget||(t.bridget=i)}var l=Array.prototype.slice,n=t.console,c=void 0===n?function(){}:function(t){n.error(t)};return o(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},t=i[t]=i[t]||[];return-1==t.indexOf(e)&&t.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){t=this._events&&this._events[t];if(t&&t.length){e=t.indexOf(e);return-1!=e&&t.splice(e,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var o=this._onceEvents&&this._onceEvents[t],n=0;n<i.length;n++){var s=i[n];o&&o[s]&&(this.off(t,s),delete o[s]),s.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function m(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}function f(t){t=getComputedStyle(t);return t||e("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),t}function p(t){if(_||(_=!0,(c=document.createElement("div")).style.width="200px",c.style.padding="1px 2px 3px 4px",c.style.borderStyle="solid",c.style.borderWidth="1px 2px 3px 4px",c.style.boxSizing="border-box",(l=document.body||document.documentElement).appendChild(c),d=f(c),y=200==Math.round(m(d.width)),p.isBoxSizeOuter=y,l.removeChild(c)),(t="string"==typeof t?document.querySelector(t):t)&&"object"==typeof t&&t.nodeType){var e=f(t);if("none"==e.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<v;e++)t[g[e]]=0;return t}();var i={};i.width=t.offsetWidth,i.height=t.offsetHeight;for(var o=i.isBorderBox="border-box"==e.boxSizing,n=0;n<v;n++){var s=g[n],r=e[s],r=parseFloat(r);i[s]=isNaN(r)?0:r}var a=i.paddingLeft+i.paddingRight,u=i.paddingTop+i.paddingBottom,h=i.marginLeft+i.marginRight,d=i.marginTop+i.marginBottom,l=i.borderLeftWidth+i.borderRightWidth,c=i.borderTopWidth+i.borderBottomWidth,t=o&&y,o=m(e.width);!1!==o&&(i.width=o+(t?0:a+l));o=m(e.height);return!1!==o&&(i.height=o+(t?0:u+c)),i.innerWidth=i.width-(a+l),i.innerHeight=i.height-(u+c),i.outerWidth=i.width+h,i.outerHeight=i.height+d,i}var c,l,d}var y,e="undefined"==typeof console?function(){}:function(t){console.error(t)},g=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],v=g.length,_=!1;return p}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var i=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var o=e[i]+"MatchesSelector";if(t[o])return o}}();return function(t,e){return t[i](e)}}),function(e,i){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("desandro-matches-selector")):e.fizzyUIUtils=i(e,e.matchesSelector)}(window,function(i,s){var u={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},e=Array.prototype.slice;u.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?e.call(t):[t]},u.removeFrom=function(t,e){e=t.indexOf(e);-1!=e&&t.splice(e,1)},u.getParent=function(t,e){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,s(t,e))return t},u.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},u.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},u.filterFindElements=function(t,o){t=u.makeArray(t);var n=[];return t.forEach(function(t){if(t instanceof HTMLElement)if(o){s(t,o)&&n.push(t);for(var e=t.querySelectorAll(o),i=0;i<e.length;i++)n.push(e[i])}else n.push(t)}),n},u.debounceMethod=function(t,e,o){o=o||100;var n=t.prototype[e],s=e+"Timeout";t.prototype[e]=function(){var t=this[s];clearTimeout(t);var e=arguments,i=this;this[s]=setTimeout(function(){n.apply(i,e),delete i[s]},o)}},u.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},u.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var h=i.console;return u.htmlInit=function(r,a){u.docReady(function(){var t=u.toDashed(a),o="data-"+t,e=document.querySelectorAll("["+o+"]"),t=document.querySelectorAll(".js-"+t),t=u.makeArray(e).concat(u.makeArray(t)),n=o+"-options",s=i.jQuery;t.forEach(function(e){var t=e.getAttribute(o)||e.getAttribute(n);try{i=t&&JSON.parse(t)}catch(t){return void(h&&h.error("Error parsing "+o+" on "+e.className+": "+t))}var i=new r(e,i);s&&s.data(e,a,i)})})},u}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,function(t,e){"use strict";function i(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var o=document.documentElement.style,n="string"==typeof o.transition?"transition":"WebkitTransition",s="string"==typeof o.transform?"transform":"WebkitTransform",r={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[n],a={transform:s,transition:n,transitionDuration:n+"Duration",transitionProperty:n+"Property",transitionDelay:n+"Delay"},t=i.prototype=Object.create(t.prototype);t.constructor=i,t._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},t.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},t.getSize=function(){this.size=e(this.element)},t.css=function(t){var e,i=this.element.style;for(e in t)i[a[e]||e]=t[e]},t.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),o=t[e?"left":"right"],n=t[i?"top":"bottom"],s=parseFloat(o),r=parseFloat(n),t=this.layout.size;-1!=o.indexOf("%")&&(s=s/100*t.width),-1!=n.indexOf("%")&&(r=r/100*t.height),s=isNaN(s)?0:s,r=isNaN(r)?0:r,s-=e?t.paddingLeft:t.paddingRight,r-=i?t.paddingTop:t.paddingBottom,this.position.x=s,this.position.y=r},t.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),o=this.layout._getOption("originTop"),n=i?"right":"left",s=this.position.x+t[i?"paddingLeft":"paddingRight"];e[i?"left":"right"]=this.getXValue(s),e[n]="";n=o?"bottom":"top",t=this.position.y+t[o?"paddingTop":"paddingBottom"];e[o?"top":"bottom"]=this.getYValue(t),e[n]="",this.css(e),this.emitEvent("layout",[this])},t.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},t.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},t._transitionTo=function(t,e){this.getPosition();var i=this.position.x,o=this.position.y,n=t==this.position.x&&e==this.position.y;this.setPosition(t,e),!n||this.isTransitioning?((n={}).transform=this.getTranslate(t-i,e-o),this.transition({to:n,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})):this.layoutPosition()},t.getTranslate=function(t,e){return"translate3d("+(t=this.layout._getOption("originLeft")?t:-t)+"px, "+(e=this.layout._getOption("originTop")?e:-e)+"px, 0)"},t.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},t.moveTo=t._transitionTo,t.setPosition=function(t,e){this.position.x=parseFloat(t),this.position.y=parseFloat(e)},t._nonTransition=function(t){for(var e in this.css(t.to),t.isCleaning&&this._removeStyles(t.to),t.onTransitionEnd)t.onTransitionEnd[e].call(this)},t.transition=function(t){if(parseFloat(this.layout.options.transitionDuration)){var e,i=this._transn;for(e in t.onTransitionEnd)i.onEnd[e]=t.onTransitionEnd[e];for(e in t.to)i.ingProperties[e]=!0,t.isCleaning&&(i.clean[e]=!0);t.from&&(this.css(t.from),this.element.offsetHeight,0),this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0}else this._nonTransition(t)};var u="opacity,"+s.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()});t.enableTransition=function(){var t;this.isTransitioning||(t="number"==typeof(t=this.layout.options.transitionDuration)?t+"ms":t,this.css({transitionProperty:u,transitionDuration:t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(r,this,!1))},t.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},t.onotransitionend=function(t){this.ontransitionend(t)};var h={"-webkit-transform":"transform"};t.ontransitionend=function(t){var e,i;t.target===this.element&&(e=this._transn,i=h[t.propertyName]||t.propertyName,delete e.ingProperties[i],function(t){for(var e in t)return;return 1}(e.ingProperties)&&this.disableTransition(),i in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[i]),i in e.onEnd&&(e.onEnd[i].call(this),delete e.onEnd[i]),this.emitEvent("transitionEnd",[this]))},t.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(r,this,!1),this.isTransitioning=!1},t._removeStyles=function(t){var e,i={};for(e in t)i[e]="";this.css(i)};var d={transitionProperty:"",transitionDuration:"",transitionDelay:""};return t.removeTransitionStyles=function(){this.css(d)},t.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},t.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},t.remove=function(){return n&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),void this.hide()):void this.removeElem()},t.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},t.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},t.getHideRevealTransitionEndProperty=function(t){var e,t=this.layout.options[t];if(t.opacity)return"opacity";for(e in t)return e},t.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},t.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},t.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},i}),function(n,s){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(t,e,i,o){return s(n,t,e,i,o)}):"object"==typeof module&&module.exports?module.exports=s(n,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):n.Outlayer=s(n,n.EvEmitter,n.getSize,n.fizzyUIUtils,n.Outlayer.Item)}(window,function(t,e,n,o,s){"use strict";function r(t,e){var i=o.getQueryElement(t);i?(this.element=i,h&&(this.$element=h(this.element)),this.options=o.extend({},this.constructor.defaults),this.option(e),e=++d,this.element.outlayerGUID=e,(l[e]=this)._create(),this._getOption("initLayout")&&this.layout()):u&&u.error("Bad element for "+this.constructor.namespace+": "+(i||t))}function a(t){function e(){t.apply(this,arguments)}return(e.prototype=Object.create(t.prototype)).constructor=e}function i(){}var u=t.console,h=t.jQuery,d=0,l={};r.namespace="outlayer",r.Item=s,r.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var c=r.prototype;o.extend(c,e.prototype),c.option=function(t){o.extend(this.options,t)},c._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},r.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},c._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),o.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},c.reloadItems=function(){this.items=this._itemize(this.element.children)},c._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,o=[],n=0;n<e.length;n++){var s=new i(e[n],this);o.push(s)}return o},c._filterFindItemElements=function(t){return o.filterFindElements(t,this.options.itemSelector)},c.getItemElements=function(){return this.items.map(function(t){return t.element})},c.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),t=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},c._init=c.layout,c._resetLayout=function(){this.getSize()},c.getSize=function(){this.size=n(this.element)},c._getMeasurement=function(t,e){var i,o=this.options[t];o?("string"==typeof o?i=this.element.querySelector(o):o instanceof HTMLElement&&(i=o),this[t]=i?n(i)[e]:o):this[t]=0},c.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},c._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},c._layoutItems=function(t,i){var o;this._emitCompleteOnItems("layout",t),t&&t.length&&(o=[],t.forEach(function(t){var e=this._getItemLayoutPosition(t);e.item=t,e.isInstant=i||t.isLayoutInstant,o.push(e)},this),this._processLayoutQueue(o))},c._getItemLayoutPosition=function(){return{x:0,y:0}},c._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},c.updateStagger=function(){var t=this.options.stagger;return null==t?void(this.stagger=0):(this.stagger=function(t){if("number"==typeof t)return t;var t=(e=t.match(/(^\d*\.?\d*)(\w*)/))&&e[1],e=e&&e[2];return t.length?(t=parseFloat(t))*(m[e]||1):0}(t),this.stagger)},c._positionItem=function(t,e,i,o,n){o?t.goTo(e,i):(t.stagger(n*this.stagger),t.moveTo(e,i))},c._postLayout=function(){this.resizeContainer()},c.resizeContainer=function(){var t;!this._getOption("resizeContainer")||(t=this._getContainerSize())&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))},c._getContainerSize=i,c._setContainerMeasure=function(t,e){var i;void 0!==t&&((i=this.size).isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px")},c._emitCompleteOnItems=function(e,t){function i(){s.dispatchEvent(e+"Complete",null,[t])}function o(){++n==r&&i()}var n,s=this,r=t.length;t&&r?(n=0,t.forEach(function(t){t.once(e,o)})):i()},c.dispatchEvent=function(t,e,i){var o=e?[e].concat(i):i;this.emitEvent(t,o),h&&(this.$element=this.$element||h(this.element),e?((e=h.Event(e)).type=t,this.$element.trigger(e,i)):this.$element.trigger(t,i))},c.ignore=function(t){t=this.getItem(t);t&&(t.isIgnored=!0)},c.unignore=function(t){t=this.getItem(t);t&&delete t.isIgnored},c.stamp=function(t){(t=this._find(t))&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},c.unstamp=function(t){(t=this._find(t))&&t.forEach(function(t){o.removeFrom(this.stamps,t),this.unignore(t)},this)},c._find=function(t){if(t)return"string"==typeof t&&(t=this.element.querySelectorAll(t)),o.makeArray(t)},c._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},c._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},c._manageStamp=i,c._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,t=n(t);return{left:e.left-i.left-t.marginLeft,top:e.top-i.top-t.marginTop,right:i.right-e.right-t.marginRight,bottom:i.bottom-e.bottom-t.marginBottom}},c.handleEvent=o.handleEvent,c.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},c.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},c.onresize=function(){this.resize()},o.debounceMethod(r,"onresize",100),c.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},c.needsResizeLayout=function(){var t=n(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},c.addItems=function(t){t=this._itemize(t);return t.length&&(this.items=this.items.concat(t)),t},c.appended=function(t){t=this.addItems(t);t.length&&(this.layoutItems(t,!0),this.reveal(t))},c.prepended=function(t){var e=this._itemize(t);e.length&&(t=this.items.slice(0),this.items=e.concat(t),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(t))},c.reveal=function(t){var i;this._emitCompleteOnItems("reveal",t),t&&t.length&&(i=this.updateStagger(),t.forEach(function(t,e){t.stagger(e*i),t.reveal()}))},c.hide=function(t){var i;this._emitCompleteOnItems("hide",t),t&&t.length&&(i=this.updateStagger(),t.forEach(function(t,e){t.stagger(e*i),t.hide()}))},c.revealItemElements=function(t){t=this.getItems(t);this.reveal(t)},c.hideItemElements=function(t){t=this.getItems(t);this.hide(t)},c.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},c.getItems=function(t){t=o.makeArray(t);var e=[];return t.forEach(function(t){t=this.getItem(t);t&&e.push(t)},this),e},c.remove=function(t){t=this.getItems(t);this._emitCompleteOnItems("remove",t),t&&t.length&&t.forEach(function(t){t.remove(),o.removeFrom(this.items,t)},this)},c.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();t=this.element.outlayerGUID;delete l[t],delete this.element.outlayerGUID,h&&h.removeData(this.element,this.constructor.namespace)},r.data=function(t){t=(t=o.getQueryElement(t))&&t.outlayerGUID;return t&&l[t]},r.create=function(t,e){var i=a(r);return i.defaults=o.extend({},r.defaults),o.extend(i.defaults,e),i.compatOptions=o.extend({},r.compatOptions),i.namespace=t,i.data=r.data,i.Item=a(s),o.htmlInit(i,t),h&&h.bridget&&h.bridget(t,i),i};var m={ms:1,s:1e3};return r.Item=s,r}),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/item",["outlayer/outlayer"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.Item=e(t.Outlayer))}(window,function(t){"use strict";function e(){t.Item.apply(this,arguments)}var i=e.prototype=Object.create(t.Item.prototype),o=i._create;i._create=function(){this.id=this.layout.itemGUID++,o.call(this),this.sortData={}},i.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var t,e=this.layout.options.getSortData,i=this.layout._sorters;for(t in e){var o=i[t];this.sortData[t]=o(this.element,this)}}};var n=i.destroy;return i.destroy=function(){n.apply(this,arguments),this.css({display:""})},e}),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-mode",["get-size/get-size","outlayer/outlayer"],e):"object"==typeof module&&module.exports?module.exports=e(require("get-size"),require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.LayoutMode=e(t.getSize,t.Outlayer))}(window,function(e,i){"use strict";function o(t){(this.isotope=t)&&(this.options=t.options[this.namespace],this.element=t.element,this.items=t.filteredItems,this.size=t.size)}var n=o.prototype;return["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout","_getOption"].forEach(function(t){n[t]=function(){return i.prototype[t].apply(this.isotope,arguments)}}),n.needsVerticalResizeLayout=function(){var t=e(this.isotope.element);return this.isotope.size&&t&&t.innerHeight!=this.isotope.size.innerHeight},n._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},n.getColumnWidth=function(){this.getSegmentSize("column","Width")},n.getRowHeight=function(){this.getSegmentSize("row","Height")},n.getSegmentSize=function(t,e){var i=t+e,o="outer"+e;this._getMeasurement(i,o),this[i]||(t=this.getFirstItemSize(),this[i]=t&&t[o]||this.isotope.size["inner"+e])},n.getFirstItemSize=function(){var t=this.isotope.filteredItems[0];return t&&t.element&&e(t.element)},n.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},n.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},o.modes={},o.create=function(t,e){function i(){o.apply(this,arguments)}return(i.prototype=Object.create(n)).constructor=i,e&&(i.options=e),o.modes[i.prototype.namespace=t]=i},o}),function(t,e){"function"==typeof define&&define.amd?define("masonry-layout/masonry",["outlayer/outlayer","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,function(t,a){var e=t.create("masonry");e.compatOptions.fitWidth="isFitWidth";t=e.prototype;return t._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},t.measureColumns=function(){this.getContainerWidth(),this.columnWidth||(i=(e=this.items[0])&&e.element,this.columnWidth=i&&a(i).outerWidth||this.containerWidth);var t=this.columnWidth+=this.gutter,e=this.containerWidth+this.gutter,i=e/t,t=t-e%t,i=Math[t&&t<1?"round":"floor"](i);this.cols=Math.max(i,1)},t.getContainerWidth=function(){var t=this._getOption("fitWidth")?this.element.parentNode:this.element,t=a(t);this.containerWidth=t&&t.innerWidth},t._getItemLayoutPosition=function(t){t.getSize();for(var e=t.size.outerWidth%this.columnWidth,i=Math[e&&e<1?"round":"ceil"](t.size.outerWidth/this.columnWidth),i=Math.min(i,this.cols),o=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](i,t),e={x:this.columnWidth*o.col,y:o.y},n=o.y+t.size.outerHeight,s=i+o.col,r=o.col;r<s;r++)this.colYs[r]=n;return e},t._getTopColPosition=function(t){var e=this._getTopColGroup(t),t=Math.min.apply(Math,e);return{col:e.indexOf(t),y:t}},t._getTopColGroup=function(t){if(t<2)return this.colYs;for(var e=[],i=this.cols+1-t,o=0;o<i;o++)e[o]=this._getColGroupY(o,t);return e},t._getColGroupY=function(t,e){if(e<2)return this.colYs[t];e=this.colYs.slice(t,t+e);return Math.max.apply(Math,e)},t._getHorizontalColPosition=function(t,e){var i=this.horizontalColIndex%this.cols,i=1<t&&i+t>this.cols?0:i,e=e.size.outerWidth&&e.size.outerHeight;return this.horizontalColIndex=e?i+t:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,t)}},t._manageStamp=function(t){var e=a(t),i=this._getElementOffset(t),o=this._getOption("originLeft")?i.left:i.right,t=o+e.outerWidth,o=Math.floor(o/this.columnWidth),o=Math.max(0,o),n=Math.floor(t/this.columnWidth);n-=t%this.columnWidth?0:1;for(var n=Math.min(this.cols-1,n),s=(this._getOption("originTop")?i.top:i.bottom)+e.outerHeight,r=o;r<=n;r++)this.colYs[r]=Math.max(s,this.colYs[r])},t._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},t._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},t.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},e}),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-modes/masonry",["../layout-mode","masonry-layout/masonry"],e):"object"==typeof module&&module.exports?module.exports=e(require("../layout-mode"),require("masonry-layout")):e(t.Isotope.LayoutMode,t.Masonry)}(window,function(t,e){"use strict";var i,t=t.create("masonry"),o=t.prototype,n={_getElementOffset:!0,layout:!0,_getMeasurement:!0};for(i in e.prototype)n[i]||(o[i]=e.prototype[i]);var s=o.measureColumns;o.measureColumns=function(){this.items=this.isotope.filteredItems,s.call(this)};var r=o._getOption;return o._getOption=function(t){return"fitWidth"==t?void 0!==this.options.isFitWidth?this.options.isFitWidth:this.options.fitWidth:r.apply(this.isotope,arguments)},t}),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-modes/fit-rows",["../layout-mode"],e):"object"==typeof exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window,function(t){"use strict";var e=t.create("fitRows"),t=e.prototype;return t._resetLayout=function(){this.x=0,this.y=0,this.maxY=0,this._getMeasurement("gutter","outerWidth")},t._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth+this.gutter,i=this.isotope.size.innerWidth+this.gutter;0!==this.x&&e+this.x>i&&(this.x=0,this.y=this.maxY);i={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+t.size.outerHeight),this.x+=e,i},t._getContainerSize=function(){return{height:this.maxY}},e}),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-modes/vertical",["../layout-mode"],e):"object"==typeof module&&module.exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window,function(t){"use strict";var e=t.create("vertical",{horizontalAlignment:0}),t=e.prototype;return t._resetLayout=function(){this.y=0},t._getItemLayoutPosition=function(t){t.getSize();var e=(this.isotope.size.innerWidth-t.size.outerWidth)*this.options.horizontalAlignment,i=this.y;return this.y+=t.size.outerHeight,{x:e,y:i}},t._getContainerSize=function(){return{height:this.y}},e}),function(r,a){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","desandro-matches-selector/matches-selector","fizzy-ui-utils/utils","isotope-layout/js/item","isotope-layout/js/layout-mode","isotope-layout/js/layout-modes/masonry","isotope-layout/js/layout-modes/fit-rows","isotope-layout/js/layout-modes/vertical"],function(t,e,i,o,n,s){return a(r,t,0,i,o,n,s)}):"object"==typeof module&&module.exports?module.exports=a(r,require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("fizzy-ui-utils"),require("isotope-layout/js/item"),require("isotope-layout/js/layout-mode"),require("isotope-layout/js/layout-modes/masonry"),require("isotope-layout/js/layout-modes/fit-rows"),require("isotope-layout/js/layout-modes/vertical")):r.Isotope=a(r,r.Outlayer,r.getSize,r.matchesSelector,r.fizzyUIUtils,r.Isotope.Item,r.Isotope.LayoutMode)}(window,function(t,i,e,o,s,n,r){var a=t.jQuery,u=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s+|\s+$/g,"")},h=i.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});h.Item=n,h.LayoutMode=r;n=h.prototype;n._create=function(){for(var t in this.itemGUID=0,this._sorters={},this._getSorters(),i.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"],r.modes)this._initLayoutMode(t)},n.reloadItems=function(){this.itemGUID=0,i.prototype.reloadItems.call(this)},n._itemize=function(){for(var t=i.prototype._itemize.apply(this,arguments),e=0;e<t.length;e++)t[e].id=this.itemGUID++;return this._updateItemsSortData(t),t},n._initLayoutMode=function(t){var e=r.modes[t],i=this.options[t]||{};this.options[t]=e.options?s.extend(e.options,i):i,this.modes[t]=new e(this)},n.layout=function(){return!this._isLayoutInited&&this._getOption("initLayout")?void this.arrange():void this._layout()},n._layout=function(){var t=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,t),this._isLayoutInited=!0},n.arrange=function(t){this.option(t),this._getIsInstant();t=this._filter(this.items);this.filteredItems=t.matches,this._bindArrangeComplete(),this._isInstant?this._noTransition(this._hideReveal,[t]):this._hideReveal(t),this._sort(),this._layout()},n._init=n.arrange,n._hideReveal=function(t){this.reveal(t.needReveal),this.hide(t.needHide)},n._getIsInstant=function(){var t=this._getOption("layoutInstant"),t=void 0!==t?t:!this._isLayoutInited;return this._isInstant=t},n._bindArrangeComplete=function(){function t(){e&&i&&o&&n.dispatchEvent("arrangeComplete",null,[n.filteredItems])}var e,i,o,n=this;this.once("layoutComplete",function(){e=!0,t()}),this.once("hideComplete",function(){i=!0,t()}),this.once("revealComplete",function(){o=!0,t()})},n._filter=function(t){for(var e=this.options.filter,i=[],o=[],n=[],s=this._getFilterTest(e=e||"*"),r=0;r<t.length;r++){var a,u=t[r];u.isIgnored||((a=s(u))&&i.push(u),a&&u.isHidden?o.push(u):a||u.isHidden||n.push(u))}return{matches:i,needReveal:o,needHide:n}},n._getFilterTest=function(e){return a&&this.options.isJQueryFiltering?function(t){return a(t.element).is(e)}:"function"==typeof e?function(t){return e(t.element)}:function(t){return o(t.element,e)}},n.updateSortData=function(t){t=t?(t=s.makeArray(t),this.getItems(t)):this.items;this._getSorters(),this._updateItemsSortData(t)},n._getSorters=function(){var t,e=this.options.getSortData;for(t in e){var i=e[t];this._sorters[t]=d(i)}},n._updateItemsSortData=function(t){for(var e=t&&t.length,i=0;e&&i<e;i++)t[i].updateSortData()};var d=function(t){if("string"!=typeof t)return t;var e,i,o=u(t).split(" "),n=o[0],t=(t=n.match(/^\[(.+)\]$/))&&t[1],s=(i=n,(e=t)?function(t){return t.getAttribute(e)}:function(t){t=t.querySelector(i);return t&&t.textContent}),r=h.sortDataParsers[o[1]];return r?function(t){return t&&r(s(t))}:function(t){return t&&s(t)}};h.sortDataParsers={parseInt:function(t){return parseInt(t,10)},parseFloat:function(t){return parseFloat(t)}},n._sort=function(){var t,r,a;this.options.sortBy&&(t=s.makeArray(this.options.sortBy),this._getIsSameSortBy(t)||(this.sortHistory=t.concat(this.sortHistory)),r=this.sortHistory,a=this.options.sortAscending,this.filteredItems.sort(function(t,e){for(var i=0;i<r.length;i++){var o=r[i],n=t.sortData[o],s=e.sortData[o];if(s<n||n<s)return(s<n?1:-1)*((void 0!==a[o]?a[o]:a)?1:-1)}return 0}))},n._getIsSameSortBy=function(t){for(var e=0;e<t.length;e++)if(t[e]!=this.sortHistory[e])return!1;return!0},n._mode=function(){var t=this.options.layoutMode,e=this.modes[t];if(!e)throw new Error("No layout mode: "+t);return e.options=this.options[t],e},n._resetLayout=function(){i.prototype._resetLayout.call(this),this._mode()._resetLayout()},n._getItemLayoutPosition=function(t){return this._mode()._getItemLayoutPosition(t)},n._manageStamp=function(t){this._mode()._manageStamp(t)},n._getContainerSize=function(){return this._mode()._getContainerSize()},n.needsResizeLayout=function(){return this._mode().needsResizeLayout()},n.appended=function(t){t=this.addItems(t);t.length&&(t=this._filterRevealAdded(t),this.filteredItems=this.filteredItems.concat(t))},n.prepended=function(t){var e=this._itemize(t);e.length&&(this._resetLayout(),this._manageStamps(),t=this._filterRevealAdded(e),this.layoutItems(this.filteredItems),this.filteredItems=t.concat(this.filteredItems),this.items=e.concat(this.items))},n._filterRevealAdded=function(t){t=this._filter(t);return this.hide(t.needHide),this.reveal(t.matches),this.layoutItems(t.matches,!0),t.matches},n.insert=function(t){var e=this.addItems(t);if(e.length){for(var i,o=e.length,n=0;n<o;n++)i=e[n],this.element.appendChild(i.element);t=this._filter(e).matches;for(n=0;n<o;n++)e[n].isLayoutInstant=!0;for(this.arrange(),n=0;n<o;n++)delete e[n].isLayoutInstant;this.reveal(t)}};var l=n.remove;return n.remove=function(t){t=s.makeArray(t);var e=this.getItems(t);l.call(this,t);for(var i=e&&e.length,o=0;i&&o<i;o++){var n=e[o];s.removeFrom(this.filteredItems,n)}},n.shuffle=function(){for(var t=0;t<this.items.length;t++)this.items[t].sortData.random=Math.random();this.options.sortBy="random",this._sort(),this._layout()},n._noTransition=function(t,e){var i=this.options.transitionDuration;this.options.transitionDuration=0;e=t.apply(this,e);return this.options.transitionDuration=i,e},n.getFilteredItemElements=function(){return this.filteredItems.map(function(t){return t.element})},h});
!function(n){"use strict";n.fn.counterUp=function(t){var e=n.extend({time:400,delay:10},t);return this.each(function(){var i=n(this),s=e;i.waypoint(function(){for(var t=[],e=s.time/s.delay,n=i.text(),u=/[0-9]+,[0-9]+/.test(n),n=n.replace(/,/g,""),a=(/^[0-9]+$/.test(n),/^[0-9]+\.[0-9]+$/.test(n)),r=a?(n.split(".")[1]||[]).length:0,o=e;1<=o;o--){var c=parseInt(n/e*o);if(a&&(c=parseFloat(n/e*o).toFixed(r)),u)for(;/(\d+)(\d{3})/.test(c.toString());)c=c.toString().replace(/(\d+)(\d{3})/,"$1,$2");t.unshift(c)}i.data("counterup-nums",t),i.text("0");i.data("counterup-func",function(){i.text(i.data("counterup-nums").shift()),i.data("counterup-nums").length?setTimeout(i.data("counterup-func"),s.delay):(i.data("counterup-nums"),i.data("counterup-nums",null),i.data("counterup-func",null))}),setTimeout(i.data("counterup-func"),s.delay)},{offset:"100%",triggerOnce:!0})})}}(jQuery);
jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(n,t,e,u,a){return jQuery.easing[jQuery.easing.def](n,t,e,u,a)},easeInQuad:function(n,t,e,u,a){return u*(t/=a)*t+e},easeOutQuad:function(n,t,e,u,a){return-u*(t/=a)*(t-2)+e},easeInOutQuad:function(n,t,e,u,a){return(t/=a/2)<1?u/2*t*t+e:-u/2*(--t*(t-2)-1)+e},easeInCubic:function(n,t,e,u,a){return u*(t/=a)*t*t+e},easeOutCubic:function(n,t,e,u,a){return u*((t=t/a-1)*t*t+1)+e},easeInOutCubic:function(n,t,e,u,a){return(t/=a/2)<1?u/2*t*t*t+e:u/2*((t-=2)*t*t+2)+e},easeInQuart:function(n,t,e,u,a){return u*(t/=a)*t*t*t+e},easeOutQuart:function(n,t,e,u,a){return-u*((t=t/a-1)*t*t*t-1)+e},easeInOutQuart:function(n,t,e,u,a){return(t/=a/2)<1?u/2*t*t*t*t+e:-u/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(n,t,e,u,a){return u*(t/=a)*t*t*t*t+e},easeOutQuint:function(n,t,e,u,a){return u*((t=t/a-1)*t*t*t*t+1)+e},easeInOutQuint:function(n,t,e,u,a){return(t/=a/2)<1?u/2*t*t*t*t*t+e:u/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(n,t,e,u,a){return-u*Math.cos(t/a*(Math.PI/2))+u+e},easeOutSine:function(n,t,e,u,a){return u*Math.sin(t/a*(Math.PI/2))+e},easeInOutSine:function(n,t,e,u,a){return-u/2*(Math.cos(Math.PI*t/a)-1)+e},easeInExpo:function(n,t,e,u,a){return 0==t?e:u*Math.pow(2,10*(t/a-1))+e},easeOutExpo:function(n,t,e,u,a){return t==a?e+u:u*(1-Math.pow(2,-10*t/a))+e},easeInOutExpo:function(n,t,e,u,a){return 0==t?e:t==a?e+u:(t/=a/2)<1?u/2*Math.pow(2,10*(t-1))+e:u/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(n,t,e,u,a){return-u*(Math.sqrt(1-(t/=a)*t)-1)+e},easeOutCirc:function(n,t,e,u,a){return u*Math.sqrt(1-(t=t/a-1)*t)+e},easeInOutCirc:function(n,t,e,u,a){return(t/=a/2)<1?-u/2*(Math.sqrt(1-t*t)-1)+e:u/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(n,t,e,u,a){var r=1.70158,i=0,s=u;return 0==t?e:1==(t/=a)?e+u:(i=i||.3*a,r=s<Math.abs(u)?(s=u,i/4):i/(2*Math.PI)*Math.asin(u/s),-(s*Math.pow(2,10*--t)*Math.sin((t*a-r)*(2*Math.PI)/i))+e)},easeOutElastic:function(n,t,e,u,a){var r=1.70158,i=0,s=u;return 0==t?e:1==(t/=a)?e+u:(i=i||.3*a,r=s<Math.abs(u)?(s=u,i/4):i/(2*Math.PI)*Math.asin(u/s),s*Math.pow(2,-10*t)*Math.sin((t*a-r)*(2*Math.PI)/i)+u+e)},easeInOutElastic:function(n,t,e,u,a){var r=1.70158,i=0,s=u;return 0==t?e:2==(t/=a/2)?e+u:(i=i||a*(.3*1.5),r=s<Math.abs(u)?(s=u,i/4):i/(2*Math.PI)*Math.asin(u/s),t<1?s*Math.pow(2,10*--t)*Math.sin((t*a-r)*(2*Math.PI)/i)*-.5+e:s*Math.pow(2,-10*--t)*Math.sin((t*a-r)*(2*Math.PI)/i)*.5+u+e)},easeInBack:function(n,t,e,u,a,r){return u*(t/=a)*t*(((r=null==r?1.70158:r)+1)*t-r)+e},easeOutBack:function(n,t,e,u,a,r){return u*((t=t/a-1)*t*(((r=null==r?1.70158:r)+1)*t+r)+1)+e},easeInOutBack:function(n,t,e,u,a,r){return null==r&&(r=1.70158),(t/=a/2)<1?u/2*(t*t*((1+(r*=1.525))*t-r))+e:u/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:function(n,t,e,u,a){return u-jQuery.easing.easeOutBounce(n,a-t,0,u,a)+e},easeOutBounce:function(n,t,e,u,a){return(t/=a)<1/2.75?u*(7.5625*t*t)+e:t<2/2.75?u*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?u*(7.5625*(t-=2.25/2.75)*t+.9375)+e:u*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(n,t,e,u,a){return t<a/2?.5*jQuery.easing.easeInBounce(n,2*t,0,u,a)+e:.5*jQuery.easing.easeOutBounce(n,2*t-a,0,u,a)+.5*u+e}});
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):window.jQuery||window.Zepto)}(function(c){function e(){}function d(e,t){f.ev.on(n+e+w,t)}function u(e,t,n,o){var i=document.createElement("div");return i.className="mfp-"+e,n&&(i.innerHTML=n),o?t&&t.appendChild(i):(i=c(i),t&&i.appendTo(t)),i}function p(e,t){f.ev.triggerHandler(n+e,t),f.st.callbacks&&(e=e.charAt(0).toLowerCase()+e.slice(1),f.st.callbacks[e]&&f.st.callbacks[e].apply(f,c.isArray(t)?t:[t]))}function m(e){return e===t&&f.currTemplate.closeBtn||(f.currTemplate.closeBtn=c(f.st.closeMarkup.replace("%title%",f.st.tClose)),t=e),f.currTemplate.closeBtn}function r(){c.magnificPopup.instance||((f=new e).init(),c.magnificPopup.instance=f)}var f,o,g,i,h,t,l="Close",v="BeforeClose",y="MarkupParse",C="Open",a="Change",n="mfp",w="."+n,b="mfp-ready",s="mfp-removing",I="mfp-prevent-close",x=!!window.jQuery,k=c(window);e.prototype={constructor:e,init:function(){var e=navigator.appVersion;f.isLowIE=f.isIE8=document.all&&!document.addEventListener,f.isAndroid=/android/gi.test(e),f.isIOS=/iphone|ipad|ipod/gi.test(e),f.supportsTransition=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1}(),f.probablyMobile=f.isAndroid||f.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),g=c(document),f.popupsCache={}},open:function(e){if(!1===e.isObj){f.items=e.items.toArray(),f.index=0;for(var t,n=e.items,o=0;o<n.length;o++)if((t=(t=n[o]).parsed?t.el[0]:t)===e.el[0]){f.index=o;break}}else f.items=c.isArray(e.items)?e.items:[e.items],f.index=e.index||0;if(!f.isOpen){f.types=[],h="",e.mainEl&&e.mainEl.length?f.ev=e.mainEl.eq(0):f.ev=g,e.key?(f.popupsCache[e.key]||(f.popupsCache[e.key]={}),f.currTemplate=f.popupsCache[e.key]):f.currTemplate={},f.st=c.extend(!0,{},c.magnificPopup.defaults,e),f.fixedContentPos="auto"===f.st.fixedContentPos?!f.probablyMobile:f.st.fixedContentPos,f.st.modal&&(f.st.closeOnContentClick=!1,f.st.closeOnBgClick=!1,f.st.showCloseBtn=!1,f.st.enableEscapeKey=!1),f.bgOverlay||(f.bgOverlay=u("bg").on("click"+w,function(){f.close()}),f.wrap=u("wrap").attr("tabindex",-1).on("click"+w,function(e){f._checkIfClose(e.target)&&f.close()}),f.container=u("container",f.wrap)),f.contentContainer=u("content"),f.st.preloader&&(f.preloader=u("preloader",f.container,f.st.tLoading));var i=c.magnificPopup.modules;for(o=0;o<i.length;o++){var r=(r=i[o]).charAt(0).toUpperCase()+r.slice(1);f["init"+r].call(f)}p("BeforeOpen"),f.st.showCloseBtn&&(f.st.closeBtnInside?(d(y,function(e,t,n,o){n.close_replaceWith=m(o.type)}),h+=" mfp-close-btn-in"):f.wrap.append(m())),f.st.alignTop&&(h+=" mfp-align-top"),f.fixedContentPos?f.wrap.css({overflow:f.st.overflowY,overflowX:"hidden",overflowY:f.st.overflowY}):f.wrap.css({top:k.scrollTop(),position:"absolute"}),!1!==f.st.fixedBgPos&&("auto"!==f.st.fixedBgPos||f.fixedContentPos)||f.bgOverlay.css({height:g.height(),position:"absolute"}),f.st.enableEscapeKey&&g.on("keyup"+w,function(e){27===e.keyCode&&f.close()}),k.on("resize"+w,function(){f.updateSize()}),f.st.closeOnContentClick||(h+=" mfp-auto-cursor"),h&&f.wrap.addClass(h);var a=f.wH=k.height(),s={};f.fixedContentPos&&f._hasScrollBar(a)&&((l=f._getScrollbarSize())&&(s.marginRight=l)),f.fixedContentPos&&(f.isIE7?c("body, html").css("overflow","hidden"):s.overflow="hidden");var l=f.st.mainClass;return f.isIE7&&(l+=" mfp-ie7"),l&&f._addClassToMFP(l),f.updateItemHTML(),p("BuildControls"),c("html").css(s),f.bgOverlay.add(f.wrap).prependTo(f.st.prependTo||c(document.body)),f._lastFocusedEl=document.activeElement,setTimeout(function(){f.content?(f._addClassToMFP(b),f._setFocus()):f.bgOverlay.addClass(b),g.on("focusin"+w,f._onFocusIn)},16),f.isOpen=!0,f.updateSize(a),p(C),e}f.updateItemHTML()},close:function(){f.isOpen&&(p(v),f.isOpen=!1,f.st.removalDelay&&!f.isLowIE&&f.supportsTransition?(f._addClassToMFP(s),setTimeout(function(){f._close()},f.st.removalDelay)):f._close())},_close:function(){p(l);var e=s+" "+b+" ";f.bgOverlay.detach(),f.wrap.detach(),f.container.empty(),f.st.mainClass&&(e+=f.st.mainClass+" "),f._removeClassFromMFP(e),f.fixedContentPos&&(e={marginRight:""},f.isIE7?c("body, html").css("overflow",""):e.overflow="",c("html").css(e)),g.off("keyup.mfp focusin"+w),f.ev.off(w),f.wrap.attr("class","mfp-wrap").removeAttr("style"),f.bgOverlay.attr("class","mfp-bg"),f.container.attr("class","mfp-container"),!f.st.showCloseBtn||f.st.closeBtnInside&&!0!==f.currTemplate[f.currItem.type]||f.currTemplate.closeBtn&&f.currTemplate.closeBtn.detach(),f.st.autoFocusLast&&f._lastFocusedEl&&c(f._lastFocusedEl).focus(),f.currItem=null,f.content=null,f.currTemplate=null,f.prevHeight=0,p("AfterClose")},updateSize:function(e){var t;f.isIOS?(t=document.documentElement.clientWidth/window.innerWidth,t=window.innerHeight*t,f.wrap.css("height",t),f.wH=t):f.wH=e||k.height(),f.fixedContentPos||f.wrap.css("height",f.wH),p("Resize")},updateItemHTML:function(){var e=f.items[f.index];f.contentContainer.detach(),f.content&&f.content.detach();var t=(e=!e.parsed?f.parseEl(f.index):e).type;p("BeforeChange",[f.currItem?f.currItem.type:"",t]),f.currItem=e,f.currTemplate[t]||(n=!!f.st[t]&&f.st[t].markup,p("FirstMarkupParse",n),f.currTemplate[t]=!n||c(n)),i&&i!==e.type&&f.container.removeClass("mfp-"+i+"-holder");var n=f["get"+t.charAt(0).toUpperCase()+t.slice(1)](e,f.currTemplate[t]);f.appendContent(n,t),e.preloaded=!0,p(a,e),i=e.type,f.container.prepend(f.contentContainer),p("AfterChange")},appendContent:function(e,t){(f.content=e)?f.st.showCloseBtn&&f.st.closeBtnInside&&!0===f.currTemplate[t]?f.content.find(".mfp-close").length||f.content.append(m()):f.content=e:f.content="",p("BeforeAppend"),f.container.addClass("mfp-"+t+"-holder"),f.contentContainer.append(f.content)},parseEl:function(e){var t,n=f.items[e];if((n=n.tagName?{el:c(n)}:(t=n.type,{data:n,src:n.src})).el){for(var o=f.types,i=0;i<o.length;i++)if(n.el.hasClass("mfp-"+o[i])){t=o[i];break}n.src=n.el.attr("data-mfp-src"),n.src||(n.src=n.el.attr("href"))}return n.type=t||f.st.type||"inline",n.index=e,n.parsed=!0,f.items[e]=n,p("ElementParse",n),f.items[e]},addGroup:function(t,n){function e(e){e.mfpEl=this,f._openClick(e,t,n)}var o="click.magnificPopup";(n=n||{}).mainEl=t,n.items?(n.isObj=!0,t.off(o).on(o,e)):(n.isObj=!1,n.delegate?t.off(o).on(o,n.delegate,e):(n.items=t).off(o).on(o,e))},_openClick:function(e,t,n){if((void 0!==n.midClick?n:c.magnificPopup.defaults).midClick||!(2===e.which||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey)){var o=(void 0!==n.disableOn?n:c.magnificPopup.defaults).disableOn;if(o)if(c.isFunction(o)){if(!o.call(f))return!0}else if(k.width()<o)return!0;e.type&&(e.preventDefault(),f.isOpen&&e.stopPropagation()),n.el=c(e.mfpEl),n.delegate&&(n.items=t.find(n.delegate)),f.open(n)}},updateStatus:function(e,t){var n;f.preloader&&(o!==e&&f.container.removeClass("mfp-s-"+o),n={status:e,text:t=!t&&"loading"===e?f.st.tLoading:t},p("UpdateStatus",n),e=n.status,f.preloader.html(t=n.text),f.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),f.container.addClass("mfp-s-"+e),o=e)},_checkIfClose:function(e){if(!c(e).hasClass(I)){var t=f.st.closeOnContentClick,n=f.st.closeOnBgClick;if(t&&n)return!0;if(!f.content||c(e).hasClass("mfp-close")||f.preloader&&e===f.preloader[0])return!0;if(e===f.content[0]||c.contains(f.content[0],e)){if(t)return!0}else if(n&&c.contains(document,e))return!0;return!1}},_addClassToMFP:function(e){f.bgOverlay.addClass(e),f.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),f.wrap.removeClass(e)},_hasScrollBar:function(e){return(f.isIE7?g.height():document.body.scrollHeight)>(e||k.height())},_setFocus:function(){(f.st.focus?f.content.find(f.st.focus).eq(0):f.wrap).focus()},_onFocusIn:function(e){return e.target===f.wrap[0]||c.contains(f.wrap[0],e.target)?void 0:(f._setFocus(),!1)},_parseMarkup:function(i,e,t){var r;t.data&&(e=c.extend(t.data,e)),p(y,[i,e,t]),c.each(e,function(e,t){return void 0===t||!1===t||void(1<(r=e.split("_")).length?0<(n=i.find(w+"-"+r[0])).length&&("replaceWith"===(o=r[1])?n[0]!==t[0]&&n.replaceWith(t):"img"===o?n.is("img")?n.attr("src",t):n.replaceWith(c("<img>").attr("src",t).attr("class",n.attr("class"))):n.attr(r[1],t)):i.find(w+"-"+e).html(t));var n,o})},_getScrollbarSize:function(){var e;return void 0===f.scrollbarSize&&((e=document.createElement("div")).style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),f.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)),f.scrollbarSize}},c.magnificPopup={instance:null,proto:e.prototype,modules:[],open:function(e,t){return r(),(e=e?c.extend(!0,{},e):{}).isObj=!0,e.index=t||0,this.instance.open(e)},close:function(){return c.magnificPopup.instance&&c.magnificPopup.instance.close()},registerModule:function(e,t){t.options&&(c.magnificPopup.defaults[e]=t.options),c.extend(this.proto,t.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},c.fn.magnificPopup=function(e){r();var t,n,o,i=c(this);return"string"==typeof e?"open"===e?(t=x?i.data("magnificPopup"):i[0].magnificPopup,n=parseInt(arguments[1],10)||0,o=t.items?t.items[n]:(o=i,(o=t.delegate?o.find(t.delegate):o).eq(n)),f._openClick({mfpEl:o},i,t)):f.isOpen&&f[e].apply(f,Array.prototype.slice.call(arguments,1)):(e=c.extend(!0,{},e),x?i.data("magnificPopup",e):i[0].magnificPopup=e,f.addGroup(i,e)),i};function T(){S&&(P.after(S.addClass(_)).detach(),S=null)}var _,P,S,E="inline";c.magnificPopup.registerModule(E,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){f.types.push(E),d(l+"."+E,function(){T()})},getInline:function(e,t){if(T(),e.src){var n,o=f.st.inline,i=c(e.src);return i.length?((n=i[0].parentNode)&&n.tagName&&(P||(_=o.hiddenClass,P=u(_),_="mfp-"+_),S=i.after(P).detach().removeClass(_)),f.updateStatus("ready")):(f.updateStatus("error",o.tNotFound),i=c("<div>")),e.inlineElement=i}return f.updateStatus("ready"),f._parseMarkup(t,{},e),t}}});function z(){M&&c(document.body).removeClass(M)}function O(){z(),f.req&&f.req.abort()}var M,B="ajax";c.magnificPopup.registerModule(B,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){f.types.push(B),M=f.st.ajax.cursor,d(l+"."+B,O),d("BeforeChange."+B,O)},getAjax:function(o){M&&c(document.body).addClass(M),f.updateStatus("loading");var e=c.extend({url:o.src,success:function(e,t,n){n={data:e,xhr:n};p("ParseAjax",n),f.appendContent(c(n.data),B),o.finished=!0,z(),f._setFocus(),setTimeout(function(){f.wrap.addClass(b)},16),f.updateStatus("ready"),p("AjaxContentAdded")},error:function(){z(),o.finished=o.loadError=!0,f.updateStatus("error",f.st.ajax.tError.replace("%url%",o.src))}},f.st.ajax.settings);return f.req=c.ajax(e),""}}});var L;c.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=f.st.image,t=".image";f.types.push("image"),d(C+t,function(){"image"===f.currItem.type&&e.cursor&&c(document.body).addClass(e.cursor)}),d(l+t,function(){e.cursor&&c(document.body).removeClass(e.cursor),k.off("resize"+w)}),d("Resize"+t,f.resizeImage),f.isLowIE&&d("AfterChange",f.resizeImage)},resizeImage:function(){var e,t=f.currItem;t&&t.img&&f.st.image.verticalFit&&(e=0,f.isLowIE&&(e=parseInt(t.img.css("padding-top"),10)+parseInt(t.img.css("padding-bottom"),10)),t.img.css("max-height",f.wH-e))},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,L&&clearInterval(L),e.isCheckingImgSize=!1,p("ImageHasSize",e),e.imgHidden&&(f.content&&f.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(t){var n=0,o=t.img[0],i=function(e){L&&clearInterval(L),L=setInterval(function(){return 0<o.naturalWidth?void f._onImageHasSize(t):(200<n&&clearInterval(L),void(3===++n?i(10):40===n?i(50):100===n&&i(500)))},e)};i(1)},getImage:function(e,t){var n,o=0,i=function(){e&&(e.img[0].complete?(e.img.off(".mfploader"),e===f.currItem&&(f._onImageHasSize(e),f.updateStatus("ready")),e.hasSize=!0,e.loaded=!0,p("ImageLoadComplete")):++o<200?setTimeout(i,100):r())},r=function(){e&&(e.img.off(".mfploader"),e===f.currItem&&(f._onImageHasSize(e),f.updateStatus("error",a.tError.replace("%url%",e.src))),e.hasSize=!0,e.loaded=!0,e.loadError=!0)},a=f.st.image,s=t.find(".mfp-img");return s.length&&((n=document.createElement("img")).className="mfp-img",e.el&&e.el.find("img").length&&(n.alt=e.el.find("img").attr("alt")),e.img=c(n).on("load.mfploader",i).on("error.mfploader",r),n.src=e.src,s.is("img")&&(e.img=e.img.clone()),0<(n=e.img[0]).naturalWidth?e.hasSize=!0:n.width||(e.hasSize=!1)),f._parseMarkup(t,{title:function(e){if(e.data&&void 0!==e.data.title)return e.data.title;var t=f.st.image.titleSrc;if(t){if(c.isFunction(t))return t.call(f,e);if(e.el)return e.el.attr(t)||""}return""}(e),img_replaceWith:e.img},e),f.resizeImage(),e.hasSize?(L&&clearInterval(L),e.loadError?(t.addClass("mfp-loading"),f.updateStatus("error",a.tError.replace("%url%",e.src))):(t.removeClass("mfp-loading"),f.updateStatus("ready"))):(f.updateStatus("loading"),e.loading=!0,e.hasSize||(e.imgHidden=!0,t.addClass("mfp-loading"),f.findImageSize(e))),t}}});var H;c.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,t,n,o,i,r,a=f.st.zoom,s=".zoom";a.enabled&&f.supportsTransition&&(o=a.duration,i=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),n="all "+a.duration/1e3+"s "+a.easing,o={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},e="transition";return o["-webkit-"+e]=o["-moz-"+e]=o["-o-"+e]=o[e]=n,t.css(o),t},r=function(){f.content.css("visibility","visible")},d("BuildControls"+s,function(){f._allowZoom()&&(clearTimeout(t),f.content.css("visibility","hidden"),(e=f._getItemToZoom())?((n=i(e)).css(f._getOffset()),f.wrap.append(n),t=setTimeout(function(){n.css(f._getOffset(!0)),t=setTimeout(function(){r(),setTimeout(function(){n.remove(),e=n=null,p("ZoomAnimationEnded")},16)},o)},16)):r())}),d(v+s,function(){if(f._allowZoom()){if(clearTimeout(t),f.st.removalDelay=o,!e){if(!(e=f._getItemToZoom()))return;n=i(e)}n.css(f._getOffset(!0)),f.wrap.append(n),f.content.css("visibility","hidden"),setTimeout(function(){n.css(f._getOffset())},16)}}),d(l+s,function(){f._allowZoom()&&(r(),n&&n.remove(),e=null)}))},_allowZoom:function(){return"image"===f.currItem.type},_getItemToZoom:function(){return!!f.currItem.hasSize&&f.currItem.img},_getOffset:function(e){var t=e?f.currItem.img:f.st.zoom.opener(f.currItem.el||f.currItem),n=t.offset(),o=parseInt(t.css("padding-top"),10),e=parseInt(t.css("padding-bottom"),10);n.top-=c(window).scrollTop()-o;o={width:t.width(),height:(x?t.innerHeight():t[0].offsetHeight)-e-o};return(H=void 0===H?void 0!==document.createElement("p").style.MozTransform:H)?o["-moz-transform"]=o.transform="translate("+n.left+"px,"+n.top+"px)":(o.left=n.left,o.top=n.top),o}}});function A(e){var t;!f.currTemplate[F]||(t=f.currTemplate[F].find("iframe")).length&&(e||(t[0].src="//about:blank"),f.isIE8&&t.css("display",e?"block":"none"))}var F="iframe";c.magnificPopup.registerModule(F,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){f.types.push(F),d("BeforeChange",function(e,t,n){t!==n&&(t===F?A():n===F&&A(!0))}),d(l+"."+F,function(){A()})},getIframe:function(e,t){var n=e.src,o=f.st.iframe;c.each(o.patterns,function(){return-1<n.indexOf(this.index)?(this.id&&(n="string"==typeof this.id?n.substr(n.lastIndexOf(this.id)+this.id.length,n.length):this.id.call(this,n)),n=this.src.replace("%id%",n),!1):void 0});var i={};return o.srcAction&&(i[o.srcAction]=n),f._parseMarkup(t,i,e),f.updateStatus("ready"),t}}});function j(e){var t=f.items.length;return t-1<e?e-t:e<0?t+e:e}function N(e,t,n){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,n)}c.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var r=f.st.gallery,e=".mfp-gallery";return f.direction=!0,!(!r||!r.enabled)&&(h+=" mfp-gallery",d(C+e,function(){r.navigateByImgClick&&f.wrap.on("click"+e,".mfp-img",function(){return 1<f.items.length?(f.next(),!1):void 0}),g.on("keydown"+e,function(e){37===e.keyCode?f.prev():39===e.keyCode&&f.next()})}),d("UpdateStatus"+e,function(e,t){t.text&&(t.text=N(t.text,f.currItem.index,f.items.length))}),d(y+e,function(e,t,n,o){var i=f.items.length;n.counter=1<i?N(r.tCounter,o.index,i):""}),d("BuildControls"+e,function(){var e,t;1<f.items.length&&r.arrows&&!f.arrowLeft&&(t=r.arrowMarkup,e=f.arrowLeft=c(t.replace(/%title%/gi,r.tPrev).replace(/%dir%/gi,"left")).addClass(I),t=f.arrowRight=c(t.replace(/%title%/gi,r.tNext).replace(/%dir%/gi,"right")).addClass(I),e.click(function(){f.prev()}),t.click(function(){f.next()}),f.container.append(e.add(t)))}),d(a+e,function(){f._preloadTimeout&&clearTimeout(f._preloadTimeout),f._preloadTimeout=setTimeout(function(){f.preloadNearbyImages(),f._preloadTimeout=null},16)}),void d(l+e,function(){g.off(e),f.wrap.off("click"+e),f.arrowRight=f.arrowLeft=null}))},next:function(){f.direction=!0,f.index=j(f.index+1),f.updateItemHTML()},prev:function(){f.direction=!1,f.index=j(f.index-1),f.updateItemHTML()},goTo:function(e){f.direction=e>=f.index,f.index=e,f.updateItemHTML()},preloadNearbyImages:function(){for(var e=f.st.gallery.preload,t=Math.min(e[0],f.items.length),n=Math.min(e[1],f.items.length),o=1;o<=(f.direction?n:t);o++)f._preloadItem(f.index+o);for(o=1;o<=(f.direction?t:n);o++)f._preloadItem(f.index-o)},_preloadItem:function(e){var t;e=j(e),f.items[e].preloaded||((t=f.items[e]).parsed||(t=f.parseEl(e)),p("LazyLoad",t),"image"===t.type&&(t.img=c('<img class="mfp-img" />').on("load.mfploader",function(){t.hasSize=!0}).on("error.mfploader",function(){t.hasSize=!0,t.loadError=!0,p("LazyLoadError",t)}).attr("src",t.src)),t.preloaded=!0)}}});var W="retina";c.magnificPopup.registerModule(W,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,function(e){return"@2x"+e})},ratio:1},proto:{initRetina:function(){var n,o;1<window.devicePixelRatio&&(n=f.st.retina,o=n.ratio,1<(o=isNaN(o)?o():o)&&(d("ImageHasSize."+W,function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/o,width:"100%"})}),d("ElementParse."+W,function(e,t){t.src=n.replaceSrc(t,o)})))}}}),r()});
!function(a,d,p){"use strict";a.fn.scrollUp=function(l){a.data(p.body,"scrollUp")||(a.data(p.body,"scrollUp",!0),a.fn.scrollUp.init(l))},a.fn.scrollUp.init=function(l){var o,e,r,s,t,c=a.fn.scrollUp.settings=a.extend({},a.fn.scrollUp.defaults,l),i=!1,n=c.scrollTrigger?a(c.scrollTrigger):a("<a/>",{id:c.scrollName,href:"#top"});switch(c.scrollTitle&&n.attr("title",c.scrollTitle),n.appendTo("body"),c.scrollImg||c.scrollTrigger||n.html(c.scrollText),n.css({display:"none",position:"fixed",zIndex:c.zIndex}),c.activeOverlay&&a("<div/>",{id:c.scrollName+"-active"}).css({position:"absolute",top:c.scrollDistance+"px",width:"100%",borderTop:"1px dotted"+c.activeOverlay,zIndex:c.zIndex}).appendTo("body"),c.animation){case"fade":o="fadeIn",e="fadeOut",r=c.animationSpeed;break;case"slide":o="slideDown",e="slideUp",r=c.animationSpeed;break;default:o="show",e="hide",r=0}s="top"===c.scrollFrom?c.scrollDistance:a(p).height()-a(d).height()-c.scrollDistance,a(d).scroll(function(){a(d).scrollTop()>s?i||(n[o](r),i=!0):i&&(n[e](r),i=!1)}),c.scrollTarget?"number"==typeof c.scrollTarget?t=c.scrollTarget:"string"==typeof c.scrollTarget&&(t=Math.floor(a(c.scrollTarget).offset().top)):t=0,n.click(function(l){l.preventDefault(),a("html, body").animate({scrollTop:t},c.scrollSpeed,c.easingType)})},a.fn.scrollUp.defaults={scrollName:"scrollUp",scrollDistance:300,scrollFrom:"top",scrollSpeed:300,easingType:"linear",animation:"fade",animationSpeed:200,scrollTrigger:!1,scrollTarget:!1,scrollText:"Scroll to top",scrollTitle:!1,scrollImg:!1,activeOverlay:!1,zIndex:2147483647},a.fn.scrollUp.destroy=function(l){a.removeData(p.body,"scrollUp"),a("#"+a.fn.scrollUp.settings.scrollName).remove(),a("#"+a.fn.scrollUp.settings.scrollName+"-active").remove(),7<=a.fn.jquery.split(".")[1]?a(d).off("scroll",l):a(d).unbind("scroll",l)},a.scrollUp=a.fn.scrollUp}(jQuery,window,document);
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(t.L={})}(this,function(t){"use strict";function h(t){for(var i,e,n=1,o=arguments.length;n<o;n++)for(i in e=arguments[n])t[i]=e[i];return t}var s=Object.create||function(t){return i.prototype=t,new i};function i(){}function T(t,i){var e=Array.prototype.slice;if(t.bind)return t.bind.apply(t,e.call(arguments,1));var n=e.call(arguments,2);return function(){return t.apply(i,n.length?n.concat(e.call(arguments)):arguments)}}var e=0;function M(t){return t._leaflet_id=t._leaflet_id||++e,t._leaflet_id}function n(t,i,e){function n(){o=!1,s&&(r.apply(e,s),s=!1)}var o,s,r=function(){o?s=arguments:(t.apply(e,arguments),setTimeout(n,i),o=!0)};return r}function o(t,i,e){var n=i[1],o=i[0],i=n-o;return t===n&&e?t:((t-o)%i+i)%i+o}function a(){return!1}function r(t,i){i=Math.pow(10,void 0===i?6:i);return Math.round(t*i)/i}function u(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function l(t){return u(t).split(/\s+/)}function c(t,i){for(var e in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?s(t.options):{}),i)t.options[e]=i[e];return t.options}function _(t,i,e){var n,o=[];for(n in t)o.push(encodeURIComponent(e?n.toUpperCase():n)+"="+encodeURIComponent(t[n]));return(i&&-1!==i.indexOf("?")?"&":"?")+o.join("&")}var d=/\{ *([\w_-]+) *\}/g;function p(t,e){return t.replace(d,function(t,i){i=e[i];if(void 0===i)throw new Error("No value provided for variable "+t);return i="function"==typeof i?i(e):i})}var m=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function f(t,i){for(var e=0;e<t.length;e++)if(t[e]===i)return e;return-1}var g="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function v(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var y=0;function x(t){var i=+new Date,e=Math.max(0,16-(i-y));return y=i+e,window.setTimeout(t,e)}var w=window.requestAnimationFrame||v("RequestAnimationFrame")||x,P=window.cancelAnimationFrame||v("CancelAnimationFrame")||v("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function b(t,i,e){if(!e||w!==x)return w.call(window,T(t,i));t.call(i)}function z(t){t&&P.call(window,t)}var C={extend:h,create:s,bind:T,lastId:e,stamp:M,throttle:n,wrapNum:o,falseFn:a,formatNum:r,trim:u,splitWords:l,setOptions:c,getParamString:_,template:p,isArray:m,indexOf:f,emptyImageUrl:g,requestFn:w,cancelFn:P,requestAnimFrame:b,cancelAnimFrame:z};function S(){}S.extend=function(t){function i(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()}var e,n=i.__super__=this.prototype,o=s(n);for(e in(o.constructor=i).prototype=o,this)Object.prototype.hasOwnProperty.call(this,e)&&"prototype"!==e&&"__super__"!==e&&(i[e]=this[e]);return t.statics&&(h(i,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=m(t)?t:[t];for(var i=0;i<t.length;i++)t[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),h.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=h(s(o.options),t.options)),h(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,i=o._initHooks.length;t<i;t++)o._initHooks[t].call(this)}},i},S.include=function(t){return h(this.prototype,t),this},S.mergeOptions=function(t){return h(this.prototype.options,t),this},S.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),e="function"==typeof t?t:function(){this[t].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(e),this};var Z={on:function(t,i,e){if("object"==typeof t)for(var n in t)this._on(n,t[n],i);else for(var o=0,s=(t=l(t)).length;o<s;o++)this._on(t[o],i,e);return this},off:function(t,i,e){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],i);else for(var o=0,s=(t=l(t)).length;o<s;o++)this._off(t[o],i,e);else delete this._events;return this},_on:function(t,i,e){this._events=this._events||{};var n=this._events[t];n||(this._events[t]=n=[]);for(var t={fn:i,ctx:e=e===this?void 0:e},o=n,s=0,r=o.length;s<r;s++)if(o[s].fn===i&&o[s].ctx===e)return;o.push(t)},_off:function(t,i,e){var n,o,s;if(this._events&&(n=this._events[t]))if(i){if(e===this&&(e=void 0),n)for(o=0,s=n.length;o<s;o++){var r=n[o];if(r.ctx===e&&r.fn===i)return r.fn=a,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(o,1)}}else{for(o=0,s=n.length;o<s;o++)n[o].fn=a;delete this._events[t]}},fire:function(t,i,e){if(!this.listens(t,e))return this;var n=h({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var s=0,r=o.length;s<r;s++){var a=o[s];a.fn.call(a.ctx||this,n)}this._firingCount--}}return e&&this._propagateEvent(n),this},listens:function(t,i){var e=this._events&&this._events[t];if(e&&e.length)return!0;if(i)for(var n in this._eventParents)if(this._eventParents[n].listens(t,i))return!0;return!1},once:function(t,i,e){if("object"==typeof t){for(var n in t)this.once(n,t[n],i);return this}var o=T(function(){this.off(t,i,e).off(t,o,e)},this);return this.on(t,i,e).on(t,o,e)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[M(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[M(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,h({layer:t.target,propagatedFrom:t.target},t),!0)}};Z.addEventListener=Z.on,Z.removeEventListener=Z.clearAllEventListeners=Z.off,Z.addOneTimeEventListener=Z.once,Z.fireEvent=Z.fire,Z.hasEventListeners=Z.listens;var E=S.extend(Z);function k(t,i,e){this.x=e?Math.round(t):t,this.y=e?Math.round(i):i}var B=Math.trunc||function(t){return 0<t?Math.floor(t):Math.ceil(t)};function A(t,i,e){return t instanceof k?t:m(t)?new k(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new k(t.x,t.y):new k(t,i,e)}function I(t,i){if(t)for(var e=i?[t,i]:t,n=0,o=e.length;n<o;n++)this.extend(e[n])}function O(t,i){return!t||t instanceof I?t:new I(t,i)}function R(t,i){if(t)for(var e=i?[t,i]:t,n=0,o=e.length;n<o;n++)this.extend(e[n])}function N(t,i){return t instanceof R?t:new R(t,i)}function D(t,i,e){if(isNaN(t)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+i+")");this.lat=+t,this.lng=+i,void 0!==e&&(this.alt=+e)}function j(t,i,e){return t instanceof D?t:m(t)&&"object"!=typeof t[0]?3===t.length?new D(t[0],t[1],t[2]):2===t.length?new D(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new D(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===i?null:new D(t,i,e)}k.prototype={clone:function(){return new k(this.x,this.y)},add:function(t){return this.clone()._add(A(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(A(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new k(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new k(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=B(this.x),this.y=B(this.y),this},distanceTo:function(t){var i=(t=A(t)).x-this.x,t=t.y-this.y;return Math.sqrt(i*i+t*t)},equals:function(t){return(t=A(t)).x===this.x&&t.y===this.y},contains:function(t){return t=A(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+r(this.x)+", "+r(this.y)+")"}},I.prototype={extend:function(t){return t=A(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new k((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new k(this.min.x,this.max.y)},getTopRight:function(){return new k(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var i,e;return(t=("number"==typeof t[0]||t instanceof k?A:O)(t))instanceof I?(i=t.min,e=t.max):i=e=t,i.x>=this.min.x&&e.x<=this.max.x&&i.y>=this.min.y&&e.y<=this.max.y},intersects:function(t){t=O(t);var i=this.min,e=this.max,n=t.min,o=t.max,t=o.x>=i.x&&n.x<=e.x,e=o.y>=i.y&&n.y<=e.y;return t&&e},overlaps:function(t){t=O(t);var i=this.min,e=this.max,n=t.min,o=t.max,t=o.x>i.x&&n.x<e.x,e=o.y>i.y&&n.y<e.y;return t&&e},isValid:function(){return!(!this.min||!this.max)}},R.prototype={extend:function(t){var i,e,n=this._southWest,o=this._northEast;if(t instanceof D)e=i=t;else{if(!(t instanceof R))return t?this.extend(j(t)||N(t)):this;if(i=t._southWest,e=t._northEast,!i||!e)return this}return n||o?(n.lat=Math.min(i.lat,n.lat),n.lng=Math.min(i.lng,n.lng),o.lat=Math.max(e.lat,o.lat),o.lng=Math.max(e.lng,o.lng)):(this._southWest=new D(i.lat,i.lng),this._northEast=new D(e.lat,e.lng)),this},pad:function(t){var i=this._southWest,e=this._northEast,n=Math.abs(i.lat-e.lat)*t,t=Math.abs(i.lng-e.lng)*t;return new R(new D(i.lat-n,i.lng-t),new D(e.lat+n,e.lng+t))},getCenter:function(){return new D((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new D(this.getNorth(),this.getWest())},getSouthEast:function(){return new D(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t=("number"==typeof t[0]||t instanceof D||"lat"in t?j:N)(t);var i,e,n=this._southWest,o=this._northEast;return t instanceof R?(i=t.getSouthWest(),e=t.getNorthEast()):i=e=t,i.lat>=n.lat&&e.lat<=o.lat&&i.lng>=n.lng&&e.lng<=o.lng},intersects:function(t){t=N(t);var i=this._southWest,e=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),t=o.lat>=i.lat&&n.lat<=e.lat,e=o.lng>=i.lng&&n.lng<=e.lng;return t&&e},overlaps:function(t){t=N(t);var i=this._southWest,e=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),t=o.lat>i.lat&&n.lat<e.lat,e=o.lng>i.lng&&n.lng<e.lng;return t&&e},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,i){return!!t&&(t=N(t),this._southWest.equals(t.getSouthWest(),i)&&this._northEast.equals(t.getNorthEast(),i))},isValid:function(){return!(!this._southWest||!this._northEast)}};var W={latLngToPoint:function(t,i){t=this.projection.project(t),i=this.scale(i);return this.transformation._transform(t,i)},pointToLatLng:function(t,i){i=this.scale(i),i=this.transformation.untransform(t,i);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var i=this.projection.bounds,t=this.scale(t);return new I(this.transformation.transform(i.min,t),this.transformation.transform(i.max,t))},infinite:!(D.prototype={equals:function(t,i){return!!t&&(t=j(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===i?1e-9:i))},toString:function(t){return"LatLng("+r(this.lat,t)+", "+r(this.lng,t)+")"},distanceTo:function(t){return H.distance(this,j(t))},wrap:function(){return H.wrapLatLng(this)},toBounds:function(t){var i=180*t/40075017,t=i/Math.cos(Math.PI/180*this.lat);return N([this.lat-i,this.lng-t],[this.lat+i,this.lng+t])},clone:function(){return new D(this.lat,this.lng,this.alt)}}),wrapLatLng:function(t){var i=this.wrapLng?o(t.lng,this.wrapLng,!0):t.lng;return new D(this.wrapLat?o(t.lat,this.wrapLat,!0):t.lat,i,t.alt)},wrapLatLngBounds:function(t){var i=t.getCenter(),e=this.wrapLatLng(i),n=i.lat-e.lat,i=i.lng-e.lng;if(0==n&&0==i)return t;e=t.getSouthWest(),t=t.getNorthEast();return new R(new D(e.lat-n,e.lng-i),new D(t.lat-n,t.lng-i))}},H=h({},W,{wrapLng:[-180,180],R:6371e3,distance:function(t,i){var e=Math.PI/180,n=t.lat*e,o=i.lat*e,s=Math.sin((i.lat-t.lat)*e/2),e=Math.sin((i.lng-t.lng)*e/2),e=s*s+Math.cos(n)*Math.cos(o)*e*e,e=2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e));return this.R*e}}),F=6378137,U={R:F,MAX_LATITUDE:85.0511287798,project:function(t){var i=Math.PI/180,e=this.MAX_LATITUDE,e=Math.max(Math.min(e,t.lat),-e),e=Math.sin(e*i);return new k(this.R*t.lng*i,this.R*Math.log((1+e)/(1-e))/2)},unproject:function(t){var i=180/Math.PI;return new D((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*i,t.x*i/this.R)},bounds:new I([-(gt=F*Math.PI),-gt],[gt,gt])};function V(t,i,e,n){if(m(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=i,this._c=e,this._d=n}function q(t,i,e,n){return new V(t,i,e,n)}V.prototype={transform:function(t,i){return this._transform(t.clone(),i)},_transform:function(t,i){return t.x=(i=i||1)*(this._a*t.x+this._b),t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return new k((t.x/(i=i||1)-this._b)/this._a,(t.y/i-this._d)/this._c)}};var G=h({},H,{code:"EPSG:3857",projection:U,transformation:q(vt=.5/(Math.PI*U.R),.5,-vt,.5)}),K=h({},G,{code:"EPSG:900913"});function Y(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function X(t,i){for(var e,n,o,s,r="",a=0,h=t.length;a<h;a++){for(e=0,n=(o=t[a]).length;e<n;e++)r+=(e?"L":"M")+(s=o[e]).x+" "+s.y;r+=i?Tt?"z":"x":""}return r||"M0 0"}var J=document.documentElement.style,$="ActiveXObject"in window,Q=$&&!document.addEventListener,tt="msLaunchUri"in navigator&&!("documentMode"in document),it=zt("webkit"),et=zt("android"),nt=zt("android 2")||zt("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),st=et&&zt("Google")&&ot<537&&!("AudioNode"in window),rt=!!window.opera,at=!tt&&zt("chrome"),ht=zt("gecko")&&!it&&!rt&&!$,ut=!at&&zt("safari"),lt=zt("phantom"),ct="OTransition"in J,_t=0===navigator.platform.indexOf("Win"),dt=$&&"transition"in J,pt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!nt,mt="MozPerspective"in J,ft=!window.L_DISABLE_3D&&(dt||pt||mt)&&!ct&&!lt,F="undefined"!=typeof orientation||zt("mobile"),gt=F&&it,vt=F&&pt,ot=!window.PointerEvent&&window.MSPointerEvent,yt=!(!window.PointerEvent&&!ot),xt=!window.L_NO_TOUCH&&(yt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),wt=F&&rt,J=F&&ht,Pt=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),Lt=function(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",a,i),window.removeEventListener("testPassiveEventSupport",a,i)}catch(t){}return t}(),bt=!!document.createElement("canvas").getContext,Tt=!(!document.createElementNS||!Y("svg").createSVGRect),Mt=!Tt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&"object"==typeof i.adj}catch(t){return!1}}();function zt(t){return 0<=navigator.userAgent.toLowerCase().indexOf(t)}var lt={ie:$,ielt9:Q,edge:tt,webkit:it,android:et,android23:nt,androidStock:st,opera:rt,chrome:at,gecko:ht,safari:ut,phantom:lt,opera12:ct,win:_t,ie3d:dt,webkit3d:pt,gecko3d:mt,any3d:ft,mobile:F,mobileWebkit:gt,mobileWebkit3d:vt,msPointer:ot,pointer:yt,touch:xt,mobileOpera:wt,mobileGecko:J,retina:Pt,passiveEvents:Lt,canvas:bt,svg:Tt,vml:Mt},Ct=ot?"MSPointerDown":"pointerdown",St=ot?"MSPointerMove":"pointermove",Zt=ot?"MSPointerUp":"pointerup",Et=ot?"MSPointerCancel":"pointercancel",kt={},Bt=!1;function At(t){kt[t.pointerId]=t}function It(t){kt[t.pointerId]&&(kt[t.pointerId]=t)}function Ot(t){delete kt[t.pointerId]}function Rt(t,i){for(var e in t.touches=[],kt)t.touches.push(kt[e]);t.changedTouches=[t],i(t)}var Nt,Dt,jt,Wt,Ht,Ft=ot?"MSPointerDown":yt?"pointerdown":"touchstart",Ut=ot?"MSPointerUp":yt?"pointerup":"touchend",Vt="_leaflet_",qt=hi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Gt=hi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Kt="webkitTransition"===Gt||"OTransition"===Gt?Gt+"End":"transitionend";function Yt(t){return"string"==typeof t?document.getElementById(t):t}function Xt(t,i){var e=t.style[i]||t.currentStyle&&t.currentStyle[i];return"auto"===(e=(!e||"auto"===e)&&document.defaultView?(t=document.defaultView.getComputedStyle(t,null))?t[i]:null:e)?null:e}function Jt(t,i,e){t=document.createElement(t);return t.className=i||"",e&&e.appendChild(t),t}function $t(t){var i=t.parentNode;i&&i.removeChild(t)}function Qt(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ti(t){var i=t.parentNode;i&&i.lastChild!==t&&i.appendChild(t)}function ii(t){var i=t.parentNode;i&&i.firstChild!==t&&i.insertBefore(t,i.firstChild)}function ei(t,i){if(void 0!==t.classList)return t.classList.contains(i);t=ri(t);return 0<t.length&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(t)}function ni(t,i){var e;if(void 0!==t.classList)for(var n=l(i),o=0,s=n.length;o<s;o++)t.classList.add(n[o]);else ei(t,i)||si(t,((e=ri(t))?e+" ":"")+i)}function oi(t,i){void 0!==t.classList?t.classList.remove(i):si(t,u((" "+ri(t)+" ").replace(" "+i+" "," ")))}function si(t,i){void 0===t.className.baseVal?t.className=i:t.className.baseVal=i}function ri(t){return void 0===(t=t.correspondingElement?t.correspondingElement:t).className.baseVal?t.className:t.className.baseVal}function ai(t,i){"opacity"in t.style?t.style.opacity=i:"filter"in t.style&&function(t,i){var e=!1,n="DXImageTransform.Microsoft.Alpha";try{e=t.filters.item(n)}catch(t){if(1===i)return}i=Math.round(100*i),e?(e.Enabled=100!==i,e.Opacity=i):t.style.filter+=" progid:"+n+"(opacity="+i+")"}(t,i)}function hi(t){for(var i=document.documentElement.style,e=0;e<t.length;e++)if(t[e]in i)return t[e];return!1}function ui(t,i,e){i=i||new k(0,0);t.style[qt]=(dt?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(e?" scale("+e+")":"")}function li(t,i){t._leaflet_pos=i,ft?ui(t,i):(t.style.left=i.x+"px",t.style.top=i.y+"px")}function ci(t){return t._leaflet_pos||new k(0,0)}function _i(){yi(window,"dragstart",Si)}function di(){wi(window,"dragstart",Si)}function pi(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(mi(),Ht=(Wt=t).style.outline,t.style.outline="none",yi(window,"keydown",mi))}function mi(){Wt&&(Wt.style.outline=Ht,Ht=Wt=void 0,wi(window,"keydown",mi))}function fi(t){for(;!((t=t.parentNode).offsetWidth&&t.offsetHeight||t===document.body););return t}function gi(t){var i=t.getBoundingClientRect();return{x:i.width/t.offsetWidth||1,y:i.height/t.offsetHeight||1,boundingClientRect:i}}var vi="onselectstart"in document?(jt=function(){yi(window,"selectstart",Si)},function(){wi(window,"selectstart",Si)}):(Dt=hi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),jt=function(){var t;Dt&&(t=document.documentElement.style,Nt=t[Dt],t[Dt]="none")},function(){Dt&&(document.documentElement.style[Dt]=Nt,Nt=void 0)}),ct={TRANSFORM:qt,TRANSITION:Gt,TRANSITION_END:Kt,get:Yt,getStyle:Xt,create:Jt,remove:$t,empty:Qt,toFront:ti,toBack:ii,hasClass:ei,addClass:ni,removeClass:oi,setClass:si,getClass:ri,setOpacity:ai,testProp:hi,setTransform:ui,setPosition:li,getPosition:ci,disableTextSelection:jt,enableTextSelection:vi,disableImageDrag:_i,enableImageDrag:di,preventOutline:pi,restoreOutline:mi,getSizedParentNode:fi,getScale:gi};function yi(t,i,e,n){if("object"==typeof i)for(var o in i)bi(t,o,i[o],e);else for(var s=0,r=(i=l(i)).length;s<r;s++)bi(t,i[s],e,n);return this}var xi="_leaflet_events";function wi(t,i,e,n){if("object"==typeof i)for(var o in i)Ti(t,o,i[o],e);else if(i)for(var s=0,r=(i=l(i)).length;s<r;s++)Ti(t,i[s],e,n);else{for(var a in t[xi])Ti(t,a,t[xi][a]);delete t[xi]}return this}function Pi(){return yt&&!tt&&!ut}var Li={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function bi(i,t,e,n){var o=t+M(e)+(n?"_"+M(n):"");if(i[xi]&&i[xi][o])return this;var s,r,a,h,u,l,c,_,d,p,m,f,g,v,y=function(t){return e.call(n||i,t||window.event)},x=y;function w(t){if(yt){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(1<t.touches.length)return;var i=Date.now(),e=i-(r||i);a=t.touches?t.touches[0]:t,h=0<e&&e<=250,r=i}function P(t){if(h&&!a.cancelBubble){if(yt){if("mouse"===t.pointerType)return;var i,e,n={};for(e in a)i=a[e],n[e]=i&&i.bind?i.bind(a):i;a=n}a.type="dblclick",a.button=0,s(a),r=null}}function L(t){Rt(t,d)}function b(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Rt(t,p)}yt&&0===t.indexOf("touch")?(u=i,c=y,_=o,"touchstart"===(l=t)?(m=u,f=c,g=_,v=T(function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Si(t),Rt(t,f)}),m["_leaflet_touchstart"+g]=v,m.addEventListener(Ct,v,!1),Bt||(document.addEventListener(Ct,At,!0),document.addEventListener(St,It,!0),document.addEventListener(Zt,Ot,!0),document.addEventListener(Et,Ot,!0),Bt=!0)):"touchmove"===l?(p=c,u["_leaflet_touchmove"+_]=b,u.addEventListener(St,b,!1)):"touchend"===l&&(d=c,(u=u)["_leaflet_touchend"+_]=L,u.addEventListener(Zt,L,!1),u.addEventListener(Et,L,!1))):xt&&"dblclick"===t&&!Pi()?(s=y,h=!1,(_=i)[Vt+Ft+(u=o)]=w,_[Vt+Ut+u]=P,_[Vt+"dblclick"+u]=s,_.addEventListener(Ft,w,!!Lt&&{passive:!1}),_.addEventListener(Ut,P,!!Lt&&{passive:!1}),_.addEventListener("dblclick",s,!1)):"addEventListener"in i?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?i.addEventListener(Li[t]||t,y,!!Lt&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(y=function(t){t=t||window.event,Ri(i,t)&&x(t)},i.addEventListener(Li[t],y,!1)):i.addEventListener(t,x,!1):"attachEvent"in i&&i.attachEvent("on"+t,y),i[xi]=i[xi]||{},i[xi][o]=y}function Ti(t,i,e,n){var o,s,r,a=i+M(e)+(n?"_"+M(n):""),e=t[xi]&&t[xi][a];if(!e)return this;yt&&0===i.indexOf("touch")?(r=(o=t)["_leaflet_"+(s=i)+a],"touchstart"===s?o.removeEventListener(Ct,r,!1):"touchmove"===s?o.removeEventListener(St,r,!1):"touchend"===s&&(o.removeEventListener(Zt,r,!1),o.removeEventListener(Et,r,!1))):xt&&"dblclick"===i&&!Pi()?(o=(n=t)[Vt+Ft+(s=a)],r=n[Vt+Ut+s],s=n[Vt+"dblclick"+s],n.removeEventListener(Ft,o,!!Lt&&{passive:!1}),n.removeEventListener(Ut,r,!!Lt&&{passive:!1}),n.removeEventListener("dblclick",s,!1)):"removeEventListener"in t?t.removeEventListener(Li[i]||i,e,!1):"detachEvent"in t&&t.detachEvent("on"+i,e),t[xi][a]=null}function Mi(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Oi(t),this}function zi(t){return bi(t,"wheel",Mi),this}function Ci(t){return yi(t,"mousedown touchstart dblclick",Mi),bi(t,"click",Ii),this}function Si(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Zi(t){return Si(t),Mi(t),this}function Ei(t,i){if(!i)return new k(t.clientX,t.clientY);var e=gi(i),n=e.boundingClientRect;return new k((t.clientX-n.left)/e.x-i.clientLeft,(t.clientY-n.top)/e.y-i.clientTop)}var ki=_t&&at?2*window.devicePixelRatio:ht?window.devicePixelRatio:1;function Bi(t){return tt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/ki:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ai={};function Ii(t){Ai[t.type]=!0}function Oi(t){var i=Ai[t.type];return Ai[t.type]=!1,i}function Ri(t,i){var e=i.relatedTarget;if(!e)return!0;try{for(;e&&e!==t;)e=e.parentNode}catch(t){return!1}return e!==t}var pt={on:yi,off:wi,stopPropagation:Mi,disableScrollPropagation:zi,disableClickPropagation:Ci,preventDefault:Si,stop:Zi,getMousePosition:Ei,getWheelDelta:Bi,fakeStop:Ii,skipped:Oi,isExternalTarget:Ri,addListener:yi,removeListener:wi},Ni=E.extend({run:function(t,i,e,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=e||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=ci(t),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=b(this._animate,this),this._step()},_step:function(t){var i=new Date-this._startTime,e=1e3*this._duration;i<e?this._runFrame(this._easeOut(i/e),t):(this._runFrame(1),this._complete())},_runFrame:function(t,i){t=this._startPos.add(this._offset.multiplyBy(t));i&&t._round(),li(this._el,t),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Di=E.extend({options:{crs:G,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=c(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=T(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),void 0!==i.zoom&&(this._zoom=this._limitZoom(i.zoom)),i.center&&void 0!==i.zoom&&this.setView(j(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Gt&&ft&&!wt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),yi(this._proxy,Kt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,e){return i=void 0===i?this._zoom:this._limitZoom(i),t=this._limitCenter(j(t),i,this.options.maxBounds),e=e||{},this._stop(),this._loaded&&!e.reset&&!0!==e&&(void 0!==e.animate&&(e.zoom=h({animate:e.animate},e.zoom),e.pan=h({animate:e.animate,duration:e.duration},e.pan)),this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,e.zoom):this._tryAnimatedPan(t,e.pan))?clearTimeout(this._sizeTimer):this._resetView(t,i),this},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(ft?this.options.zoomDelta:1),this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(ft?this.options.zoomDelta:1),this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,e){var n=this.getZoomScale(i),o=this.getSize().divideBy(2),n=(t instanceof k?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/n),n=this.containerPointToLatLng(o.add(n));return this.setView(n,i,{zoom:e})},_getBoundsCenterZoom:function(t,i){i=i||{},t=t.getBounds?t.getBounds():N(t);var e=A(i.paddingTopLeft||i.padding||[0,0]),n=A(i.paddingBottomRight||i.padding||[0,0]),o=this.getBoundsZoom(t,!1,e.add(n));if((o="number"==typeof i.maxZoom?Math.min(i.maxZoom,o):o)===1/0)return{center:t.getCenter(),zoom:o};n=n.subtract(e).divideBy(2),e=this.project(t.getSouthWest(),o),t=this.project(t.getNorthEast(),o);return{center:this.unproject(e.add(t).divideBy(2).add(n),o),zoom:o}},fitBounds:function(t,i){if(!(t=N(t)).isValid())throw new Error("Bounds are not valid.");t=this._getBoundsCenterZoom(t,i);return this.setView(t.center,t.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t,i){return i=i||{},(t=A(t).round()).x||t.y?(!0===i.animate||this.getSize().contains(t)?(this._panAnim||(this._panAnim=new Ni,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),!1!==i.animate?(ni(this._mapPane,"leaflet-pan-anim"),e=this._getMapPanePos().subtract(t).round(),this._panAnim.run(this._mapPane,e,i.duration||.25,i.easeLinearity)):(this._rawPanBy(t),this.fire("move").fire("moveend"))):this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this):this.fire("moveend");var e},flyTo:function(n,o,t){if(!1===(t=t||{}).animate||!ft)return this.setView(n,o,t);this._stop();var s=this.project(this.getCenter()),r=this.project(n),i=this.getSize(),a=this._zoom;n=j(n),o=void 0===o?a:o;var h=Math.max(i.x,i.y),e=h*this.getZoomScale(a,o),u=r.distanceTo(s)||1,l=1.42,c=l*l;function _(t){t=(e*e-h*h+(t?-1:1)*c*c*u*u)/(2*(t?e:h)*c*u),t=Math.sqrt(t*t+1)-t;return t<1e-9?-18:Math.log(t)}function d(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}var m=_(0);var f=Date.now(),g=(_(1)-m)/l,v=t.duration?1e3*t.duration:1e3*g*.8;return this._moveStart(!0,t.noMoveStart),function t(){var i=(Date.now()-f)/v,e=(1-Math.pow(1-i,1.5))*g;i<=1?(this._flyToFrame=b(t,this),this._move(this.unproject(s.add(r.subtract(s).multiplyBy((i=e,h*(p(m)*(d(i=m+l*i)/p(i))-d(m))/c/u))),a),this.getScaleZoom(h/(e=e,h*(p(m)/p(m+l*e))),a),{flyTo:!0})):this._move(n,o)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,i){t=this._getBoundsCenterZoom(t,i);return this.flyTo(t.center,t.zoom,i)},setMaxBounds:function(t){return(t=N(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var i=this.options.minZoom;return this.options.minZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var i=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var e=this.getCenter(),t=this._limitCenter(e,this._zoom,N(t));return e.equals(t)||this.panTo(t,i),this._enforcingBounds=!1,this},panInside:function(t,i){var e=A((i=i||{}).paddingTopLeft||i.padding||[0,0]),n=A(i.paddingBottomRight||i.padding||[0,0]),o=this.getCenter(),s=this.project(o),r=this.project(t),a=this.getPixelBounds(),h=a.getSize().divideBy(2),o=O([a.min.add(e),a.max.subtract(n)]);return o.contains(r)||(this._enforcingBounds=!0,t=s.subtract(r),a=A(r.x+t.x,r.y+t.y),(r.x<o.min.x||r.x>o.max.x)&&(a.x=s.x-t.x,0<t.x?a.x+=h.x-e.x:a.x-=h.x-n.x),(r.y<o.min.y||r.y>o.max.y)&&(a.y=s.y-t.y,0<t.y?a.y+=h.y-e.y:a.y-=h.y-n.y),this.panTo(this.unproject(a),i),this._enforcingBounds=!1),this},invalidateSize:function(t){if(!this._loaded)return this;t=h({animate:!1,pan:!0},!0===t?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var e=this.getSize(),n=i.divideBy(2).round(),o=e.divideBy(2).round(),o=n.subtract(o);return o.x||o.y?(t.animate&&t.pan?this.panBy(o):(t.pan&&this._rawPanBy(o),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(T(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:e})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=h({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=T(this._handleGeolocationResponse,this),e=T(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,e,t):navigator.geolocation.getCurrentPosition(i,e,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var i=t.code,t=t.message||(1===i?"permission denied":2===i?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+t+"."})},_handleGeolocationResponse:function(t){var i,e=new D(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),o=this._locateOptions;o.setView&&(i=this.getBoundsZoom(n),this.setView(e,o.maxZoom?Math.min(i,o.maxZoom):i));var s,r={latlng:e,bounds:n,timestamp:t.timestamp};for(s in t.coords)"number"==typeof t.coords[s]&&(r[s]=t.coords[s]);this.fire("locationfound",r)},addHandler:function(t,i){if(!i)return this;i=this[t]=new i(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}for(var t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),$t(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)$t(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,i){i=Jt("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),i||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new R(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,e){t=N(t),e=A(e||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),s=this.getMaxZoom(),r=t.getNorthWest(),a=t.getSouthEast(),t=this.getSize().subtract(e),e=O(this.project(a,n),this.project(r,n)).getSize(),a=ft?this.options.zoomSnap:1,r=t.x/e.x,e=t.y/e.y,e=i?Math.max(r,e):Math.min(r,e),n=this.getScaleZoom(e,n);return a&&(n=Math.round(n/(a/100))*(a/100),n=i?Math.ceil(n/a)*a:Math.floor(n/a)*a),Math.max(o,Math.min(s,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new k(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){i=this._getTopLeftPoint(t,i);return new I(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var e=this.options.crs;return i=void 0===i?this._zoom:i,e.scale(t)/e.scale(i)},getScaleZoom:function(t,i){var e=this.options.crs;i=void 0===i?this._zoom:i;i=e.zoom(t*e.scale(i));return isNaN(i)?1/0:i},project:function(t,i){return i=void 0===i?this._zoom:i,this.options.crs.latLngToPoint(j(t),i)},unproject:function(t,i){return i=void 0===i?this._zoom:i,this.options.crs.pointToLatLng(A(t),i)},layerPointToLatLng:function(t){t=A(t).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(t){return this.project(j(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(j(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(N(t))},distance:function(t,i){return this.options.crs.distance(j(t),j(i))},containerPointToLayerPoint:function(t){return A(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return A(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){t=this.containerPointToLayerPoint(A(t));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(j(t)))},mouseEventToContainerPoint:function(t){return Ei(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){t=this._container=Yt(t);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");yi(t,"scroll",this._onScroll,this),this._containerId=M(t)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&ft,ni(t,"leaflet-container"+(xt?" leaflet-touch":"")+(Pt?" leaflet-retina":"")+(Q?" leaflet-oldie":"")+(ut?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=Xt(t,"position");"absolute"!==i&&"relative"!==i&&"fixed"!==i&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),li(this._mapPane,new k(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ni(t.markerPane,"leaflet-zoom-hide"),ni(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i){li(this._mapPane,new k(0,0));var e=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var n=this._zoom!==i;this._moveStart(n,!1)._move(t,i)._moveEnd(n),this.fire("viewreset"),e&&this.fire("load")},_moveStart:function(t,i){return t&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(t,i,e){void 0===i&&(i=this._zoom);var n=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||e&&e.pinch)&&this.fire("zoom",e),this.fire("move",e)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){li(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={};var i=t?wi:yi;i((this._targets[M(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),ft&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=b(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var e,n=[],o="mouseout"===i||"mouseover"===i,s=t.target||t.srcElement,r=!1;s;){if((e=this._targets[M(s)])&&("click"===i||"preclick"===i)&&!t._simulated&&this._draggableMoved(e)){r=!0;break}if(e&&e.listens(i,!0)){if(o&&!Ri(s,t))break;if(n.push(e),o)break}if(s===this._container)break;s=s.parentNode}return n=!(n.length||r||o)&&Ri(s,t)?[this]:n},_handleDOMEvent:function(t){var i;this._loaded&&!Oi(t)&&("mousedown"!==(i=t.type)&&"keypress"!==i&&"keyup"!==i&&"keydown"!==i||pi(t.target||t.srcElement),this._fireDOMEvent(t,i))},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,e){if("click"===t.type&&((o=h({},t)).type="preclick",this._fireDOMEvent(o,o.type,e)),!t._stopped&&(e=(e||[]).concat(this._findEventTargets(t,i))).length){var n=e[0];"contextmenu"===i&&n.listens(i,!0)&&Si(t);var o,s={originalEvent:t};"keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type&&(o=n.getLatLng&&(!n._radius||n._radius<=10),s.containerPoint=o?this.latLngToContainerPoint(n.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=o?n.getLatLng():this.layerPointToLatLng(s.layerPoint));for(var r=0;r<e.length;r++)if(e[r].fire(i,s,!0),s.originalEvent._stopped||!1===e[r].options.bubblingMouseEvents&&-1!==f(this._mouseEvents,i))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,{target:this}):this.on("load",t,i),this},_getMapPanePos:function(){return ci(this._mapPane)||new k(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){return(t&&void 0!==i?this._getNewPixelOrigin(t,i):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var e=this.getSize()._divideBy(2);return this.project(t,i)._subtract(e)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,e){e=this._getNewPixelOrigin(e,i);return this.project(t,i)._subtract(e)},_latLngBoundsToNewLayerBounds:function(t,i,e){e=this._getNewPixelOrigin(e,i);return O([this.project(t.getSouthWest(),i)._subtract(e),this.project(t.getNorthWest(),i)._subtract(e),this.project(t.getSouthEast(),i)._subtract(e),this.project(t.getNorthEast(),i)._subtract(e)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,e){if(!e)return t;var n=this.project(t,i),o=this.getSize().divideBy(2),o=new I(n.subtract(o),n.add(o)),e=this._getBoundsOffset(o,e,i);return e.round().equals([0,0])?t:this.unproject(n.add(e),i)},_limitOffset:function(t,i){if(!i)return t;var e=this.getPixelBounds(),e=new I(e.min.add(t),e.max.add(t));return t.add(this._getBoundsOffset(e,i))},_getBoundsOffset:function(t,i,e){i=O(this.project(i.getNorthEast(),e),this.project(i.getSouthWest(),e)),e=i.min.subtract(t.min),t=i.max.subtract(t.max);return new k(this._rebound(e.x,-t.x),this._rebound(e.y,-t.y))},_rebound:function(t,i){return 0<t+i?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),e=this.getMaxZoom(),n=ft?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(i,Math.min(e,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){oi(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,i){t=this._getCenterOffset(t)._trunc();return!(!0!==(i&&i.animate)&&!this.getSize().contains(t)||(this.panBy(t,i),0))},_createAnimProxy:function(){var t=this._proxy=Jt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var i=qt,e=this._proxy.style[i];ui(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),e===this._proxy.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){$t(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),i=this.getZoom();ui(this._proxy,this.project(t,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,i,e){if(this._animatingZoom)return!0;if(e=e||{},!this._zoomAnimated||!1===e.animate||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(i),n=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==e.animate&&!this.getSize().contains(n)||(b(function(){this._moveStart(!0,!1)._animateZoom(t,i,!0)},this),0))},_animateZoom:function(t,i,e,n){this._mapPane&&(e&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,ni(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:n}),setTimeout(T(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&oi(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),b(function(){this._moveEnd(!0)},this))}});function ji(t){return new Wi(t)}var Wi=S.extend({options:{position:"topright"},initialize:function(t){c(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var i=this._map;return i&&i.removeControl(this),this.options.position=t,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var i=this._container=this.onAdd(t),e=this.getPosition(),t=t._controlCorners[e];return ni(i,"leaflet-control"),-1!==e.indexOf("bottom")?t.insertBefore(i,t.firstChild):t.appendChild(i),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&($t(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}});Di.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var e=this._controlCorners={},n="leaflet-",o=this._controlContainer=Jt("div",n+"control-container",this._container);function t(t,i){e[t+i]=Jt("div",n+t+" "+n+i,o)}t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)$t(this._controlCorners[t]);$t(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Hi=Wi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,i,e,n){return e<n?-1:n<e?1:0}},initialize:function(t,i,e){for(var n in c(this,e),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[n],n);for(n in i)this._addLayer(i[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),(this._map=t).on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Wi.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,i){return this._addLayer(t,i),this._map?this._update():this},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);t=this._getLayer(M(t));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){ni(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ni(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):oi(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return oi(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",i=this._container=Jt("div",t),e=this.options.collapsed;i.setAttribute("aria-haspopup",!0),Ci(i),zi(i);var n=this._section=Jt("section",t+"-list");e&&(this._map.on("click",this.collapse,this),et||yi(i,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=Jt("a",t+"-toggle",i);o.href="#",o.title="Layers",xt?(yi(o,"click",Zi),yi(o,"click",this.expand,this)):yi(o,"focus",this.expand,this),e||this.expand(),this._baseLayersList=Jt("div",t+"-base",n),this._separator=Jt("div",t+"-separator",n),this._overlaysList=Jt("div",t+"-overlays",n),i.appendChild(n)},_getLayer:function(t){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&M(this._layers[i].layer)===t)return this._layers[i]},_addLayer:function(t,i,e){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:i,overlay:e}),this.options.sortLayers&&this._layers.sort(T(function(t,i){return this.options.sortFunction(t.layer,i.layer,t.name,i.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Qt(this._baseLayersList),Qt(this._overlaysList),this._layerControlInputs=[];for(var t,i,e,n=0,o=0;o<this._layers.length;o++)e=this._layers[o],this._addItem(e),i=i||e.overlay,t=t||!e.overlay,n+=e.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(t=t&&1<n)?"":"none"),this._separator.style.display=i&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var i=this._getLayer(M(t.target)),t=i.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;t&&this._map.fire(t,i)},_createRadioElement:function(t,i){t='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=t,i.firstChild},_addItem:function(t){var i,e=document.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?((i=document.createElement("input")).type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=n):i=this._createRadioElement("leaflet-base-layers_"+M(this),n),this._layerControlInputs.push(i),i.layerId=M(t.layer),yi(i,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;n=document.createElement("div");return e.appendChild(n),n.appendChild(i),n.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){var t,i,e=this._layerControlInputs,n=[],o=[];this._handlingClick=!0;for(var s=e.length-1;0<=s;s--)t=e[s],i=this._getLayer(t.layerId).layer,t.checked?n.push(i):t.checked||o.push(i);for(s=0;s<o.length;s++)this._map.hasLayer(o[s])&&this._map.removeLayer(o[s]);for(s=0;s<n.length;s++)this._map.hasLayer(n[s])||this._map.addLayer(n[s]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,i,e=this._layerControlInputs,n=this._map.getZoom(),o=e.length-1;0<=o;o--)t=e[o],i=this._getLayer(t.layerId).layer,t.disabled=void 0!==i.options.minZoom&&n<i.options.minZoom||void 0!==i.options.maxZoom&&n>i.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Fi=Wi.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var i="leaflet-control-zoom",e=Jt("div",i+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,i+"-in",e,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,i+"-out",e,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),e},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,i,e,n,o){n=Jt("a",e,n);return n.innerHTML=t,n.href="#",n.title=i,n.setAttribute("role","button"),n.setAttribute("aria-label",i),Ci(n),yi(n,"click",Zi),yi(n,"click",o,this),yi(n,"click",this._refocusOnMap,this),n},_updateDisabled:function(){var t=this._map,i="leaflet-disabled";oi(this._zoomInButton,i),oi(this._zoomOutButton,i),!this._disabled&&t._zoom!==t.getMinZoom()||ni(this._zoomOutButton,i),!this._disabled&&t._zoom!==t.getMaxZoom()||ni(this._zoomInButton,i)}});Di.mergeOptions({zoomControl:!0}),Di.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Fi,this.addControl(this.zoomControl))});var Ui=Wi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var i="leaflet-control-scale",e=Jt("div",i),n=this.options;return this._addScales(n,i+"-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,i,e){t.metric&&(this._mScale=Jt("div",i,e)),t.imperial&&(this._iScale=Jt("div",i,e))},_update:function(){var t=this._map,i=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var i=this._getRoundNum(t);this._updateScale(this._mScale,i<1e3?i+" m":i/1e3+" km",i/t)},_updateImperial:function(t){var i,e=3.2808399*t;5280<e?(t=this._getRoundNum(i=e/5280),this._updateScale(this._iScale,t+" mi",t/i)):(i=this._getRoundNum(e),this._updateScale(this._iScale,i+" ft",i/e))},_updateScale:function(t,i,e){t.style.width=Math.round(this.options.maxWidth*e)+"px",t.innerHTML=i},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+"").length-1),t=t/i;return i*(10<=t?10:5<=t?5:3<=t?3:2<=t?2:1)}}),Vi=Wi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){c(this,t),this._attributions={}},onAdd:function(t){for(var i in(t.attributionControl=this)._container=Jt("div","leaflet-control-attribution"),Ci(this._container),t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t,i=[];for(t in this._attributions)this._attributions[t]&&i.push(t);var e=[];this.options.prefix&&e.push(this.options.prefix),i.length&&e.push(i.join(", ")),this._container.innerHTML=e.join(" | ")}}});Di.mergeOptions({attributionControl:!0}),Di.addInitHook(function(){this.options.attributionControl&&(new Vi).addTo(this)}),Wi.Layers=Hi,Wi.Zoom=Fi,Wi.Scale=Ui,Wi.Attribution=Vi,ji.layers=function(t,i,e){return new Hi(t,i,e)},ji.zoom=function(t){return new Fi(t)},ji.scale=function(t){return new Ui(t)},ji.attribution=function(t){return new Vi(t)};mt=S.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}});mt.addTo=function(t,i){return t.addHandler(i,this),this};var qi,gt={Events:Z},Gi=xt?"touchstart mousedown":"mousedown",Ki={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Yi={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Xi=E.extend({options:{clickTolerance:3},initialize:function(t,i,e,n){c(this,n),this._element=t,this._dragStartTarget=i||t,this._preventOutline=e},enable:function(){this._enabled||(yi(this._dragStartTarget,Gi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Xi._dragging===this&&this.finishDrag(),wi(this._dragStartTarget,Gi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){var i,e;!t._simulated&&this._enabled&&(this._moved=!1,ei(this._element,"leaflet-zoom-anim")||Xi._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||((Xi._dragging=this)._preventOutline&&pi(this._element),_i(),jt(),this._moving||(this.fire("down"),i=t.touches?t.touches[0]:t,e=fi(this._element),this._startPoint=new k(i.clientX,i.clientY),this._parentScale=gi(e),yi(document,Yi[t.type],this._onMove,this),yi(document,Ki[t.type],this._onUp,this))))},_onMove:function(t){var i;!t._simulated&&this._enabled&&(t.touches&&1<t.touches.length?this._moved=!0:((i=new k((i=t.touches&&1===t.touches.length?t.touches[0]:t).clientX,i.clientY)._subtract(this._startPoint)).x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,Si(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=ci(this._element).subtract(i),ni(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ni(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,z(this._animRequest),this._lastEvent=t,this._animRequest=b(this._updatePosition,this,!0))))},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),li(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in oi(document.body,"leaflet-dragging"),this._lastTarget&&(oi(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Yi)wi(document,Yi[t],this._onMove,this),wi(document,Ki[t],this._onUp,this);di(),vi(),this._moved&&this._moving&&(z(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Xi._dragging=!1}});function Ji(t,i){if(!i||!t.length)return t.slice();i*=i;return function(t,i){var e=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(e);n[0]=n[e-1]=1,function t(i,e,n,o,s){for(var r,a,h=0,u=o+1;u<=s-1;u++)h<(a=ee(i[u],i[o],i[s],!0))&&(r=u,h=a);n<h&&(e[r]=1,t(i,e,n,o,r),t(i,e,n,r,s))}(t,n,i,0,e-1);for(var o=[],s=0;s<e;s++)n[s]&&o.push(t[s]);return o}(t=function(t,i){for(var e,n,o,s=[t[0]],r=1,a=0,h=t.length;r<h;r++)e=t[r],n=t[a],o=void 0,o=n.x-e.x,e=n.y-e.y,i<o*o+e*e&&(s.push(t[r]),a=r);return a<h-1&&s.push(t[h-1]),s}(t,i),i)}function $i(t,i,e){return Math.sqrt(ee(t,i,e,!0))}function Qi(t,i,e,n,o){var s,r,a,h=n?qi:ie(t,e),u=ie(i,e);for(qi=u;;){if(!(h|u))return[t,i];if(h&u)return!1;a=ie(r=te(t,i,s=h||u,e,o),e),s===h?(t=r,h=a):(i=r,u=a)}}function te(t,i,e,n,o){var s,r,a=i.x-t.x,h=i.y-t.y,i=n.min,n=n.max;return 8&e?(s=t.x+a*(n.y-t.y)/h,r=n.y):4&e?(s=t.x+a*(i.y-t.y)/h,r=i.y):2&e?(s=n.x,r=t.y+h*(n.x-t.x)/a):1&e&&(s=i.x,r=t.y+h*(i.x-t.x)/a),new k(s,r,o)}function ie(t,i){var e=0;return t.x<i.min.x?e|=1:t.x>i.max.x&&(e|=2),t.y<i.min.y?e|=4:t.y>i.max.y&&(e|=8),e}function ee(t,i,e,n){var o=i.x,s=i.y,r=e.x-o,a=e.y-s,i=r*r+a*a;return 0<i&&(1<(i=((t.x-o)*r+(t.y-s)*a)/i)?(o=e.x,s=e.y):0<i&&(o+=r*i,s+=a*i)),r=t.x-o,a=t.y-s,n?r*r+a*a:new k(o,s)}function ne(t){return!m(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function oe(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ne(t)}vt={simplify:Ji,pointToSegmentDistance:$i,closestPointOnSegment:function(t,i,e){return ee(t,i,e)},clipSegment:Qi,_getEdgeIntersection:te,_getBitCode:ie,_sqClosestPointOnSegment:ee,isFlat:ne,_flat:oe};function se(t,i,e){for(var n,o,s,r,a,h,u,l=[1,4,2,8],c=0,_=t.length;c<_;c++)t[c]._code=ie(t[c],i);for(s=0;s<4;s++){for(h=l[s],n=[],c=0,o=(_=t.length)-1;c<_;o=c++)r=t[c],a=t[o],r._code&h?a._code&h||((u=te(a,r,h,i,e))._code=ie(u,i),n.push(u)):(a._code&h&&((u=te(a,r,h,i,e))._code=ie(u,i),n.push(u)),n.push(r));t=n}return t}var J={clipPolygon:se},ot={project:function(t){return new k(t.lng,t.lat)},unproject:function(t){return new D(t.y,t.x)},bounds:new I([-180,-90],[180,90])},_t={R:6378137,R_MINOR:6356752.314245179,bounds:new I([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var i=Math.PI/180,e=this.R,n=t.lat*i,o=this.R_MINOR/e,s=Math.sqrt(1-o*o),o=s*Math.sin(n),s=Math.tan(Math.PI/4-n/2)/Math.pow((1-o)/(1+o),s/2),n=-e*Math.log(Math.max(s,1e-10));return new k(t.lng*i*e,n)},unproject:function(t){for(var i,e=180/Math.PI,n=this.R,o=this.R_MINOR/n,s=Math.sqrt(1-o*o),r=Math.exp(-t.y/n),a=Math.PI/2-2*Math.atan(r),h=0,u=.1;h<15&&1e-7<Math.abs(u);h++)i=s*Math.sin(a),i=Math.pow((1-i)/(1+i),s/2),a+=u=Math.PI/2-2*Math.atan(r*i)-a;return new D(a*e,t.x*e/n)}},at={LonLat:ot,Mercator:_t,SphericalMercator:U},Z=h({},H,{code:"EPSG:3395",projection:_t,transformation:q(ht=.5/(Math.PI*_t.R),.5,-ht,.5)}),re=h({},H,{code:"EPSG:4326",projection:ot,transformation:q(1/180,1,-1/180,.5)}),U=h({},W,{projection:ot,transformation:q(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){var e=i.lng-t.lng,t=i.lat-t.lat;return Math.sqrt(e*e+t*t)},infinite:!0});W.Earth=H,W.EPSG3395=Z,W.EPSG3857=G,W.EPSG900913=K,W.EPSG4326=re,W.Simple=U;var ae=E.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[M(t)]=this},removeInteractiveTarget:function(t){return delete this._map._targets[M(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var i,e=t.target;e.hasLayer(this)&&(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents&&(i=this.getEvents(),e.on(i,this),this.once("remove",function(){e.off(i,this)},this)),this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this}))}});Di.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var i=M(t);return this._layers[i]||((this._layers[i]=t)._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var i=M(t);return this._layers[i]&&(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return!!t&&M(t)in this._layers},eachLayer:function(t,i){for(var e in this._layers)t.call(i,this._layers[e]);return this},_addLayers:function(t){for(var i=0,e=(t=t?m(t)?t:[t]:[]).length;i<e;i++)this.addLayer(t[i])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[M(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){t=M(t);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var t,i=1/0,e=-1/0,n=this._getZoomSpan();for(t in this._zoomBoundLayers)var o=this._zoomBoundLayers[t].options,i=void 0===o.minZoom?i:Math.min(i,o.minZoom),e=void 0===o.maxZoom?e:Math.max(e,o.maxZoom);this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=i===1/0?void 0:i,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var he=ae.extend({initialize:function(t,i){var e,n;if(c(this,i),this._layers={},t)for(e=0,n=t.length;e<n;e++)this.addLayer(t[e])},addLayer:function(t){var i=this.getLayerId(t);return this._layers[i]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){t=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(t){return!!t&&("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var i,e,n=Array.prototype.slice.call(arguments,1);for(i in this._layers)(e=this._layers[i])[t]&&e[t].apply(e,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,i){for(var e in this._layers)t.call(i,this._layers[e]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:M}),ue=he.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),he.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?((t=t in this._layers?this._layers[t]:t).removeEventParent(this),he.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t,i=new R;for(t in this._layers){var e=this._layers[t];i.extend(e.getBounds?e.getBounds():e.getLatLng())}return i}}),le=S.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){c(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,i){var e=this._getIconUrl(t);if(!e){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}i=this._createImg(e,i&&"IMG"===i.tagName?i:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,i){var e=this.options,n=e[i+"Size"],o=A(n="number"==typeof n?[n,n]:n),n=A("shadow"===i&&e.shadowAnchor||e.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+i+" "+(e.className||""),n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,i){return(i=i||document.createElement("img")).src=t,i},_getIconUrl:function(t){return Pt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),ce=le.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return ce.imagePath||(ce.imagePath=this._detectIconPath()),(this.options.imagePath||ce.imagePath)+le.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=Jt("div","leaflet-default-icon-path",document.body),i=Xt(t,"background-image")||Xt(t,"backgroundImage");return document.body.removeChild(t),null===i||0!==i.indexOf("url")?"":i.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),_e=mt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Xi(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ni(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&oi(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var i=this._marker,e=i._map,n=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,s=ci(i._icon),r=e.getPixelBounds(),a=e.getPixelOrigin(),o=O(r.min._subtract(a).add(o),r.max._subtract(a).subtract(o));o.contains(s)||(n=A((Math.max(o.max.x,s.x)-o.max.x)/(r.max.x-o.max.x)-(Math.min(o.min.x,s.x)-o.min.x)/(r.min.x-o.min.x),(Math.max(o.max.y,s.y)-o.max.y)/(r.max.y-o.max.y)-(Math.min(o.min.y,s.y)-o.min.y)/(r.min.y-o.min.y)).multiplyBy(n),e.panBy(n,{animate:!1}),this._draggable._newPos._add(n),this._draggable._startPos._add(n),li(i._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=b(this._adjustPan.bind(this,t)))},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=b(this._adjustPan.bind(this,t)))},_onDrag:function(t){var i=this._marker,e=i._shadow,n=ci(i._icon),o=i._map.layerPointToLatLng(n);e&&li(e,n),i._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,i.fire("move",t).fire("drag",t)},_onDragEnd:function(t){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),de=ae.extend({options:{icon:new ce,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,i){c(this,i),this._latlng=j(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var i=this._latlng;return this._latlng=j(t),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){var t;return this._icon&&this._map&&(t=this._map.latLngToLayerPoint(this._latlng).round(),this._setPos(t)),this},_initIcon:function(){var t=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),e=t.icon.createIcon(this._icon),n=!1;e!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(e.title=t.title),"IMG"===e.tagName&&(e.alt=t.alt||"")),ni(e,i),t.keyboard&&(e.tabIndex="0"),this._icon=e,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),e=!1;o!==this._shadow&&(this._removeShadow(),e=!0),o&&(ni(o,i),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&e&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),$t(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&$t(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&li(this._icon,t),this._shadow&&li(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){t=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(t)},_initInteraction:function(){var t;this.options.interactive&&(ni(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),_e&&(t=this.options.draggable,this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new _e(this),t&&this.dragging.enable()))},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&ai(this._icon,t),this._shadow&&ai(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),pe=ae.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return c(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),me=pe.extend({options:{fill:!0,radius:10},initialize:function(t,i){c(this,i),this._latlng=j(t),this._radius=this.options.radius},setLatLng:function(t){var i=this._latlng;return this._latlng=j(t),this.redraw(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;return pe.prototype.setStyle.call(this,t),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,e=this._clickTolerance(),e=[t+e,i+e];this._pxBounds=new I(this._point.subtract(e),this._point.add(e))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),fe=me.extend({initialize:function(t,i,e){if(c(this,i="number"==typeof i?h({},e,{radius:i}):i),this._latlng=j(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new R(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:pe.prototype.setStyle,_project:function(){var t,i,e,n,o,s=this._latlng.lng,r=this._latlng.lat,a=this._map,h=a.options.crs;h.distance===H.distance?(o=Math.PI/180,t=this._mRadius/H.R/o,i=a.project([r+t,s]),n=a.project([r-t,s]),e=i.add(n).divideBy(2),n=a.unproject(e).lat,o=Math.acos((Math.cos(t*o)-Math.sin(r*o)*Math.sin(n*o))/(Math.cos(r*o)*Math.cos(n*o)))/o,!isNaN(o)&&0!==o||(o=t/Math.cos(Math.PI/180*r)),this._point=e.subtract(a.getPixelOrigin()),this._radius=isNaN(o)?0:e.x-a.project([n,s-o]).x,this._radiusY=e.y-i.y):(h=h.unproject(h.project(this._latlng).subtract([this._mRadius,0])),this._point=a.latLngToLayerPoint(this._latlng),this._radius=this._point.x-a.latLngToLayerPoint(h).x),this._updateBounds()}}),ge=pe.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,i){c(this,i),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var i,e,n=1/0,o=null,s=ee,r=0,a=this._parts.length;r<a;r++)for(var h=this._parts[r],u=1,l=h.length;u<l;u++){var c=s(t,i=h[u-1],e=h[u],!0);c<n&&(n=c,o=s(t,i,e))}return o&&(o.distance=Math.sqrt(n)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,i,e,n,o,s,r=this._rings[0],a=r.length;if(!a)return null;for(i=t=0;t<a-1;t++)i+=r[t].distanceTo(r[t+1])/2;if(0===i)return this._map.layerPointToLatLng(r[0]);for(e=t=0;t<a-1;t++)if(n=r[t],o=r[t+1],i<(e+=s=n.distanceTo(o)))return this._map.layerPointToLatLng([o.x-(s=(e-i)/s)*(o.x-n.x),o.y-s*(o.y-n.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,i){return i=i||this._defaultShape(),t=j(t),i.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new R,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return ne(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var i=[],e=ne(t),n=0,o=t.length;n<o;n++)e?(i[n]=j(t[n]),this._bounds.extend(i[n])):i[n]=this._convertLatLngs(t[n]);return i},_project:function(){var t=new I;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),t=new k(t,t);this._pxBounds=new I([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)])},_projectLatlngs:function(t,i,e){var n,o,s=t[0]instanceof D,r=t.length;if(s){for(o=[],n=0;n<r;n++)o[n]=this._map.latLngToLayerPoint(t[n]),e.extend(o[n]);i.push(o)}else for(n=0;n<r;n++)this._projectLatlngs(t[n],i,e)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,e,n,o,s=this._parts,r=0,a=0,h=this._rings.length;r<h;r++)for(i=0,e=(o=this._rings[r]).length;i<e-1;i++)(n=Qi(o[i],o[i+1],t,i,!0))&&(s[a]=s[a]||[],s[a].push(n[0]),n[1]===o[i+1]&&i!==e-2||(s[a].push(n[1]),a++))},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,e=0,n=t.length;e<n;e++)t[e]=Ji(t[e],i)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,i){var e,n,o,s,r,a,h=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(e=0,s=this._parts.length;e<s;e++)for(n=0,o=(r=(a=this._parts[e]).length)-1;n<r;o=n++)if((i||0!==n)&&$i(t,a[o],a[n])<=h)return!0;return!1}});ge._flat=oe;var ve=ge.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,i,e,n,o,s,r,a,h,u=this._rings[0],l=u.length;if(!l)return null;for(t=s=r=a=0,i=l-1;t<l;i=t++)e=u[t],n=u[i],o=e.y*n.x-n.y*e.x,r+=(e.x+n.x)*o,a+=(e.y+n.y)*o,s+=3*o;return h=0===s?u[0]:[r/s,a/s],this._map.layerPointToLatLng(h)},_convertLatLngs:function(t){var i=ge.prototype._convertLatLngs.call(this,t),t=i.length;return 2<=t&&i[0]instanceof D&&i[0].equals(i[t-1])&&i.pop(),i},_setLatLngs:function(t){ge.prototype._setLatLngs.call(this,t),ne(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return(ne(this._latlngs[0])?this._latlngs:this._latlngs[0])[0]},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,i=new k(i,i),t=new I(t.min.subtract(i),t.max.add(i));if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var e,n=0,o=this._rings.length;n<o;n++)(e=se(this._rings[n],t,!0)).length&&this._parts.push(e)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var i,e,n,o,s,r,a,h,u=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,a=this._parts.length;o<a;o++)for(s=0,r=(h=(i=this._parts[o]).length)-1;s<h;r=s++)e=i[s],n=i[r],e.y>t.y!=n.y>t.y&&t.x<(n.x-e.x)*(t.y-e.y)/(n.y-e.y)+e.x&&(u=!u);return u||ge.prototype._containsPoint.call(this,t,!0)}}),ye=ue.extend({initialize:function(t,i){c(this,i),this._layers={},t&&this.addData(t)},addData:function(t){var i,e,n,o=m(t)?t:t.features;if(o){for(i=0,e=o.length;i<e;i++)((n=o[i]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var s=this.options;if(s.filter&&!s.filter(t))return this;var r=xe(t,s);return r?(r.feature=ze(t),r.defaultOptions=r.options,this.resetStyle(r),s.onEachFeature&&s.onEachFeature(t,r),this.addLayer(r)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=h({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(t){this._setLayerStyle(t,i)},this)},_setLayerStyle:function(t,i){t.setStyle&&("function"==typeof i&&(i=i(t.feature)),t.setStyle(i))}});function xe(t,i){var e,n,o,s,r="Feature"===t.type?t.geometry:t,a=r?r.coordinates:null,h=[],u=i&&i.pointToLayer,l=i&&i.coordsToLatLng||Pe;if(!a&&!r)return null;switch(r.type){case"Point":return we(u,t,e=l(a),i);case"MultiPoint":for(o=0,s=a.length;o<s;o++)e=l(a[o]),h.push(we(u,t,e,i));return new ue(h);case"LineString":case"MultiLineString":return n=Le(a,"LineString"===r.type?0:1,l),new ge(n,i);case"Polygon":case"MultiPolygon":return n=Le(a,"Polygon"===r.type?1:2,l),new ve(n,i);case"GeometryCollection":for(o=0,s=r.geometries.length;o<s;o++){var c=xe({geometry:r.geometries[o],type:"Feature",properties:t.properties},i);c&&h.push(c)}return new ue(h);default:throw new Error("Invalid GeoJSON object.")}}function we(t,i,e,n){return t?t(i,e):new de(e,n&&n.markersInheritOptions&&n)}function Pe(t){return new D(t[1],t[0],t[2])}function Le(t,i,e){for(var n,o=[],s=0,r=t.length;s<r;s++)n=i?Le(t[s],i-1,e):(e||Pe)(t[s]),o.push(n);return o}function be(t,i){return i="number"==typeof i?i:6,void 0!==t.alt?[r(t.lng,i),r(t.lat,i),r(t.alt,i)]:[r(t.lng,i),r(t.lat,i)]}function Te(t,i,e,n){for(var o=[],s=0,r=t.length;s<r;s++)o.push(i?Te(t[s],i-1,e,n):be(t[s],n));return!i&&e&&o.push(o[0]),o}function Me(t,i){return t.feature?h({},t.feature,{geometry:i}):ze(i)}function ze(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}_t={toGeoJSON:function(t){return Me(this,{type:"Point",coordinates:be(this.getLatLng(),t)})}};function Ce(t,i){return new ye(t,i)}de.include(_t),fe.include(_t),me.include(_t),ge.include({toGeoJSON:function(t){var i=!ne(this._latlngs);return Me(this,{type:(i?"Multi":"")+"LineString",coordinates:Te(this._latlngs,i?1:0,!1,t)})}}),ve.include({toGeoJSON:function(t){var i=!ne(this._latlngs),e=i&&!ne(this._latlngs[0]),t=Te(this._latlngs,e?2:i?1:0,!0,t);return Me(this,{type:(e?"Multi":"")+"Polygon",coordinates:t=!i?[t]:t})}}),he.include({toMultiPoint:function(i){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON(i).geometry.coordinates)}),Me(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(i){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(i);var e="GeometryCollection"===t,n=[];return this.eachLayer(function(t){t.toGeoJSON&&(t=t.toGeoJSON(i),e?n.push(t.geometry):"FeatureCollection"===(t=ze(t)).type?n.push.apply(n,t.features):n.push(t))}),e?Me(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var ht=Ce,Se=ae.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,i,e){this._url=t,this._bounds=N(i),c(this,e)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ni(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){$t(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ti(this._image),this},bringToBack:function(){return this._map&&ii(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=N(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,i=this._image=t?this._url:Jt("img");ni(i,"leaflet-image-layer"),this._zoomAnimated&&ni(i,"leaflet-zoom-animated"),this.options.className&&ni(i,this.options.className),i.onselectstart=a,i.onmousemove=a,i.onload=T(this.fire,this,"load"),i.onerror=T(this._overlayOnError,this,"error"),!this.options.crossOrigin&&""!==this.options.crossOrigin||(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=i.src:(i.src=this._url,i.alt=this.options.alt)},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),t=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ui(this._image,t,i)},_reset:function(){var t=this._image,i=new I(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),e=i.getSize();li(t,i.min),t.style.width=e.x+"px",t.style.height=e.y+"px"},_updateOpacity:function(){ai(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Ze=Se.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,i=this._image=t?this._url:Jt("video");if(ni(i,"leaflet-image-layer"),this._zoomAnimated&&ni(i,"leaflet-zoom-animated"),this.options.className&&ni(i,this.options.className),i.onselectstart=a,i.onmousemove=a,i.onloadeddata=T(this.fire,this,"load"),t){for(var e=i.getElementsByTagName("source"),n=[],o=0;o<e.length;o++)n.push(e[o].src);this._url=0<e.length?n:[i.src]}else{m(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(i.style,"objectFit")&&(i.style.objectFit="fill"),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop,i.muted=!!this.options.muted;for(var s=0;s<this._url.length;s++){var r=Jt("source");r.src=this._url[s],i.appendChild(r)}}}}),Ee=Se.extend({_initImage:function(){var t=this._image=this._url;ni(t,"leaflet-image-layer"),this._zoomAnimated&&ni(t,"leaflet-zoom-animated"),this.options.className&&ni(t,this.options.className),t.onselectstart=a,t.onmousemove=a}}),ke=ae.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,i){c(this,t),this._source=i},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&ai(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&ai(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(ai(this._container,0),this._removeTimeout=setTimeout(T($t,void 0,this._container),200)):$t(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=j(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ti(this._container),this},bringToBack:function(){return this._map&&ii(this._container),this},_prepareOpen:function(t,i,e){if(i instanceof ae||(e=i,i=t),i instanceof ue)for(var n in t._layers){i=t._layers[n];break}if(!e)if(i.getCenter)e=i.getCenter();else{if(!i.getLatLng)throw new Error("Unable to get source layer LatLng.");e=i.getLatLng()}return this._source=i,this.update(),e},_updateContent:function(){if(this._content){var t=this._contentNode,i="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof i)t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){var t,i,e;this._map&&(t=this._map.latLngToLayerPoint(this._latlng),e=A(this.options.offset),i=this._getAnchor(),this._zoomAnimated?li(this._container,t.add(i)):e=e.add(t).add(i),i=this._containerBottom=-e.y,e=this._containerLeft=-Math.round(this._containerWidth/2)+e.x,this._container.style.bottom=i+"px",this._container.style.left=e+"px")},_getAnchor:function(){return[0,0]}}),Be=ke.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){ke.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof pe||this._source.on("preclick",Mi))},onRemove:function(t){ke.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof pe||this._source.off("preclick",Mi))},getEvents:function(){var t=ke.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",i=this._container=Jt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),e=this._wrapper=Jt("div",t+"-content-wrapper",i);this._contentNode=Jt("div",t+"-content",e),Ci(i),zi(this._contentNode),yi(i,"contextmenu",Mi),this._tipContainer=Jt("div",t+"-tip-container",i),this._tip=Jt("div",t+"-tip",this._tipContainer),this.options.closeButton&&((i=this._closeButton=Jt("a",t+"-close-button",i)).href="#close",i.innerHTML="&#215;",yi(i,"click",this._onCloseButtonClick,this))},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var e=t.offsetWidth,e=Math.min(e,this.options.maxWidth);e=Math.max(e,this.options.minWidth),i.width=e+1+"px",i.whiteSpace="",i.height="";var n=t.offsetHeight,o=this.options.maxHeight,e="leaflet-popup-scrolled";o&&o<n?(i.height=o+"px",ni(t,e)):oi(t,e),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),t=this._getAnchor();li(this._container,i.add(t))},_adjustPan:function(){var t,i,e,n,o,s,r,a,h;this.options.autoPan&&(this._map._panAnim&&this._map._panAnim.stop(),t=this._map,r=parseInt(Xt(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+r,e=this._containerWidth,(a=new k(this._containerLeft,-i-this._containerBottom))._add(ci(this._container)),n=t.layerPointToContainerPoint(a),h=A(this.options.autoPanPadding),o=A(this.options.autoPanPaddingTopLeft||h),s=A(this.options.autoPanPaddingBottomRight||h),r=t.getSize(),h=a=0,n.x+e+s.x>r.x&&(a=n.x+e-r.x+s.x),n.x-a-o.x<0&&(a=n.x-o.x),n.y+i+s.y>r.y&&(h=n.y+i-r.y+s.y),n.y-h-o.y<0&&(h=n.y-o.y),(a||h)&&t.fire("autopanstart").panBy([a,h]))},_onCloseButtonClick:function(t){this._close(),Zi(t)},_getAnchor:function(){return A(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Di.mergeOptions({closePopupOnClick:!0}),Di.include({openPopup:function(t,i,e){return t instanceof Be||(t=new Be(e).setContent(t)),i&&t.setLatLng(i),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),ae.include({bindPopup:function(t,i){return t instanceof Be?(c(t,i),(this._popup=t)._source=this):(this._popup&&!i||(this._popup=new Be(i,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,i){return this._popup&&this._map&&(i=this._popup._prepareOpen(this,t,i),this._map.openPopup(this._popup,i)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var i=t.layer||t.target;this._popup&&this._map&&(Zi(t),i instanceof pe?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===i?this.closePopup():this.openPopup(i,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Ae=ke.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){ke.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){ke.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=ke.prototype.getEvents.call(this);return xt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Jt("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var i,e=this._map,n=this._container,o=e.latLngToContainerPoint(e.getCenter()),s=e.layerPointToContainerPoint(t),r=this.options.direction,a=n.offsetWidth,h=n.offsetHeight,u=A(this.options.offset),e=this._getAnchor(),h="top"===r?(i=a/2,h):"bottom"===r?(i=a/2,0):(i="center"===r?a/2:"right"===r?0:"left"===r?a:s.x<o.x?(r="right",0):(r="left",a+2*(u.x+e.x)),h/2);t=t.subtract(A(i,h,!0)).add(u).add(e),oi(n,"leaflet-tooltip-right"),oi(n,"leaflet-tooltip-left"),oi(n,"leaflet-tooltip-top"),oi(n,"leaflet-tooltip-bottom"),ni(n,"leaflet-tooltip-"+r),li(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&ai(this._container,t)},_animateZoom:function(t){t=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(t)},_getAnchor:function(){return A(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Di.include({openTooltip:function(t,i,e){return t instanceof Ae||(t=new Ae(e).setContent(t)),i&&t.setLatLng(i),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),ae.include({bindTooltip:function(t,i){return t instanceof Ae?(c(t,i),(this._tooltip=t)._source=this):(this._tooltip&&!i||(this._tooltip=new Ae(i,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){var i,e;!t&&this._tooltipHandlersAdded||(i=t?"off":"on",e={remove:this.closeTooltip,move:this._moveTooltip},this._tooltip.options.permanent?e.add=this._openTooltip:(e.mouseover=this._openTooltip,e.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(e.mousemove=this._moveTooltip),xt&&(e.click=this._openTooltip)),this[i](e),this._tooltipHandlersAdded=!t)},openTooltip:function(t,i){return this._tooltip&&this._map&&(i=this._tooltip._prepareOpen(this,t,i),this._map.openTooltip(this._tooltip,i),this._tooltip.options.interactive&&this._tooltip._container&&(ni(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(oi(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var i=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(i,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(t=this._map.mouseEventToContainerPoint(t.originalEvent),t=this._map.containerPointToLayerPoint(t),i=this._map.layerPointToLatLng(t)),this._tooltip.setLatLng(i)}});var Ie=le.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&"DIV"===t.tagName?t:document.createElement("div"),t=this.options;return t.html instanceof Element?(Qt(i),i.appendChild(t.html)):i.innerHTML=!1!==t.html?t.html:"",t.bgPos&&(t=A(t.bgPos),i.style.backgroundPosition=-t.x+"px "+-t.y+"px"),this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});le.Default=ce;var Oe=ae.extend({options:{tileSize:256,opacity:1,updateWhenIdle:F,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){c(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),$t(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ti(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ii(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=n(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof k?t:new k(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var i,e=this.getPane().children,n=-t(-1/0,1/0),o=0,s=e.length;o<s;o++)i=e[o].style.zIndex,e[o]!==this._container&&i&&(n=t(n,+i));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Q){ai(this._container,this.options.opacity);var t,i=+new Date,e=!1,n=!1;for(t in this._tiles){var o,s=this._tiles[t];s.current&&s.loaded&&(o=Math.min(1,(i-s.loaded)/200),ai(s.el,o),o<1?e=!0:(s.active?n=!0:this._onOpaqueTile(s),s.active=!0))}n&&!this._noPrune&&this._pruneTiles(),e&&(z(this._fadeFrame),this._fadeFrame=b(this._updateOpacity,this))}},_onOpaqueTile:a,_initContainer:function(){this._container||(this._container=Jt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,i=this.options.maxZoom;if(void 0!==t){for(var e in this._levels)e=Number(e),this._levels[e].el.children.length||e===t?(this._levels[e].el.style.zIndex=i-Math.abs(t-e),this._onUpdateLevel(e)):($t(this._levels[e].el),this._removeTilesAtZoom(e),this._onRemoveLevel(e),delete this._levels[e]);var n=this._levels[t],o=this._map;return n||((n=this._levels[t]={}).el=Jt("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=i,n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,o.getCenter(),o.getZoom()),a(n.el.offsetWidth),this._onCreateLevel(n)),this._level=n}},_onUpdateLevel:a,_onRemoveLevel:a,_onCreateLevel:a,_pruneTiles:function(){if(this._map){var t,i,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)(e=this._tiles[t]).current&&!e.active&&(i=e.coords,this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2));for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var i in this._tiles)this._tiles[i].coords.z===t&&this._removeTile(i)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)$t(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,i,e,n){var o=Math.floor(t/2),t=Math.floor(i/2),i=e-1,e=new k(+o,+t);e.z=+i;e=this._tileCoordsToKey(e),e=this._tiles[e];return e&&e.active?e.retain=!0:(e&&e.loaded&&(e.retain=!0),n<i&&this._retainParent(o,t,i,n))},_retainChildren:function(t,i,e,n){for(var o=2*t;o<2*t+2;o++)for(var s=2*i;s<2*i+2;s++){var r=new k(o,s);r.z=e+1;r=this._tileCoordsToKey(r),r=this._tiles[r];r&&r.active?r.retain=!0:(r&&r.loaded&&(r.retain=!0),e+1<n&&this._retainChildren(o,s,e+1,n))}},_resetView:function(t){t=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var i=this.options;return void 0!==i.minNativeZoom&&t<i.minNativeZoom?i.minNativeZoom:void 0!==i.maxNativeZoom&&i.maxNativeZoom<t?i.maxNativeZoom:t},_setView:function(t,i,e,n){var o=Math.round(i),o=void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom?void 0:this._clampZoom(o),s=this.options.updateWhenZooming&&o!==this._tileZoom;n&&!s||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),e||this._pruneTiles(),this._noPrune=!!e),this._setZoomTransforms(t,i)},_setZoomTransforms:function(t,i){for(var e in this._levels)this._setZoomTransform(this._levels[e],t,i)},_setZoomTransform:function(t,i,e){var n=this._map.getZoomScale(e,t.zoom),e=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(i,e)).round();ft?ui(t.el,e,n):li(t.el,e)},_resetGrid:function(){var t=this._map,i=t.options.crs,e=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],n).x/e.x),Math.ceil(t.project([0,i.wrapLng[1]],n).x/e.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],n).y/e.x),Math.ceil(t.project([i.wrapLat[1],0],n).y/e.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var i=this._map,e=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),e=i.getZoomScale(e,this._tileZoom),t=i.project(t,this._tileZoom).floor(),e=i.getSize().divideBy(2*e);return new I(t.subtract(e),t.add(e))},_update:function(t){var i=this._map;if(i){var e=this._clampZoom(i.getZoom());if(void 0===t&&(t=i.getCenter()),void 0!==this._tileZoom){var n,i=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(i),s=o.getCenter(),r=[],i=this.options.keepBuffer,a=new I(o.getBottomLeft().subtract([i,-i]),o.getTopRight().add([i,-i]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(n in this._tiles){var h=this._tiles[n].coords;h.z===this._tileZoom&&a.contains(new k(h.x,h.y))||(this._tiles[n].current=!1)}if(1<Math.abs(e-this._tileZoom))this._setView(t,e);else{for(var u=o.min.y;u<=o.max.y;u++)for(var l=o.min.x;l<=o.max.x;l++){var c,_=new k(l,u);_.z=this._tileZoom,this._isValidTile(_)&&((c=this._tiles[this._tileCoordsToKey(_)])?c.current=!0:r.push(_))}if(r.sort(function(t,i){return t.distanceTo(s)-i.distanceTo(s)}),0!==r.length){this._loading||(this._loading=!0,this.fire("loading"));for(var d=document.createDocumentFragment(),l=0;l<r.length;l++)this._addTile(r[l],d);this._level.el.appendChild(d)}}}}},_isValidTile:function(t){var i=this._map.options.crs;if(!i.infinite){var e=this._globalTileRange;if(!i.wrapLng&&(t.x<e.min.x||t.x>e.max.x)||!i.wrapLat&&(t.y<e.min.y||t.y>e.max.y))return!1}if(!this.options.bounds)return!0;t=this._tileCoordsToBounds(t);return N(this.options.bounds).overlaps(t)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var i=this._map,e=this.getTileSize(),n=t.scaleBy(e),e=n.add(e);return[i.unproject(n,t.z),i.unproject(e,t.z)]},_tileCoordsToBounds:function(t){t=this._tileCoordsToNwSe(t),t=new R(t[0],t[1]);return t=!this.options.noWrap?this._map.wrapLatLngBounds(t):t},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var i=t.split(":"),t=new k(+i[0],+i[1]);return t.z=+i[2],t},_removeTile:function(t){var i=this._tiles[t];i&&($t(i.el),delete this._tiles[t],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ni(t,"leaflet-tile");var i=this.getTileSize();t.style.width=i.x+"px",t.style.height=i.y+"px",t.onselectstart=a,t.onmousemove=a,Q&&this.options.opacity<1&&ai(t,this.options.opacity),et&&!nt&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,i){var e=this._getTilePos(t),n=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),T(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&b(T(this._tileReady,this,t,null,o)),li(o,e),this._tiles[n]={el:o,coords:t,current:!0},i.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,i,e){i&&this.fire("tileerror",{error:i,tile:e,coords:t});var n=this._tileCoordsToKey(t);(e=this._tiles[n])&&(e.loaded=+new Date,this._map._fadeAnimated?(ai(e.el,0),z(this._fadeFrame),this._fadeFrame=b(this._updateOpacity,this)):(e.active=!0,this._pruneTiles()),i||(ni(e.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:e.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Q||!this._map._fadeAnimated?b(this._pruneTiles,this):setTimeout(T(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var i=new k(this._wrapX?o(t.x,this._wrapX):t.x,this._wrapY?o(t.y,this._wrapY):t.y);return i.z=t.z,i},_pxBoundsToTileRange:function(t){var i=this.getTileSize();return new I(t.min.unscaleBy(i).floor(),t.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),Re=Oe.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,i){this._url=t,(i=c(this,i)).detectRetina&&Pt&&0<i.maxZoom&&(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom++):(i.zoomOffset++,i.maxZoom--),i.minZoom=Math.max(0,i.minZoom)),"string"==typeof i.subdomains&&(i.subdomains=i.subdomains.split("")),et||this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){return this._url===t&&void 0===i&&(i=!0),this._url=t,i||this.redraw(),this},createTile:function(t,i){var e=document.createElement("img");return yi(e,"load",T(this._tileOnLoad,this,i,e)),yi(e,"error",T(this._tileOnError,this,i,e)),!this.options.crossOrigin&&""!==this.options.crossOrigin||(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),e.alt="",e.setAttribute("role","presentation"),e.src=this.getTileUrl(t),e},getTileUrl:function(t){var i={r:Pt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};return this._map&&!this._map.options.crs.infinite&&(t=this._globalTileRange.max.y-t.y,this.options.tms&&(i.y=t),i["-y"]=t),p(this._url,h(i,this.options))},_tileOnLoad:function(t,i){Q?setTimeout(T(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,e){var n=this.options.errorTileUrl;n&&i.getAttribute("src")!==n&&(i.src=n),t(e,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,i=this.options.maxZoom;return(t=this.options.zoomReverse?i-t:t)+this.options.zoomOffset},_getSubdomain:function(t){t=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var t,i;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((i=this._tiles[t].el).onload=a,i.onerror=a,i.complete||(i.src=g,$t(i),delete this._tiles[t]))},_removeTile:function(t){var i=this._tiles[t];if(i)return st||i.el.setAttribute("src",g),Oe.prototype._removeTile.call(this,t)},_tileReady:function(t,i,e){if(this._map&&(!e||e.getAttribute("src")!==g))return Oe.prototype._tileReady.call(this,t,i,e)}});function Ne(t,i){return new Re(t,i)}var De=Re.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var e,n=h({},this.defaultWmsParams);for(e in i)e in this.options||(n[e]=i[e]);var o=(i=c(this,i)).detectRetina&&Pt?2:1,t=this.getTileSize();n.width=t.x*o,n.height=t.y*o,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[i]=this._crs.code,Re.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToNwSe(t),e=this._crs,e=O(e.project(i[0]),e.project(i[1])),i=e.min,e=e.max,e=(1.3<=this._wmsVersion&&this._crs===re?[i.y,i.x,e.y,e.x]:[i.x,i.y,e.x,e.y]).join(","),t=Re.prototype.getTileUrl.call(this,t);return t+_(this.wmsParams,t,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+e},setParams:function(t,i){return h(this.wmsParams,t),i||this.redraw(),this}});Re.WMS=De,Ne.wms=function(t,i){return new De(t,i)};var je=ae.extend({options:{padding:.1,tolerance:0},initialize:function(t){c(this,t),M(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ni(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var e=this._map.getZoomScale(i,this._zoom),n=ci(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,i),s=this._map.project(t,i).subtract(s),s=o.multiplyBy(-e).add(n).add(o).subtract(s);ft?ui(this._container,s,e):li(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,i=this._map.getSize(),e=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new I(e,e.add(i.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),We=je.extend({getEvents:function(){var t=je.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){je.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");yi(t,"mousemove",this._onMouseMove,this),yi(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),yi(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,$t(this._container),wi(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){var t,i,e,n;this._map._animatingZoom&&this._bounds||(je.prototype._update.call(this),t=this._bounds,i=this._container,e=t.getSize(),n=Pt?2:1,li(i,t.min),i.width=n*e.x,i.height=n*e.y,i.style.width=e.x+"px",i.style.height=e.y+"px",Pt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update"))},_reset:function(){je.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t);t=(this._layers[M(t)]=t)._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var i=t._order,e=i.next,i=i.prev;e?e.prev=i:this._drawLast=i,i?i.next=e:this._drawFirst=e,delete t._order,delete this._layers[M(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){for(var i,e=t.options.dashArray.split(/[, ]+/),n=[],o=0;o<e.length;o++){if(i=Number(e[o]),isNaN(i))return;n.push(i)}t.options._dashArray=n}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||b(this._redraw,this))},_extendRedrawBounds:function(t){var i;t._pxBounds&&(i=(t.options.weight||0)+1,this._redrawBounds=this._redrawBounds||new I,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(t._pxBounds.max.add([i,i])))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t,i=this._redrawBounds;i?(t=i.getSize(),this._ctx.clearRect(i.min.x,i.min.y,t.x,t.y)):(this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore())},_draw:function(){var t,i,e=this._redrawBounds;this._ctx.save(),e&&(i=e.getSize(),this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()),this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,i){if(this._drawing){var e,n,o,s,r=t._parts,a=r.length,h=this._ctx;if(a){for(h.beginPath(),e=0;e<a;e++){for(n=0,o=r[e].length;n<o;n++)s=r[e][n],h[n?"lineTo":"moveTo"](s.x,s.y);i&&h.closePath()}this._fillStroke(h,t)}}},_updateCircle:function(t){var i,e,n,o;this._drawing&&!t._empty()&&(i=t._point,e=this._ctx,n=Math.max(Math.round(t._radius),1),1!=(o=(Math.max(Math.round(t._radiusY),1)||n)/n)&&(e.save(),e.scale(1,o)),e.beginPath(),e.arc(i.x,i.y/o,n,0,2*Math.PI,!1),1!=o&&e.restore(),this._fillStroke(e,t))},_fillStroke:function(t,i){var e=i.options;e.fill&&(t.globalAlpha=e.fillOpacity,t.fillStyle=e.fillColor||e.color,t.fill(e.fillRule||"evenodd")),e.stroke&&0!==e.weight&&(t.setLineDash&&t.setLineDash(i.options&&i.options._dashArray||[]),t.globalAlpha=e.opacity,t.lineWidth=e.weight,t.strokeStyle=e.color,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.stroke())},_onClick:function(t){for(var i,e,n=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(i=o.layer).options.interactive&&i._containsPoint(n)&&(("click"===t.type||"preclick"!==t.type)&&this._map._draggableMoved(i)||(e=i));e&&(Ii(t),this._fireEvent([e],t))},_onMouseMove:function(t){var i;!this._map||this._map.dragging.moving()||this._map._animatingZoom||(i=this._map.mouseEventToLayerPoint(t),this._handleMouseHover(t,i))},_handleMouseOut:function(t){var i=this._hoveredLayer;i&&(oi(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,i){if(!this._mouseHoverThrottled){for(var e,n,o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(i)&&(n=e);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(ni(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(T(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,i,e){this._map._fireDOMEvent(i,e||i.type,t)},_bringToFront:function(t){var i,e,n=t._order;n&&(i=n.next,e=n.prev,i&&((i.prev=e)?e.next=i:i&&(this._drawFirst=i),n.prev=this._drawLast,(this._drawLast.next=n).next=null,this._drawLast=n,this._requestRedraw(t)))},_bringToBack:function(t){var i,e,n=t._order;n&&(i=n.next,(e=n.prev)&&((e.next=i)?i.prev=e:e&&(this._drawLast=e),n.prev=null,n.next=this._drawFirst,this._drawFirst.prev=n,this._drawFirst=n,this._requestRedraw(t)))}});function He(t){return bt?new We(t):null}var Fe=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),ot={_initContainer:function(){this._container=Jt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(je.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var i=t._container=Fe("shape");ni(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",t._path=Fe("path"),i.appendChild(t._path),this._updateStyle(t),this._layers[M(t)]=t},_addPath:function(t){var i=t._container;this._container.appendChild(i),t.options.interactive&&t.addInteractiveTarget(i)},_removePath:function(t){var i=t._container;$t(i),t.removeInteractiveTarget(i),delete this._layers[M(t)]},_updateStyle:function(t){var i=t._stroke,e=t._fill,n=t.options,o=t._container;o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(i=i||(t._stroke=Fe("stroke")),o.appendChild(i),i.weight=n.weight+"px",i.color=n.color,i.opacity=n.opacity,n.dashArray?i.dashStyle=m(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=n.lineCap.replace("butt","flat"),i.joinstyle=n.lineJoin):i&&(o.removeChild(i),t._stroke=null),n.fill?(e=e||(t._fill=Fe("fill")),o.appendChild(e),e.color=n.fillColor||n.color,e.opacity=n.fillOpacity):e&&(o.removeChild(e),t._fill=null)},_updateCircle:function(t){var i=t._point.round(),e=Math.round(t._radius),n=Math.round(t._radiusY||e);this._setPath(t,t._empty()?"M0 0":"AL "+i.x+","+i.y+" "+e+","+n+" 0,23592600")},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){ti(t._container)},_bringToBack:function(t){ii(t._container)}},Ue=Mt?Fe:Y,Ve=je.extend({getEvents:function(){var t=je.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=Ue("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ue("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){$t(this._container),wi(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){var t,i,e;this._map._animatingZoom&&this._bounds||(je.prototype._update.call(this),i=(t=this._bounds).getSize(),e=this._container,this._svgSize&&this._svgSize.equals(i)||(this._svgSize=i,e.setAttribute("width",i.x),e.setAttribute("height",i.y)),li(e,t.min),e.setAttribute("viewBox",[t.min.x,t.min.y,i.x,i.y].join(" ")),this.fire("update"))},_initPath:function(t){var i=t._path=Ue("path");t.options.className&&ni(i,t.options.className),t.options.interactive&&ni(i,"leaflet-interactive"),this._updateStyle(t),this._layers[M(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){$t(t._path),t.removeInteractiveTarget(t._path),delete this._layers[M(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var i=t._path,t=t.options;i&&(t.stroke?(i.setAttribute("stroke",t.color),i.setAttribute("stroke-opacity",t.opacity),i.setAttribute("stroke-width",t.weight),i.setAttribute("stroke-linecap",t.lineCap),i.setAttribute("stroke-linejoin",t.lineJoin),t.dashArray?i.setAttribute("stroke-dasharray",t.dashArray):i.removeAttribute("stroke-dasharray"),t.dashOffset?i.setAttribute("stroke-dashoffset",t.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),t.fill?(i.setAttribute("fill",t.fillColor||t.color),i.setAttribute("fill-opacity",t.fillOpacity),i.setAttribute("fill-rule",t.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(t,i){this._setPath(t,X(t._parts,i))},_updateCircle:function(t){var i=t._point,e=Math.max(Math.round(t._radius),1),n="a"+e+","+(Math.max(Math.round(t._radiusY),1)||e)+" 0 1,0 ",e=t._empty()?"M0 0":"M"+(i.x-e)+","+i.y+n+2*e+",0 "+n+2*-e+",0 ";this._setPath(t,e)},_setPath:function(t,i){t._path.setAttribute("d",i)},_bringToFront:function(t){ti(t._path)},_bringToBack:function(t){ii(t._path)}});function qe(t){return Tt||Mt?new Ve(t):null}Mt&&Ve.include(ot),Di.include({getRenderer:function(t){t=(t=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer)||(this._renderer=this._createRenderer());return this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var i=this._paneRenderers[t];return void 0===i&&(i=this._createRenderer({pane:t}),this._paneRenderers[t]=i),i},_createRenderer:function(t){return this.options.preferCanvas&&He(t)||qe(t)}});var Ge=ve.extend({initialize:function(t,i){ve.prototype.initialize.call(this,this._boundsToLatLngs(t),i)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=N(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});Ve.create=Ue,Ve.pointsToPath=X,ye.geometryToLayer=xe,ye.coordsToLatLng=Pe,ye.coordsToLatLngs=Le,ye.latLngToCoords=be,ye.latLngsToCoords=Te,ye.getFeature=Me,ye.asFeature=ze,Di.mergeOptions({boxZoom:!0});Z=mt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){yi(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){wi(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){$t(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),jt(),_i(),this._startPoint=this._map.mouseEventToContainerPoint(t),yi(document,{contextmenu:Zi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Jt("div","leaflet-zoom-box",this._container),ni(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var i=new I(this._point,this._startPoint),t=i.getSize();li(this._box,i.min),this._box.style.width=t.x+"px",this._box.style.height=t.y+"px"},_finish:function(){this._moved&&($t(this._box),oi(this._container,"leaflet-crosshair")),vi(),di(),wi(document,{contextmenu:Zi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){1!==t.which&&1!==t.button||(this._finish(),this._moved&&(this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(T(this._resetState,this),0),t=new R(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point)),this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})))},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Di.addInitHook("addHandler","boxZoom",Z),Di.mergeOptions({doubleClickZoom:!0});G=mt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var i=this._map,e=i.getZoom(),n=i.options.zoomDelta,n=t.originalEvent.shiftKey?e-n:e+n;"center"===i.options.doubleClickZoom?i.setZoom(n):i.setZoomAround(t.containerPoint,n)}});Di.addInitHook("addHandler","doubleClickZoom",G),Di.mergeOptions({dragging:!0,inertia:!nt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});K=mt.extend({addHooks:function(){var t;this._draggable||(t=this._map,this._draggable=new Xi(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))),ni(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){oi(this._map._container,"leaflet-grab"),oi(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t,i=this._map;i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity?(t=N(this._map.options.maxBounds),this._offsetLimit=O(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))):this._offsetLimit=null,i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){var i,e;this._map.options.inertia&&(i=this._lastTime=+new Date,e=this._lastPos=this._draggable._absPos||this._draggable._newPos,this._positions.push(e),this._times.push(i),this._prunePositions(i)),this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;1<this._positions.length&&50<t-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},_onPreDragLimit:function(){var t,i;this._viscosity&&this._offsetLimit&&(t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit,t.x<i.min.x&&(t.x=this._viscousLimit(t.x,i.min.x)),t.y<i.min.y&&(t.y=this._viscousLimit(t.y,i.min.y)),t.x>i.max.x&&(t.x=this._viscousLimit(t.x,i.max.x)),t.y>i.max.y&&(t.y=this._viscousLimit(t.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(t))},_onPreDragWrap:function(){var t=this._worldWidth,i=Math.round(t/2),e=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-i+e)%t+i-e,i=(n+i+e)%t-i-e,i=Math.abs(o+e)<Math.abs(i+e)?o:i;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=i},_onDragEnd:function(t){var i,e,n,o,s=this._map,r=s.options,a=!r.inertia||this._times.length<2;s.fire("dragend",t),a?s.fire("moveend"):(this._prunePositions(+new Date),e=this._lastPos.subtract(this._positions[0]),t=(this._lastTime-this._times[0])/1e3,i=r.easeLinearity,e=(a=e.multiplyBy(i/t)).distanceTo([0,0]),t=Math.min(r.inertiaMaxSpeed,e),e=a.multiplyBy(t/e),n=t/(r.inertiaDeceleration*i),(o=e.multiplyBy(-n/2).round()).x||o.y?(o=s._limitOffset(o,s.options.maxBounds),b(function(){s.panBy(o,{duration:n,easeLinearity:i,noMoveStart:!0,animate:!0})})):s.fire("moveend"))}});Di.addInitHook("addHandler","dragging",K),Di.mergeOptions({keyboard:!0,keyboardPanDelta:80});U=mt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),yi(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),wi(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){var t,i,e;this._focused||(t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,e=t.scrollLeft||e.scrollLeft,this._map._container.focus(),window.scrollTo(e,i))},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){for(var i=this._panKeys={},e=this.keyCodes,n=0,o=e.left.length;n<o;n++)i[e.left[n]]=[-1*t,0];for(n=0,o=e.right.length;n<o;n++)i[e.right[n]]=[t,0];for(n=0,o=e.down.length;n<o;n++)i[e.down[n]]=[0,t];for(n=0,o=e.up.length;n<o;n++)i[e.up[n]]=[0,-1*t]},_setZoomDelta:function(t){for(var i=this._zoomKeys={},e=this.keyCodes,n=0,o=e.zoomIn.length;n<o;n++)i[e.zoomIn[n]]=t;for(n=0,o=e.zoomOut.length;n<o;n++)i[e.zoomOut[n]]=-t},_addHooks:function(){yi(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){wi(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var i,e=t.keyCode,n=this._map;if(e in this._panKeys)n._panAnim&&n._panAnim._inProgress||(i=this._panKeys[e],t.shiftKey&&(i=A(i).multiplyBy(3)),n.panBy(i),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds));else if(e in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else{if(27!==e||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}Zi(t)}}});Di.addInitHook("addHandler","keyboard",U),Di.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});_t=mt.extend({addHooks:function(){yi(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){wi(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var i=Bi(t),e=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);e=Math.max(e-(new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(T(this._performZoom,this),e),Zi(t)},_performZoom:function(){var t=this._map,i=t.getZoom(),e=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),n=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,n=e?Math.ceil(n/e)*e:n,n=t._limitZoom(i+(0<this._delta?n:-n))-i;this._delta=0,this._startTime=null,n&&("center"===t.options.scrollWheelZoom?t.setZoom(i+n):t.setZoomAround(this._lastMousePos,i+n))}});Di.addInitHook("addHandler","scrollWheelZoom",_t),Di.mergeOptions({tap:!0,tapTolerance:15});F=mt.extend({addHooks:function(){yi(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){wi(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Si(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var i=t.touches[0],t=i.target;this._startPos=this._newPos=new k(i.clientX,i.clientY),t.tagName&&"a"===t.tagName.toLowerCase()&&ni(t,"leaflet-active"),this._holdTimeout=setTimeout(T(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3),this._simulateEvent("mousedown",i),yi(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){var i;clearTimeout(this._holdTimeout),wi(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches&&((t=(i=t.changedTouches[0]).target)&&t.tagName&&"a"===t.tagName.toLowerCase()&&oi(t,"leaflet-active"),this._simulateEvent("mouseup",i),this._isTapValid()&&this._simulateEvent("click",i))},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){t=t.touches[0];this._newPos=new k(t.clientX,t.clientY),this._simulateEvent("mousemove",t)},_simulateEvent:function(t,i){var e=document.createEvent("MouseEvents");e._simulated=!0,i.target._simulatedClick=!0,e.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(e)}});!xt||yt&&!ut||Di.addInitHook("addHandler","tap",F),Di.mergeOptions({touchZoom:xt&&!nt,bounceAtZoomLimits:!0});ot=mt.extend({addHooks:function(){ni(this._map._container,"leaflet-touch-zoom"),yi(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){oi(this._map._container,"leaflet-touch-zoom"),wi(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i,e,n=this._map;!t.touches||2!==t.touches.length||n._animatingZoom||this._zooming||(i=n.mouseEventToContainerPoint(t.touches[0]),e=n.mouseEventToContainerPoint(t.touches[1]),this._centerPoint=n.getSize()._divideBy(2),this._startLatLng=n.containerPointToLatLng(this._centerPoint),"center"!==n.options.touchZoom&&(this._pinchStartLatLng=n.containerPointToLatLng(i.add(e)._divideBy(2))),this._startDist=i.distanceTo(e),this._startZoom=n.getZoom(),this._moved=!1,this._zooming=!0,n._stop(),yi(document,"touchmove",this._onTouchMove,this),yi(document,"touchend",this._onTouchEnd,this),Si(t))},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var i=this._map,e=i.mouseEventToContainerPoint(t.touches[0]),n=i.mouseEventToContainerPoint(t.touches[1]),o=e.distanceTo(n)/this._startDist;if(this._zoom=i.getScaleZoom(o,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&o<1||this._zoom>i.getMaxZoom()&&1<o)&&(this._zoom=i._limitZoom(this._zoom)),"center"===i.options.touchZoom){if(this._center=this._startLatLng,1==o)return}else{n=e._add(n)._divideBy(2)._subtract(this._centerPoint);if(1==o&&0===n.x&&0===n.y)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(n),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),z(this._animRequest);i=T(i._move,i,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=b(i,this,!0),Si(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,z(this._animRequest),wi(document,"touchmove",this._onTouchMove,this),wi(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Di.addInitHook("addHandler","touchZoom",ot),Di.BoxZoom=Z,Di.DoubleClickZoom=G,Di.Drag=K,Di.Keyboard=U,Di.ScrollWheelZoom=_t,Di.Tap=F,Di.TouchZoom=ot,t.version="1.7.1",t.Control=Wi,t.control=ji,t.Browser=lt,t.Evented=E,t.Mixin=gt,t.Util=C,t.Class=S,t.Handler=mt,t.extend=h,t.bind=T,t.stamp=M,t.setOptions=c,t.DomEvent=pt,t.DomUtil=ct,t.PosAnimation=Ni,t.Draggable=Xi,t.LineUtil=vt,t.PolyUtil=J,t.Point=k,t.point=A,t.Bounds=I,t.bounds=O,t.Transformation=V,t.transformation=q,t.Projection=at,t.LatLng=D,t.latLng=j,t.LatLngBounds=R,t.latLngBounds=N,t.CRS=W,t.GeoJSON=ye,t.geoJSON=Ce,t.geoJson=ht,t.Layer=ae,t.LayerGroup=he,t.layerGroup=function(t,i){return new he(t,i)},t.FeatureGroup=ue,t.featureGroup=function(t,i){return new ue(t,i)},t.ImageOverlay=Se,t.imageOverlay=function(t,i,e){return new Se(t,i,e)},t.VideoOverlay=Ze,t.videoOverlay=function(t,i,e){return new Ze(t,i,e)},t.SVGOverlay=Ee,t.svgOverlay=function(t,i,e){return new Ee(t,i,e)},t.DivOverlay=ke,t.Popup=Be,t.popup=function(t,i){return new Be(t,i)},t.Tooltip=Ae,t.tooltip=function(t,i){return new Ae(t,i)},t.Icon=le,t.icon=function(t){return new le(t)},t.DivIcon=Ie,t.divIcon=function(t){return new Ie(t)},t.Marker=de,t.marker=function(t,i){return new de(t,i)},t.TileLayer=Re,t.tileLayer=Ne,t.GridLayer=Oe,t.gridLayer=function(t){return new Oe(t)},t.SVG=Ve,t.svg=qe,t.Renderer=je,t.Canvas=We,t.canvas=He,t.Path=pe,t.CircleMarker=me,t.circleMarker=function(t,i){return new me(t,i)},t.Circle=fe,t.circle=function(t,i,e){return new fe(t,i,e)},t.Polyline=ge,t.polyline=function(t,i){return new ge(t,i)},t.Polygon=ve,t.polygon=function(t,i){return new ve(t,i)},t.Rectangle=Ge,t.rectangle=function(t,i){return new Ge(t,i)},t.Map=Di,t.map=function(t,i){return new Di(t,i)};var Ke=window.L;t.noConflict=function(){return window.L=Ke,this},window.L=t});
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){function W(e){if(!console||!console.warn)throw"Scrollax: "+e;console.warn("Scrollax: "+e)}function ka(e){var t=!!("pageYOffset"in e);return{width:t?window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:e.offsetWidth,height:t?window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight:e.offsetHeight,left:e[t?"pageXOffset":"scrollLeft"],top:e[t?"pageYOffset":"scrollTop"]}}function X(a){return(a=a.data("scrollax"))&&eval("({"+a+"})")||{}}function Y(e){var t,n;return!!(e&&"object"==typeof e&&"object"==typeof e.window&&e.window==e&&e.setTimeout&&e.alert&&(t=e.document)&&"object"==typeof t&&(n=t.defaultView||t.parentWindow)&&"object"==typeof n&&n==e)}var v=Array.prototype,C=v.push,Z=v.splice,aa=Object.prototype.hasOwnProperty,la=/[-+]?\d+(\.\d+)?/g,ma="translateX translateY rotate rotateX rotateY rotateZ skewX skewY scaleX scaleY".split(" "),ba=e(window),ca=e(document.body),da,ea,L,M,N,q=function(o,t,n){function r(){return u=(w?ca:G).find(p),f.length=0,E=!!s.horizontal,u.each(I),l(),s.performanceTrick&&(x=w?ca:G),i("load"),Q}function a(){v=v&&clearTimeout(v),v=setTimeout(function(){Q.reload()})}function l(){var t=f.length;if(s.performanceTrick&&x&&(clearTimeout(b),T||(x.addClass("scrollax-performance"),T=!0),b=setTimeout(function(){x.removeClass("scrollax-performance"),T=!1},100)),t){S=ka(o);for(var n=0;n<t;n++)k=f[n],(j=L(k.element,o))[E?"right":"bottom"]<0||j[E?"left":"top"]>S[E?"width":"height"]||(O=k.options,z=O.offset||s.offset||0,A=j[E?"right":"bottom"],B=j[E?"width":"height"],(O=(B-A+z)/B)<0&&(A=j[E?"left":"top"],B=S[E?"width":"height"],O=(B-A+z)/B-1),1<O||O<-1||function(t,n){var o=(H=t.parallaxElements).length;if(o)for(var r=0;r<o;r++){P=H[r];var a,l,i=P.element,c=n;for(V in U=P.properties||(E?{translateX:"100%"}:{translateY:"100%"}),F="",U){if("number"==typeof(D=U[V]))D*=c;else if("string"==typeof D)for(R=D.match(la),y=0,g=R.length;y<g;y++)D=D.replace(R[y],parseFloat(R[y]*c));-1!==e.inArray(V,ma)?F+=V+"("+D+")":(a=i.style,l="opacity"===V?(l=c<0?1+D:1-D)<0?0:1<l?1:l:D,a[V]=l)}F&&(i.style[da]=ea+F)}}(k,O));i("scroll",S)}}function i(e,t){if(m[e]){for(g=m[e].length,y=h.length=0;y<g;y++)C.call(h,m[e][y]);for(y=0;y<g;y++)h[y].call(Q,e,t)}}function c(e,t){for(var n=0,o=m[e].length;n<o;n++)if(m[e][n]===t)return n;return-1}var s,f,u,p,d,m,h,v,w,y,g,x,b,T,S,E,z,j,k,O,A,B,H,P,U,V,D,F,R,I,Q=this,G=o&&e(o).eq(0)||ba,J=q.instances,K=null;o=G[0],e.each(J,function(e,t){e&&e.frame===o&&(K=!0)}),!o||K?W(K?"Scrollax: Scrollax has been initialized for this frame!":"Scrollax: Frame is not available!"):(s=e.extend({},q.defaults,t),f=[],u=null,p=s.parentSelector||"[data-scrollax-parent]",d=s.elementsSelector||"[data-scrollax]",m={},h=[],w=Y(o),Q.frame=o,Q.options=s,Q.parents=f,Q.initialized=!1,Q.reload=r,I=function(t,n){var o=e(n),r=X(e(n)),a={};a.element=n,a.options=r,a.parallaxElements=[],o.find(d).each(function(t,n){var o=X(e(n));o.element=n,C.call(a.parallaxElements,o)}),C.call(f,a)},Q.scroll=l,Q.getIndex=function(e){return void 0!==e?"number"!=typeof e&&"string"!=typeof e||""===e||isNaN(e)?u.index(e):0<=e&&e<f.length?e:-1:-1},Q.one=function(t,n){return Q.on(t,function e(){n.apply(Q,arguments),Q.off(t,e)}),Q},Q.on=function(e,t){if("object"==typeof e)for(var n in e)aa.call(e,n)&&Q.on(n,e[n]);else if("function"==typeof t)for(var o=0,r=(n=e.split(" ")).length;o<r;o++)m[n[o]]=m[n[o]]||[],-1===c(n[o],t)&&C.call(m[n[o]],t);else if("array"==typeof t)for(n=0,o=t.length;n<o;n++)Q.on(e,t[n]);return Q},Q.off=function(e,t){if(t instanceof Array)for(var n=0,o=t.length;n<o;n++)Q.off(e,t[n]);else for(var o=0,r=(n=e.split(" ")).length;o<r;o++){var a;m[n[o]]=m[n[o]]||[],void 0===t?m[n[o]].length=0:-1!==(a=c(n[o],t))&&Z.call(m[n[o]],a,1)}return Q},Q.set=function(t,n){return e.isPlainObject(t)?e.extend(s,t):aa.call(s,t)&&(s[t]=n),r(),Q},Q.destroy=function(){return N(window,"resize",a),N(o,"scroll",l),e.each(J,function(e,t){e&&e.frame===o&&Z.call(q.instances,t,1)}),f.length=0,Q.initialized=!1,i("destroy"),Q},Q.init=function(){if(!Q.initialized)return Q.on(n),r(),M(window,"resize",a),M(o,"scroll",l),C.call(q.instances,Q),Q.initialized=!0,i("initialized"),Q})},m0,p0,q0,r0,s0,t0,T0,U0;function y0(){this.returnValue=!1}function z0(){this.cancelBubble=!0}function S0(e){for(var t=0,n=T0.length;t<n;t++){var o=T0[t]?T0[t]+e.charAt(0).toUpperCase()+e.slice(1):e;if(null!=U0.style[o])return o}}q.instances=[],L=function(e,t){if(s0=e.ownerDocument||e,t0=s0.documentElement,p0=Y(t)?t:s0.defaultView||window,t=t&&t!==s0?t:t0,q0=(p0.pageYOffset||t0.scrollTop)-t0.clientTop,r0=(p0.pageXOffset||t0.scrollLeft)-t0.clientLeft,s0={top:0,left:0},!e||!e.getBoundingClientRect)return null;var n={},o=e.getBoundingClientRect();for(m0 in o)n[m0]=o[m0];return(s0=n).width=s0.right-s0.left,s0.height=s0.bottom-s0.top,t===p0?s0:(s0.top+=q0,s0.left+=r0,s0.right+=r0,s0.bottom+=q0,t===t0||(t0=L(t),s0.left-=t0.left,s0.right-=t0.left,s0.top-=t0.top,s0.bottom-=t0.top),s0)},M=window.addEventListener?function(e,t,n,o){return e.addEventListener(t,n,o||!1),n}:function(t,e,n){var o=e+n;return t[o]=t[o]||function(){var e=window.event;e.target=e.srcElement,e.preventDefault=y0,e.stopPropagation=z0,n.call(t,e)},t.attachEvent("on"+e,t[o]),n},N=window.removeEventListener?function(e,t,n,o){return e.removeEventListener(t,n,o||!1),n}:function(t,e,n){var o=e+n;t.detachEvent("on"+e,t[o]);try{delete t[o]}catch(e){t[o]=void 0}return n},T0=["","webkit","moz","ms","o"],U0=document.createElement("div"),da=S0("transform"),ea=S0("perspective")?"translateZ(0) ":"",q.defaults={horizontal:!1,offset:0,parentSelector:null,elementsSelector:null,performanceTrick:!1},window.Scrollax=q,e.fn.Scrollax=function(r,a){var l,i;return e.isPlainObject(r)||("string"!=typeof r&&!1!==r||(l=!1===r?"destroy":r,i=slice.call(arguments,1)),r={}),this.each(function(t,n){var o=e.data(n,"scrollax");o||l?o&&l&&o[l]&&o[l].apply(o,i):e.data(n,"scrollax",new q(n,r,a).init())})},e.Scrollax=function(e,t){ba.Scrollax(e,t)};var v=document.head||document.getElementsByTagName("head")[0],w=document.createElement("style");return w.type="text/css",w.styleSheet?w.styleSheet.cssText=".scrollax-performance, .scrollax-performance *, .scrollax-performance *:before, .scrollax-performance *:after { pointer-events: none !important; -webkit-animation-play-state: paused !important; animation-play-state: paused !important; };":w.appendChild(document.createTextNode(".scrollax-performance, .scrollax-performance *, .scrollax-performance *:before, .scrollax-performance *:after { pointer-events: none !important; -webkit-animation-play-state: paused !important; animation-play-state: paused !important; };")),v.appendChild(w),q});
!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),n(t),t}:n(jQuery)}(function(t){var e,n,p,r,o,h,f,g,m,y,v,s,i,_,a=((u=t&&t.fn&&t.fn.select2&&t.fn.select2.amd?t.fn.select2.amd:u)&&u.requirejs||(u?n=u:u={},g={},m={},y={},v={},s=Object.prototype.hasOwnProperty,i=[].slice,_=/\.js$/,h=function(e,t){var n,s,i=c(e),r=i[0],t=t[1];return e=i[1],r&&(n=x(r=l(r,t))),r?e=n&&n.normalize?n.normalize(e,(s=t,function(e){return l(e,s)})):l(e,t):(r=(i=c(e=l(e,t)))[0],e=i[1],r&&(n=x(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:n}},f={require:function(e){return w(e)},exports:function(e){var t=g[e];return void 0!==t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:(t=e,function(){return y&&y.config&&y.config[t]||{}})};var t}},r=function(e,t,n,s){var i,r,o,a,l,c=[],u=typeof n,d=A(s=s||e);if("undefined"==u||"function"==u){for(t=!t.length&&n.length?["require","exports","module"]:t,a=0;a<t.length;a+=1)if("require"===(r=(o=h(t[a],d)).f))c[a]=f.require(e);else if("exports"===r)c[a]=f.exports(e),l=!0;else if("module"===r)i=c[a]=f.module(e);else if(b(g,r)||b(m,r)||b(v,r))c[a]=x(r);else{if(!o.p)throw new Error(e+" missing "+r);o.p.load(o.n,w(s,!0),function(t){return function(e){g[t]=e}}(r),{}),c[a]=g[r]}u=n?n.apply(g[e],c):void 0,e&&(i&&i.exports!==p&&i.exports!==g[e]?g[e]=i.exports:u===p&&l||(g[e]=u))}else e&&(g[e]=n)},e=n=o=function(e,t,n,s,i){if("string"==typeof e)return f[e]?f[e](t):x(h(e,A(t)).f);if(!e.splice){if((y=e).deps&&o(y.deps,y.callback),!t)return;t.splice?(e=t,t=n,n=null):e=p}return t=t||function(){},"function"==typeof n&&(n=s,s=i),s?r(p,e,t,n):setTimeout(function(){r(p,e,t,n)},4),o},o.config=function(e){return o(e)},e._defined=g,(a=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),b(g,e)||b(m,e)||(m[e]=[e,t,n])}).amd={jQuery:!0},u.requirejs=e,u.require=n,u.define=a),u.define("almond",function(){}),u.define("jquery",[],function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),u.define("select2/utils",["jquery"],function(r){var s={};function c(e){var t,n=e.prototype,s=[];for(t in n)"function"==typeof n[t]&&"constructor"!==t&&s.push(t);return s}function e(){this.listeners={}}s.Extend=function(e,t){var n,s={}.hasOwnProperty;function i(){this.constructor=e}for(n in t)s.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},s.Decorate=function(s,i){var e=c(i),t=c(s);function r(){var e=Array.prototype.unshift,t=i.prototype.constructor.length,n=s.prototype.constructor;0<t&&(e.call(arguments,s.prototype.constructor),n=i.prototype.constructor),n.apply(this,arguments)}i.displayName=s.displayName,r.prototype=new function(){this.constructor=r};for(var n=0;n<t.length;n++){var o=t[n];r.prototype[o]=s.prototype[o]}for(var a=0;a<e.length;a++){var l=e[a];r.prototype[l]=function(e){var t=function(){};e in r.prototype&&(t=r.prototype[e]);var n=i.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),n.apply(this,arguments)}}(l)}return r},e.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},e.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},0===(n=null==n?[]:n).length&&n.push({}),(n[0]._type=e)in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},e.prototype.invoke=function(e,t){for(var n=0,s=e.length;n<s;n++)e[n].apply(this,t)},s.Observable=e,s.generateChars=function(e){for(var t="",n=0;n<e;n++)t+=Math.floor(36*Math.random()).toString(36);return t},s.bind=function(e,t){return function(){e.apply(t,arguments)}},s._convertData=function(e){for(var t in e){var n=t.split("-"),s=e;if(1!==n.length){for(var i=0;i<n.length;i++){var r=n[i];(r=r.substring(0,1).toLowerCase()+r.substring(1))in s||(s[r]={}),i==n.length-1&&(s[r]=e[t]),s=s[r]}delete e[t]}}return e},s.hasScroll=function(e,t){var n=r(t),s=t.style.overflowX,i=t.style.overflowY;return(s!==i||"hidden"!==i&&"visible"!==i)&&("scroll"===s||"scroll"===i||n.innerHeight()<t.scrollHeight||n.innerWidth()<t.scrollWidth)},s.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},s.__cache={};var n=0;return s.GetUniqueElementId=function(e){var t=e.getAttribute("data-select2-id");return null!=t||(t=e.id?"select2-data-"+e.id:"select2-data-"+(++n).toString()+"-"+s.generateChars(4),e.setAttribute("data-select2-id",t)),t},s.StoreData=function(e,t,n){e=s.GetUniqueElementId(e),s.__cache[e]||(s.__cache[e]={}),s.__cache[e][t]=n},s.GetData=function(e,t){var n=s.GetUniqueElementId(e);return t?s.__cache[n]&&null!=s.__cache[n][t]?s.__cache[n][t]:r(e).data(t):s.__cache[n]},s.RemoveData=function(e){var t=s.GetUniqueElementId(e);null!=s.__cache[t]&&delete s.__cache[t],e.removeAttribute("data-select2-id")},s.copyNonInternalCssClasses=function(e,t){var n=(n=e.getAttribute("class").trim().split(/\s+/)).filter(function(e){return 0===e.indexOf("select2-")}),t=(t=t.getAttribute("class").trim().split(/\s+/)).filter(function(e){return 0!==e.indexOf("select2-")}),t=n.concat(t);e.setAttribute("class",t.join(" "))},s}),u.define("select2/results",["jquery","./utils"],function(d,p){function s(e,t,n){this.$element=e,this.data=n,this.options=t,s.__super__.constructor.call(this)}return p.Extend(s,p.Observable),s.prototype.render=function(){var e=d('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e},s.prototype.clear=function(){this.$results.empty()},s.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=d('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),s=this.options.get("translations").get(e.message);n.append(t(s(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},s.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},s.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var s=e.results[n],s=this.option(s);t.push(s)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},s.prototype.position=function(e,t){t.find(".select2-results").append(e)},s.prototype.sort=function(e){return this.options.get("sorter")(e)},s.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option--selectable"),t=e.filter(".select2-results__option--selected");(0<t.length?t:e).first().trigger("mouseenter"),this.ensureHighlightVisible()},s.prototype.setClasses=function(){var t=this;this.data.current(function(e){var s=e.map(function(e){return e.id.toString()});t.$results.find(".select2-results__option--selectable").each(function(){var e=d(this),t=p.GetData(this,"data"),n=""+t.id;null!=t.element&&t.element.selected||null==t.element&&-1<s.indexOf(n)?(this.classList.add("select2-results__option--selected"),e.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),e.attr("aria-selected","false"))})})},s.prototype.showLoading=function(e){this.hideLoading(),e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},(e=this.option(e)).className+=" loading-results",this.$results.prepend(e)},s.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},s.prototype.option=function(e){var t=document.createElement("li");t.classList.add("select2-results__option"),t.classList.add("select2-results__option--selectable");var n,s={role:"option"},i=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(n in(null!=e.element&&i.call(e.element,":disabled")||null==e.element&&e.disabled)&&(s["aria-disabled"]="true",t.classList.remove("select2-results__option--selectable"),t.classList.add("select2-results__option--disabled")),null==e.id&&t.classList.remove("select2-results__option--selectable"),null!=e._resultId&&(t.id=e._resultId),e.title&&(t.title=e.title),e.children&&(s.role="group",s["aria-label"]=e.text,t.classList.remove("select2-results__option--selectable"),t.classList.add("select2-results__option--group")),s){var r=s[n];t.setAttribute(n,r)}if(e.children){var o=d(t),a=document.createElement("strong");a.className="select2-results__group",this.template(e,a);for(var l=[],c=0;c<e.children.length;c++){var u=e.children[c],u=this.option(u);l.push(u)}(i=d("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"})).append(l),o.append(a),o.append(i)}else this.template(e,t);return p.StoreData(t,"data",e),t},s.prototype.bind=function(t,e){var i=this,n=t.id+"-results";this.$results.attr("id",n),t.on("results:all",function(e){i.clear(),i.append(e.data),t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("results:append",function(e){i.append(e.data),t.isOpen()&&i.setClasses()}),t.on("query",function(e){i.hideMessages(),i.showLoading(e)}),t.on("select",function(){t.isOpen()&&(i.setClasses(),i.options.get("scrollAfterSelect")&&i.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(i.setClasses(),i.options.get("scrollAfterSelect")&&i.highlightFirstItem())}),t.on("open",function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()}),t.on("close",function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=i.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e,t=i.getHighlightedResults();0!==t.length&&(e=p.GetData(t[0],"data"),t.hasClass("select2-results__option--selected")?i.trigger("close",{}):i.trigger("select",{data:e}))}),t.on("results:previous",function(){var e,t=i.getHighlightedResults(),n=i.$results.find(".select2-results__option--selectable"),s=n.index(t);s<=0||(e=s-1,0===t.length&&(e=0),(s=n.eq(e)).trigger("mouseenter"),t=i.$results.offset().top,n=s.offset().top,s=i.$results.scrollTop()+(n-t),0===e?i.$results.scrollTop(0):n-t<0&&i.$results.scrollTop(s))}),t.on("results:next",function(){var e,t=i.getHighlightedResults(),n=i.$results.find(".select2-results__option--selectable"),s=n.index(t)+1;s>=n.length||((e=n.eq(s)).trigger("mouseenter"),t=i.$results.offset().top+i.$results.outerHeight(!1),n=e.offset().top+e.outerHeight(!1),e=i.$results.scrollTop()+n-t,0===s?i.$results.scrollTop(0):t<n&&i.$results.scrollTop(e))}),t.on("results:focus",function(e){e.element[0].classList.add("select2-results__option--highlighted"),e.element[0].setAttribute("aria-selected","true")}),t.on("results:message",function(e){i.displayMessage(e)}),d.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-t+e.deltaY,t=0<e.deltaY&&t-e.deltaY<=0,n=e.deltaY<0&&n<=i.$results.height();t?(i.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):n&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option--selectable",function(e){var t=d(this),n=p.GetData(this,"data");t.hasClass("select2-results__option--selected")?i.options.get("multiple")?i.trigger("unselect",{originalEvent:e,data:n}):i.trigger("close",{}):i.trigger("select",{originalEvent:e,data:n})}),this.$results.on("mouseenter",".select2-results__option--selectable",function(e){var t=p.GetData(this,"data");i.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false"),i.trigger("results:focus",{data:t,element:d(this)})})},s.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},s.prototype.destroy=function(){this.$results.remove()},s.prototype.ensureHighlightVisible=function(){var e,t,n,s,i=this.getHighlightedResults();0!==i.length&&(e=this.$results.find(".select2-results__option--selectable").index(i),s=this.$results.offset().top,t=i.offset().top,n=this.$results.scrollTop()+(t-s),s=t-s,n-=2*i.outerHeight(!1),e<=2?this.$results.scrollTop(0):(s>this.$results.outerHeight()||s<0)&&this.$results.scrollTop(n))},s.prototype.template=function(e,t){var n=this.options.get("templateResult"),s=this.options.get("escapeMarkup");null==(e=n(e,t))?t.style.display="none":"string"==typeof e?t.innerHTML=s(e):d(t).append(e)},s}),u.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),u.define("select2/selection/base",["jquery","../utils","../keys"],function(n,s,i){function r(e,t){this.$element=e,this.options=t,r.__super__.constructor.call(this)}return s.Extend(r,s.Observable),r.prototype.render=function(){var e=n('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=s.GetData(this.$element[0],"old-tabindex")?this._tabindex=s.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),e.attr("aria-disabled","false"),this.$selection=e},r.prototype.bind=function(e,t){var n=this,s=e.id+"-results";this.container=e,this.$selection.on("focus",function(e){n.trigger("focus",e)}),this.$selection.on("blur",function(e){n._handleBlur(e)}),this.$selection.on("keydown",function(e){n.trigger("keypress",e),e.which===i.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){n.update(e.data)}),e.on("open",function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",s),n._attachCloseHandler(e)}),e.on("close",function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.trigger("focus"),n._detachCloseHandler(e)}),e.on("enable",function(){n.$selection.attr("tabindex",n._tabindex),n.$selection.attr("aria-disabled","false")}),e.on("disable",function(){n.$selection.attr("tabindex","-1"),n.$selection.attr("aria-disabled","true")})},r.prototype._handleBlur=function(e){var t=this;window.setTimeout(function(){document.activeElement==t.$selection[0]||n.contains(t.$selection[0],document.activeElement)||t.trigger("blur",e)},1)},r.prototype._attachCloseHandler=function(e){n(document.body).on("mousedown.select2."+e.id,function(e){var t=n(e.target).closest(".select2");n(".select2.select2-container--open").each(function(){this!=t[0]&&s.GetData(this,"element").select2("close")})})},r.prototype._detachCloseHandler=function(e){n(document.body).off("mousedown.select2."+e.id)},r.prototype.position=function(e,t){t.find(".selection").append(e)},r.prototype.destroy=function(){this._detachCloseHandler(this.container)},r.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},r.prototype.isEnabled=function(){return!this.isDisabled()},r.prototype.isDisabled=function(){return this.options.get("disabled")},r}),u.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,s){function i(){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e[0].classList.add("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},i.prototype.bind=function(t,e){var n=this;i.__super__.bind.apply(this,arguments);var s=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",s).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",s),this.$selection.attr("aria-controls",s),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),t.on("focus",function(e){t.isOpen()||n.$selection.trigger("focus")})},i.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},i.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},i.prototype.selectionContainer=function(){return e("<span></span>")},i.prototype.update=function(e){var t,n;0!==e.length?(n=e[0],t=this.$selection.find(".select2-selection__rendered"),e=this.display(n,t),t.empty().append(e),(n=n.title||n.text)?t.attr("title",n):t.removeAttr("title")):this.clear()},i}),u.define("select2/selection/multiple",["jquery","./base","../utils"],function(i,e,c){function r(e,t){r.__super__.constructor.apply(this,arguments)}return c.Extend(r,e),r.prototype.render=function(){var e=r.__super__.render.call(this);return e[0].classList.add("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},r.prototype.bind=function(e,t){var n=this;r.__super__.bind.apply(this,arguments);var s=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",s),this.$selection.on("click",function(e){n.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(e){var t;n.isDisabled()||(t=i(this).parent(),t=c.GetData(t[0],"data"),n.trigger("unselect",{originalEvent:e,data:t}))}),this.$selection.on("keydown",".select2-selection__choice__remove",function(e){n.isDisabled()||e.stopPropagation()})},r.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},r.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},r.prototype.selectionContainer=function(){return i('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;</span></button><span class="select2-selection__choice__display"></span></li>')},r.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],n=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",s=0;s<e.length;s++){var i=e[s],r=this.selectionContainer(),o=this.display(i,r),a=n+c.generateChars(4)+"-";i.id?a+=i.id:a+=c.generateChars(4),r.find(".select2-selection__choice__display").append(o).attr("id",a);var l=i.title||i.text;l&&r.attr("title",l),o=this.options.get("translations").get("removeItem"),(l=r.find(".select2-selection__choice__remove")).attr("title",o()),l.attr("aria-label",o()),l.attr("aria-describedby",a),c.StoreData(r[0],"data",i),t.push(r)}this.$selection.find(".select2-selection__rendered").append(t)}},r}),u.define("select2/selection/placeholder",[],function(){function e(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return e.prototype.normalizePlaceholder=function(e,t){return t="string"==typeof t?{id:"",text:t}:t},e.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n[0].classList.add("select2-selection__placeholder"),n[0].classList.remove("select2-selection__choice"),t=t.title||t.text||n.text(),this.$selection.find(".select2-selection__rendered").attr("title",t),n},e.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(1<t.length||n)return e.call(this,t);this.clear(),t=this.createPlaceholder(this.placeholder),this.$selection.find(".select2-selection__rendered").append(t)},e}),u.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(i,s,a){function e(){}return e.prototype.bind=function(e,t,n){var s=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){s._handleClear(e)}),t.on("keypress",function(e){s._handleKeyboardClear(e,t)})},e.prototype._handleClear=function(e,t){if(!this.isDisabled()){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();var s=a.GetData(n[0],"data"),i=this.$element.val();this.$element.val(this.placeholder.id);var r={data:s};if(this.trigger("clear",r),r.prevented)this.$element.val(i);else{for(var o=0;o<s.length;o++)if(r={data:s[o]},this.trigger("unselect",r),r.prevented)return void this.$element.val(i);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},e.prototype._handleKeyboardClear=function(e,t,n){n.isOpen()||t.which!=s.DELETE&&t.which!=s.BACKSPACE||this._handleClear(t)},e.prototype.update=function(e,t){var n,s;e.call(this,t),this.$selection.find(".select2-selection__clear").remove(),this.$selection[0].classList.remove("select2-selection--clearable"),0<this.$selection.find(".select2-selection__placeholder").length||0===t.length||(n=this.$selection.find(".select2-selection__rendered").attr("id"),s=this.options.get("translations").get("removeAllItems"),(e=i('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;</span></button>')).attr("title",s()),e.attr("aria-label",s()),e.attr("aria-describedby",n),a.StoreData(e[0],"data",t),this.$selection.prepend(e),this.$selection[0].classList.add("select2-selection--clearable"))},e}),u.define("select2/selection/search",["jquery","../utils","../keys"],function(s,a,l){function e(e,t,n){e.call(this,t,n)}return e.prototype.render=function(e){var t=this.options.get("translations").get("search"),n=s('<span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" ></textarea></span>');return this.$searchContainer=n,this.$search=n.find("textarea"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",t()),e=e.call(this),this._transferTabIndex(),e.append(this.$searchContainer),e},e.prototype.bind=function(e,t,n){var s=this,i=t.id+"-results",r=t.id+"-container";e.call(this,t,n),s.$search.attr("aria-describedby",r),t.on("open",function(){s.$search.attr("aria-controls",i),s.$search.trigger("focus")}),t.on("close",function(){s.$search.val(""),s.resizeSearch(),s.$search.removeAttr("aria-controls"),s.$search.removeAttr("aria-activedescendant"),s.$search.trigger("focus")}),t.on("enable",function(){s.$search.prop("disabled",!1),s._transferTabIndex()}),t.on("disable",function(){s.$search.prop("disabled",!0)}),t.on("focus",function(e){s.$search.trigger("focus")}),t.on("results:focus",function(e){e.data._resultId?s.$search.attr("aria-activedescendant",e.data._resultId):s.$search.removeAttr("aria-activedescendant")}),this.$selection.on("focusin",".select2-search--inline",function(e){s.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){s._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){var t;e.stopPropagation(),s.trigger("keypress",e),s._keyUpPrevented=e.isDefaultPrevented(),e.which!==l.BACKSPACE||""!==s.$search.val()||0<(t=s.$selection.find(".select2-selection__choice").last()).length&&(t=a.GetData(t[0],"data"),s.searchRemoveChoice(t),e.preventDefault())}),this.$selection.on("click",".select2-search--inline",function(e){s.$search.val()&&e.stopPropagation()});var o=(t=document.documentMode)&&t<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){o?s.$selection.off("input.search input.searchcheck"):s.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){var t;o&&"input"===e.type?s.$selection.off("input.search input.searchcheck"):(t=e.which)!=l.SHIFT&&t!=l.CTRL&&t!=l.ALT&&t!=l.TAB&&s.handleSearch(e)})},e.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},e.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},e.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.resizeSearch(),n&&this.$search.trigger("focus")},e.prototype.handleSearch=function(){var e;this.resizeSearch(),this._keyUpPrevented||(e=this.$search.val(),this.trigger("query",{term:e})),this._keyUpPrevented=!1},e.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},e.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="100%";""===this.$search.attr("placeholder")&&(e=.75*(this.$search.val().length+1)+"em"),this.$search.css("width",e)},e}),u.define("select2/selection/selectionCss",["../utils"],function(n){function e(){}return e.prototype.render=function(e){var t=e.call(this);return-1!==(e=this.options.get("selectionCssClass")||"").indexOf(":all:")&&(e=e.replace(":all:",""),n.copyNonInternalCssClasses(t[0],this.$element[0])),t.addClass(e),t},e}),u.define("select2/selection/eventRelay",["jquery"],function(o){function e(){}return e.prototype.bind=function(e,t,n){var s=this,i=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],r=["opening","closing","selecting","unselecting","clearing"];e.call(this,t,n),t.on("*",function(e,t){var n;-1!==i.indexOf(e)&&(n=o.Event("select2:"+e,{params:t=t||{}}),s.$element.trigger(n),-1!==r.indexOf(e)&&(t.prevented=n.isDefaultPrevented()))})},e}),u.define("select2/translation",["jquery","require"],function(t,n){function s(e){this.dict=e||{}}return s.prototype.all=function(){return this.dict},s.prototype.get=function(e){return this.dict[e]},s.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},s._cache={},s.loadPath=function(e){var t;return e in s._cache||(t=n(e),s._cache[e]=t),new s(s._cache[e])},s}),u.define("select2/diacritics",[],function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Œ":"OE","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","œ":"oe","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ώ":"ω","ς":"σ","’":"'"}}),u.define("select2/data/base",["../utils"],function(n){function s(e,t){s.__super__.constructor.call(this)}return n.Extend(s,n.Observable),s.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},s.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},s.prototype.bind=function(e,t){},s.prototype.destroy=function(){},s.prototype.generateResultId=function(e,t){return e=e.id+"-result-",e+=n.generateChars(4),null!=t.id?e+="-"+t.id.toString():e+="-"+n.generateChars(4),e},s}),u.define("select2/data/select",["./base","../utils","jquery"],function(e,a,l){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return a.Extend(n,e),n.prototype.current=function(e){var t=this;e(Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),function(e){return t.item(l(e))}))},n.prototype.select=function(i){var e,r=this;if(i.selected=!0,null!=i.element&&"option"===i.element.tagName.toLowerCase())return i.element.selected=!0,void this.$element.trigger("input").trigger("change");this.$element.prop("multiple")?this.current(function(e){var t=[];(i=[i]).push.apply(i,e);for(var n=0;n<i.length;n++){var s=i[n].id;-1===t.indexOf(s)&&t.push(s)}r.$element.val(t),r.$element.trigger("input").trigger("change")}):(e=i.id,this.$element.val(e),this.$element.trigger("input").trigger("change"))},n.prototype.unselect=function(i){var r=this;if(this.$element.prop("multiple")){if(i.selected=!1,null!=i.element&&"option"===i.element.tagName.toLowerCase())return i.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current(function(e){for(var t=[],n=0;n<e.length;n++){var s=e[n].id;s!==i.id&&-1===t.indexOf(s)&&t.push(s)}r.$element.val(t),r.$element.trigger("input").trigger("change")})}},n.prototype.bind=function(e,t){var n=this;(this.container=e).on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},n.prototype.destroy=function(){this.$element.find("*").each(function(){a.RemoveData(this)})},n.prototype.query=function(t,e){var n=[],s=this;this.$element.children().each(function(){var e;"option"!==this.tagName.toLowerCase()&&"optgroup"!==this.tagName.toLowerCase()||(e=l(this),e=s.item(e),null!==(e=s.matches(t,e))&&n.push(e))}),e({results:n})},n.prototype.addOptions=function(e){this.$element.append(e)},n.prototype.option=function(e){var t;return e.children?(t=document.createElement("optgroup")).label=e.text:void 0!==(t=document.createElement("option")).textContent?t.textContent=e.text:t.innerText=e.text,void 0!==e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title),(e=this._normalizeItem(e)).element=t,a.StoreData(t,"data",e),l(t)},n.prototype.item=function(e){var t={};if(null!=(t=a.GetData(e[0],"data")))return t;var n=e[0];if("option"===n.tagName.toLowerCase())t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if("optgroup"===n.tagName.toLowerCase()){for(var t={text:e.prop("label"),children:[],title:e.prop("title")},s=e.children("option"),i=[],r=0;r<s.length;r++){var o=l(s[r]),o=this.item(o);i.push(o)}t.children=i}return(t=this._normalizeItem(t)).element=e[0],a.StoreData(e[0],"data",t),t},n.prototype._normalizeItem=function(e){return e!==Object(e)&&(e={id:e,text:e}),null!=(e=l.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),l.extend({},{selected:!1,disabled:!1},e)},n.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},n}),u.define("select2/data/array",["./select","../utils","jquery"],function(e,t,c){function s(e,t){this._dataToConvert=t.get("data")||[],s.__super__.constructor.call(this,e,t)}return t.Extend(s,e),s.prototype.bind=function(e,t){s.__super__.bind.call(this,e,t),this.addOptions(this.convertToOptions(this._dataToConvert))},s.prototype.select=function(n){var e;0===(e=this.$element.find("option").filter(function(e,t){return t.value==n.id.toString()})).length&&(e=this.option(n),this.addOptions(e)),s.__super__.select.call(this,n)},s.prototype.convertToOptions=function(e){for(var t=this,n=this.$element.find("option"),s=n.map(function(){return t.item(c(this)).id}).get(),i=[],r=0;r<e.length;r++){var o,a,l=this._normalizeItem(e[r]);0<=s.indexOf(l.id)?(o=n.filter(function(e){return function(){return c(this).val()==e.id}}(l)),a=this.item(o),a=c.extend(!0,{},l,a),a=this.option(a),o.replaceWith(a)):(a=this.option(l),l.children&&(l=this.convertToOptions(l.children),a.append(l)),i.push(a))}return i},s}),u.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,r){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,e,t)}return t.Extend(n,e),n.prototype._applyDefaults=function(e){var t={data:function(e){return r.extend({},e,{q:e.term})},transport:function(e,t,n){return(e=r.ajax(e)).then(t),e.fail(n),e}};return r.extend({},t,e,!0)},n.prototype.processResults=function(e){return e},n.prototype.query=function(t,n){var s=this;null!=this._request&&("function"==typeof this._request.abort&&this._request.abort(),this._request=null);var i=r.extend({type:"GET"},this.ajaxOptions);function e(){var e=i.transport(i,function(e){e=s.processResults(e,t),s.options.get("debug")&&window.console&&console.error&&(e&&e.results&&Array.isArray(e.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),n(e)},function(){"status"in e&&(0===e.status||"0"===e.status)||s.trigger("results:message",{message:"errorLoading"})});s._request=e}"function"==typeof i.url&&(i.url=i.url.call(this.$element,t)),"function"==typeof i.data&&(i.data=i.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(e,this.ajaxOptions.delay)):e()},n}),u.define("select2/data/tags",["jquery"],function(t){function e(e,t,n){var s=n.get("tags"),i=n.get("createTag");if(void 0!==i&&(this.createTag=i),void 0!==(i=n.get("insertTag"))&&(this.insertTag=i),e.call(this,t,n),Array.isArray(s))for(var r=0;r<s.length;r++){var o=s[r],o=this._normalizeItem(o),o=this.option(o);this.$element.append(o)}}return e.prototype.query=function(e,c,u){var d=this;this._removeOldTags(),null!=c.term&&null==c.page?e.call(this,c,function e(t,n){for(var s=t.results,i=0;i<s.length;i++){var r=s[i],o=null!=r.children&&!e({results:r.children},!0);if((r.text||"").toUpperCase()===(c.term||"").toUpperCase()||o)return!n&&(t.data=s,void u(t))}if(n)return!0;var a,l=d.createTag(c);null!=l&&((a=d.option(l)).attr("data-select2-tag","true"),d.addOptions([a]),d.insertTag(s,l)),t.results=s,u(t)}):e.call(this,c,u)},e.prototype.createTag=function(e,t){return null==t.term||""===(t=t.term.trim())?null:{id:t,text:t}},e.prototype.insertTag=function(e,t,n){t.unshift(n)},e.prototype._removeOldTags=function(e){this.$element.find("option[data-select2-tag]").each(function(){this.selected||t(this).remove()})},e}),u.define("select2/data/tokenizer",["jquery"],function(c){function e(e,t,n){var s=n.get("tokenizer");void 0!==s&&(this.tokenizer=s),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,t,n){var s=this;t.term=t.term||"";var i=this.tokenizer(t,this.options,function(e){var t,n=s._normalizeItem(e);s.$element.find("option").filter(function(){return c(this).val()===n.id}).length||((t=s.option(n)).attr("data-select2-tag",!0),s._removeOldTags(),s.addOptions([t])),s.trigger("select",{data:t=n})});i.term!==t.term&&(this.$search.length&&(this.$search.val(i.term),this.$search.trigger("focus")),t.term=i.term),e.call(this,t,n)},e.prototype.tokenizer=function(e,t,n,s){for(var i=n.get("tokenSeparators")||[],r=t.term,o=0,a=this.createTag||function(e){return{id:e.term,text:e.term}};o<r.length;){var l=r[o];-1!==i.indexOf(l)?(l=r.substr(0,o),null!=(l=a(c.extend({},t,{term:l})))?(s(l),r=r.substr(o+1)||"",o=0):o++):o++}return{term:r}},e}),u.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),u.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),u.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var s=this;e.call(this,t,n),t.on("select",function(){s._checkIfMaximumSelected()})},e.prototype.query=function(e,t,n){var s=this;this._checkIfMaximumSelected(function(){e.call(s,t,n)})},e.prototype._checkIfMaximumSelected=function(e,t){var n=this;this.current(function(e){e=null!=e?e.length:0,0<n.maximumSelectionLength&&e>=n.maximumSelectionLength?n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}}):t&&t()})},e}),u.define("select2/dropdown",["jquery","./utils"],function(t,e){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),u.define("select2/dropdown/search",["jquery"],function(r){function e(){}return e.prototype.render=function(e){var t=e.call(this),n=this.options.get("translations").get("search"),e=r('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=e,this.$search=e.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",n()),t.prepend(e),t},e.prototype.bind=function(e,t,n){var s=this,i=t.id+"-results";e.call(this,t,n),this.$search.on("keydown",function(e){s.trigger("keypress",e),s._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(e){r(this).off("keyup")}),this.$search.on("keyup input",function(e){s.handleSearch(e)}),t.on("open",function(){s.$search.attr("tabindex",0),s.$search.attr("aria-controls",i),s.$search.trigger("focus"),window.setTimeout(function(){s.$search.trigger("focus")},0)}),t.on("close",function(){s.$search.attr("tabindex",-1),s.$search.removeAttr("aria-controls"),s.$search.removeAttr("aria-activedescendant"),s.$search.val(""),s.$search.trigger("blur")}),t.on("focus",function(){t.isOpen()||s.$search.trigger("focus")}),t.on("results:all",function(e){null!=e.query.term&&""!==e.query.term||(s.showSearch(e)?s.$searchContainer[0].classList.remove("select2-search--hide"):s.$searchContainer[0].classList.add("select2-search--hide"))}),t.on("results:focus",function(e){e.data._resultId?s.$search.attr("aria-activedescendant",e.data._resultId):s.$search.removeAttr("aria-activedescendant")})},e.prototype.handleSearch=function(e){var t;this._keyUpPrevented||(t=this.$search.val(),this.trigger("query",{term:t})),this._keyUpPrevented=!1},e.prototype.showSearch=function(e,t){return!0},e}),u.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,s){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,s)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return t="string"==typeof t?{id:"",text:t}:t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),s=t.length-1;0<=s;s--){var i=t[s];this.placeholder.id===i.id&&n.splice(s,1)}return n},e}),u.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function e(e,t,n,s){this.lastParams={},e.call(this,t,n,s),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},e.prototype.bind=function(e,t,n){var s=this;e.call(this,t,n),t.on("query",function(e){s.lastParams=e,s.loading=!0}),t.on("query:append",function(e){s.lastParams=e,s.loading=!0}),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},e.prototype.loadMoreIfNeeded=function(){var e=n.contains(document.documentElement,this.$loadingMore[0]);!this.loading&&e&&(e=this.$results.offset().top+this.$results.outerHeight(!1),this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)<=e+50&&this.loadMore())},e.prototype.loadMore=function(){this.loading=!0;var e=n.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},e.prototype.createLoadingMore=function(){var e=n('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),t=this.options.get("translations").get("loadingMore");return e.html(t(this.lastParams)),e},e}),u.define("select2/dropdown/attachBody",["jquery","../utils"],function(u,o){function e(e,t,n){this.$dropdownParent=u(n.get("dropdownParent")||document.body),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var s=this;e.call(this,t,n),t.on("open",function(){s._showDropdown(),s._attachPositioningHandler(t),s._bindContainerResultHandlers(t)}),t.on("close",function(){s._hideDropdown(),s._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},e.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},e.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t[0].classList.remove("select2"),t[0].classList.add("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},e.prototype.render=function(e){var t=u("<span></span>"),e=e.call(this);return t.append(e),this.$dropdownContainer=t},e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},e.prototype._bindContainerResultHandlers=function(e,t){var n;this._containerResultsHandlersBound||(n=this,t.on("results:all",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("results:append",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("results:message",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("select",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("unselect",function(){n._positionDropdown(),n._resizeDropdown()}),this._containerResultsHandlersBound=!0)},e.prototype._attachPositioningHandler=function(e,t){var n=this,s="scroll.select2."+t.id,i="resize.select2."+t.id,r="orientationchange.select2."+t.id;(t=this.$container.parents().filter(o.hasScroll)).each(function(){o.StoreData(this,"select2-scroll-position",{x:u(this).scrollLeft(),y:u(this).scrollTop()})}),t.on(s,function(e){var t=o.GetData(this,"select2-scroll-position");u(this).scrollTop(t.y)}),u(window).on(s+" "+i+" "+r,function(e){n._positionDropdown(),n._resizeDropdown()})},e.prototype._detachPositioningHandler=function(e,t){var n="scroll.select2."+t.id,s="resize.select2."+t.id,t="orientationchange.select2."+t.id;this.$container.parents().filter(o.hasScroll).off(n),u(window).off(n+" "+s+" "+t)},e.prototype._positionDropdown=function(){var e=u(window),t=this.$dropdown[0].classList.contains("select2-dropdown--above"),n=this.$dropdown[0].classList.contains("select2-dropdown--below"),s=null,i=this.$container.offset();i.bottom=i.top+this.$container.outerHeight(!1);var r={height:this.$container.outerHeight(!1)};r.top=i.top,r.bottom=i.top+r.height;var o=this.$dropdown.outerHeight(!1),a=e.scrollTop(),l=e.scrollTop()+e.height(),c=a<i.top-o,e=l>i.bottom+o,a={left:i.left,top:r.bottom};"static"===(l=this.$dropdownParent).css("position")&&(l=l.offsetParent()),i={top:0,left:0},(u.contains(document.body,l[0])||l[0].isConnected)&&(i=l.offset()),a.top-=i.top,a.left-=i.left,t||n||(s="below"),e||!c||t?!c&&e&&t&&(s="below"):s="above",("above"==s||t&&"below"!==s)&&(a.top=r.top-i.top-o),null!=s&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+s),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+s)),this.$dropdownContainer.css(a)},e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},e}),u.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(e,t,n,s){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,s)}return e.prototype.showSearch=function(e,t){return!(function e(t){for(var n=0,s=0;s<t.length;s++){var i=t[s];i.children?n+=e(i.children):n++}return n}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e}),u.define("select2/dropdown/selectOnClose",["../utils"],function(s){function e(){}return e.prototype.bind=function(e,t,n){var s=this;e.call(this,t,n),t.on("close",function(e){s._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}(n=this.getHighlightedResults()).length<1||null!=(n=s.GetData(n[0],"data")).element&&n.element.selected||null==n.element&&n.selected||this.trigger("select",{data:n})},e}),u.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var s=this;e.call(this,t,n),t.on("select",function(e){s._selectTriggered(e)}),t.on("unselect",function(e){s._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&(n.ctrlKey||n.metaKey)||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),u.define("select2/dropdown/dropdownCss",["../utils"],function(n){function e(){}return e.prototype.render=function(e){var t=e.call(this);return-1!==(e=this.options.get("dropdownCssClass")||"").indexOf(":all:")&&(e=e.replace(":all:",""),n.copyNonInternalCssClasses(t[0],this.$element[0])),t.addClass(e),t},e}),u.define("select2/dropdown/tagsSearchHighlight",["../utils"],function(s){function e(){}return e.prototype.highlightFirstItem=function(e){if(0<(t=this.$results.find(".select2-results__option--selectable:not(.select2-results__option--selected)")).length){var t,n=t.first();if((t=s.GetData(n[0],"data").element)&&t.getAttribute&&"true"===t.getAttribute("data-select2-tag"))return void n.trigger("mouseenter")}e.call(this)},e}),u.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,e="Please delete "+t+" character";return 1!=t&&(e+="s"),e},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}}),u.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],function(l,r,o,a,c,u,d,p,h,f,g,t,m,y,v,_,b,$,w,x,A,D,S,E,O,C,L,T,q,I,e){function n(){this.reset()}return n.prototype.apply=function(e){var t;null==(e=l.extend(!0,{},this.defaults,e)).dataAdapter&&(null!=e.ajax?e.dataAdapter=v:null!=e.data?e.dataAdapter=y:e.dataAdapter=m,0<e.minimumInputLength&&(e.dataAdapter=f.Decorate(e.dataAdapter,$)),0<e.maximumInputLength&&(e.dataAdapter=f.Decorate(e.dataAdapter,w)),0<e.maximumSelectionLength&&(e.dataAdapter=f.Decorate(e.dataAdapter,x)),e.tags&&(e.dataAdapter=f.Decorate(e.dataAdapter,_)),null==e.tokenSeparators&&null==e.tokenizer||(e.dataAdapter=f.Decorate(e.dataAdapter,b))),null==e.resultsAdapter&&(e.resultsAdapter=r,null!=e.ajax&&(e.resultsAdapter=f.Decorate(e.resultsAdapter,E)),null!=e.placeholder&&(e.resultsAdapter=f.Decorate(e.resultsAdapter,S)),e.selectOnClose&&(e.resultsAdapter=f.Decorate(e.resultsAdapter,L)),e.tags&&(e.resultsAdapter=f.Decorate(e.resultsAdapter,I))),null==e.dropdownAdapter&&(e.multiple?e.dropdownAdapter=A:(t=f.Decorate(A,D),e.dropdownAdapter=t),0!==e.minimumResultsForSearch&&(e.dropdownAdapter=f.Decorate(e.dropdownAdapter,C)),e.closeOnSelect&&(e.dropdownAdapter=f.Decorate(e.dropdownAdapter,T)),null!=e.dropdownCssClass&&(e.dropdownAdapter=f.Decorate(e.dropdownAdapter,q)),e.dropdownAdapter=f.Decorate(e.dropdownAdapter,O)),null==e.selectionAdapter&&(e.multiple?e.selectionAdapter=a:e.selectionAdapter=o,null!=e.placeholder&&(e.selectionAdapter=f.Decorate(e.selectionAdapter,c)),e.allowClear&&(e.selectionAdapter=f.Decorate(e.selectionAdapter,u)),e.multiple&&(e.selectionAdapter=f.Decorate(e.selectionAdapter,d)),null!=e.selectionCssClass&&(e.selectionAdapter=f.Decorate(e.selectionAdapter,p)),e.selectionAdapter=f.Decorate(e.selectionAdapter,h)),e.language=this._resolveLanguage(e.language),e.language.push("en");for(var n=[],s=0;s<e.language.length;s++){var i=e.language[s];-1===n.indexOf(i)&&n.push(i)}return e.language=n,e.translations=this._processTranslations(e.language,e.debug),e},n.prototype.reset=function(){function a(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return t[e]||e})}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:f.escapeMarkup,language:{},matcher:function e(t,n){if(null==t.term||""===t.term.trim())return n;if(n.children&&0<n.children.length){for(var s=l.extend(!0,{},n),i=n.children.length-1;0<=i;i--)null==e(t,n.children[i])&&s.children.splice(i,1);return 0<s.children.length?s:e(t,s)}var r=a(n.text).toUpperCase(),o=a(t.term).toUpperCase();return-1<r.indexOf(o)?n:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},n.prototype.applyFromElement=function(e,t){var n=e.language,s=this.defaults.language,i=t.prop("lang"),t=t.closest("[lang]").prop("lang"),t=Array.prototype.concat.call(this._resolveLanguage(i),this._resolveLanguage(n),this._resolveLanguage(s),this._resolveLanguage(t));return e.language=t,e},n.prototype._resolveLanguage=function(e){if(!e)return[];if(l.isEmptyObject(e))return[];if(l.isPlainObject(e))return[e];for(var t,n=Array.isArray(e)?e:[e],s=[],i=0;i<n.length;i++)s.push(n[i]),"string"==typeof n[i]&&0<n[i].indexOf("-")&&(t=n[i].split("-")[0],s.push(t));return s},n.prototype._processTranslations=function(e,t){for(var n=new g,s=0;s<e.length;s++){var i=new g,r=e[s];if("string"==typeof r)try{i=g.loadPath(r)}catch(e){try{r=this.defaults.amdLanguageBase+r,i=g.loadPath(r)}catch(e){t&&window.console&&console.warn&&console.warn('Select2: The language file for "'+r+'" could not be automatically loaded. A fallback will be used instead.')}}else i=l.isPlainObject(r)?new g(r):r;n.extend(i)}return n},n.prototype.set=function(e,t){var n={};n[l.camelCase(e)]=t,n=f._convertData(n),l.extend(!0,this.defaults,n)},new n}),u.define("select2/options",["jquery","./defaults","./utils"],function(c,n,u){function e(e,t){this.options=e,null!=t&&this.fromElement(t),null!=t&&(this.options=n.applyFromElement(this.options,t)),this.options=n.apply(this.options)}return e.prototype.fromElement=function(e){var t=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.autocomplete&&e.prop("autocomplete")&&(this.options.autocomplete=e.prop("autocomplete")),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),u.GetData(e[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),u.StoreData(e[0],"data",u.GetData(e[0],"select2Tags")),u.StoreData(e[0],"tags",!0)),u.GetData(e[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",u.GetData(e[0],"ajaxUrl")),u.StoreData(e[0],"ajax-Url",u.GetData(e[0],"ajaxUrl")));var n={};function s(e,t){return t.toUpperCase()}for(var i=0;i<e[0].attributes.length;i++){var r,o=e[0].attributes[i].name;"data-"==o.substr(0,"data-".length)&&(o=o.substring("data-".length),r=u.GetData(e[0],o),n[o.replace(/-([a-z])/g,s)]=r)}c.fn.jquery&&"1."==c.fn.jquery.substr(0,2)&&e[0].dataset&&(n=c.extend(!0,{},e[0].dataset,n));var a,l=c.extend(!0,{},u.GetData(e[0]),n);for(a in l=u._convertData(l))-1<t.indexOf(a)||(c.isPlainObject(this.options[a])?c.extend(this.options[a],l[a]):this.options[a]=l[a]);return this},e.prototype.get=function(e){return this.options[e]},e.prototype.set=function(e,t){this.options[e]=t},e}),u.define("select2/core",["jquery","./options","./utils","./keys"],function(t,i,r,s){var o=function(e,t){null!=r.GetData(e[0],"select2")&&r.GetData(e[0],"select2").destroy(),this.$element=e,this.id=this._generateId(e),this.options=new i(t=t||{},e),o.__super__.constructor.call(this);var n=e.attr("tabindex")||0;r.StoreData(e[0],"old-tabindex",n),e.attr("tabindex","-1"),t=this.options.get("dataAdapter"),this.dataAdapter=new t(e,this.options),n=this.render(),this._placeContainer(n),t=this.options.get("selectionAdapter"),this.selection=new t(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,n),t=this.options.get("dropdownAdapter"),this.dropdown=new t(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,n),n=this.options.get("resultsAdapter"),this.results=new n(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var s=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){s.trigger("selection:update",{data:e})}),e[0].classList.add("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),r.StoreData(e[0],"select2",this),e.data("select2",this)};return r.Extend(o,r.Observable),o.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+r.generateChars(2):r.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},o.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},o.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var s=this._resolveWidth(e,"style");return null!=s?s:this._resolveWidth(e,"element")}if("element"==t)return(s=e.outerWidth(!1))<=0?"auto":s+"px";if("style"!=t)return"computedstyle"!=t?t:window.getComputedStyle(e[0]).width;if("string"!=typeof(e=e.attr("style")))return null;for(var i=e.split(";"),r=0,o=i.length;r<o;r+=1){var a=i[r].replace(/\s/g,"").match(n);if(null!==a&&1<=a.length)return a[1]}return null},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=r.bind(this._syncAttributes,this),this._syncS=r.bind(this._syncSubtree,this),this._observer=new window.MutationObserver(function(e){t._syncA(),t._syncS(e)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},o.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",function(e,t){n.trigger(e,t)})},o.prototype._registerSelectionEvents=function(){var n=this,s=["toggle","focus"];this.selection.on("toggle",function(){n.toggleDropdown()}),this.selection.on("focus",function(e){n.focus(e)}),this.selection.on("*",function(e,t){-1===s.indexOf(e)&&n.trigger(e,t)})},o.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",function(e,t){n.trigger(e,t)})},o.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",function(e,t){n.trigger(e,t)})},o.prototype._registerEvents=function(){var n=this;this.on("open",function(){n.$container[0].classList.add("select2-container--open")}),this.on("close",function(){n.$container[0].classList.remove("select2-container--open")}),this.on("enable",function(){n.$container[0].classList.remove("select2-container--disabled")}),this.on("disable",function(){n.$container[0].classList.add("select2-container--disabled")}),this.on("blur",function(){n.$container[0].classList.remove("select2-container--focus")}),this.on("query",function(t){n.isOpen()||n.trigger("open",{}),this.dataAdapter.query(t,function(e){n.trigger("results:all",{data:e,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(e){n.trigger("results:append",{data:e,query:t})})}),this.on("keypress",function(e){var t=e.which;n.isOpen()?t===s.ESC||t===s.UP&&e.altKey?(n.close(e),e.preventDefault()):t===s.ENTER||t===s.TAB?(n.trigger("results:select",{}),e.preventDefault()):t===s.SPACE&&e.ctrlKey?(n.trigger("results:toggle",{}),e.preventDefault()):t===s.UP?(n.trigger("results:previous",{}),e.preventDefault()):t===s.DOWN&&(n.trigger("results:next",{}),e.preventDefault()):(t===s.ENTER||t===s.SPACE||t===s.DOWN&&e.altKey)&&(n.open(),e.preventDefault())})},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},o.prototype._isChangeMutation=function(e){var t=this;if(e.addedNodes&&0<e.addedNodes.length){for(var n=0;n<e.addedNodes.length;n++)if(e.addedNodes[n].selected)return!0}else{if(e.removedNodes&&0<e.removedNodes.length)return!0;if(Array.isArray(e))return e.some(function(e){return t._isChangeMutation(e)})}return!1},o.prototype._syncSubtree=function(e){var e=this._isChangeMutation(e),t=this;e&&this.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})},o.prototype.trigger=function(e,t){var n=o.__super__.trigger,s={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if((void 0===t&&(t={}),e in s)&&(n.call(this,s[e],s={prevented:!1,name:e,args:t}),s.prevented))return void(t.prevented=!0);n.call(this,e,t)},o.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},o.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},o.prototype.close=function(e){this.isOpen()&&this.trigger("close",{originalEvent:e})},o.prototype.isEnabled=function(){return!this.isDisabled()},o.prototype.isDisabled=function(){return this.options.get("disabled")},o.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},o.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},o.prototype.focus=function(e){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},o.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),e=!(e=null==e||0===e.length?[!0]:e)[0],this.$element.prop("disabled",e)},o.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},o.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();e=e[0],Array.isArray(e)&&(e=e.map(function(e){return e.toString()})),this.$element.val(e).trigger("input").trigger("change")},o.prototype.destroy=function(){r.RemoveData(this.$container[0]),this.$container.remove(),this._observer.disconnect(),this._observer=null,this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",r.GetData(this.$element[0],"old-tabindex")),this.$element[0].classList.remove("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),r.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),r.StoreData(e[0],"element",this.$element),e},o}),u.define("jquery-mousewheel",["jquery"],function(e){return e}),u.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(i,e,r,t,o){var a;return null==i.fn.select2&&(a=["open","close","destroy"],i.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var e=i.extend(!0,{},t);new r(i(this),e)}),this;if("string"!=typeof t)throw new Error("Invalid arguments for Select2: "+t);var n,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=o.GetData(this,"select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),n=e[t].apply(e,s)}),-1<a.indexOf(t)?this:n}),null==i.fn.select2.defaults&&(i.fn.select2.defaults=t),r}),{define:u.define,require:u.require});function b(e,t){return s.call(e,t)}function l(e,t){var n,s,i,r,o,a,l,c,u,d,p=t&&t.split("/"),h=y.map,f=h&&h["*"]||{};if(e){for(t=(e=e.split("/")).length-1,y.nodeIdCompat&&_.test(e[t])&&(e[t]=e[t].replace(_,"")),"."===e[0].charAt(0)&&p&&(e=p.slice(0,p.length-1).concat(e)),c=0;c<e.length;c++)"."===(d=e[c])?(e.splice(c,1),--c):".."===d&&(0===c||1===c&&".."===e[2]||".."===e[c-1]||0<c&&(e.splice(c-1,2),c-=2));e=e.join("/")}if((p||f)&&h){for(c=(n=e.split("/")).length;0<c;--c){if(s=n.slice(0,c).join("/"),p)for(u=p.length;0<u;--u)if(i=(i=h[p.slice(0,u).join("/")])&&i[s]){r=i,o=c;break}if(r)break;!a&&f&&f[s]&&(a=f[s],l=c)}!r&&a&&(r=a,o=l),r&&(n.splice(0,o,r),e=n.join("/"))}return e}function w(t,n){return function(){var e=i.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),o.apply(p,e.concat([t,n]))}}function x(e){var t;if(b(m,e)&&(t=m[e],delete m[e],v[e]=!0,r.apply(p,t)),!b(g,e)&&!b(v,e))throw new Error("No "+e);return g[e]}function c(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function A(e){return e?c(e):[]}var u=a.require("jquery.select2");return t.fn.select2.amd=a,u});
!function(i){"use strict";"function"==typeof define&&define.amd?define(["jquery"],i):"undefined"!=typeof exports?module.exports=i(require("jquery")):i(jQuery)}(function(a){"use strict";var o,r=window.Slick||{};o=0,(r=function(i,e){var t=this;t.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:a(i),appendDots:a(i),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(i,e){return a('<button type="button" />').text(e+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},t.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},a.extend(t,t.initials),t.activeBreakpoint=null,t.animType=null,t.animProp=null,t.breakpoints=[],t.breakpointSettings=[],t.cssTransitions=!1,t.focussed=!1,t.interrupted=!1,t.hidden="hidden",t.paused=!0,t.positionProp=null,t.respondTo=null,t.rowCount=1,t.shouldClick=!0,t.$slider=a(i),t.$slidesCache=null,t.transformType=null,t.transitionType=null,t.visibilityChange="visibilitychange",t.windowWidth=0,t.windowTimer=null,i=a(i).data("slick")||{},t.options=a.extend({},t.defaults,e,i),t.currentSlide=t.options.initialSlide,t.originalSettings=t.options,void 0!==document.mozHidden?(t.hidden="mozHidden",t.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(t.hidden="webkitHidden",t.visibilityChange="webkitvisibilitychange"),t.autoPlay=a.proxy(t.autoPlay,t),t.autoPlayClear=a.proxy(t.autoPlayClear,t),t.autoPlayIterator=a.proxy(t.autoPlayIterator,t),t.changeSlide=a.proxy(t.changeSlide,t),t.clickHandler=a.proxy(t.clickHandler,t),t.selectHandler=a.proxy(t.selectHandler,t),t.setPosition=a.proxy(t.setPosition,t),t.swipeHandler=a.proxy(t.swipeHandler,t),t.dragHandler=a.proxy(t.dragHandler,t),t.keyHandler=a.proxy(t.keyHandler,t),t.instanceUid=o++,t.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,t.registerBreakpoints(),t.init(!0)}).prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},r.prototype.addSlide=r.prototype.slickAdd=function(i,e,t){var o=this;if("boolean"==typeof e)t=e,e=null;else if(e<0||e>=o.slideCount)return!1;o.unload(),"number"==typeof e?0===e&&0===o.$slides.length?a(i).appendTo(o.$slideTrack):t?a(i).insertBefore(o.$slides.eq(e)):a(i).insertAfter(o.$slides.eq(e)):!0===t?a(i).prependTo(o.$slideTrack):a(i).appendTo(o.$slideTrack),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slides.each(function(i,e){a(e).attr("data-slick-index",i)}),o.$slidesCache=o.$slides,o.reinit()},r.prototype.animateHeight=function(){var i,e=this;1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical&&(i=e.$slides.eq(e.currentSlide).outerHeight(!0),e.$list.animate({height:i},e.options.speed))},r.prototype.animateSlide=function(i,e){var t={},o=this;o.animateHeight(),!0===o.options.rtl&&!1===o.options.vertical&&(i=-i),!1===o.transformsEnabled?!1===o.options.vertical?o.$slideTrack.animate({left:i},o.options.speed,o.options.easing,e):o.$slideTrack.animate({top:i},o.options.speed,o.options.easing,e):!1===o.cssTransitions?(!0===o.options.rtl&&(o.currentLeft=-o.currentLeft),a({animStart:o.currentLeft}).animate({animStart:i},{duration:o.options.speed,easing:o.options.easing,step:function(i){i=Math.ceil(i),!1===o.options.vertical?t[o.animType]="translate("+i+"px, 0px)":t[o.animType]="translate(0px,"+i+"px)",o.$slideTrack.css(t)},complete:function(){e&&e.call()}})):(o.applyTransition(),i=Math.ceil(i),!1===o.options.vertical?t[o.animType]="translate3d("+i+"px, 0px, 0px)":t[o.animType]="translate3d(0px,"+i+"px, 0px)",o.$slideTrack.css(t),e&&setTimeout(function(){o.disableTransition(),e.call()},o.options.speed))},r.prototype.getNavTarget=function(){var i=this.options.asNavFor;return i=i&&null!==i?a(i).not(this.$slider):i},r.prototype.asNavFor=function(e){var i=this.getNavTarget();null!==i&&"object"==typeof i&&i.each(function(){var i=a(this).slick("getSlick");i.unslicked||i.slideHandler(e,!0)})},r.prototype.applyTransition=function(i){var e=this,t={};!1===e.options.fade?t[e.transitionType]=e.transformType+" "+e.options.speed+"ms "+e.options.cssEase:t[e.transitionType]="opacity "+e.options.speed+"ms "+e.options.cssEase,(!1===e.options.fade?e.$slideTrack:e.$slides.eq(i)).css(t)},r.prototype.autoPlay=function(){var i=this;i.autoPlayClear(),i.slideCount>i.options.slidesToShow&&(i.autoPlayTimer=setInterval(i.autoPlayIterator,i.options.autoplaySpeed))},r.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},r.prototype.autoPlayIterator=function(){var i=this,e=i.currentSlide+i.options.slidesToScroll;i.paused||i.interrupted||i.focussed||(!1===i.options.infinite&&(1===i.direction&&i.currentSlide+1===i.slideCount-1?i.direction=0:0===i.direction&&(e=i.currentSlide-i.options.slidesToScroll,i.currentSlide-1==0&&(i.direction=1))),i.slideHandler(e))},r.prototype.buildArrows=function(){var i=this;!0===i.options.arrows&&(i.$prevArrow=a(i.options.prevArrow).addClass("slick-arrow"),i.$nextArrow=a(i.options.nextArrow).addClass("slick-arrow"),i.slideCount>i.options.slidesToShow?(i.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),i.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),i.htmlExpr.test(i.options.prevArrow)&&i.$prevArrow.prependTo(i.options.appendArrows),i.htmlExpr.test(i.options.nextArrow)&&i.$nextArrow.appendTo(i.options.appendArrows),!0!==i.options.infinite&&i.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):i.$prevArrow.add(i.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},r.prototype.buildDots=function(){var i,e,t=this;if(!0===t.options.dots){for(t.$slider.addClass("slick-dotted"),e=a("<ul />").addClass(t.options.dotsClass),i=0;i<=t.getDotCount();i+=1)e.append(a("<li />").append(t.options.customPaging.call(this,t,i)));t.$dots=e.appendTo(t.options.appendDots),t.$dots.find("li").first().addClass("slick-active")}},r.prototype.buildOut=function(){var i=this;i.$slides=i.$slider.children(i.options.slide+":not(.slick-cloned)").addClass("slick-slide"),i.slideCount=i.$slides.length,i.$slides.each(function(i,e){a(e).attr("data-slick-index",i).data("originalStyling",a(e).attr("style")||"")}),i.$slider.addClass("slick-slider"),i.$slideTrack=0===i.slideCount?a('<div class="slick-track"/>').appendTo(i.$slider):i.$slides.wrapAll('<div class="slick-track"/>').parent(),i.$list=i.$slideTrack.wrap('<div class="slick-list"/>').parent(),i.$slideTrack.css("opacity",0),!0!==i.options.centerMode&&!0!==i.options.swipeToSlide||(i.options.slidesToScroll=1),a("img[data-lazy]",i.$slider).not("[src]").addClass("slick-loading"),i.setupInfinite(),i.buildArrows(),i.buildDots(),i.updateDots(),i.setSlideClasses("number"==typeof i.currentSlide?i.currentSlide:0),!0===i.options.draggable&&i.$list.addClass("draggable")},r.prototype.buildRows=function(){var i,e,t,o=this,s=document.createDocumentFragment(),n=o.$slider.children();if(1<o.options.rows){for(t=o.options.slidesPerRow*o.options.rows,e=Math.ceil(n.length/t),i=0;i<e;i++){for(var r=document.createElement("div"),l=0;l<o.options.rows;l++){for(var d=document.createElement("div"),a=0;a<o.options.slidesPerRow;a++){var c=i*t+(l*o.options.slidesPerRow+a);n.get(c)&&d.appendChild(n.get(c))}r.appendChild(d)}s.appendChild(r)}o.$slider.empty().append(s),o.$slider.children().children().children().css({width:100/o.options.slidesPerRow+"%",display:"inline-block"})}},r.prototype.checkResponsive=function(i,e){var t,o,s,n=this,r=!1,l=n.$slider.width(),d=window.innerWidth||a(window).width();if("window"===n.respondTo?s=d:"slider"===n.respondTo?s=l:"min"===n.respondTo&&(s=Math.min(d,l)),n.options.responsive&&n.options.responsive.length&&null!==n.options.responsive){for(t in o=null,n.breakpoints)n.breakpoints.hasOwnProperty(t)&&(!1===n.originalSettings.mobileFirst?s<n.breakpoints[t]&&(o=n.breakpoints[t]):s>n.breakpoints[t]&&(o=n.breakpoints[t]));null!==o?null!==n.activeBreakpoint&&o===n.activeBreakpoint&&!e||(n.activeBreakpoint=o,"unslick"===n.breakpointSettings[o]?n.unslick(o):(n.options=a.extend({},n.originalSettings,n.breakpointSettings[o]),!0===i&&(n.currentSlide=n.options.initialSlide),n.refresh(i)),r=o):null!==n.activeBreakpoint&&(n.activeBreakpoint=null,n.options=n.originalSettings,!0===i&&(n.currentSlide=n.options.initialSlide),n.refresh(i),r=o),i||!1===r||n.$slider.trigger("breakpoint",[n,r])}},r.prototype.changeSlide=function(i,e){var t,o=this,s=a(i.currentTarget);switch(s.is("a")&&i.preventDefault(),s.is("li")||(s=s.closest("li")),t=o.slideCount%o.options.slidesToScroll!=0?0:(o.slideCount-o.currentSlide)%o.options.slidesToScroll,i.data.message){case"previous":n=0==t?o.options.slidesToScroll:o.options.slidesToShow-t,o.slideCount>o.options.slidesToShow&&o.slideHandler(o.currentSlide-n,!1,e);break;case"next":n=0==t?o.options.slidesToScroll:t,o.slideCount>o.options.slidesToShow&&o.slideHandler(o.currentSlide+n,!1,e);break;case"index":var n=0===i.data.index?0:i.data.index||s.index()*o.options.slidesToScroll;o.slideHandler(o.checkNavigable(n),!1,e),s.children().trigger("focus");break;default:return}},r.prototype.checkNavigable=function(i){var e=this.getNavigableIndexes(),t=0;if(i>e[e.length-1])i=e[e.length-1];else for(var o in e){if(i<e[o]){i=t;break}t=e[o]}return i},r.prototype.cleanUpEvents=function(){var i=this;i.options.dots&&null!==i.$dots&&(a("li",i.$dots).off("click.slick",i.changeSlide).off("mouseenter.slick",a.proxy(i.interrupt,i,!0)).off("mouseleave.slick",a.proxy(i.interrupt,i,!1)),!0===i.options.accessibility&&i.$dots.off("keydown.slick",i.keyHandler)),i.$slider.off("focus.slick blur.slick"),!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow&&i.$prevArrow.off("click.slick",i.changeSlide),i.$nextArrow&&i.$nextArrow.off("click.slick",i.changeSlide),!0===i.options.accessibility&&(i.$prevArrow&&i.$prevArrow.off("keydown.slick",i.keyHandler),i.$nextArrow&&i.$nextArrow.off("keydown.slick",i.keyHandler))),i.$list.off("touchstart.slick mousedown.slick",i.swipeHandler),i.$list.off("touchmove.slick mousemove.slick",i.swipeHandler),i.$list.off("touchend.slick mouseup.slick",i.swipeHandler),i.$list.off("touchcancel.slick mouseleave.slick",i.swipeHandler),i.$list.off("click.slick",i.clickHandler),a(document).off(i.visibilityChange,i.visibility),i.cleanUpSlideEvents(),!0===i.options.accessibility&&i.$list.off("keydown.slick",i.keyHandler),!0===i.options.focusOnSelect&&a(i.$slideTrack).children().off("click.slick",i.selectHandler),a(window).off("orientationchange.slick.slick-"+i.instanceUid,i.orientationChange),a(window).off("resize.slick.slick-"+i.instanceUid,i.resize),a("[draggable!=true]",i.$slideTrack).off("dragstart",i.preventDefault),a(window).off("load.slick.slick-"+i.instanceUid,i.setPosition)},r.prototype.cleanUpSlideEvents=function(){var i=this;i.$list.off("mouseenter.slick",a.proxy(i.interrupt,i,!0)),i.$list.off("mouseleave.slick",a.proxy(i.interrupt,i,!1))},r.prototype.cleanUpRows=function(){var i;1<this.options.rows&&((i=this.$slides.children().children()).removeAttr("style"),this.$slider.empty().append(i))},r.prototype.clickHandler=function(i){!1===this.shouldClick&&(i.stopImmediatePropagation(),i.stopPropagation(),i.preventDefault())},r.prototype.destroy=function(i){var e=this;e.autoPlayClear(),e.touchObject={},e.cleanUpEvents(),a(".slick-cloned",e.$slider).detach(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.$prevArrow.length&&(e.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove()),e.$nextArrow&&e.$nextArrow.length&&(e.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove()),e.$slides&&(e.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){a(this).attr("style",a(this).data("originalStyling"))}),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.detach(),e.$list.detach(),e.$slider.append(e.$slides)),e.cleanUpRows(),e.$slider.removeClass("slick-slider"),e.$slider.removeClass("slick-initialized"),e.$slider.removeClass("slick-dotted"),e.unslicked=!0,i||e.$slider.trigger("destroy",[e])},r.prototype.disableTransition=function(i){var e={};e[this.transitionType]="",(!1===this.options.fade?this.$slideTrack:this.$slides.eq(i)).css(e)},r.prototype.fadeSlide=function(i,e){var t=this;!1===t.cssTransitions?(t.$slides.eq(i).css({zIndex:t.options.zIndex}),t.$slides.eq(i).animate({opacity:1},t.options.speed,t.options.easing,e)):(t.applyTransition(i),t.$slides.eq(i).css({opacity:1,zIndex:t.options.zIndex}),e&&setTimeout(function(){t.disableTransition(i),e.call()},t.options.speed))},r.prototype.fadeSlideOut=function(i){var e=this;!1===e.cssTransitions?e.$slides.eq(i).animate({opacity:0,zIndex:e.options.zIndex-2},e.options.speed,e.options.easing):(e.applyTransition(i),e.$slides.eq(i).css({opacity:0,zIndex:e.options.zIndex-2}))},r.prototype.filterSlides=r.prototype.slickFilter=function(i){var e=this;null!==i&&(e.$slidesCache=e.$slides,e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(i).appendTo(e.$slideTrack),e.reinit())},r.prototype.focusHandler=function(){var t=this;t.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(i){i.stopImmediatePropagation();var e=a(this);setTimeout(function(){t.options.pauseOnFocus&&(t.focussed=e.is(":focus"),t.autoPlay())},0)})},r.prototype.getCurrent=r.prototype.slickCurrentSlide=function(){return this.currentSlide},r.prototype.getDotCount=function(){var i=this,e=0,t=0,o=0;if(!0===i.options.infinite)if(i.slideCount<=i.options.slidesToShow)++o;else for(;e<i.slideCount;)++o,e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;else if(!0===i.options.centerMode)o=i.slideCount;else if(i.options.asNavFor)for(;e<i.slideCount;)++o,e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;else o=1+Math.ceil((i.slideCount-i.options.slidesToShow)/i.options.slidesToScroll);return o-1},r.prototype.getLeft=function(i){var e,t,o=this,s=0;return o.slideOffset=0,e=o.$slides.first().outerHeight(!0),!0===o.options.infinite?(o.slideCount>o.options.slidesToShow&&(o.slideOffset=o.slideWidth*o.options.slidesToShow*-1,t=-1,!0===o.options.vertical&&!0===o.options.centerMode&&(2===o.options.slidesToShow?t=-1.5:1===o.options.slidesToShow&&(t=-2)),s=e*o.options.slidesToShow*t),o.slideCount%o.options.slidesToScroll!=0&&i+o.options.slidesToScroll>o.slideCount&&o.slideCount>o.options.slidesToShow&&(s=i>o.slideCount?(o.slideOffset=(o.options.slidesToShow-(i-o.slideCount))*o.slideWidth*-1,(o.options.slidesToShow-(i-o.slideCount))*e*-1):(o.slideOffset=o.slideCount%o.options.slidesToScroll*o.slideWidth*-1,o.slideCount%o.options.slidesToScroll*e*-1))):i+o.options.slidesToShow>o.slideCount&&(o.slideOffset=(i+o.options.slidesToShow-o.slideCount)*o.slideWidth,s=(i+o.options.slidesToShow-o.slideCount)*e),o.slideCount<=o.options.slidesToShow&&(s=o.slideOffset=0),!0===o.options.centerMode&&o.slideCount<=o.options.slidesToShow?o.slideOffset=o.slideWidth*Math.floor(o.options.slidesToShow)/2-o.slideWidth*o.slideCount/2:!0===o.options.centerMode&&!0===o.options.infinite?o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)-o.slideWidth:!0===o.options.centerMode&&(o.slideOffset=0,o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)),e=!1===o.options.vertical?i*o.slideWidth*-1+o.slideOffset:i*e*-1+s,!0===o.options.variableWidth&&(s=o.slideCount<=o.options.slidesToShow||!1===o.options.infinite?o.$slideTrack.children(".slick-slide").eq(i):o.$slideTrack.children(".slick-slide").eq(i+o.options.slidesToShow),e=!0===o.options.rtl?s[0]?-1*(o.$slideTrack.width()-s[0].offsetLeft-s.width()):0:s[0]?-1*s[0].offsetLeft:0,!0===o.options.centerMode&&(s=o.slideCount<=o.options.slidesToShow||!1===o.options.infinite?o.$slideTrack.children(".slick-slide").eq(i):o.$slideTrack.children(".slick-slide").eq(i+o.options.slidesToShow+1),e=!0===o.options.rtl?s[0]?-1*(o.$slideTrack.width()-s[0].offsetLeft-s.width()):0:s[0]?-1*s[0].offsetLeft:0,e+=(o.$list.width()-s.outerWidth())/2)),e},r.prototype.getOption=r.prototype.slickGetOption=function(i){return this.options[i]},r.prototype.getNavigableIndexes=function(){for(var i=this,e=0,t=0,o=[],s=!1===i.options.infinite?i.slideCount:(e=-1*i.options.slidesToScroll,t=-1*i.options.slidesToScroll,2*i.slideCount);e<s;)o.push(e),e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;return o},r.prototype.getSlick=function(){return this},r.prototype.getSlideCount=function(){var t,o=this,s=!0===o.options.centerMode?o.slideWidth*Math.floor(o.options.slidesToShow/2):0;return!0===o.options.swipeToSlide?(o.$slideTrack.find(".slick-slide").each(function(i,e){if(e.offsetLeft-s+a(e).outerWidth()/2>-1*o.swipeLeft)return t=e,!1}),Math.abs(a(t).attr("data-slick-index")-o.currentSlide)||1):o.options.slidesToScroll},r.prototype.goTo=r.prototype.slickGoTo=function(i,e){this.changeSlide({data:{message:"index",index:parseInt(i)}},e)},r.prototype.init=function(i){var e=this;a(e.$slider).hasClass("slick-initialized")||(a(e.$slider).addClass("slick-initialized"),e.buildRows(),e.buildOut(),e.setProps(),e.startLoad(),e.loadSlider(),e.initializeEvents(),e.updateArrows(),e.updateDots(),e.checkResponsive(!0),e.focusHandler()),i&&e.$slider.trigger("init",[e]),!0===e.options.accessibility&&e.initADA(),e.options.autoplay&&(e.paused=!1,e.autoPlay())},r.prototype.initADA=function(){var t=this,o=Math.ceil(t.slideCount/t.options.slidesToShow),s=t.getNavigableIndexes().filter(function(i){return 0<=i&&i<t.slideCount});t.$slides.add(t.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==t.$dots&&(t.$slides.not(t.$slideTrack.find(".slick-cloned")).each(function(i){var e=s.indexOf(i);a(this).attr({role:"tabpanel",id:"slick-slide"+t.instanceUid+i,tabindex:-1}),-1!==e&&a(this).attr({"aria-describedby":"slick-slide-control"+t.instanceUid+e})}),t.$dots.attr("role","tablist").find("li").each(function(i){var e=s[i];a(this).attr({role:"presentation"}),a(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+t.instanceUid+i,"aria-controls":"slick-slide"+t.instanceUid+e,"aria-label":i+1+" of "+o,"aria-selected":null,tabindex:"-1"})}).eq(t.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var i=t.currentSlide,e=i+t.options.slidesToShow;i<e;i++)t.$slides.eq(i).attr("tabindex",0);t.activateADA()},r.prototype.initArrowEvents=function(){var i=this;!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},i.changeSlide),i.$nextArrow.off("click.slick").on("click.slick",{message:"next"},i.changeSlide),!0===i.options.accessibility&&(i.$prevArrow.on("keydown.slick",i.keyHandler),i.$nextArrow.on("keydown.slick",i.keyHandler)))},r.prototype.initDotEvents=function(){var i=this;!0===i.options.dots&&(a("li",i.$dots).on("click.slick",{message:"index"},i.changeSlide),!0===i.options.accessibility&&i.$dots.on("keydown.slick",i.keyHandler)),!0===i.options.dots&&!0===i.options.pauseOnDotsHover&&a("li",i.$dots).on("mouseenter.slick",a.proxy(i.interrupt,i,!0)).on("mouseleave.slick",a.proxy(i.interrupt,i,!1))},r.prototype.initSlideEvents=function(){var i=this;i.options.pauseOnHover&&(i.$list.on("mouseenter.slick",a.proxy(i.interrupt,i,!0)),i.$list.on("mouseleave.slick",a.proxy(i.interrupt,i,!1)))},r.prototype.initializeEvents=function(){var i=this;i.initArrowEvents(),i.initDotEvents(),i.initSlideEvents(),i.$list.on("touchstart.slick mousedown.slick",{action:"start"},i.swipeHandler),i.$list.on("touchmove.slick mousemove.slick",{action:"move"},i.swipeHandler),i.$list.on("touchend.slick mouseup.slick",{action:"end"},i.swipeHandler),i.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},i.swipeHandler),i.$list.on("click.slick",i.clickHandler),a(document).on(i.visibilityChange,a.proxy(i.visibility,i)),!0===i.options.accessibility&&i.$list.on("keydown.slick",i.keyHandler),!0===i.options.focusOnSelect&&a(i.$slideTrack).children().on("click.slick",i.selectHandler),a(window).on("orientationchange.slick.slick-"+i.instanceUid,a.proxy(i.orientationChange,i)),a(window).on("resize.slick.slick-"+i.instanceUid,a.proxy(i.resize,i)),a("[draggable!=true]",i.$slideTrack).on("dragstart",i.preventDefault),a(window).on("load.slick.slick-"+i.instanceUid,i.setPosition),a(i.setPosition)},r.prototype.initUI=function(){var i=this;!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.show(),i.$nextArrow.show()),!0===i.options.dots&&i.slideCount>i.options.slidesToShow&&i.$dots.show()},r.prototype.keyHandler=function(i){var e=this;i.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===i.keyCode&&!0===e.options.accessibility?e.changeSlide({data:{message:!0===e.options.rtl?"next":"previous"}}):39===i.keyCode&&!0===e.options.accessibility&&e.changeSlide({data:{message:!0===e.options.rtl?"previous":"next"}}))},r.prototype.lazyLoad=function(){function i(i){a("img[data-lazy]",i).each(function(){var i=a(this),e=a(this).attr("data-lazy"),t=a(this).attr("data-srcset"),o=a(this).attr("data-sizes")||n.$slider.attr("data-sizes"),s=document.createElement("img");s.onload=function(){i.animate({opacity:0},100,function(){t&&(i.attr("srcset",t),o&&i.attr("sizes",o)),i.attr("src",e).animate({opacity:1},200,function(){i.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),n.$slider.trigger("lazyLoaded",[n,i,e])})},s.onerror=function(){i.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),n.$slider.trigger("lazyLoadError",[n,i,e])},s.src=e})}var e,t,o,n=this;if(!0===n.options.centerMode?o=!0===n.options.infinite?(t=n.currentSlide+(n.options.slidesToShow/2+1))+n.options.slidesToShow+2:(t=Math.max(0,n.currentSlide-(n.options.slidesToShow/2+1)),n.options.slidesToShow/2+1+2+n.currentSlide):(t=n.options.infinite?n.options.slidesToShow+n.currentSlide:n.currentSlide,o=Math.ceil(t+n.options.slidesToShow),!0===n.options.fade&&(0<t&&t--,o<=n.slideCount&&o++)),e=n.$slider.find(".slick-slide").slice(t,o),"anticipated"===n.options.lazyLoad)for(var s=t-1,r=o,l=n.$slider.find(".slick-slide"),d=0;d<n.options.slidesToScroll;d++)s<0&&(s=n.slideCount-1),e=(e=e.add(l.eq(s))).add(l.eq(r)),s--,r++;i(e),n.slideCount<=n.options.slidesToShow?i(n.$slider.find(".slick-slide")):n.currentSlide>=n.slideCount-n.options.slidesToShow?i(n.$slider.find(".slick-cloned").slice(0,n.options.slidesToShow)):0===n.currentSlide&&i(n.$slider.find(".slick-cloned").slice(-1*n.options.slidesToShow))},r.prototype.loadSlider=function(){var i=this;i.setPosition(),i.$slideTrack.css({opacity:1}),i.$slider.removeClass("slick-loading"),i.initUI(),"progressive"===i.options.lazyLoad&&i.progressiveLazyLoad()},r.prototype.next=r.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},r.prototype.orientationChange=function(){this.checkResponsive(),this.setPosition()},r.prototype.pause=r.prototype.slickPause=function(){this.autoPlayClear(),this.paused=!0},r.prototype.play=r.prototype.slickPlay=function(){var i=this;i.autoPlay(),i.options.autoplay=!0,i.paused=!1,i.focussed=!1,i.interrupted=!1},r.prototype.postSlide=function(i){var e=this;e.unslicked||(e.$slider.trigger("afterChange",[e,i]),e.animating=!1,e.slideCount>e.options.slidesToShow&&e.setPosition(),e.swipeLeft=null,e.options.autoplay&&e.autoPlay(),!0===e.options.accessibility&&(e.initADA(),e.options.focusOnChange&&a(e.$slides.get(e.currentSlide)).attr("tabindex",0).focus()))},r.prototype.prev=r.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},r.prototype.preventDefault=function(i){i.preventDefault()},r.prototype.progressiveLazyLoad=function(i){i=i||1;var e,t,o,s,n=this,r=a("img[data-lazy]",n.$slider);r.length?(e=r.first(),t=e.attr("data-lazy"),o=e.attr("data-srcset"),s=e.attr("data-sizes")||n.$slider.attr("data-sizes"),(r=document.createElement("img")).onload=function(){o&&(e.attr("srcset",o),s&&e.attr("sizes",s)),e.attr("src",t).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),!0===n.options.adaptiveHeight&&n.setPosition(),n.$slider.trigger("lazyLoaded",[n,e,t]),n.progressiveLazyLoad()},r.onerror=function(){i<3?setTimeout(function(){n.progressiveLazyLoad(i+1)},500):(e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),n.$slider.trigger("lazyLoadError",[n,e,t]),n.progressiveLazyLoad())},r.src=t):n.$slider.trigger("allImagesLoaded",[n])},r.prototype.refresh=function(i){var e=this,t=e.slideCount-e.options.slidesToShow;!e.options.infinite&&e.currentSlide>t&&(e.currentSlide=t),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),t=e.currentSlide,e.destroy(!0),a.extend(e,e.initials,{currentSlide:t}),e.init(),i||e.changeSlide({data:{message:"index",index:t}},!1)},r.prototype.registerBreakpoints=function(){var i,e,t,o=this,s=o.options.responsive||null;if("array"===a.type(s)&&s.length){for(i in o.respondTo=o.options.respondTo||"window",s)if(t=o.breakpoints.length-1,s.hasOwnProperty(i)){for(e=s[i].breakpoint;0<=t;)o.breakpoints[t]&&o.breakpoints[t]===e&&o.breakpoints.splice(t,1),t--;o.breakpoints.push(e),o.breakpointSettings[e]=s[i].settings}o.breakpoints.sort(function(i,e){return o.options.mobileFirst?i-e:e-i})}},r.prototype.reinit=function(){var i=this;i.$slides=i.$slideTrack.children(i.options.slide).addClass("slick-slide"),i.slideCount=i.$slides.length,i.currentSlide>=i.slideCount&&0!==i.currentSlide&&(i.currentSlide=i.currentSlide-i.options.slidesToScroll),i.slideCount<=i.options.slidesToShow&&(i.currentSlide=0),i.registerBreakpoints(),i.setProps(),i.setupInfinite(),i.buildArrows(),i.updateArrows(),i.initArrowEvents(),i.buildDots(),i.updateDots(),i.initDotEvents(),i.cleanUpSlideEvents(),i.initSlideEvents(),i.checkResponsive(!1,!0),!0===i.options.focusOnSelect&&a(i.$slideTrack).children().on("click.slick",i.selectHandler),i.setSlideClasses("number"==typeof i.currentSlide?i.currentSlide:0),i.setPosition(),i.focusHandler(),i.paused=!i.options.autoplay,i.autoPlay(),i.$slider.trigger("reInit",[i])},r.prototype.resize=function(){var i=this;a(window).width()!==i.windowWidth&&(clearTimeout(i.windowDelay),i.windowDelay=window.setTimeout(function(){i.windowWidth=a(window).width(),i.checkResponsive(),i.unslicked||i.setPosition()},50))},r.prototype.removeSlide=r.prototype.slickRemove=function(i,e,t){var o=this;if(i="boolean"==typeof i?!0===(e=i)?0:o.slideCount-1:!0===e?--i:i,o.slideCount<1||i<0||i>o.slideCount-1)return!1;o.unload(),(!0===t?o.$slideTrack.children():o.$slideTrack.children(this.options.slide).eq(i)).remove(),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slidesCache=o.$slides,o.reinit()},r.prototype.setCSS=function(i){var e,t,o=this,s={};!0===o.options.rtl&&(i=-i),e="left"==o.positionProp?Math.ceil(i)+"px":"0px",t="top"==o.positionProp?Math.ceil(i)+"px":"0px",s[o.positionProp]=i,!1===o.transformsEnabled||(!(s={})===o.cssTransitions?s[o.animType]="translate("+e+", "+t+")":s[o.animType]="translate3d("+e+", "+t+", 0px)"),o.$slideTrack.css(s)},r.prototype.setDimensions=function(){var i=this;!1===i.options.vertical?!0===i.options.centerMode&&i.$list.css({padding:"0px "+i.options.centerPadding}):(i.$list.height(i.$slides.first().outerHeight(!0)*i.options.slidesToShow),!0===i.options.centerMode&&i.$list.css({padding:i.options.centerPadding+" 0px"})),i.listWidth=i.$list.width(),i.listHeight=i.$list.height(),!1===i.options.vertical&&!1===i.options.variableWidth?(i.slideWidth=Math.ceil(i.listWidth/i.options.slidesToShow),i.$slideTrack.width(Math.ceil(i.slideWidth*i.$slideTrack.children(".slick-slide").length))):!0===i.options.variableWidth?i.$slideTrack.width(5e3*i.slideCount):(i.slideWidth=Math.ceil(i.listWidth),i.$slideTrack.height(Math.ceil(i.$slides.first().outerHeight(!0)*i.$slideTrack.children(".slick-slide").length)));var e=i.$slides.first().outerWidth(!0)-i.$slides.first().width();!1===i.options.variableWidth&&i.$slideTrack.children(".slick-slide").width(i.slideWidth-e)},r.prototype.setFade=function(){var t,o=this;o.$slides.each(function(i,e){t=o.slideWidth*i*-1,!0===o.options.rtl?a(e).css({position:"relative",right:t,top:0,zIndex:o.options.zIndex-2,opacity:0}):a(e).css({position:"relative",left:t,top:0,zIndex:o.options.zIndex-2,opacity:0})}),o.$slides.eq(o.currentSlide).css({zIndex:o.options.zIndex-1,opacity:1})},r.prototype.setHeight=function(){var i,e=this;1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical&&(i=e.$slides.eq(e.currentSlide).outerHeight(!0),e.$list.css("height",i))},r.prototype.setOption=r.prototype.slickSetOption=function(){var i,e,t,o,s,n=this,r=!1;if("object"===a.type(arguments[0])?(t=arguments[0],r=arguments[1],s="multiple"):"string"===a.type(arguments[0])&&(t=arguments[0],o=arguments[1],r=arguments[2],"responsive"===arguments[0]&&"array"===a.type(arguments[1])?s="responsive":void 0!==arguments[1]&&(s="single")),"single"===s)n.options[t]=o;else if("multiple"===s)a.each(t,function(i,e){n.options[i]=e});else if("responsive"===s)for(e in o)if("array"!==a.type(n.options.responsive))n.options.responsive=[o[e]];else{for(i=n.options.responsive.length-1;0<=i;)n.options.responsive[i].breakpoint===o[e].breakpoint&&n.options.responsive.splice(i,1),i--;n.options.responsive.push(o[e])}r&&(n.unload(),n.reinit())},r.prototype.setPosition=function(){var i=this;i.setDimensions(),i.setHeight(),!1===i.options.fade?i.setCSS(i.getLeft(i.currentSlide)):i.setFade(),i.$slider.trigger("setPosition",[i])},r.prototype.setProps=function(){var i=this,e=document.body.style;i.positionProp=!0===i.options.vertical?"top":"left","top"===i.positionProp?i.$slider.addClass("slick-vertical"):i.$slider.removeClass("slick-vertical"),void 0===e.WebkitTransition&&void 0===e.MozTransition&&void 0===e.msTransition||!0===i.options.useCSS&&(i.cssTransitions=!0),i.options.fade&&("number"==typeof i.options.zIndex?i.options.zIndex<3&&(i.options.zIndex=3):i.options.zIndex=i.defaults.zIndex),void 0!==e.OTransform&&(i.animType="OTransform",i.transformType="-o-transform",i.transitionType="OTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.MozTransform&&(i.animType="MozTransform",i.transformType="-moz-transform",i.transitionType="MozTransition",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(i.animType=!1)),void 0!==e.webkitTransform&&(i.animType="webkitTransform",i.transformType="-webkit-transform",i.transitionType="webkitTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(i.animType=!1)),void 0!==e.msTransform&&(i.animType="msTransform",i.transformType="-ms-transform",i.transitionType="msTransition",void 0===e.msTransform&&(i.animType=!1)),void 0!==e.transform&&!1!==i.animType&&(i.animType="transform",i.transformType="transform",i.transitionType="transition"),i.transformsEnabled=i.options.useTransform&&null!==i.animType&&!1!==i.animType},r.prototype.setSlideClasses=function(i){var e,t,o,s=this,n=s.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true");s.$slides.eq(i).addClass("slick-current"),!0===s.options.centerMode?(t=s.options.slidesToShow%2==0?1:0,o=Math.floor(s.options.slidesToShow/2),!0===s.options.infinite&&(o<=i&&i<=s.slideCount-1-o?s.$slides.slice(i-o+t,i+o+1).addClass("slick-active").attr("aria-hidden","false"):(e=s.options.slidesToShow+i,n.slice(e-o+1+t,e+o+2).addClass("slick-active").attr("aria-hidden","false")),0===i?n.eq(n.length-1-s.options.slidesToShow).addClass("slick-center"):i===s.slideCount-1&&n.eq(s.options.slidesToShow).addClass("slick-center")),s.$slides.eq(i).addClass("slick-center")):0<=i&&i<=s.slideCount-s.options.slidesToShow?s.$slides.slice(i,i+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):n.length<=s.options.slidesToShow?n.addClass("slick-active").attr("aria-hidden","false"):(o=s.slideCount%s.options.slidesToShow,e=!0===s.options.infinite?s.options.slidesToShow+i:i,(s.options.slidesToShow==s.options.slidesToScroll&&s.slideCount-i<s.options.slidesToShow?n.slice(e-(s.options.slidesToShow-o),e+o):n.slice(e,e+s.options.slidesToShow)).addClass("slick-active").attr("aria-hidden","false")),"ondemand"!==s.options.lazyLoad&&"anticipated"!==s.options.lazyLoad||s.lazyLoad()},r.prototype.setupInfinite=function(){var i,e,t,o=this;if(!0===o.options.fade&&(o.options.centerMode=!1),!0===o.options.infinite&&!1===o.options.fade&&(e=null,o.slideCount>o.options.slidesToShow)){for(t=!0===o.options.centerMode?o.options.slidesToShow+1:o.options.slidesToShow,i=o.slideCount;i>o.slideCount-t;--i)a(o.$slides[e=i-1]).clone(!0).attr("id","").attr("data-slick-index",e-o.slideCount).prependTo(o.$slideTrack).addClass("slick-cloned");for(i=0;i<t+o.slideCount;i+=1)e=i,a(o.$slides[e]).clone(!0).attr("id","").attr("data-slick-index",e+o.slideCount).appendTo(o.$slideTrack).addClass("slick-cloned");o.$slideTrack.find(".slick-cloned").find("[id]").each(function(){a(this).attr("id","")})}},r.prototype.interrupt=function(i){i||this.autoPlay(),this.interrupted=i},r.prototype.selectHandler=function(i){i=a(i.target).is(".slick-slide")?a(i.target):a(i.target).parents(".slick-slide"),i=parseInt(i.attr("data-slick-index"))||0;this.slideCount<=this.options.slidesToShow?this.slideHandler(i,!1,!0):this.slideHandler(i)},r.prototype.slideHandler=function(i,e,t){var o,s,n,r,l=this;if(e=e||!1,!(!0===l.animating&&!0===l.options.waitForAnimate||!0===l.options.fade&&l.currentSlide===i))if(!1===e&&l.asNavFor(i),o=i,r=l.getLeft(o),e=l.getLeft(l.currentSlide),l.currentLeft=null===l.swipeLeft?e:l.swipeLeft,!1===l.options.infinite&&!1===l.options.centerMode&&(i<0||i>l.getDotCount()*l.options.slidesToScroll))!1===l.options.fade&&(o=l.currentSlide,!0!==t?l.animateSlide(e,function(){l.postSlide(o)}):l.postSlide(o));else if(!1===l.options.infinite&&!0===l.options.centerMode&&(i<0||i>l.slideCount-l.options.slidesToScroll))!1===l.options.fade&&(o=l.currentSlide,!0!==t?l.animateSlide(e,function(){l.postSlide(o)}):l.postSlide(o));else{if(l.options.autoplay&&clearInterval(l.autoPlayTimer),s=o<0?l.slideCount%l.options.slidesToScroll!=0?l.slideCount-l.slideCount%l.options.slidesToScroll:l.slideCount+o:o>=l.slideCount?l.slideCount%l.options.slidesToScroll!=0?0:o-l.slideCount:o,l.animating=!0,l.$slider.trigger("beforeChange",[l,l.currentSlide,s]),e=l.currentSlide,l.currentSlide=s,l.setSlideClasses(l.currentSlide),l.options.asNavFor&&(n=(n=l.getNavTarget()).slick("getSlick")).slideCount<=n.options.slidesToShow&&n.setSlideClasses(l.currentSlide),l.updateDots(),l.updateArrows(),!0===l.options.fade)return!0!==t?(l.fadeSlideOut(e),l.fadeSlide(s,function(){l.postSlide(s)})):l.postSlide(s),void l.animateHeight();!0!==t?l.animateSlide(r,function(){l.postSlide(s)}):l.postSlide(s)}},r.prototype.startLoad=function(){var i=this;!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.hide(),i.$nextArrow.hide()),!0===i.options.dots&&i.slideCount>i.options.slidesToShow&&i.$dots.hide(),i.$slider.addClass("slick-loading")},r.prototype.swipeDirection=function(){var i=this,e=i.touchObject.startX-i.touchObject.curX,t=i.touchObject.startY-i.touchObject.curY,e=Math.atan2(t,e);return(e=(e=Math.round(180*e/Math.PI))<0?360-Math.abs(e):e)<=45&&0<=e||e<=360&&315<=e?!1===i.options.rtl?"left":"right":135<=e&&e<=225?!1===i.options.rtl?"right":"left":!0===i.options.verticalSwiping?35<=e&&e<=135?"down":"up":"vertical"},r.prototype.swipeEnd=function(i){var e,t,o=this;if(o.dragging=!1,o.swiping=!1,o.scrolling)return o.scrolling=!1;if(o.interrupted=!1,o.shouldClick=!(10<o.touchObject.swipeLength),void 0===o.touchObject.curX)return!1;if(!0===o.touchObject.edgeHit&&o.$slider.trigger("edge",[o,o.swipeDirection()]),o.touchObject.swipeLength>=o.touchObject.minSwipe){switch(t=o.swipeDirection()){case"left":case"down":e=o.options.swipeToSlide?o.checkNavigable(o.currentSlide+o.getSlideCount()):o.currentSlide+o.getSlideCount(),o.currentDirection=0;break;case"right":case"up":e=o.options.swipeToSlide?o.checkNavigable(o.currentSlide-o.getSlideCount()):o.currentSlide-o.getSlideCount(),o.currentDirection=1}"vertical"!=t&&(o.slideHandler(e),o.touchObject={},o.$slider.trigger("swipe",[o,t]))}else o.touchObject.startX!==o.touchObject.curX&&(o.slideHandler(o.currentSlide),o.touchObject={})},r.prototype.swipeHandler=function(i){var e=this;if(!(!1===e.options.swipe||"ontouchend"in document&&!1===e.options.swipe||!1===e.options.draggable&&-1!==i.type.indexOf("mouse")))switch(e.touchObject.fingerCount=i.originalEvent&&void 0!==i.originalEvent.touches?i.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,!0===e.options.verticalSwiping&&(e.touchObject.minSwipe=e.listHeight/e.options.touchThreshold),i.data.action){case"start":e.swipeStart(i);break;case"move":e.swipeMove(i);break;case"end":e.swipeEnd(i)}},r.prototype.swipeMove=function(i){var e,t,o=this,s=void 0!==i.originalEvent?i.originalEvent.touches:null;return!(!o.dragging||o.scrolling||s&&1!==s.length)&&(e=o.getLeft(o.currentSlide),o.touchObject.curX=void 0!==s?s[0].pageX:i.clientX,o.touchObject.curY=void 0!==s?s[0].pageY:i.clientY,o.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(o.touchObject.curX-o.touchObject.startX,2))),t=Math.round(Math.sqrt(Math.pow(o.touchObject.curY-o.touchObject.startY,2))),!o.options.verticalSwiping&&!o.swiping&&4<t?!(o.scrolling=!0):(!0===o.options.verticalSwiping&&(o.touchObject.swipeLength=t),s=o.swipeDirection(),void 0!==i.originalEvent&&4<o.touchObject.swipeLength&&(o.swiping=!0,i.preventDefault()),t=(!1===o.options.rtl?1:-1)*(o.touchObject.curX>o.touchObject.startX?1:-1),!0===o.options.verticalSwiping&&(t=o.touchObject.curY>o.touchObject.startY?1:-1),i=o.touchObject.swipeLength,(o.touchObject.edgeHit=!1)===o.options.infinite&&(0===o.currentSlide&&"right"===s||o.currentSlide>=o.getDotCount()&&"left"===s)&&(i=o.touchObject.swipeLength*o.options.edgeFriction,o.touchObject.edgeHit=!0),!1===o.options.vertical?o.swipeLeft=e+i*t:o.swipeLeft=e+i*(o.$list.height()/o.listWidth)*t,!0===o.options.verticalSwiping&&(o.swipeLeft=e+i*t),!0!==o.options.fade&&!1!==o.options.touchMove&&(!0===o.animating?(o.swipeLeft=null,!1):void o.setCSS(o.swipeLeft))))},r.prototype.swipeStart=function(i){var e,t=this;if(t.interrupted=!0,1!==t.touchObject.fingerCount||t.slideCount<=t.options.slidesToShow)return!(t.touchObject={});void 0!==i.originalEvent&&void 0!==i.originalEvent.touches&&(e=i.originalEvent.touches[0]),t.touchObject.startX=t.touchObject.curX=void 0!==e?e.pageX:i.clientX,t.touchObject.startY=t.touchObject.curY=void 0!==e?e.pageY:i.clientY,t.dragging=!0},r.prototype.unfilterSlides=r.prototype.slickUnfilter=function(){var i=this;null!==i.$slidesCache&&(i.unload(),i.$slideTrack.children(this.options.slide).detach(),i.$slidesCache.appendTo(i.$slideTrack),i.reinit())},r.prototype.unload=function(){var i=this;a(".slick-cloned",i.$slider).remove(),i.$dots&&i.$dots.remove(),i.$prevArrow&&i.htmlExpr.test(i.options.prevArrow)&&i.$prevArrow.remove(),i.$nextArrow&&i.htmlExpr.test(i.options.nextArrow)&&i.$nextArrow.remove(),i.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},r.prototype.unslick=function(i){this.$slider.trigger("unslick",[this,i]),this.destroy()},r.prototype.updateArrows=function(){var i=this;Math.floor(i.options.slidesToShow/2),!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&!i.options.infinite&&(i.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),i.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===i.currentSlide?(i.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),i.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):(i.currentSlide>=i.slideCount-i.options.slidesToShow&&!1===i.options.centerMode||i.currentSlide>=i.slideCount-1&&!0===i.options.centerMode)&&(i.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),i.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},r.prototype.updateDots=function(){var i=this;null!==i.$dots&&(i.$dots.find("li").removeClass("slick-active").end(),i.$dots.find("li").eq(Math.floor(i.currentSlide/i.options.slidesToScroll)).addClass("slick-active"))},r.prototype.visibility=function(){this.options.autoplay&&(document[this.hidden]?this.interrupted=!0:this.interrupted=!1)},a.fn.slick=function(){for(var i,e=this,t=arguments[0],o=Array.prototype.slice.call(arguments,1),s=e.length,n=0;n<s;n++)if("object"==typeof t||void 0===t?e[n].slick=new r(e[n],t):i=e[n].slick[t].apply(e[n].slick,o),void 0!==i)return i;return e}});
!function(){var e,n,m=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},x=[].slice;e=window,n=function(c,r){var e,o,l,s,n,u,f,i,a,h,d,p,y,v,w,g;function t(t){var e=this;this.$element=t,this.element=t[0],this.didResize=!1,this.didScroll=!1,this.id="context"+n++,this.oldScroll={x:t.scrollLeft(),y:t.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[u]=this.id,f[this.id]=this,t.bind(p,function(){if(!e.didScroll&&!i)return e.didScroll=!0,r.setTimeout(function(){return e.doScroll(),e.didScroll=!1},c[g].settings.scrollThrottle)}),t.bind(d,function(){if(!e.didResize)return e.didResize=!0,r.setTimeout(function(){return c[g]("refresh"),e.didResize=!1},c[g].settings.resizeThrottle)})}function S(t,e,n){"bottom-in-view"===n.offset&&(n.offset=function(){var t=c[g]("viewportHeight");return(t=!c.isWindow(e.element)?e.$element.height():t)-c(this).outerHeight()}),this.$element=t,this.element=t[0],this.axis=n.horizontal?"horizontal":"vertical",this.callback=n.handler,this.context=e,this.enabled=n.enabled,this.id="waypoints"+y++,this.offset=null,this.options=n,e.waypoints[this.axis][this.id]=this,(n=null!=(n=(s[this.axis][this.id]=this).element[v])?n:[]).push(this.id),this.element[v]=n}return e=c(r),i=0<=m.call(r,"ontouchstart"),s={horizontal:{},vertical:{}},f={},u="waypoints-context-id",d="resize.waypoints",p="scroll.waypoints",y=n=1,v="waypoints-waypoint-ids",w="waypoint",g="waypoints",t.prototype.doScroll=function(){var r=this,t={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};return!i||t.vertical.oldScroll&&t.vertical.newScroll||c[g]("refresh"),c.each(t,function(t,i){var o=[],e=i.newScroll>i.oldScroll,n=e?i.forward:i.backward;return c.each(r.waypoints[t],function(t,e){var n;return i.oldScroll<(n=e.offset)&&n<=i.newScroll||i.newScroll<(n=e.offset)&&n<=i.oldScroll?o.push(e):void 0}),o.sort(function(t,e){return t.offset-e.offset}),e||o.reverse(),c.each(o,function(t,e){if(e.options.continuous||t===o.length-1)return e.trigger([n])})}),this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},t.prototype.refresh=function(){var e=this,t=c.isWindow(this.element),n=this.$element.offset();return this.doScroll(),t={horizontal:{contextOffset:t?0:n.left,contextScroll:t?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:t?0:n.top,contextScroll:t?0:this.oldScroll.y,contextDimension:t?c[g]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},c.each(t,function(t,s){return c.each(e.waypoints[t],function(t,e){var n,i,o=e.options.offset,r=e.offset,l=c.isWindow(e.element)?0:e.$element.offset()[s.offsetProp];if(c.isFunction(o)?o=o.apply(e.element):"string"==typeof o&&(o=parseFloat(o),-1<e.options.offset.indexOf("%")&&(o=Math.ceil(s.contextDimension*o/100))),e.offset=l-s.contextOffset+s.contextScroll-o,(!e.options.onlyOnScroll||null==r)&&e.enabled)return null!==r&&r<(n=s.oldScroll)&&n<=e.offset?e.trigger([s.backward]):null!==r&&r>(i=s.oldScroll)&&i>=e.offset||null===r&&s.oldScroll>=e.offset?e.trigger([s.forward]):void 0})})},t.prototype.checkEmpty=function(){if(c.isEmptyObject(this.waypoints.horizontal)&&c.isEmptyObject(this.waypoints.vertical))return this.$element.unbind([d,p].join(" ")),delete f[this.id]},o=t,S.prototype.trigger=function(t){if(this.enabled)return null!=this.callback&&this.callback.apply(this.element,t),this.options.triggerOnce?this.destroy():void 0},S.prototype.disable=function(){return this.enabled=!1},S.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},S.prototype.destroy=function(){return delete s[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},S.getWaypointsByElement=function(t){var e,t=t[v];return t?(e=c.extend({},s.horizontal,s.vertical),c.map(t,function(t){return e[t]})):[]},l=S,h={init:function(t,i){return null==(i=c.extend({},c.fn[w].defaults,i)).handler&&(i.handler=t),this.each(function(){var t,e=c(this),n=null!=(t=i.context)?t:c.fn[w].defaults.context;return c.isWindow(n)||(n=e.closest(n)),n=c(n),t=(t=f[n[0][u]])||new o(n),new l(e,t,i)}),c[g]("refresh"),this},disable:function(){return h._invoke.call(this,"disable")},enable:function(){return h._invoke.call(this,"enable")},destroy:function(){return h._invoke.call(this,"destroy")},prev:function(t,e){return h._traverse.call(this,t,e,function(t,e,n){if(0<e)return t.push(n[e-1])})},next:function(t,e){return h._traverse.call(this,t,e,function(t,e,n){if(e<n.length-1)return t.push(n[e+1])})},_traverse:function(e,t,n){var i,o;return null==e&&(e="vertical"),o=a.aggregate(t=null==t?r:t),i=[],this.each(function(){var t=c.inArray(this,o[e]);return n(i,t,o[e])}),this.pushStack(i)},_invoke:function(n){return this.each(function(){var t=l.getWaypointsByElement(this);return c.each(t,function(t,e){return e[n](),!0})}),this}},c.fn[w]=function(){var t=arguments[0],e=2<=arguments.length?x.call(arguments,1):[];return h[t]?h[t].apply(this,e):c.isFunction(t)?h.init.apply(this,arguments):c.isPlainObject(t)?h.init.apply(this,[null,t]):t?c.error("The "+t+" method does not exist in jQuery Waypoints."):c.error("jQuery Waypoints needs a callback function or handler option.")},c.fn[w].defaults={context:r,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},a={refresh:function(){return c.each(f,function(t,e){return e.refresh()})},viewportHeight:function(){var t;return null!=(t=r.innerHeight)?t:e.height()},aggregate:function(t){var e,i=s;return(i=t?null!=(t=f[c(t)[0][u]])?t.waypoints:void 0:i)?(e={horizontal:[],vertical:[]},c.each(e,function(t,n){return c.each(i[t],function(t,e){return n.push(e)}),n.sort(function(t,e){return t.offset-e.offset}),e[t]=c.map(n,function(t){return t.element}),e[t]=c.unique(e[t])}),e):[]},above:function(t){return a._filter(t=null==t?r:t,"vertical",function(t,e){return e.offset<=t.oldScroll.y})},below:function(t){return a._filter(t=null==t?r:t,"vertical",function(t,e){return e.offset>t.oldScroll.y})},left:function(t){return a._filter(t=null==t?r:t,"horizontal",function(t,e){return e.offset<=t.oldScroll.x})},right:function(t){return a._filter(t=null==t?r:t,"horizontal",function(t,e){return e.offset>t.oldScroll.x})},enable:function(){return a._invoke("enable")},disable:function(){return a._invoke("disable")},destroy:function(){return a._invoke("destroy")},extendFn:function(t,e){return h[t]=e},_invoke:function(n){var t=c.extend({},s.vertical,s.horizontal);return c.each(t,function(t,e){return e[n](),!0})},_filter:function(t,e,n){var i,o=f[c(t)[0][u]];return o?(i=[],c.each(o.waypoints[e],function(t,e){if(n(o,e))return i.push(e)}),i.sort(function(t,e){return t.offset-e.offset}),c.map(i,function(t){return t.element})):[]}},c[g]=function(){var t=arguments[0],e=2<=arguments.length?x.call(arguments,1):[];return a[t]?a[t].apply(null,e):a.aggregate.call(null,t)},c[g].settings={resizeThrottle:100,scrollThrottle:30},e.on("load.waypoints",function(){return c[g]("refresh")})},"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(t){return n(t,e)}):n(e.jQuery,e)}.call(this);
//# sourceMappingURL=rt-plugins.js.map
